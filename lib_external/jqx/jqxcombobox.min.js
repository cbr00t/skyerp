!function(h){h.jqx.jqxWidget("jqxComboBox","",{}),h.extend(h.jqx._jqxComboBox.prototype,{defineInstance:function(){var e={disabled:!1,width:200,height:25,items:new Array,selectedIndex:-1,selectedItems:new Array,_selectedItems:new Array,source:null,autoItemsHeight:!1,scrollBarSize:h.jqx.utilities.scrollBarSize,arrowSize:17,enableHover:!0,enableSelection:!0,visualItems:new Array,groups:new Array,equalItemsWidth:!0,itemHeight:-1,visibleItems:new Array,hint:!0,emptyGroupText:"Group",emptyString:"",ready:null,openDelay:250,closeDelay:300,animationType:"default",dropDownWidth:"auto",dropDownHeight:"200px",autoDropDownHeight:!1,enableBrowserBoundsDetection:!1,dropDownHorizontalAlignment:"left",dropDownVerticalAlignment:"bottom",dropDownContainer:"default",searchMode:"startswithignorecase",autoComplete:!1,remoteAutoComplete:!1,remoteAutoCompleteDelay:500,selectionMode:"default",minLength:2,displayMember:"",valueMember:"",groupMember:"",searchMember:"",keyboardSelection:!0,renderer:null,autoOpen:!1,template:"",checkboxes:!1,promptText:"",placeHolder:"",rtl:!1,listBox:null,validateSelection:null,showCloseButtons:!0,renderSelectedItem:null,search:null,popupZIndex:2e3,searchString:null,multiSelect:!1,showArrow:!0,_disabledItems:new Array,touchMode:"auto",autoBind:!0,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["open","close","select","unselect","change","checkChange","bindingComplete","itemAdd","itemRemove","itemUpdate"]};return this===h.jqx._jqxComboBox.prototype||h.extend(!0,this,e),e},createInstance:function(e){var t,i,s;if(this.host.attr("role","combobox"),h.jqx.aria(this,"aria-autocomplete","both"),null==h.jqx._jqxListBox||null==h.jqx._jqxListBox)throw new Error("jqxComboBox: Missing reference to jqxlistbox.js.");h.jqx.aria(this),this.isMaterialized()&&(t=(s=window.getComputedStyle(this.element)).getPropertyValue("--jqx-dropdown-animation"),i=s.getPropertyValue("--jqx-list-item-height"),s=s.getPropertyValue("--jqx-action-button-size"),this.arrowSize=s?parseInt(s):25,t&&"default"==this.animationType&&(this.animationType=t.trim()),i&&-1===this.itemHeight&&(this.itemHeight=parseInt(i))),""!=this.promptText&&(this.placeHolder=this.promptText),this.render()},render:function(){var e=(o=this).element.nodeName.toLowerCase(),t=("select"==e||"ul"==e||"ol"==e?(o.field=o.element,o.field.className&&(o._className=o.field.className),e={title:o.field.title},o.field.id.length?e.id=o.field.id.replace(/[^\w]/g,"_")+"_jqxComboBox":e.id=h.jqx.utilities.createId()+"_jqxComboBox",t=h("<div></div>",e),o.width||(o.width=h(o.field).width()),o.height||(o.height=h(o.field).outerHeight()),o.element.style.cssText=o.field.style.cssText,h(o.field).hide().after(t),s=o.host.data(),o.host=t,o.host.data(s),o.element=t[0],o.element.id=o.field.id,o.field.id=e.id,o._className&&(o.host.addClass(o._className),h(o.field).removeClass(o._className)),o.field.tabIndex&&(s=o.field.tabIndex,o.field.tabIndex=-1,o.element.tabIndex=s),""!=o.field.innerHTML&&(i=h.jqx.parseSourceTag(o.field),o.source=i.items,-1==o.selectedIndex&&(o.selectedIndex=i.index))):(0<o.host.find("li").length||0<o.host.find("option").length)&&(i=h.jqx.parseSourceTag(o.element),o.source=i.items),o.removeHandlers(),o.isanimating=!1,o.id=h.jqx.utilities.createId(),o.element.innerHTML="",h("<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropdownlistWrapper' style='padding: 0; margin: 0; border: none; background-color: transparent; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' style='padding: 0; margin: 0; border-top: none; border-bottom: none; float: left; position: absolute;'></div><div id='dropdownlistArrow' role='button' style='padding: 0; margin: 0; border-left-width: 1px; border-bottom-width: 0px; border-top-width: 0px; border-right-width: 0px; float: right; position: absolute;'></div></div></div>"));if(o.comboStructure=t,null==h.jqx._jqxListBox||null==h.jqx._jqxListBox)throw"jqxComboBox: Missing reference to jqxlistbox.js.";o.touch=h.jqx.mobile.isTouchDevice(),!0===o.touchMode&&(o.touch=!0),o.host.append(t),o.dropdownlistWrapper=o.host.find("#dropdownlistWrapper"),o.dropdownlistArrow=o.host.find("#dropdownlistArrow"),o.dropdownlistContent=o.host.find("#dropdownlistContent"),o.dropdownlistContent.addClass(o.toThemeProperty("jqx-combobox-content")),o.dropdownlistContent.addClass(o.toThemeProperty("jqx-widget-content")),o.dropdownlistWrapper[0].id="dropdownlistWrapper"+o.element.id,o.dropdownlistArrow[0].id="dropdownlistArrow"+o.element.id,o.dropdownlistContent[0].id="dropdownlistContent"+o.element.id,o.template&&o.dropdownlistArrow.addClass(o.toThemeProperty("jqx-"+o.template)),o.dropdownlistContent.append(h('<input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" style="box-sizing: border-box; margin: 0; padding: 0; padding-left: 3px; padding-right: 3px; border: 0;" type="textarea"/>')),o.input=o.dropdownlistContent.find("input"),o.input.addClass(o.toThemeProperty("jqx-combobox-input")),o.input.addClass(o.toThemeProperty("jqx-widget-content")),o.host.attr("tabindex")&&(o.input.attr("tabindex",o.host.attr("tabindex")),o.host.removeAttr("tabindex"));var o,i,e=h("<label></label>"),s=(this.hint&&(e[0].innerHTML=this.placeHolder),e.addClass(o.toThemeProperty("jqx-input-label")),o.dropdownlistWrapper.append(e),o.label=e,h("<span></span>"));o.dropdownlistWrapper.append(s),s.addClass(o.toThemeProperty("jqx-input-bar")),o.bar=s,(o=this).template&&(o.bar.addClass(o.toThemeProperty("jqx-"+o.template)),o.label.addClass(o.toThemeProperty("jqx-"+o.template))),o._addInput(),o.rtl&&(o.input.css({direction:"rtl"}),o.dropdownlistContent.addClass(o.toThemeProperty("jqx-combobox-content-rtl")));try{var n="listBox"+o.id,r=h(h.find("#"+n)),l=(0<r.length&&r.remove(),h.jqx.aria(this,"aria-owns",n),h.jqx.aria(this,"aria-haspopup",!0),h.jqx.aria(this,"aria-multiline",!1),o.listBoxContainer&&o.listBoxContainer.jqxListBox("destroy"),o.container&&o.container.remove(),h("<div style='overflow: hidden; border: none; background-color: transparent; position: absolute;' id='listBox"+o.id+"'><div id='innerListBox"+o.id+"'></div></div>")),a=(l.hide(),"element"==o.dropDownContainer?l.appendTo(o.host):l.appendTo(document.body),l.addClass(o.toThemeProperty("jqx-listbox-container")),o.container=l,o.listBoxContainer=h(h.find("#innerListBox"+o.id)),o.width);"auto"!=o.dropDownWidth&&(a=o.dropDownWidth),null==o.dropDownHeight&&(o.dropDownHeight=200),o.container.width(parseInt(a)+25),o.container.height(parseInt(o.dropDownHeight)+25),o._ready=!1,o.addHandler(o.listBoxContainer,"bindingComplete",function(e){o.listBox||(o.listBox=h.data(o.listBoxContainer[0],"jqxListBox").instance),o._ready||(o.ready&&o.ready(),o._ready=!0),o._raiseEvent("6")}),o.addHandler(o.listBoxContainer,"itemAdd",function(e){o._raiseEvent("7",e.args)}),o.addHandler(o.listBoxContainer,"itemRemove",function(e){o._raiseEvent("8",e.args)}),o.addHandler(o.listBoxContainer,"itemUpdate",function(e){o._raiseEvent("9",e.args)});o.listBoxContainer.jqxListBox({autoItemsHeight:o.autoItemsHeight,_checkForHiddenParent:!1,allowDrop:!1,allowDrag:!1,checkboxes:o.checkboxes,emptyString:o.emptyString,autoBind:!o.remoteAutoComplete&&o.autoBind,renderer:o.renderer,rtl:o.rtl,itemHeight:o.itemHeight,selectedIndex:o.selectedIndex,incrementalSearch:!1,width:a,scrollBarSize:o.scrollBarSize,autoHeight:o.autoDropDownHeight,height:o.dropDownHeight,groupMember:o.groupMember,searchMember:o.searchMember,displayMember:o.displayMember,valueMember:o.valueMember,source:o.source,theme:o.theme,rendered:function(){var e;o.listBox=h.data(o.listBoxContainer[0],"jqxListBox").instance,o.remoteAutoComplete?(o.autoDropDownHeight?(o.container.height(o.listBox.virtualSize.height+25),o.listBoxContainer.height(o.listBox.virtualSize.height),o.listBox._arrange()):(o.listBox._arrange(),o.listBox.ensureVisible(0),o.listBox._renderItems(),o.container.height(o.listBoxContainer.height()+25)),null!=o.searchString&&o.searchString.length>=o.minLength&&(e=o.listBoxContainer.jqxListBox("items"))&&0<e.length?o.isOpened()||o.open():o.close()):(o.renderSelection("mouse"),o.multiSelect&&o.doMultiSelect(!1)),o.rendered&&o.rendered()}}),"element"==o.dropDownContainer?o.listBoxContainer.css({position:"absolute",top:0,left:0}):o.listBoxContainer.css({position:"absolute",zIndex:o.popupZIndex,top:0,left:0}),o.listBoxContainer.css("border-top-width","1px"),o.listBoxContainer.addClass(o.toThemeProperty("jqx-popup")),h.jqx.browser.msie&&o.listBoxContainer.addClass(o.toThemeProperty("jqx-noshadow")),o.template&&o.listBoxContainer.addClass(o.toThemeProperty("jqx-"+o.template+"-item")),o.listBox=h.data(o.listBoxContainer[0],"jqxListBox").instance,o.listBox.enableSelection=o.enableSelection,o.listBox.enableHover=o.enableHover,o.listBox.equalItemsWidth=o.equalItemsWidth,o.listBox._arrange(),o.addHandler(o.listBoxContainer,"unselect",function(e){o.multiSelect||o._raiseEvent("3",{index:e.args.index,type:e.args.type,item:e.args.item})}),o.addHandler(o.listBoxContainer,"change",function(e){o.multiSelect||(o.selectedIndex=o.listBox.selectedIndex,o._raiseEvent("4",{index:e.args.index,type:e.args.type,item:e.args.item}))}),"none"==o.animationType?o.container.css("display","none"):o.container.hide()}catch(e){throw e}(o=this).input.attr("disabled",o.disabled),h.jqx.browser.msie&&h.jqx.browser.version<8||(o.isMaterialized()&&o.hint?o.label[0].innerHTML=o.placeHolder:o.input.attr("placeholder",o.placeHolder)),o.propertyChangeMap.disabled=function(e,t,i,s){s?(e.host.addClass(o.toThemeProperty("jqx-combobox-state-disabled")),e.host.addClass(o.toThemeProperty("jqx-fill-state-disabled")),e.dropdownlistContent.addClass(o.toThemeProperty("jqx-combobox-content-disabled"))):(e.host.removeClass(o.toThemeProperty("jqx-combobox-state-disabled")),e.host.removeClass(o.toThemeProperty("jqx-fill-state-disabled")),e.dropdownlistContent.removeClass(o.toThemeProperty("jqx-combobox-content-disabled"))),e.input.attr("disabled",e.disabled),h.jqx.aria(e,"aria-disabled",e.disabled),e.input.attr("disabled",e.disabled)},o.disabled&&(o.host.addClass(o.toThemeProperty("jqx-combobox-state-disabled")),o.host.addClass(o.toThemeProperty("jqx-fill-state-disabled")),o.dropdownlistContent.addClass(o.toThemeProperty("jqx-combobox-content-disabled"))),o.host.addClass(o.toThemeProperty("jqx-combobox-state-normal")),o.host.addClass(o.toThemeProperty("jqx-combobox")),o.host.addClass(o.toThemeProperty("jqx-rc-all")),o.host.addClass(o.toThemeProperty("jqx-widget")),o.host.addClass(o.toThemeProperty("jqx-widget-content")),o.dropdownlistArrowIcon=h("<div></div>"),"top"==o.dropDownVerticalAlignment?o.dropdownlistArrowIcon.addClass(o.toThemeProperty("jqx-icon-arrow-up")):o.dropdownlistArrowIcon.addClass(o.toThemeProperty("jqx-icon-arrow-down")),o.dropdownlistArrowIcon.addClass(o.toThemeProperty("jqx-icon")),o.dropdownlistArrow.append(o.dropdownlistArrowIcon),o.dropdownlistArrow.addClass(o.toThemeProperty("jqx-combobox-arrow-normal")),o.dropdownlistArrow.addClass(o.toThemeProperty("jqx-fill-state-normal")),o.rtl?o.dropdownlistArrow.addClass(o.toThemeProperty("jqx-rc-l")):o.dropdownlistArrow.addClass(o.toThemeProperty("jqx-rc-r")),o._setSize(),o._updateHandlers(),o.addHandler(o.input,"keyup.textchange",function(e){o._writeTimer&&clearTimeout(o._writeTimer),o._writeTimer=setTimeout(function(){o._search(e);o.cinput&&o.input&&(o.displayMember?o._updateInputSelection():o.cinput[0].value=o.input[0].value)},50)}),h.jqx.browser.msie&&h.jqx.browser.version<8&&0<o.host.parents(".jqx-window").length&&(i=o.host.parents(".jqx-window").css("z-index"),l.css("z-index",i+10),o.listBoxContainer.css("z-index",i+10)),o.checkboxes?(o.input.attr("readonly",!0),h.jqx.aria(this,"aria-readonly",!0)):h.jqx.aria(this,"aria-readonly",!1),o.remoteAutoComplete||(o.searchString=""),this.bar.css("top",this.host.height())},_addInput:function(){var e=this.host.attr("name");this.cinput=h("<input type='hidden'/>"),this.host.append(this.cinput),e&&this.cinput.attr("name",e)},_updateInputSelection:function(){if(this.cinput){var e,i=new Array;if(-1==this.selectedIndex?this.cinput.val(""):null!=(e=this.getSelectedItem())?(this.cinput.val(e.value),i.push(e.value)):this.cinput.val(this.dropdownlistContent.text()),this.checkboxes||this.multiSelect){var t,s="";if(null!=(t=this.multiSelect?this.getSelectedItems():this.getCheckedItems()))for(var o=0;o<t.length;o++)o==t.length-1?s+=t[o].value:s+=t[o].value+",",i.push(t[o].value);this.cinput.val(s)}this.field&&this.cinput&&("select"==this.field.nodeName.toLowerCase()?h.each(this.field,function(e,t){h(this).removeAttr("selected"),this.selected=0<=i.indexOf(this.value),this.selected&&h(this).attr("selected",!0)}):h.each(this.items,function(e,t){h(this.originalItem.originalItem).removeAttr("data-selected"),this.selected=0<=i.indexOf(this.value),this.selected&&h(this.originalItem.originalItem).attr("data-selected",!0)}))}},_search:function(e){var t=this;if(9!=e.keyCode&&"none"!=t.searchMode&&null!=t.searchMode&&"undefined"!=t.searchMode&&16!=e.keyCode&&17!=e.keyCode&&20!=e.keyCode&&!t.checkboxes){if(t.multiSelect&&((s=h("<span style='visibility: hidden; white-space: nowrap;'>"+document.createTextNode(t.input.val())+"</span>")).addClass(t.toThemeProperty("jqx-widget")),h(document.body).append(s),o=s.width()+15,s.remove(),o>t.host.width()&&(o=t.host.width()),t.input.css("width",(o=o<25?25:o)+"px"),0==t.selectedItems.length?(t.input.css("width","100%"),t.isMaterialized()||t.input.attr("placeholder",t.placeHolder)):t.isMaterialized()||t.input.attr("placeholder",""),s=parseInt(this._findPos(t.host[0])[1])+parseInt(t.host.outerHeight())-1+"px",t.container.css("top",s),o=parseInt(t.host.height()),t.dropdownlistArrow.height(o)),!t.isanimating){if(e.altKey&&38==e.keyCode)return t.hideListBox("altKey"),!1;if(e.altKey&&40==e.keyCode)return t.isOpened()||t.showListBox("altKey"),!1}if(37==e.keyCode||39==e.keyCode)return!1;if(!e.altKey&&18!=e.keyCode&&!(33<=e.keyCode&&e.keyCode<=40||(e.ctrlKey||t.ctrlKey)&&88!=e.keyCode&&86!=e.keyCode)){var i,s=t.input.val();if(0==s.length&&!t.autoComplete)return t.listBox.searchString=t.input.val(),t.listBox.clearSelection(),t.hideListBox("search"),void(t.searchString=t.input.val());if(t.remoteAutoComplete)return t=this,i=function(){t.listBox.vScrollInstance.value=0},void(s.length>=t.minLength?e.ctrlKey||e.altKey||(t.searchString!=s&&(null==t.listBoxContainer.jqxListBox("source")&&t.listBoxContainer.jqxListBox({source:t.source}),t._searchTimer&&clearTimeout(t._searchTimer),13!=e.keyCode&&27!=e.keyCode&&(t._searchTimer=setTimeout(function(){if(i(),t.autoDropDownHeight&&(t.listBox.autoHeight=!0),t.searchString=t.input.val(),null==t.search)throw"'search' function is not defined";t.search(t.input.val())},t.remoteAutoCompleteDelay))),t.searchString=s):(t._searchTimer&&clearTimeout(t._searchTimer),i(),t.searchString="",t.search(""),t.listBoxContainer.jqxListBox({source:null})));var o,n,r,l,t=this;if(s!==t.searchString)if("27"!=e.keyCode&&"13"!=e.keyCode&&(o=t.input[0].value,n=(s=t._updateItemsVisibility(s)).matchItems,t.autoComplete&&t.autoItemsHeight&&(t.input[0].value=o),r=s.index,t.autoComplete||t.remoteAutoComplete||(!t.multiSelect||t.multiSelect&&0<=r)&&(t.listBox.selectIndex(r),t.listBox.isIndexInView(r)?t.listBox._renderItems():t.listBox.ensureVisible(r)),t.autoComplete&&0===n.length&&t.hideListBox("search")),"13"==e.keyCode)"block"==t.container.css("display")&&!t.isanimating&&(t.hideListBox("keyboard"),t._oldvalue=t.listBox.selectedValue);else if("27"==e.keyCode){if("block"==t.container.css("display")&&!t.isanimating)return t.multiSelect?(t.input.val(""),t.listBox.selectedValue=null):(l=t.listBox.getVisibleItem(t._oldvalue))?(t=this,setTimeout(function(){t.autoComplete&&t._updateItemsVisibility(""),t.listBox.selectIndex(l.index),t.renderSelection("api")},t.closeDelay)):t.clearSelection(),t.hideListBox("keyboard"),t.renderSelection("api"),e.preventDefault(),!1}else t.isOpened()||t.opening||e.ctrlKey||t.listBox.visibleItems&&0<t.listBox.visibleItems.length&&t.input.val()!=t.searchString&&null!=t.searchString&&-1!=r&&t.showListBox("search"),t.searchString=t.input.val(),""!=t.searchString||t.listBox.itemsByValue[""]||(r=-1,t.multiSelect||t.clearSelection()),null!=(l=t.listBox.getVisibleItem(r))&&t._updateInputSelection()}}},val:function(i){if(!this.input)return"";var e;return function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return"number"!=typeof i&&("date"!=typeof i&&("boolean"!=typeof i&&"string"!=typeof i))}(i)||0==arguments.length?(e=this.getSelectedItem())?e.value:this.input.val():(null!=(e=this.getItemByValue(i))?this.selectItem(e):this.input.val(i),this.input.val())},focus:function(){function e(){t.input.focus();var e=t.input.val();t._setSelection(0,e.length)}var t=this;e(),setTimeout(function(){e()},10)},_setSelection:function(e,t){try{var i;"selectionStart"in this.input[0]?(this.input[0].focus(),this.input[0].setSelectionRange(e,t)):((i=this.input[0].createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())}catch(e){}},setContent:function(e){this.input.val(e)},_updateItemsVisibility:function(s){var e=this.getItems();if(null==e)return{index:-1,matchItem:new Array};function t(){if(!o.multiSelect){for(var e=0,t=!1,i=null,s=0;s<o.listBox.items.length;s++)o.listBox.selectedIndexes[s]=-1,o.listBox.items[s].disabled||0==t&&(e=(i=o.listBox.items[s]).visibleIndex,t=!0);o.listBox.selectedIndex=-1,o.listBox.selectedIndex=e,o.listBox.selectedIndexes[e]=e,0<o.listBox.visibleItems.length?o.listBox.selectedValue=i?i.value:null:o.listBox.selectedValue=null,o.listBox.ensureVisible(0)}}var o=this,n=-1,r=new Array,l=0,o=(h.each(e,function(e){var t="";if(!this.isGroup){var t=(t=this.searchLabel||this.label||this.value||this.title||"jqxItem").toString(),i=!1;switch(o.searchMode){case"containsignorecase":i=h.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=h.jqx.string.contains(t,s);break;case"equals":i=h.jqx.string.equals(t,s);break;case"equalsignorecase":i=h.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=h.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=h.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=h.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=h.jqx.string.endsWithIgnoreCase(t,s)}if(o.autoComplete&&!i&&(this.visible=!1),i&&o.autoComplete&&((r[l++]=this).visible=!0,n=this.visibleIndex),""==s&&o.autoComplete&&(i=!(this.visible=!0)),o.multiSelect&&(this.disabled=!1,(0<=o.selectedItems.indexOf(this.value)||0<=o._disabledItems.indexOf(this.value))&&(i=!(this.disabled=!0))),o.multiSelect){if(i&&!o.autoComplete)return-1===n&&(n=this.visibleIndex),!0}else if(i&&!o.autoComplete)return n=this.visibleIndex,!1}}),this.listBox.searchString=s,this);if(!this.autoComplete)return t(),{index:n,matchItems:r};this.listBox.renderedVisibleItems=new Array;var e=this.listBox.vScrollInstance.value,i=(this.listBox.vScrollInstance.value=0,this.listBox.visibleItems=new Array,this.listBox._renderItems(),this.listBox.selectedValue),i=this.listBox.getItemByValue(i);if(this.multiSelect)t();else if(i)if(i.visible){this.listBox.selectedIndex=i.visibleIndex;for(var a=0;a<this.listBox.items.length;a++)this.listBox.selectedIndexes[a]=-1;this.listBox.selectedIndexes[i.visibleIndex]=i.visibleIndex}else{for(a=0;a<this.listBox.items.length;a++)this.listBox.selectedIndexes[a]=-1;this.listBox.selectedIndex=-1}this.listBox._renderItems();var d,i=this.listBox._calculateVirtualSize().height;return i<e&&(e=0,this.listBox.vScrollInstance.refresh()),this.autoDropDownHeight?(this._disableSelection=!0,this.listBox.autoHeight!=this.autoDropDownHeight&&this.listBoxContainer.jqxListBox({autoHeight:this.autoDropDownHeight}),this.container.height(i+25),this.listBox.invalidate(),this._disableSelection=!1):(i<parseInt(this.dropDownHeight)?(d="hidden"==this.listBox.hScrollBar[0].style.visibility?0:20,this.listBox.height=d+i,this.container.height(i+25+d)):(this.listBox.height=parseInt(this.dropDownHeight),this.container.height(parseInt(this.dropDownHeight)+25)),this.listBox.invalidate()),this.listBox.vScrollInstance.setPosition(e),{index:n,matchItems:r}},findItems:function(s){var e=this.getItems(),o=this,n=0,r=new Array;return h.each(e,function(e){var t="";if(!this.isGroup){var t=this.label||this.value||this.title||"jqxItem",i=!1;switch(o.searchMode){case"containsignorecase":i=h.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=h.jqx.string.contains(t,s);break;case"equals":i=h.jqx.string.equals(t,s);break;case"equalsignorecase":i=h.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=h.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=h.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=h.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=h.jqx.string.endsWithIgnoreCase(t,s)}i&&(r[n++]=this)}}),r},_resetautocomplete:function(){h.each(this.listBox.items,function(e){this.visible=!0}),this.listBox.vScrollInstance.value=0,this.listBox._addItems(),this.listBox.autoHeight=!1,this.listBox.height=this.dropDownHeight,this.container.height(parseInt(this.dropDownHeight)+25),this.listBoxContainer.height(parseInt(this.dropDownHeight)),this.listBox._arrange(),this.listBox._addItems(),this.listBox._renderItems()},getItems:function(){return this.listBox.items},getVisibleItems:function(){return this.listBox.getVisibleItems()},_setSize:function(){var e=window.getComputedStyle(this.element),t=2*parseInt(e.borderLeftWidth),e=("border-box"!==e.boxSizing&&!isNaN(t)||(t=0),(null==this.width||-1==this.width.toString().indexOf("px"))&&(null==this.width||isNaN(this.width))||(this.element.style.width=parseInt(this.width)-t+"px"),(null==this.height||-1==this.height.toString().indexOf("px"))&&(null==this.height||isNaN(this.height))||(this.element.style.height=parseInt(this.height)-t+"px"),!1),i=(null!=this.width&&-1!=this.width.toString().indexOf("%")&&(e=!0,this.element.style.width=this.width,0<t&&this.host.css("box-sizing","border-box")),null!=this.height&&-1!=this.height.toString().indexOf("%")&&(e=!0,this.element.style.height=this.height),e&&(t=(i=this).host.width(),"auto"!=this.dropDownWidth&&(t=this.dropDownWidth),this.listBoxContainer.jqxListBox({width:t}),this.container.width(parseInt(t)+25),this._arrange()),this);i.oldWidth=i.host.width(),i.oldHeight=i.host.height(),h.jqx.utilities.resize(this.host,function(){var e=i.host.width(),t=i.host.height();e==i.oldWidth&&t==i.oldHeight||(i.multiSelect&&i.host.height(i.height),i._arrange(),i.multiSelect&&i.host.height("auto"),i.hideListBox("api")),i.oldWidth=e,i.oldHeight=t})},isOpened:function(){var e=h.data(document.body,"openedCombojqxListBox"+this.element.id);return"block"==this.container.css("display")&&(null!=e&&e==this.listBoxContainer)},_updateHandlers:function(){var r=this,e=(this.removeHandlers(),this.multiSelect&&(this.addHandler(this.dropdownlistContent,"click",function(e){if(e.target.href)return!1;r.input.focus(),setTimeout(function(){r.input.focus()},10)}),this.addHandler(this.dropdownlistContent,"focus",function(e){if(e.target.href)return!1;r.input.focus(),setTimeout(function(){r.input.focus()},10)})),this.touch||(this.host.parents()&&this.addHandler(this.host.parents(),"scroll.combobox"+this.element.id,function(e){r.isOpened()&&r.close()}),this.addHandler(this.host,"mouseenter",function(){!r.disabled&&r.enableHover&&(r.host.addClass(r.toThemeProperty("jqx-combobox-state-hover")),"top"==r.dropDownVerticalAlignment?r.dropdownlistArrowIcon.addClass(r.toThemeProperty("jqx-icon-arrow-up")):r.dropdownlistArrowIcon.addClass(r.toThemeProperty("jqx-icon-arrow-down-hover")),r.dropdownlistArrow.addClass(r.toThemeProperty("jqx-combobox-arrow-hover")),r.dropdownlistArrow.addClass(r.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.host,"mouseleave",function(){!r.disabled&&r.enableHover&&(r.host.removeClass(r.toThemeProperty("jqx-combobox-state-hover")),r.dropdownlistArrowIcon.removeClass(r.toThemeProperty("jqx-icon-arrow-down-hover")),r.dropdownlistArrowIcon.removeClass(r.toThemeProperty("jqx-icon-arrow-up-hover")),r.dropdownlistArrow.removeClass(r.toThemeProperty("jqx-combobox-arrow-hover")),r.dropdownlistArrow.removeClass(r.toThemeProperty("jqx-fill-state-hover")),0)})),r.autoOpen&&(this.addHandler(this.host,"mouseenter",function(){!r.isOpened()&&r.autoOpen&&(r.open(),r.host.focus())}),this.addHandler(h(document),"mousemove."+r.id,function(e){var t,i,s,o,n;r.isOpened()&&r.autoOpen&&(t=(i=r.host.coord()).top,i=i.left,s=(o=r.container.coord()).left,o=o.top,n=!0,e.pageY>=t&&e.pageY<=t+r.host.height()+2&&e.pageX>=i&&e.pageX<i+r.host.width()&&(n=!1),(n=e.pageY>=o&&e.pageY<=o+r.container.height()-20&&e.pageX>=s&&e.pageX<s+r.container.width()?!1:n)&&r.close())})),"mousedown");this.touch&&(e=h.jqx.mobile.getTouchEventName("touchstart"));this.addHandler(this.dropdownlistArrow,e,function(e){if(!r.disabled){var t="block"==r.container.css("display");if(!r.isanimating)t?(r.hideListBox("api"),h.jqx.mobile.isTouchDevice()||(r.input.focus(),setTimeout(function(){r.input.focus()},10))):(r.autoDropDownHeight&&(r.container.height(r.listBoxContainer.height()+25),r.listBoxContainer.jqxListBox("autoHeight")||(r.listBoxContainer.jqxListBox({autoHeight:r.autoDropDownHeight}),r.listBox._arrange(),r.listBox.ensureVisible(0),r.listBox._renderItems(),r.container.height(r.listBoxContainer.height()+25))),r.showListBox("api"),!h.jqx.mobile.isTouchDevice()&&setTimeout(function(){r.input.focus()},10))}}),this.addHandler(this.dropdownlistArrowIcon,e,function(e){}),this.addHandler(this.host,"focus",function(){r.focus()}),this.addHandler(this.input,"focus",function(e){r.focused=!0,r.host.addClass(r.toThemeProperty("jqx-combobox-state-focus")),r.host.addClass(r.toThemeProperty("jqx-fill-state-focus")),r.bar.addClass("focused"),r.label.addClass("focused"),r.dropdownlistContent.addClass(r.toThemeProperty("jqx-combobox-content-focus")),e.stopPropagation&&e.stopPropagation()}),this.addHandler(this.input,"blur",function(){r.focused=!1,r.bar.removeClass("focused"),r.label.removeClass("focused"),r.isOpened()||r.opening||("dropDownList"==r.selectionMode&&r._selectOldValue(),r.host.removeClass(r.toThemeProperty("jqx-combobox-state-focus")),r.host.removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.dropdownlistContent.removeClass(r.toThemeProperty("jqx-combobox-content-focus"))),r._searchTimer&&clearTimeout(r._searchTimer)}),this.addHandler(h(document),"mousedown."+this.id,r.closeOpenedListBox,{that:this,listbox:this.listBox,id:this.id}),this.touch&&this.addHandler(h(document),h.jqx.mobile.getTouchEventName("touchstart")+"."+this.id,r.closeOpenedListBox,{that:this,listbox:this.listBox,id:this.id}),this.addHandler(this.host,"keydown",function(e){var t,i="block"==r.container.css("display");if(r.ctrlKey=e.ctrlKey,"none"==r.host.css("display"))return!0;if(("13"==e.keyCode||"9"==e.keyCode)&&(i&&!r.isanimating))return-1!=r.listBox.selectedIndex&&(r.renderSelection("mouse"),s=r.listBox.selectedIndex,(t=r.listBox.getVisibleItem(s))&&(r.listBox.selectedValue=t.value),r._setSelection(r.input.val().length,r.input.val().length),r.hideListBox("keyboard")),"13"==e.keyCode&&(r._oldvalue=r.listBox.selectedValue),r.keyboardSelection||r._raiseEvent("2",{index:r.selectedIndex,type:"keyboard",item:r.getItem(r.selectedIndex)}),"9"==e.keyCode;if(115==e.keyCode)return r.isanimating||(r.isOpened()?r.isOpened()&&r.hideListBox("keyboard"):r.showListBox("keyboard")),!1;if((e.altKey&&"block"==r.host.css("display")&&!r.isanimating&&(38==e.keyCode?r.isOpened()&&r.hideListBox("altKey"):40!=e.keyCode||r.isOpened()||r.showListBox("altKey")),"27"==e.keyCode||"9"==e.keyCode)&&(r.isOpened()&&!r.isanimating))return"27"==e.keyCode&&(r.multiSelect?(r.listBox.selectedValue=null,r.input.val("")):(t=r.listBox.getItemByValue(r._oldvalue))?setTimeout(function(){r.autoComplete&&r._updateItemsVisibility(""),r.listBox.selectIndex(t.index),r.renderSelection("api")},r.closeDelay):r.clearSelection()),r.hideListBox("keyboard"),"9"==e.keyCode||(r.renderSelection("api"),e.preventDefault(),!1);var s=e.keyCode;if(i&&!r.disabled&&8!=s)return r.listBox._handleKeyDown(e);if(!(r.disabled||i||33!=(s=e.keyCode)&&34!=s&&35!=s&&36!=s&&38!=s&&40!=s))return r.listBox._handleKeyDown(e);if(8===s&&r.multiSelect&&0===r.input.val().length)return i=r.selectedItems[r.selectedItems.length-1],r.selectedItems.pop(),r._selectedItems.pop(),i&&(r._raiseEvent("3",{index:i.index,type:"keyboard",item:i}),r._raiseEvent("4",{index:i.index,type:"keyboard",item:i})),r.listBox.selectedValue=null,r.doMultiSelect(),!1;r.isMaterialized()&&r.hint&&setTimeout(function(){0===r.input[0].value.length?(r.element.removeAttribute("hint"),r.label[0].innerHTML=r.placeHolder):r.hint&&r.element.setAttribute("hint",!0)})}),this.addHandler(this.listBoxContainer,"checkChange",function(e){r.renderSelection("mouse"),r._updateInputSelection(),r._raiseEvent(5,{label:e.args.label,value:e.args.value,checked:e.args.checked,item:e.args.item})}),this.addHandler(this.listBoxContainer,"select",function(e){if(!r.disabled&&("keyboard"!=e.args.type||r.keyboardSelection)&&(r.renderSelection(e.args.type),r.multiSelect||r._raiseEvent("2",{index:e.args.index,type:e.args.type,item:e.args.item}),"mouse"==e.args.type&&(r._oldvalue=r.listBox.selectedValue,!r.checkboxes))){if(r.hideListBox("mouse"),r.touch)return!1;r.input.focus()}}),null!=this.listBox&&null!=this.listBox.content&&this.addHandler(this.listBox.content,"click",function(e){if(!r.disabled)return!(!r.listBox.itemswrapper||e.target!==r.listBox.itemswrapper[0])||(!!(e.target&&e.target.className&&0<=e.target.className.indexOf("jqx-fill-state-disabled"))||(r.renderSelection("mouse"),r._oldvalue=r.listBox.selectedValue,r.touch||r.ishiding||r.checkboxes||(r.hideListBox("mouse"),r.input.focus()),void(!0!==r.touch||r.checkboxes||r.hideListBox("mouse"))))})},_selectOldValue:function(){var e,t=this;-1==t.listBox.selectedIndex?t.multiSelect?(t.listBox.selectedValue=null,t.input.val("")):(e=t.listBox.getItemByValue(t._oldvalue))?setTimeout(function(){t.autoComplete&&t._updateItemsVisibility(""),t.listBox.selectIndex(e.index),t.renderSelection("api")},t.closeDelay):(t.clearSelection(),t.listBox.selectIndex(0),t.renderSelection("api")):t.renderSelection("api")},removeHandlers:function(){var e;null!=this.dropdownlistWrapper&&this.removeHandler(this.dropdownlistWrapper,"mousedown"),this.dropdownlistContent&&(this.removeHandler(this.dropdownlistContent,"click"),this.removeHandler(this.dropdownlistContent,"focus")),this.removeHandler(this.host,"keydown"),this.removeHandler(this.host,"focus"),null!=this.input&&(this.removeHandler(this.input,"focus"),this.removeHandler(this.input,"blur")),this.removeHandler(this.host,"mouseenter"),this.removeHandler(this.host,"mouseleave"),this.removeHandler(h(document),"mousemove."+this.id),this.listBoxContainer&&(this.removeHandler(this.listBoxContainer,"checkChange"),this.removeHandler(this.listBoxContainer,"select")),this.host.parents()&&this.removeHandler(this.host.parents(),"scroll.combobox"+this.element.id),this.dropdownlistArrowIcon&&this.dropdownlistArrow&&(e="mousedown",this.touch&&(e=h.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(this.dropdownlistArrowIcon,e),this.removeHandler(this.dropdownlistArrow,e))},getItem:function(e){return this.listBox.getItem(e)},getItemByValue:function(e){return this.listBox.getItemByValue(e)},getVisibleItem:function(e){return this.listBox.getVisibleItem(e)},renderSelection:function(e){if(null!=e&&"none"!=e&&!0!==this._disableSelection&&null!=this.listBox&&!this.multiSelect){e=this.listBox.visibleItems[this.listBox.selectedIndex];if(this.autoComplete&&!this.checkboxes&&void 0!==this.listBox.selectedValue&&(e=this.getItemByValue(this.listBox.selectedValue)),this.checkboxes&&(e=null!=(t=this.getCheckedItems())&&0<t.length?t[0]:null),this.hint&&(this.label[0].innerHTML=this.placeHolder),null!=e?this.hint&&this.element.setAttribute("hint",!0):this.element.removeAttribute("hint"),this.bar.css("top",this.host.height()),null==e)return t=h.jqx.browser.msie&&h.jqx.browser.version<8,this.input.val(""),this.input.attr("value",""),t||(this.isMaterialized()?(this.label[0].innerHTML=this.placeHolder,this.input.removeAttr("placeholder")):this.input.attr("placeholder",this.placeHolder)),void this._updateInputSelection();this.selectedIndex=this.listBox.selectedIndex;var t=h("<span></span>");null!=e.label&&null!=e.label&&0<e.label.toString().length?h.jqx.utilities.html(t,e.label):null!=e.value&&null!=e.value&&0<e.value.toString().length?h.jqx.utilities.html(t,e.value):null!=e.title&&null!=e.title&&0<e.title.toString().length?h.jqx.utilities.html(t,e.title):h.jqx.utilities.html(t,this.emptyString),t.outerHeight();if(this.checkboxes){for(var i=this.getCheckedItems(),s="",o=0;o<i.length;o++)o==i.length-1?s+=i[o].label:s+=i[o].label+", ";this.input.val(s)}else this.input.val(t.text());t.remove(),this._updateInputSelection(),!this.renderSelectedItem||null!=(t=this.renderSelectedItem(this.listBox.selectedIndex,e))&&(this.input[0].value=t),this.input.attr("value",this.input.val()),this.listBox&&this.listBox._activeElement&&h.jqx.aria(this,"aria-activedescendant",this.listBox._activeElement.id)}},dataBind:function(){this.listBoxContainer.jqxListBox({source:this.source}),this.renderSelection("mouse"),null==this.source&&this.clearSelection()},clear:function(){this.listBoxContainer.jqxListBox({source:null}),this.clearSelection()},clearSelection:function(e){this.selectedIndex=-1,this.listBox.clearSelection(),this.input.val(""),this.multiSelect&&(this.listBox.selectedValue="",this.selectedItems=new Array,this._selectedItems=new Array,this.doMultiSelect(!1))},unselectIndex:function(e,t){isNaN(e)||(this.autoComplete&&this._updateItemsVisibility(""),this.listBox.unselectIndex(e,t),this.renderSelection("mouse"),this.multiSelect&&(0<=e&&(t=this.getItem(e),0<=(e=this.selectedItems.indexOf(t.value))&&(t.value===this.listBox.selectedValue&&(this.listBox.selectedValue=null),this.selectedItems.splice(e,1),this._selectedItems.splice(e,1))),this.doMultiSelect(!1)))},selectIndex:function(e,t,i,s){this.autoComplete&&this._updateItemsVisibility(""),this.listBox.selectIndex(e,t,i,s),this.renderSelection("mouse"),this.selectedIndex=e,this.multiSelect&&this.doMultiSelect()},selectItem:function(e){this.autoComplete&&this._updateItemsVisibility(""),null!=this.listBox&&(this.listBox.selectedIndex=-1,this.listBox.selectItem(e),this.selectedIndex=this.listBox.selectedIndex,this.renderSelection("mouse"),this.multiSelect&&this.doMultiSelect(!1))},unselectItem:function(e){var t;this.autoComplete&&this._updateItemsVisibility(""),null!=this.listBox&&(this.listBox.unselectItem(e),this.renderSelection("mouse"),this.multiSelect&&((e=this.getItemByValue(e))&&0<=(t=this.selectedItems.indexOf(e.value))&&(e.value===this.listBox.selectedValue&&(this.listBox.selectedValue=null),this.selectedItems.splice(t,1),this._selectedItems.splice(t,1)),this.doMultiSelect(!1)))},checkItem:function(e){this.autoComplete&&this._updateItemsVisibility(""),null!=this.listBox&&this.listBox.checkItem(e)},uncheckItem:function(e){this.autoComplete&&this._updateItemsVisibility(""),null!=this.listBox&&this.listBox.uncheckItem(e)},indeterminateItem:function(e){this.autoComplete&&this._updateItemsVisibility(""),null!=this.listBox&&this.listBox.indeterminateItem(e)},getSelectedValue:function(){return this.listBox.selectedValue},getSelectedIndex:function(){return this.multiSelect?this.remoteAutoComplete&&this.multiSelect&&0<this._selectedItems.length||this._selectedItems&&0<this._selectedItems.length?this.getSelectedItems()[0].index:void 0:this.listBox.selectedIndex},getSelectedItem:function(){return this.multiSelect?this.remoteAutoComplete&&this.multiSelect&&0<this._selectedItems.length||this._selectedItems&&0<this._selectedItems.length?this.getSelectedItems()[0]:null:this.getVisibleItem(this.listBox.selectedIndex)},getSelectedItems:function(){if(this.remoteAutoComplete&&this.multiSelect)return this._selectedItems;var t=new Array,i=this;return h.each(this.selectedItems,function(){var e=i.getItemByValue(this);(e=e||i._selectedItems[this])&&t.push(e)}),t},getCheckedItems:function(){return this.listBox.getCheckedItems()},checkIndex:function(e){this.listBox.checkIndex(e)},uncheckIndex:function(e){this.listBox.uncheckIndex(e)},indeterminateIndex:function(e){this.listBox.indeterminateIndex(e)},checkAll:function(){this.listBox.checkAll(),this.renderSelection("mouse")},uncheckAll:function(){this.listBox.uncheckAll(),this.renderSelection("mouse")},insertAt:function(e,t){return null!=e&&this.listBox.insertAt(e,t)},addItem:function(e){return this.listBox.addItem(e)},removeAt:function(e){e=this.listBox.removeAt(e);return this.renderSelection("mouse"),e},removeItem:function(e){e=this.listBox.removeItem(e);return this.renderSelection("mouse"),e},updateItem:function(e,t){e=this.listBox.updateItem(e,t);return this.renderSelection("mouse"),e},updateAt:function(e,t){e=this.listBox.updateAt(e,t);return this.renderSelection("mouse"),e},ensureVisible:function(e){return this.listBox.ensureVisible(e)},disableAt:function(e){var t=this.getVisibleItem(e);return t&&this._disabledItems.push(t.value),this.listBox.disableAt(e)},enableAt:function(e){var t=this.getVisibleItem(e);return t&&this._disabledItems.splice(this._disabledItems.indexOf(t.value),1),this.listBox.enableAt(e)},disableItem:function(e){return(e=this.getVisibleItem(e))&&this._disabledItems.push(e.value),this.listBox.disableItem(e)},enableItem:function(e){return(e=this.getVisibleItem(e))&&this._disabledItems.splice(this._disabledItems.indexOf(e.value),1),this.listBox.enableItem(e)},_findPos:function(e){for(;e&&("hidden"==e.type||1!=e.nodeType||h.expr.filters.hidden(e));)e=e.nextSibling;var t;if(e)return[(t=h(e).coord(!0)).left,t.top]},testOffset:function(e,t,i){var s=e.outerWidth(),e=e.outerHeight(),o=h(window).width()+h(window).scrollLeft(),n=h(window).height()+h(window).scrollTop();return t.left+s>o&&s>this.host.width()&&(o=this.host.coord().left,s=s-this.host.width(),t.left=o-s+2),t.left<0&&(t.left=parseInt(this.host.coord().left)+"px"),t.top-=Math.min(t.top,t.top+e>n&&e<n?Math.abs(e+i+23):0),t},open:function(){this.isOpened()||this.opening||this.showListBox("api")},close:function(){this.isOpened()&&this.hideListBox("api")},_getBodyOffset:function(){var e=0,t=0;return"0px"!=h("body").css("border-top-width")&&(e=parseInt(h("body").css("border-top-width")),isNaN(e)&&(e=0)),"0px"!=h("body").css("border-left-width")&&(t=parseInt(h("body").css("border-left-width")),isNaN(t)&&(t=0)),{left:t,top:e}},showListBox:function(e){if(!this.listBox.items||0!=this.listBox.items.length){if("search"!=e||this.autoComplete||this.remoteAutoComplete||this.autoDropDownHeight&&this.container.height(this.listBoxContainer.height()+25),this.element.setAttribute("opened",!0),(this.autoComplete||this.multiSelect&&!this.remoteAutoComplete)&&"search"!=e&&(this._updateItemsVisibility(""),this.multiSelect))for(var t=this.getVisibleItems(),i=0;i<t.length;i++)if(!t[i].disabled){this.ensureVisible(i);break}this.remoteAutoComplete&&this.listBox.clearSelection(),"search"!=e&&(this._oldvalue=this.listBox.selectedValue),h.jqx.aria(this,"aria-expanded",!0),"auto"==this.dropDownWidth&&null!=this.width&&this.width.indexOf&&-1!=this.width.indexOf("%")&&this.listBox.host.width()!=this.host.width()&&(n=this.element.offsetWidth,this.listBoxContainer.jqxListBox({width:n}),this.listBoxContainer[0].style.width=n+"px",this.container.width(parseInt(n)+25)),"auto"==this.dropDownWidth&&"0px"===this.host.css("border-left-width")&&(n=this.element.offsetWidth,this.listBoxContainer.jqxListBox({width:n+1}),this.container.width(parseInt(n)+25));var s=this,o=this.listBoxContainer,e=this.listBox,n=(h(window).scrollTop(),h(window).scrollLeft(),parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px"),r=parseInt(Math.round(this.host.coord(!0).left)),l=r+"px",a=("element"===this.dropDownContainer&&(n=parseInt(this.host.outerHeight())-1+"px",l=0),h.jqx.mobile.isSafariMobileBrowser()||h.jqx.mobile.isWindowsPhone());this.ishiding=!1;(h.jqx.utilities.hasTransform(this.host)||null!=a&&a)&&(l=h.jqx.mobile.getLeftPos(this.element),n=h.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight()),"0px"!=h("body").css("border-top-width")&&(n=parseInt(n)-this._getBodyOffset().top+"px"),"0px"!=h("body").css("border-left-width")&&(l=parseInt(l)-this._getBodyOffset().left+"px")),this.host.addClass(this.toThemeProperty("jqx-combobox-state-selected")),"top"==this.dropDownVerticalAlignment?this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon-arrow-up-selected")):this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-combobox-arrow-selected")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.host.addClass(this.toThemeProperty("jqx-combobox-state-focus")),this.host.addClass(this.toThemeProperty("jqx-fill-state-focus")),this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content-focus")),this.container.css("left",l),this.container.css("top",n),e._arrange();var d,a=!1;"right"!=this.dropDownHorizontalAlignment&&!this.rtl||(l=this.container.outerWidth(),d=Math.abs(l-this.host.width()),l>this.host.width()?this.container.css("left",25+parseInt(Math.round(r))-d+"px"):this.container.css("left",25+parseInt(Math.round(r))+d+"px")),"top"==this.dropDownVerticalAlignment&&(l=o.height(),a=!0,o.css("top",23),o.addClass(this.toThemeProperty("jqx-popup-up")),r=parseInt(this.host.outerHeight()),d=parseInt(n)-Math.abs(l+r+23),this.container.css("top",d)),this.enableBrowserBoundsDetection&&(l=this.testOffset(o,{left:parseInt(this.container.css("left")),top:parseInt(n)},parseInt(this.host.outerHeight())),parseInt(this.container.css("top"))!=l.top?(a=!0,o.css("top",23),o.addClass(this.toThemeProperty("jqx-popup-up"))):o.css("top",0),this.container.css("top",l.top),this.container.css("top",l.top),parseInt(this.container.css("left"))!=l.left&&this.container.css("left",l.left)),"none"==this.animationType||"transform"===this.animationType?(this.container.css("display","block"),h.data(document.body,"openedCombojqxListBoxParent",s),h.data(document.body,"openedCombojqxListBox"+s.element.id,o),o.css("margin-top",0),o.css("opacity",1)):(this.container.css("display","block"),r=o.outerHeight(),o.stop(),"fade"==this.animationType?(o.css("margin-top",0),o.css("opacity",0),o.animate({opacity:1},this.openDelay,function(){s.isanimating=!1,s.opening=!1,h.data(document.body,"openedCombojqxListBoxParent",s),h.data(document.body,"openedCombojqxListBox"+s.element.id,o)})):(o.css("opacity",1),a?o.css("margin-top",r):o.css("margin-top",-r),this.isanimating=!0,this.opening=!0,o.animate({"margin-top":0},this.openDelay,function(){s.isanimating=!1,s.opening=!1,h.data(document.body,"openedCombojqxListBoxParent",s),h.data(document.body,"openedCombojqxListBox"+s.element.id,o)}))),e._renderItems(),a?(this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded")),o.addClass(this.toThemeProperty("jqx-rc-b-expanded")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-t-expanded"))):(this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded")),o.addClass(this.toThemeProperty("jqx-rc-t-expanded")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-b-expanded"))),o.addClass(this.toThemeProperty("jqx-fill-state-focus")),this._raiseEvent("0",e),o.addClass(this.toThemeProperty("jqx-popup-show"))}},doMultiSelect:function(e){this.checkboxes&&(this.multiSelect=!1);var r=this;if(!this.multiSelect){var t=r.dropdownlistContent.find(".jqx-button"),i="mousedown";if(this.touch&&(i=h.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(t,i),this.removeHandler(t.find(".jqx-icon-close"),i),t.remove(),!(n=this.listBox.items))return;for(var s=0;s<n.length;s++)n[s].disabled=!1;return this.listBox._renderItems(),this.selectedItems=new Array,void(this._selectedItems=new Array)}if(this.validateSelection&&!this.validateSelection(this.listBox.selectedValue))return;var o;this.selectedItems;if(this.listBox.selectedValue&&(-1===this.selectedItems.indexOf(this.listBox.selectedValue)&&(o=this.getItemByValue(this.listBox.selectedValue))&&o.visible&&(this.selectedItems.push(this.listBox.selectedValue),this._selectedItems.push(o),this._raiseEvent("2",{index:o.index,item:o}),this._raiseEvent("4",{index:o.index,item:o})),this.listBox.selectedIndex=-1),n=this.listBox.items){for(s=0;s<n.length;s++)n[s].disabled=!1,(0<=this.selectedItems.indexOf(n[s].value)||0<=this._disabledItems.indexOf(this.value))&&(n[s].disabled=!0);this.listBox._renderItems(),this.searchString="",this.input.val("");var n="",i="mousedown",t=r.dropdownlistContent.find(".jqx-button"),t=(this.touch&&(i=h.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(t,i),this.removeHandler(t.find(".jqx-icon-close"),i),t.remove(),r.input.detach(),0<this.selectedItems.length?(r.input.css("width","25px"),this.isMaterialized()&&r.hint?r.label[0].innerHTML=this.placeHolder:r.input.attr("placeholder","")):(r.input.css("width","100%"),r.isMaterialized()&&r.hint?r.label[0].innerHTML=this.placeHolder:r.input.attr("placeholder",this.placeHolder)),r.isMaterialized()&&r.hint&&setTimeout(function(){0===r.selectedItems.length?(r.element.removeAttribute("hint"),r.label[0].innerHTML=r.placeHolder):r.hint&&r.element.setAttribute("hint",!0)}),h.each(this.selectedItems,function(e){var t,i=r.getItemByValue(this),s=(i&&!r.remoteAutoComplete||(i=r._selectedItems[e]),h('<div style="overflow: hidden; float: left;"></div>'));s.addClass(r.toThemeProperty("jqx-button")),s.addClass(r.toThemeProperty("jqx-combobox-multi-item")),s.addClass(r.toThemeProperty("jqx-fill-state-normal")),s.addClass(r.toThemeProperty("jqx-rc-all")),i?(t=i.label,r.renderSelectedItem&&(e=r.renderSelectedItem(e,i))&&(t=e),""==s[0].innerHTML&&(s[0].innerHTML='<a data-value="'+i.value+'" style="float: left;" href="#">'+t+"</a>"),r.rtl&&(s[0].innerHTML='<a data-value="'+i.value+'" style="float: right;" href="#">'+t+"</a>"),e=r.rtl?"left":"right",r.showCloseButtons&&(i='<div style="position: relative; overflow: hidden; float: '+e+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+r.toThemeProperty("jqx-icon-close")+'"></div></div>',h.jqx.browser.msie&&h.jqx.browser.version<8&&(i='<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+r.toThemeProperty("jqx-icon-close")+'"></div></div>'),r.rtl&&(i='<div style="position: relative; overflow: hidden; float: '+e+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+r.toThemeProperty("jqx-icon-close")+'"></div></div>',h.jqx.browser.msie&&h.jqx.browser.version<8&&(i='<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+r.toThemeProperty("jqx-icon-close")+'"></div></div>')),s[0].innerHTML+=i)):""==s[0].innerHTML&&(s[0].innerHTML='<a href="#"></a>'),r.dropdownlistContent.append(s)}),r.dropdownlistContent.append(r.input),r.input.val(""),!1!==e&&(r.input.focus(),setTimeout(function(){r.input.focus()},10)),r.dropdownlistContent.find(".jqx-button"));!0===this.touchMode&&(i="mousedown"),this.addHandler(t,i,function(e){if(0<=e.target.className.indexOf("jqx-icon-close"))return!0;if(r.disabled)return!0;var t=h(e.target).attr("data-value");return r.getItemByValue(t)&&(r.listBox.selectedValue=null,r.listBox.clearSelection()),r.listBox.scrollTo(0,0),r.open(),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1}),this.addHandler(t.find(".jqx-icon-close"),i,function(e){if(!r.disabled){var t=h(e.target).parent().parent().find("a").attr("data-value"),i=r.getItemByValue(t);if(i||r.remoteAutoComplete&&!i&&0<=r.selectedItems.indexOf(t)){r.listBox.selectedValue=null;var e=r.selectedItems.indexOf(t),s=i&&0<=i.index?i.index:e;if(0<=e)r.selectedItems.splice(e,1),o=(o=r._selectedItems[e])||i,r._selectedItems.splice(e,1),r._raiseEvent("3",{index:s,type:"mouse",item:o}),r._raiseEvent("4",{index:s,type:"mouse",item:o}),r.doMultiSelect();else for(var o,n=0;n<r.selectedItems.length;n++)if((o=r.selectedItems[n])==t){r.selectedItems.splice(n,1),r._selectedItems.splice(n,1),r._raiseEvent("3",{index:s,type:"mouse",item:i}),r._raiseEvent("4",{index:s,type:"mouse",item:i}),r.doMultiSelect();break}}}}),this.isMaterialized()&&this.host.height(this.dropdownlistContent.height()),this.bar.css("top",this.host.height()),r.dropdownlistArrow.height(this.host.height()),r._updateInputSelection()}},hideListBox:function(e){var t,i,s=this.listBoxContainer,o=this.listBox,n=this.container;"none"!=this.container[0].style.display&&(this.element.setAttribute("opened",!1),h.jqx.aria(this,"aria-expanded",!1),"keyboard"!=e&&"mouse"!=e||(this.listBox.searchString=""),s.removeClass("jqx-popup-show"),("keyboard"==e||"mouse"==e&&this.multiSelect)&&this.doMultiSelect(),t=this,h.data(document.body,"openedCombojqxListBox"+this.element.id,null),"none"==this.animationType?(this.opening=!1,this.container.css("display","none")):"transform"===this.animationType?setTimeout(function(){n.css("display","none")},this.closeDelay):this.ishiding||(e=s.outerHeight(),s.css("margin-top",0),s.stop(),this.opening=!1,this.isanimating=!0,i=-e,parseInt(this.container.coord().top)<parseInt(this.host.coord().top)&&(i=e),"fade"==this.animationType?(s.css({opacity:1}),s.animate({opacity:0},this.closeDelay,function(){t.isanimating=!1,n.css("display","none"),t.ishiding=!1})):s.animate({"margin-top":i},this.closeDelay,function(){t.isanimating=!1,n.css("display","none"),t.ishiding=!1})),this.ishiding=!0,this.host.removeClass(this.toThemeProperty("jqx-combobox-state-selected")),this.dropdownlistArrowIcon.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this.dropdownlistArrowIcon.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-combobox-arrow-selected")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this.focused||(this.host.removeClass(this.toThemeProperty("jqx-combobox-state-focus")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.dropdownlistContent.removeClass(this.toThemeProperty("jqx-combobox-content-focus"))),this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),s.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),s.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),s.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),this._raiseEvent("1",o))},closeOpenedListBox:function(e){var t,i=e.data.that,s=h(e.target),o=e.data.listbox;if(null==o)return!0;if(!h(e.target).ischildof(i.host))return t=!1,h.each(s.parents(),function(){if("undefined"!=this.className&&this.className.indexOf)return-1!=this.className.indexOf("jqx-listbox")?!(t=!0):-1!=this.className.indexOf("jqx-combobox")?(i.element.id==this.id&&(t=!0),!1):void 0}),null==o||t||i.isOpened()&&(i.hideListBox("api"),i.input.blur()),!0},loadFromSelect:function(e){this.listBox.loadFromSelect(e),this.clearSelection()},refresh:function(e){this._setSize(),this._arrange(),this.listBox&&this.renderSelection()},resize:function(){this._setSize(),this._arrange()},_arrange:function(){var e=parseInt(this.host.width()),t=parseInt(this.host.height()),i=(this.arrowSize,this.arrowSize),s=1,e=(this.showArrow?"none"===this.dropdownlistArrow[0].style.display&&this.dropdownlistArrow.show():(i=0,this.dropdownlistArrow.hide(),s=0,this.host.css("cursor","arrow"),"fluent"===this.theme&&(s=1)),e-i-+s),s=(0<e&&(this.dropdownlistContent[0].style.width=e+"px"),this.rtl&&(this.dropdownlistContent[0].style.width=e-1+"px"),this.dropdownlistContent[0].style.height=t+"px",this.dropdownlistContent[0].style.left="0px",this.dropdownlistContent[0].style.top="0px",this.dropdownlistArrow[0].style.width=i+"px",this.dropdownlistArrow[0].style.height=t+"px",this.dropdownlistArrow[0].style.left=1+e+"px",this.input[0].style.width="100%",this.multiSelect||this.input.height(t),this.input.height());0==s&&(s=parseInt(this.input.css("font-size"))+3),-1==this.input[0].className.indexOf("jqx-rc-all")&&this.input.addClass(this.toThemeProperty("jqx-rc-all")),parseInt(t),parseInt(s);this.rtl&&(this.dropdownlistArrow.css("left","0px"),this.dropdownlistContent.css("left",this.dropdownlistArrow.width()),h.jqx.browser.msie&&h.jqx.browser.version<=8&&this.dropdownlistContent.css("left",1+this.dropdownlistArrow.width())),this.multiSelect&&(this.input.css("float","left"),this.input.width(25),this.dropdownlistWrapper.parent().css("height","auto"),this.dropdownlistContent.css("height","auto"),this.dropdownlistWrapper.css("height","auto"),this.dropdownlistContent.css("position","relative"),this.dropdownlistContent.css("cursor","text"),this.host.css("height","auto"),this.host.css("min-height",this.height),this.dropdownlistContent.css("min-height",this.height),t=parseInt(this.host.height()),this.dropdownlistArrow.height(t),i=parseInt(this.host.css("min-height")),0<(e=parseInt(i)/2-parseInt(s)/2)&&this.input.css("margin-top",e),this.isMaterialized()&&this.host.height(this.dropdownlistContent.height()),this.bar.css("top",this.host.height()),this.dropdownlistArrow.height(this.host.height()))},destroy:function(){this.source&&this.source.unbindBindingUpdate&&(this.source.unbindBindingUpdate(this.element.id),this.source.unbindBindingUpdate(this.listBoxContainer[0].id),this.source.unbindDownloadComplete(this.element.id),this.source.unbindDownloadComplete(this.listBoxContainer[0].id)),h.jqx.utilities.resize(this.host,null,!0),this.removeHandler(this.listBoxContainer,"select"),this.removeHandler(this.listBoxContainer,"unselect"),this.removeHandler(this.listBoxContainer,"change"),this.removeHandler(this.listBoxContainer,"bindingComplete"),this.removeHandler(this.dropdownlistWrapper,"selectstart"),this.removeHandler(this.dropdownlistWrapper,"mousedown"),this.removeHandler(this.host,"keydown"),this.removeHandler(this.listBoxContainer,"select"),this.removeHandler(this.listBox.content,"click"),this.removeHandlers(),this.removeHandler(this.input,"keyup.textchange"),this.listBoxContainer.jqxListBox("destroy"),this.listBoxContainer.remove(),this.host.removeClass(),this.removeHandler(h(document),"mousedown."+this.id,this.closeOpenedListBox),this.touch&&this.removeHandler(h(document),h.jqx.mobile.getTouchEventName("touchstart")+"."+this.id),this.cinput.remove(),delete this.cinput,this.dropdownlistArrow.remove(),delete this.dropdownlistArrow,this.dropdownlistArrowIcon.remove(),delete this.dropdownlistArrowIcon,delete this.dropdownlistWrapper,delete this.listBoxContainer,delete this.input,delete this.dropdownlistContent,delete this.comboStructure,this.container.remove(),delete this.listBox,delete this.container;var e=h.data(this.element,"jqxComboBox");e&&delete e.instance,this.host.removeData(),this.host.remove(),delete this.host,delete this.set,delete this.get,delete this.call,delete this.element},_raiseEvent:function(e,t){var i=this.events[e],i=((t=null==t?{owner:null}:t).owner=this,new h.Event(i));return i.owner=this,2!=e&&3!=e&&4!=e&&5!=e&&6!=e&&7!=e&&8!=e&&9!=e||(i.args=t),this.host.trigger(i)},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&(e._setSize(),"width"==t&&"auto"==e.dropDownWidth&&(i=e.host.width(),e.listBoxContainer.jqxListBox({width:i}),e.container.width(parseInt(i)+25)),e._arrange(),e.close())},propertyChangedHandler:function(e,t,i,s){if(null!=e.isInitialized&&0!=e.isInitialized&&!(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length)){var o,n;if("template"==t&&(e.listBoxContainer.removeClass(e.toThemeProperty("jqx-"+i+"-item")),e.listBoxContainer.addClass(e.toThemeProperty("jqx-"+e.template+"-item")),e.dropDownListArrow.removeClass(e.toThemeProperty("jqx-"+i)),e.dropDownListArrow.addClass(e.toThemeProperty("jqx-"+e.template)),(o=this).bar.removeClass(o.toThemeProperty("jqx-"+i)),o.label.removeClass(o.toThemeProperty("jqx-"+i)),o.bar.addClass(o.toThemeProperty("jqx-"+o.template)),o.label.addClass(o.toThemeProperty("jqx-"+o.template))),"dropDownVerticalAlignment"==t&&(e.close(),e.dropdownlistArrowIcon.removeClass(e.toThemeProperty("jqx-icon-arrow-up")),e.dropdownlistArrowIcon.removeClass(e.toThemeProperty("jqx-icon-arrow-down")),"top"==e.dropDownVerticalAlignment?e.dropdownlistArrowIcon.addClass(e.toThemeProperty("jqx-icon-arrow-up")):e.dropdownlistArrowIcon.addClass(e.toThemeProperty("jqx-icon-arrow-down")),e.listBoxContainer.css("top",0),e.listBoxContainer.removeClass(this.toThemeProperty("jqx-popup-up"))),"autoItemsHeight"==t&&e.listBoxContainer.jqxListBox({autoItemsHeight:s}),"itemHeight"==t&&e.listBoxContainer.jqxListBox({itemHeight:s}),"renderSelectedItem"==t&&e.renderSelection("mouse"),"renderer"==t&&e.listBoxContainer.jqxListBox({renderer:s}),"enableSelection"==t&&e.listBoxContainer.jqxListBox({enableSelection:s}),"enableHover"==t&&e.listBoxContainer.jqxListBox({enableHover:s}),"touchMode"===t&&(e.listBoxContainer.jqxListBox({touchMode:s}),e.touch=h.jqx.mobile.isTouchDevice(),!0===e.touchMode&&(e.touch=!0),e._updateHandlers()),"multiSelect"==t)if(s)e.doMultiSelect(!1);else{for(var r=e.listBox.items,l=-1,a=0;a<r.length;a++)r[a].disabled=!1,(0<=e.selectedItems.indexOf(r[a].value)||0<=e._disabledItems.indexOf(e.value))&&(r[a].disabled=!0,l=r[a].index);if(e.doMultiSelect(!1),e.listBox._renderItems(),!r)return;e.listBox.selectedIndex=l,e.renderSelection("mouse"),e.dropdownlistWrapper.parent().css("height","100%"),e.dropdownlistContent.css("height","100"),e.dropdownlistWrapper.css("height","100"),e.dropdownlistContent.css("position","relative"),e.host.css("min-height",null),e._setSize(),e._arrange()}"showArrow"==t&&(e._arrange(),e.multiSelect&&e.doMultiSelect(!1)),"placeHolder"==t&&(e.isMaterialized()?e.label.innerHTML=e.placeHolder:e.input.attr("placeholder",e.placeHolder)),"popupZIndex"==t&&e.listBoxContainer.css({zIndex:e.popupZIndex}),"promptText"==t&&(e.placeHolder=s),"autoOpen"==t&&e._updateHandlers(),"renderer"==t&&(e.listBox.renderer=e.renderer),"itemHeight"==t&&(e.listBox.itemHeight=s),"source"==t&&(e.input.val(""),e.listBoxContainer.jqxListBox({source:e.source}),e.renderSelection("mouse"),null==e.source&&e.clearSelection(),e.multiSelect&&(e.selectedItems=new Array,e._selectedItems=new Array,e.doMultiSelect(!1))),"rtl"==t&&(s?(e.dropdownlistArrow.css("float","left"),e.dropdownlistContent.css("float","right")):(e.dropdownlistArrow.css("float","right"),e.dropdownlistContent.css("float","left")),e.listBoxContainer.jqxListBox({rtl:e.rtl})),"displayMember"!=t&&"valueMember"!=t||(e.listBoxContainer.jqxListBox({displayMember:e.displayMember,valueMember:e.valueMember}),e.renderSelection("mouse")),"autoDropDownHeight"==t&&(e.listBoxContainer.jqxListBox({autoHeight:e.autoDropDownHeight}),e.autoDropDownHeight?e.container.height(e.listBoxContainer.height()+25):(e.listBoxContainer.jqxListBox({height:e.dropDownHeight}),e.container.height(parseInt(e.dropDownHeight)+25)),e.listBox._arrange(),e.listBox._updatescrollbars()),"dropDownHeight"!=t||e.autoDropDownHeight||(e.listBoxContainer.jqxListBox({height:e.dropDownHeight}),e.container.height(parseInt(e.dropDownHeight)+25)),"dropDownWidth"!=t&&"scrollBarSize"!=t||(n=e.width,"auto"!=e.dropDownWidth&&(n=e.dropDownWidth),e.listBoxContainer.jqxListBox({width:n,scrollBarSize:e.scrollBarSize}),e.container.width(parseInt(n)+25)),"autoComplete"==t&&e._resetautocomplete(),"checkboxes"==t&&(e.listBoxContainer.jqxListBox({checkboxes:e.checkboxes}),e.checkboxes?(e.input.attr("readonly",!0),h.jqx.aria(e,"aria-readonly",!0)):h.jqx.aria(e,"aria-readonly",!1)),"theme"==t&&null!=s&&(e.listBoxContainer.jqxListBox({theme:s}),e.listBoxContainer.addClass(e.toThemeProperty("jqx-popup")),h.jqx.browser.msie&&e.listBoxContainer.addClass(e.toThemeProperty("jqx-noshadow")),h.jqx.utilities.setTheme(i,s,e.host)),"rtl"==t&&(e.render(),e.refresh()),"width"!=t&&"height"!=t||(e._setSize(),"width"==t&&"auto"==e.dropDownWidth&&(n=e.host.width(),e.listBoxContainer.jqxListBox({width:n}),e.container.width(parseInt(n)+25)),e._arrange(),e.close()),"selectedIndex"==t&&(e.listBox.selectIndex(s),e.renderSelection("mouse"))}}})}(jqxBaseFramework);