!function(h){h.jqx.jqxWidget("jqxInput","",{}),h.extend(h.jqx._jqxInput.prototype,{defineInstance:function(){var e=this,e={disabled:!1,filter:e._filter,sort:e._sort,highlight:e._highlight,dropDownWidth:null,renderer:e._renderer,opened:!1,$popup:document.createElement("ul"),source:[],roundedCorners:!0,searchMode:"default",placeHolder:"",width:null,height:null,value:"",rtl:!1,enableBrowserBoundsDetection:!0,hint:!0,displayMember:"",valueMember:"",events:["select","open","close","change"],popupZIndex:1e3,items:8,minLength:1,maxLength:null};return this===h.jqx._jqxInput.prototype||h.extend(!0,this,e),e},createInstance:function(){var e=this;"none"!==e.host.css("display")&&!1!==document.body.contains(e.element)||(e._initiallyHidden=!0),e._popupHelper=h(e.$popup),e.render()},render:function(){var i=this;if(this.input=this.element,i.isMaterialized()&&this.input instanceof HTMLInputElement){var s=this.host.children(),e=(h.each(s,function(e){var t="jqx-input-group-addon";h(this).removeClass(i.toThemeProperty("jqx-rc-all")),0===e&&(t+=" jqx-rc-l"),e===s.length-1&&(t+=" jqx-rc-r"),this!==i.element&&(t+=" jqx-fill-state-normal"),this.className+=" "+i.toThemeProperty(t)}),h("<div></div>")),t=(e.addClass(i.toThemeProperty("jqx-input-group")),this.host.after(e),this.element),n=this.host.data(),a=(e.append(t),h("<label></label")),l=(this.hint&&(a[0].innerHTML=this.placeHolder),a.addClass(i.toThemeProperty("jqx-input-label")),e.append(a),h("<span></span>"));e.append(l),l.addClass(i.toThemeProperty("jqx-input-bar")),e[0].id=this.element.id,this.element.removeAttribute("id"),e[0].style.cssText=this.element.style.cssText,0<=this.element.className.indexOf("underlined")&&e.addClass("underlined"),i.input=i.element,this.input instanceof HTMLInputElement||(this.input=this.host.find("input"),0<this.input.length&&(this.input=this.input[0]),h(this.input).addClass(this.toThemeProperty("jqx-input-widget"))),this.label=a,this.bar=l,this.element.style.cssText="",this.host=e,this.element=e[0],this.host.data(n),(i=this).template&&(i.bar.addClass(i.toThemeProperty("jqx-"+i.template)),i.label.addClass(i.toThemeProperty("jqx-"+i.template))),0<s.length&&(i._hasAddons=!0)}else if("textarea"===this.element.nodeName.toLowerCase())this.element.style.overflow="auto";else if("div"===this.element.nodeName.toLowerCase()){this.baseHost=this.element;var t=i.element.getElementsByTagName("input"),r=!1;if(h.each(t,function(){var e=this.type;if(null==e||"text"===e||"textarea"===e)return t=h(this),!(r=!0)}),!r)throw new Error("jqxInput: Missing Text Input in the Input Group");0<t.length&&(this.baseHost=h(this.element),i.baseElement=i.element,n=this.host.data(),this.host=t,this.element=t[0],i.input=t[0],this.host.data(n),i.baseElement.className+=" "+i.toThemeProperty("jqx-widget jqx-rc-all jqx-input-group"),s=this.baseHost.children(),h.each(s,function(e){var t="jqx-input-group-addon";h(this).removeClass(i.toThemeProperty("jqx-rc-all")),0===e&&(t+=" jqx-rc-l"),e===s.length-1&&(t+=" jqx-rc-r"),this!==i.element&&(t+=" jqx-fill-state-normal"),this.className+=" "+i.toThemeProperty(t)}))}this.addHandlers(),this.rtl&&(i.element.className+=" "+i.toThemeProperty("jqx-rtl")),i.element.setAttribute("role","textbox"),h.jqx.aria(this,"aria-autocomplete","both"),h.jqx.aria(this,"aria-disabled",this.disabled),h.jqx.aria(this,"aria-readonly",!1),h.jqx.aria(this,"aria-multiline",!1),this.source&&this.source.length&&h.jqx.aria(this,"aria-haspopup",!0),""!==this.value&&(this.input.value=this.value),this._oldsource=this.source,this._updateSource()},_updateSource:function(){function e(e){for(var t=[],i=0;i<e.length;i++)t[i]=n(e[i]);return t}var t,s=this,n=function(e){return void 0===e?null:"string"==typeof e||e instanceof String?{label:e,value:e}:"string"!=typeof e&&e instanceof String==!1?((i=t="")!==s.displayMember&&void 0!==s.displayMember&&e[s.displayMember]&&(t=e[s.displayMember]),""!==s.valueMember&&void 0!==s.valueMember&&(i=e[s.valueMember]),{label:t=""===t?e.label:t,value:i=""===i?e.value:i}):e;var t,i};if(this.source&&this.source._source)return this.adapter=this.source,null!=this.adapter._source.localdata?(this.adapter.unbindBindingUpdate(this.element.id),this.adapter.bindBindingUpdate(this.element.id,function(){s.source=e(s.adapter.records)})):(t={},this.adapter._options.data?h.extend(s.adapter._options.data,t):(this.source._source.data&&h.extend(t,this.source._source.data),this.adapter._options.data=t),this.adapter.unbindDownloadComplete(this.element.id),this.adapter.bindDownloadComplete(this.element.id,function(){s.source=e(s.adapter.records)})),void this.source.dataBind();h.isFunction(this.source)||(this.source=e(this.source))},_refreshClasses:function(e){var e=e?"addClass":"removeClass",t="jqx-widget-content jqx-input-widget jqx-input jqx-widget",i="jqx-popup jqx-input-popup jqx-menu jqx-menu-vertical jqx-menu-dropdown jqx-widget jqx-widget-content";h.jqx.browser.msie&&(i+=" jqx-noshadow"),this.roundedCorners&&(t+=" jqx-rc-all",i+=" jqx-rc-all"),this.disabled?t+=" jqx-fill-state-disabled":this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),this.host[e](this.toThemeProperty(t)),this._popupHelper[e](this.toThemeProperty(i))},selectAll:function(){var t=this.host;t[0]instanceof HTMLInputElement==!1&&(t=h(this.input)),setTimeout(function(){var e;"selectionStart"in t[0]?(t[0].focus(),t[0].setSelectionRange(0,t[0].value.length)):((e=t[0].createTextRange()).collapse(!0),e.moveEnd("character",t[0].value.length),e.moveStart("character",0),e.select())},10)},selectLast:function(){var e=this.host;e[0]instanceof HTMLInputElement==!1&&(e=h(this.input)),this.selectStart(e[0].value.length)},selectFirst:function(){this.selectStart(0)},selectStart:function(t){var i=this.host;i[0]instanceof HTMLInputElement==!1&&(i=h(this.input)),setTimeout(function(){var e;"selectionStart"in i[0]?(i[0].focus(),i[0].setSelectionRange(t,t)):((e=i[0].createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select())},10)},focus:function(){try{var e=this;e.element.focus(),setTimeout(function(){e.element.focus()},25)}catch(e){}},resize:function(e,t){this.width=e,this.height=t,this.refresh()},refresh:function(){var t,i,e,s;this._refreshClasses(!1),this._refreshClasses(!0),this.baseHost?(null!=this.width&&-1!=this.width.toString().indexOf("px")?this.baseElement.style.width=parseInt(this.width)+"px":null==this.width||isNaN(this.width)||(this.baseElement.style.width=this.width+"px"),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.baseElement.style.height=parseInt(this.height)+"px":null==this.height||isNaN(this.height)||(this.baseElement.style.height=this.height+"px"),i=h.jqx.browser.msie&&h.jqx.browser.version<9,e=0,h.each((t=this).baseHost.children(),function(){this.style.height="100%",this!==t.element&&(e+=h(this).outerWidth())}),t._addonsWidth=e,i?(s=Math.max(0,t.baseElement.offsetHeight-2),t.element.style.width=Math.max(0,t.baseElement.offsetWidth-e-1)+"px",t.element.style.minHeight=s+"px",t.element.style.lineHeight=s+"px"):t.element.style.width="calc(100% - "+e+"px)",h.jqx.utilities.resize(t.baseHost,function(){var e;i&&"string"==typeof t.width&&-1!==t.width.indexOf("%")&&!t._initiallyHidden?t.element.style.width=t.baseElement.offsetWidth-t._addonsWidth-1+"px":t._initiallyHidden&&(t._addonsWidth=t._getAddonsWidth(),i?(t.element.style.width=t.baseElement.offsetWidth-t._addonsWidth-1+"px",e=t.baseElement.offsetHeight-2,t.element.style.minHeight=e+"px",t.element.style.lineHeight=e+"px"):t.element.style.width="calc(100% - "+t._addonsWidth+"px)",t._initiallyHidden=!1)})):(null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=parseInt(this.width)+"px":null==this.width||isNaN(this.width)?this.element.style.width=this.width:this.element.style.width=this.width+"px",null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=parseInt(this.height)+"px":null==this.height||isNaN(this.height)?this.element.style.height=this.height:this.element.style.height=this.height+"px",this._hasAddons&&(this._addonsWidth=35,this.input.style.width="calc(100% - "+this._addonsWidth+"px)")),this.disabled?this.element.setAttribute("disabled",!0):this.element.removeAttribute("disabled"),this.maxLength&&(this.element.setAttribute("maxlength",this.maxLength),this.input&&this.input.setAttribute("maxlength",this.maxLength)),this.element.getAttribute("placeholder")||this._refreshPlaceHolder()},_refreshPlaceHolder:function(){var e=this;e.isMaterialized()&&e.hint||("placeholder"in this.input&&!(h.jqx.browser.msie&&h.jqx.browser.version<9)?e.input.setAttribute("placeHolder",e.placeHolder):""===e.input.value&&(e.input.value=e.placeHolder)),e.hint&&(""!==e.input.value?e.element.setAttribute("hint",!0):e.element.removeAttribute("hint"),e.label&&(e.label.innerHTML=e.placeHolder))},destroy:function(){this.removeHandlers(),(this.baseHost||this.host).remove(),this.$popup&&this._popupHelper.remove()},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2===Object.keys(i).length&&e.refresh()},propertyChangedHandler:function(e,t,i,s){if("width"!==t||s===i)return"placeHolder"===t?("placeholder"in e.element&&!(h.jqx.browser.msie&&h.jqx.browser.version<9)||e.input.value!==i||(e.input.value=""),void e._refreshPlaceHolder()):void(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2===Object.keys(e.batchUpdate).length||("theme"===t&&h.jqx.utilities.setTheme(i,s,e.host),"opened"===t?s?e.open():e.close():("source"===t&&(e._oldsource=s,e._updateSource()),"displayMember"!==t&&"valueMember"!==t||(e.source=e._oldsource,e._updateSource()),"disabled"===t&&h.jqx.aria(e,"aria-disabled",e.disabled),"value"===t&&(e.input.value=s,e._refreshPlaceHolder()),e.refresh())));e.baseHost?(e.baseElement.style.width=e._toPx(s),h.jqx.browser.msie&&h.jqx.browser.version<9&&(e.element.style.width=e.baseElement.offsetWidth-e._addonsWidth-1+"px")):e.element.style.width=e._toPx(s)},select:function(e,t,i){var s=this._find("jqx-fill-state-pressed",this._popupHelper),n=s.getAttribute("data-value"),s=s.getAttribute("data-name");return this.input.value=this.renderer(s,this.input.value),this.selectedItem={label:s,value:n},this.element.setAttribute("data-value",n),this.element.setAttribute("data-label",s),this._raiseEvent("0",{item:{label:s,value:n},label:s,value:n}),this._raiseEvent("3",{type:i,item:{label:s,value:n},label:s,value:n}),this.value=s,this.close()},val:function(e){return 0===arguments.length||null!=e&&"object"==typeof e&&!e.label&&!e.value?""!==this.displayMember&&""!==this.valueMember&&this.selectedItem?""===this.input.value?"":this.selectedItem:this.input.value:(e&&e.label?(this.selectedItem={label:e.label,value:e.value},this.element.setAttribute("data-value",e.value),this.element.setAttribute("data-label",e.label),this.value=e,this.input.value=e.label,this.input&&(this.input.value=e.label)):(this.value=e,this.input.value=e,this.element.setAttribute("data-value",e),this.element.setAttribute("data-label",e),e&&e.label?this._raiseEvent("3",{type:null,item:{label:e.label,value:e.value},label:e.label,value:e.value}):this._raiseEvent("3",{type:null,item:{label:e,value:e},label:e,value:e}),this._refreshPlaceHolder()),this.input.value)},_raiseEvent:function(e,t){e=this.events[e],(t=void 0===t?{owner:null}:t).owner=this,e=new h.Event(e);return e.owner=this,e.args=t,e.preventDefault&&e.preventDefault(),this.host.trigger(e)},_renderer:function(e){return e},open:function(){var e,t,i,s,n;if(!h.jqx.isHidden(this.host))return e=h.extend({},this.host.coord(!0),{height:this.element.offsetHeight}),this.$popup.parentNode!==document.body&&(i=this.element.id+"_popup",this.$popup.id=i,h.jqx.aria(this,"aria-owns",i),document.body.appendChild(this.$popup)),this.$popup.style.position="absolute",this.$popup.style.zIndex=this.popupZIndex,this.$popup.style.top=this._toPx(e.top+e.height),this.$popup.style.left=this._toPx(e.left),this.$popup.style.display="block",t=0,i=this._popupHelper.children(),h.each(i,function(){t+=h(this).outerHeight()+1}),this.$popup.style.height=this._toPx(t),this.enableBrowserBoundsDetection&&(i=h(window).height()+h(window).scrollTop(),n=h(this.$popup).offset(),s=h(this.$popup).outerHeight(),n.top+s>i&&(n=e.top+e.height-s-this.host.height(),this.$popup.style.top=(n=n<0?0:n)+"px")),this.opened=!0,this._raiseEvent("1",{popup:this.$popup}),h.jqx.aria(this,"aria-expanded",!0),this},close:function(){if(this.opened)return this.$popup.style.display="none",this.opened=!1,this._raiseEvent("2",{popup:this.$popup}),h.jqx.aria(this,"aria-expanded",!1),this._refreshPlaceHolder(),this},suggest:function(){var e;return this.query=this.input.value,!this.query||this.query.length<this.minLength?this.opened?this.close():this:(e=h.isFunction(this.source)?this.source(this.query,h.proxy(this.load,this)):this.source)?this.load(e):this},load:function(e){for(var t=[],i=0;i<e.length;i++){var s=e[i];this.filter(s)&&t.push(s)}return(t=this.sort(t)).length?this._render(t.slice(0,this.items)).open():this.opened?this.close():this},_filter:function(e){var t=this.query,i=e;switch(null!=e.label?i=e.label:this.displayMember&&(i=e[this.displayMember]),this.searchMode){case"none":break;default:return h.jqx.string.containsIgnoreCase(i,t);case"contains":return h.jqx.string.contains(i,t);case"equals":return h.jqx.string.equals(i,t);case"equalsignorecase":return h.jqx.string.equalsIgnoreCase(i,t);case"startswith":return h.jqx.string.startsWith(i,t);case"startswithignorecase":return h.jqx.string.startsWithIgnoreCase(i,t);case"endswith":return h.jqx.string.endsWith(i,t);case"endswithignorecase":return h.jqx.string.endsWithIgnoreCase(i,t)}},_sort:function(e){for(var t=[],i=[],s=[],n=0;n<e.length;n++){var a=e[n],l=a;a.label?l=a.label:this.displayMember&&(l=a[this.displayMember]),0===l.toString().toLowerCase().indexOf(this.query.toString().toLowerCase())?t.push(a):0<=l.toString().indexOf(this.query)?i.push(a):0<=l.toString().toLowerCase().indexOf(this.query.toString().toLowerCase())&&s.push(a)}return t.concat(i,s)},_highlight:function(e){var t=(t=this.query).replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t=new RegExp("("+t+")","ig");return e.replace(t,function(e,t){return"<b>"+t+"</b>"})},escapeHTML:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]})},sanitizeHTML:function(e){var t=this,i=new RegExp("<s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)[^>]*>(.*?)<s*/s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)>","ig");return String(e).replace(i,function(e){return t.escapeHTML(e)})},escape_HTML:function(e){return e&&(0<=e.indexOf("onclick")||0<=e.indexOf("onload")||0<=e.indexOf("onerror"))?this.escapeHTML(e):this.sanitizeHTML(e)},_render:function(e){var r=this,t=r._popupHelper.children();if(0<t.length)for(var i=0;i<t.length;i++)h(t[i]).remove();for(var s=function(e,t){var i,s=e,n=document.createElement("li"),a=document.createElement("a"),l=(a.setAttribute("href","#"),n.appendChild(a),l=void 0!==e.value&&null!==e.value?(i=void 0!==e.label&&null!==e.label?e.label:e.value,r.escape_HTML(e.value)):void 0!==e.label&&null!==e.label?(i=e.label,e.label):void 0!==r.displayMember&&""!==r.displayMember?(i=e[r.displayMember],e[r.valueMember]):i=e,n.setAttribute("data-value",l),n.setAttribute("data-name",i),e.label?s=e.label:r.displayMember&&(s=e[r.displayMember]),a.innerHTML=r.highlight(s),"");r.rtl&&(l=" jqx-rtl"),0===t&&(l+=" jqx-fill-state-pressed"),n.className=r.toThemeProperty("jqx-item jqx-menu-item jqx-rc-all"+l),r.$popup.appendChild(n),r.addHandler(n,"mouseenter",function(e){r.mouseenter(e)})},n=e,a=0;a<n.length;a++)s(n[a],a);return this.dropDownWidth?this.$popup.style.width=r._toPx(r.dropDownWidth):this.$popup.style.width=r._toPx(r.element.offsetWidth-6),this},next:function(){var e=this._find("jqx-fill-state-pressed",this._popupHelper),t=e.nextSibling;h(e).removeClass(this.toThemeProperty("jqx-fill-state-pressed")),(t=t||this.$popup.firstChild).className+=" "+this.toThemeProperty("jqx-fill-state-pressed")},prev:function(){var e=this._find("jqx-fill-state-pressed",this._popupHelper),t=e.previousSibling;h(e).removeClass(this.toThemeProperty("jqx-fill-state-pressed")),(t=t||this.$popup.lastChild).className+=" "+this.toThemeProperty("jqx-fill-state-pressed")},addHandlers:function(){var i=this,e=".jqxInput"+i.element.id;i.addHandler(i.host,"focus"+e,function(){i.onFocus()}),i.addHandler(i.host,"blur"+e,function(){i.onBlur()}),i.isMaterialized()&&this.input instanceof HTMLInputElement&&i.addHandler(i.input,"blur"+e,function(){i.onBlur()}),i.addHandler(i.host,"change"+e,function(e){if(i.opened&&!e.args)return e.stopPropagation(),e.preventDefault(),void e.stopImmediatePropagation();var t;e.args||(e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation(),e=(e=i.val())&&e.label?(t=e.label,e.val):t=e,i._raiseEvent("3",{type:"keyboard",item:{label:t,value:e},label:t,value:e}),i.value=t,i._refreshPlaceHolder())}),i.addHandler(i.host,"keypress"+e,function(e){i.keypress(e)}),i.addHandler(i.host,"keyup"+e,function(e){i.keyup(e)}),i.addHandler(i.host,"keydown"+e,function(e){i.keydown(e)}),i.addHandler(i.$popup,"pointerdown"+e,function(e){i.click(e)})},removeHandlers:function(){var e=this,t=".jqxInput"+e.element.id;e.removeHandler(e.host,"change"+t),e.removeHandler(e.host,"focus"+t),e.removeHandler(e.host,"blur"+t),e.removeHandler(e.host,"keypress"+t),e.removeHandler(e.host,"keyup"+t),e.removeHandler(e.host,"keydown"+t),e.removeHandler(e.$popup,"pointerdown"+t)},move:function(e){if(this.opened){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.shiftKey||(e.preventDefault(),this.prev());break;case 40:e.shiftKey||(e.preventDefault(),this.next())}e.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=-1!==[40,38,9,13,27].indexOf(e.keyCode),this.move(e)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:e.stopPropagation(),e.preventDefault();break;case 9:case 13:if(!this.opened)return;this.select(e,this,"keyboard"),e.stopPropagation(),e.preventDefault();break;case 27:if(!this.opened)return;this.close(),e.stopPropagation(),e.preventDefault();break;default:var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.suggest()},300)}},clear:function(){this.val("")},onBlur:function(){var e=this;setTimeout(function(){e.close()},150),e.host.removeClass(e.toThemeProperty("jqx-fill-state-focus")),e._refreshPlaceHolder()},onFocus:function(){this.element.className+=" "+this.toThemeProperty("jqx-fill-state-focus"),this._refreshPlaceHolder()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(e,this,"mouse")},mouseenter:function(e){h(this._find("jqx-fill-state-pressed",this._popupHelper)).removeClass(this.toThemeProperty("jqx-fill-state-pressed")),e.currentTarget.className+=" "+this.toThemeProperty("jqx-fill-state-pressed")},_toPx:function(e){return"number"==typeof e?e+"px":e},_find:function(e,t){for(var i=t.children(),s=0;s<i.length;s++){var n=i[s];if(-1!==n.className.indexOf(e))return n}},_getAddonsWidth:function(){for(var e=this.baseHost.children(),t=0,i=0;i<e.length;i++)e[i]!==this.element&&(t+=h(e[i]).outerWidth());return t}})}(jqxBaseFramework);