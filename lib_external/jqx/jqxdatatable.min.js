!function(U){function K(i,e){return this.owner=i,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.editable=!0,this.hidden=!1,this.hideable=!0,this.groupable=!0,this.renderer=null,this.cellsRenderer=null,this.columntype=null,this.cellsFormat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.resizable=!0,this.draggable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.autoCellHeight=!0,this.validation=null,this.classname="",this.cellclassname="",this.aggregates=null,this.aggregatesRenderer=null,this.rendered=null,this.exportable=!0,this.nullable=!0,this.columngroup=null,this.columntype="textbox",this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsFormat:this.cellsFormat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){var i;this[e]?(i=this[e],this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)):this[e.toLowerCase()]&&(i=this[e.toLowerCase()],this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i))},this._initfields=function(e){if(null!=e)if(U.jqx.hasProperty(e,"dataField")&&(this.datafield=U.jqx.get(e,"dataField")),U.jqx.hasProperty(e,"displayField")?this.displayfield=U.jqx.get(e,"displayField"):this.displayfield=this.datafield,U.jqx.hasProperty(e,"columnType")&&(this.columntype=U.jqx.get(e,"columnType")),U.jqx.hasProperty(e,"validation")&&(this.validation=U.jqx.get(e,"validation")),U.jqx.hasProperty(e,"autoCellHeight")&&(this.autoCellHeight=U.jqx.get(e,"autoCellHeight")),U.jqx.hasProperty(e,"text")?this.text=U.jqx.get(e,"text"):this.text=this.displayfield,U.jqx.hasProperty(e,"sortable")&&(this.sortable=U.jqx.get(e,"sortable")),U.jqx.hasProperty(e,"hidden")&&(this.hidden=U.jqx.get(e,"hidden")),U.jqx.hasProperty(e,"groupable")&&(this.groupable=U.jqx.get(e,"groupable")),U.jqx.hasProperty(e,"renderer")&&(this.renderer=U.jqx.get(e,"renderer")),U.jqx.hasProperty(e,"align")&&(this.align=U.jqx.get(e,"align")),U.jqx.hasProperty(e,"cellsAlign")&&(this.cellsalign=U.jqx.get(e,"cellsAlign")),U.jqx.hasProperty(e,"cellsFormat")&&(this.cellsFormat=U.jqx.get(e,"cellsFormat")),U.jqx.hasProperty(e,"width")&&(this.width=U.jqx.get(e,"width")),U.jqx.hasProperty(e,"minWidth")&&(this.minwidth=U.jqx.get(e,"minWidth")),U.jqx.hasProperty(e,"maxWidth")&&(this.maxwidth=U.jqx.get(e,"maxWidth")),U.jqx.hasProperty(e,"cellsRenderer")&&(this.cellsRenderer=U.jqx.get(e,"cellsRenderer")),U.jqx.hasProperty(e,"columnType")&&(this.columntype=U.jqx.get(e,"columnType")),U.jqx.hasProperty(e,"pinned")&&(this.pinned=U.jqx.get(e,"pinned")),U.jqx.hasProperty(e,"filterable")&&(this.filterable=U.jqx.get(e,"filterable")),U.jqx.hasProperty(e,"filter")&&(this.filter=U.jqx.get(e,"filter")),U.jqx.hasProperty(e,"resizable")&&(this.resizable=U.jqx.get(e,"resizable")),U.jqx.hasProperty(e,"draggable")&&(this.draggable=U.jqx.get(e,"draggable")),U.jqx.hasProperty(e,"editable")&&(this.editable=U.jqx.get(e,"editable")),U.jqx.hasProperty(e,"initEditor")&&(this.initeditor=U.jqx.get(e,"initEditor")),U.jqx.hasProperty(e,"createEditor")&&(this.createeditor=U.jqx.get(e,"createEditor")),U.jqx.hasProperty(e,"destroyEditor")&&(this.destroyeditor=U.jqx.get(e,"destroyEditor")),U.jqx.hasProperty(e,"getEditorValue")&&(this.geteditorvalue=U.jqx.get(e,"getEditorValue")),U.jqx.hasProperty(e,"className")&&(this.classname=U.jqx.get(e,"className")),U.jqx.hasProperty(e,"cellClassName")&&(this.cellclassname=U.jqx.get(e,"cellClassName")),U.jqx.hasProperty(e,"aggregates")&&(this.aggregates=U.jqx.get(e,"aggregates")),U.jqx.hasProperty(e,"aggregatesRenderer")&&(this.aggregatesRenderer=U.jqx.get(e,"aggregatesRenderer")),U.jqx.hasProperty(e,"rendered")&&(this.rendered=U.jqx.get(e,"rendered")),U.jqx.hasProperty(e,"exportable")&&(this.exportable=U.jqx.get(e,"exportable")),U.jqx.hasProperty(e,"nullable")&&(this.nullable=U.jqx.get(e,"nullable")),U.jqx.hasProperty(e,"columnGroup")&&(this.columngroup=U.jqx.get(e,"columnGroup")),!e instanceof String&&"string"!=typeof e)for(var t in e)if(!this.hasOwnProperty(t)&&!this.hasOwnProperty(t.toLowerCase()))throw i.host.remove(),new Error("jqxDataTable: Invalid property name - "+t+".")},this._initfields(e),this}U.jqx.jqxWidget("jqxDataTable","",{}),U.extend(U.jqx._jqxDataTable.prototype,{defineInstance:function(){var e={altRows:!1,aggregatesHeight:34,autoShowLoadElement:!0,autoRowHeight:!0,columnsHeight:36,columns:[],columnGroups:null,columnsResize:!1,columnsReorder:!1,dataview:null,disabled:!1,editable:!1,editSettings:{saveOnPageChange:!0,saveOnBlur:!0,saveOnSelectionChange:!0,cancelOnEsc:!0,saveOnEnter:!0,editSingleCell:!1,editOnDoubleClick:!0,editOnF2:!0},enableHover:!0,enableBrowserSelection:!1,filterHeight:35,filterable:!1,filterMode:"default",groupsRenderer:null,groups:new Array,headerZIndex:359,height:null,handleKeyboardNavigation:null,indentWidth:25,initRowDetails:!1,loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed.",localization:null,pagerHeight:40,pageSize:10,pageSizeOptions:["5","10","20"],pageable:!1,pagerPosition:"bottom",pagerMode:"default",pageSizeMode:"default",pagerButtonsCount:5,pagerRenderer:null,ready:null,rendertoolbar:null,rowDetails:!1,renderStatusBar:null,rendered:null,rendering:null,rtl:!1,sortable:!1,showtoolbar:!1,showstatusbar:!1,statusBarHeight:34,serverProcessing:!1,selectionMode:"multiplerows",scrollBarSize:U.jqx.utilities.scrollBarSize,touchScrollBarSize:U.jqx.utilities.touchScrollBarSize,showAggregates:!1,showHeader:!0,maxHeight:999999,maxWidth:999999,autoBind:!0,beginEdit:null,endEdit:null,autokoupdates:!0,columnsVirtualization:!1,exportSettings:{columnsHeader:!0,hiddenColumns:!1,serverURL:null,characterSet:null,collapsedRecords:!1,recordsInView:!0,fileName:"jqxDataTable"},source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},toolbarHeight:34,tableZIndex:369,_updating:!1,touchmode:"auto",enableSanitizeAll:!1,width:null,that:this,incrementalSearch:!0,events:["bindingComplete","sort","filter","pageChanged","pageSizeChanged","rowClick","rowDoubleClick","cellValueChanged","rowBeginEdit","rowEndEdit","rowSelect","rowUnselect","rowCheck","rowUncheck","columnResized","columnReordered","rowExpand","rowCollapse","cellBeginEdit","cellEndEdit"]};return this===U.jqx._jqxDataTable.prototype||(U.extend(!0,this,e),this.that=this),e},createInstance:function(e){var s=this;if(13!=U.jqx.utilities.scrollBarSize&&(s.scrollBarSize=U.jqx.utilities.scrollBarSize),s.isMaterialized()&&(g=(p=window.getComputedStyle(s.element)).getPropertyValue("--jqx-grid-column-height"),p=p.getPropertyValue("--jqx-scrollbar-size"),g&&36===this.columnsHeight&&(s.columnsHeight=parseInt(g))),p&&(s.scrollbarsize=p,U.jqx.utilities.scrollBarSize=p),"table"==s.element.nodeName.toLowerCase()||0<U(s.element).children("table").length){for(var t=s.host.find("tbody tr"),i=s.host.find("th"),r=new Array,o=(0===i.length&&(i=t[0],t.splice(0,1)),s.localizestrings&&(s.localizestrings(),null!=s.localization&&s.localizestrings(s.localization,!1)),[]),l=0;l<t.length;l++){for(var a=t[l],n={},d=0;d<i.length;d++){var h,c=U.trim(U(i[d]).text()),u=(0===l&&(h={name:c},s.columns[d]&&s.columns[d].cellsFormat&&(-1==(u=s.columns[d].cellsFormat.toLowerCase()).indexOf("p")&&-1==u.indexOf("c")&&-1==u.indexOf("n")&&-1==u.indexOf("f")||(h.type="number"),-1==u.indexOf("d")&&-1==u.indexOf("m")&&-1==u.indexOf("y")&&-1==u.indexOf("h")&&-1==u.indexOf("m")&&-1==u.indexOf("s")&&-1==u.indexOf("t")||(h.type="date")),r.push(h)),U(a).find("td:eq("+d+")"));r[d].type?(h=s.getvaluebytype(U.trim(u.text()),r[d]),n[c]=h):n[c]=U.trim(u.text())}o[o.length]=n}s.host.wrap("<div></div>");var g=s.host.parent(),p=s.host.data();p.jqxDataTable.host=g,p.jqxDataTable.element=g[0],s.host.parent()[0].id=s.element.id;try{s.host.parent()[0].style=s.element.style}catch(e){}s.element=g[0],s.host=g,s.host.data(p);g=new U.jqx.dataAdapter({dataFields:r,localdata:o,datatype:"array"});s.source=g}s.source&&!s.source.dataBind&&(s.source=new U.jqx.dataAdapter(s.source));p=s.source._source.datafields;p&&0<p.length&&(s._camelCase=void 0!==s.source._source.dataFields,s.selectionMode=s.selectionMode.toLowerCase()),null==s.host.attr("tabindex")&&s.host.attr("tabindex","0"),s.host.attr("role","grid"),s.host.attr("align","left"),s.host.addClass(s.toTP("jqx-datatable")),s.host.addClass(s.toTP("jqx-grid")),s.host.addClass(s.toTP("jqx-reset")),s.host.addClass(s.toTP("jqx-rc-all")),s.host.addClass(s.toTP("jqx-widget")),s.host.addClass(s.toTP("jqx-widget-content")),s._testmodules()||(s.render(!0),U.jqx.utilities.resize(s.host,function(){var e=U(window).width(),t=U(window).height(),i=s.host.width(),r=s.host.height();s._lastHostWidth==i&&s._lastHostHeight==r||s._updatesize(s._lastHostWidth!=i,s._lastHostHeight!=r),s._lastWidth=e,s._lastHeight=t,s._lastHostWidth=i,s._lastHostHeight=r}))},getvaluebytype:function(e,t){var i,r,s=e;if(null==e)return e;if(0<=(e=0<=(e=","==this.gridlocalization.decimalseparator&&0<=e.indexOf(this.gridlocalization.decimalseparator)?e.replace(this.gridlocalization.decimalseparator,"."):e).indexOf(this.gridlocalization.currencysymbol)?e.replace(this.gridlocalization.currencysymbol,""):e).indexOf(this.gridlocalization.percentagesymbol)&&(e=e.replace(this.gridlocalization.percentagesymbol,"")),U.isArray(e)&&"array"!=t.type){for(var o=0;o<e.length;o++)e[o]=this.getvaluebytype(e[o],t);return e}return"date"==t.type?"NaN"==e?e="":(i=new Date(e),null==(e=("NaN"==(i="string"==typeof e&&t.format&&null!=(r=U.jqx.dataFormat.parsedate(e,t.format))?r:i).toString()||"Invalid Date"==i.toString())&&U.jqx.dataFormat?U.jqx.dataFormat.tryparsedate(e):i)&&(e=s)):"float"==t.type||"number"==t.type||"decimal"==t.type?"NaN"==e?e="":(e=parseFloat(e),isNaN(e)&&(e=s)):"int"==t.type||"integer"==t.type?(e=parseInt(e),isNaN(e)&&(e=s)):"bool"!=t.type&&"boolean"!=t.type||(null!=e&&null!=e.toLowerCase&&("false"==e.toLowerCase()?e=!1:"true"==e.toLowerCase()&&(e=!0)),e=1==e||(0!=e||""===e)&&""),e},_builddataloadelement:function(){this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=U('<div class="jqx-datatable-load" style="z-index: 99998; background-color:rgba(50,50,50,0.1); overflow: hidden; position: absolute;"></div>');var e=U('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"></div><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>");e.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),e.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(e),this.dataloadelement.width(this.width),this.dataloadelement.height(this.height),this.host.prepend(this.dataloadelement),""!=this.source._source.url&&(e=!1,(e="auto"!==this.height&&null!==this.height&&!this.autoheight||999999!=this.maxHeight?e:!0)?(this.host.height(100),this.dataloadelement.height(100)):(this.host.height(this.height),this.dataloadelement.height(this.height)),e=!1,(e="auto"!==this.width&&null!==this.width&&!this.autoWidth?e:!0)?(this.host.width(300),this.dataloadelement.width(300)):(this.host.width(this.width),this.dataloadelement.width(this.width)))},_measureElement:function(e){var t=U("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");t.addClass(this.toTP("jqx-widget")),U(document.body).append(t),"cell"==e?this._cellheight=t.height():this._columnheight=t.height(),t.remove()},_testmodules:function(){function e(){""!=t.length&&(t+=",")}var t="",i=this;if(this.host.jqxScrollBar||(e(),t+=" jqxscrollbar.js"),this.host.jqxButton||(e(),t+=" jqxbuttons.js"),U.jqx.dataAdapter||(e(),t+=" jqxdata.js"),""!=t||this.editable||this.filterable||this.pageable){var r=[];if(this.filterable&&"simple"!=this.filterMode||"advanced"==this.pagerMode&&this.pageable)switch("dropdownlist"){case"checkbox":i.host.jqxCheckBox||r.checkbox||(r.checkbox=!0,e(),t+=" jqxcheckbox.js");break;case"dropdownlist":i.host.jqxDropDownList||r.dropdownlist?i.host.jqxListBox||r.listbox||(e(),r.listbox=!0,t+=" jqxlistbox.js"):(e(),r.dropdownlist=!0,t+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}if(""!=t)throw new Error("jqxDataTable: Missing references to the following module(s): "+t)}return!1},focus:function(){try{this.wrapper.focus(),this.host.focus();var e=this;setTimeout(function(){e.wrapper.focus(),e.host.focus()},25),this.focused=!0}catch(e){}},hiddenParent:function(){return U.jqx.isHidden(this.host)},isBindingCompleted:function(){return!this._loading},_updatesize:function(e,t){var i,r,s,o;this._loading||(r=(i=this).host.width(),s=i.host.height(),i._oldWidth||(i._oldWidth=r),i._oldHeight||(i._oldHeight=s),null!=i._resizeTimer&&(clearTimeout(i._resizeTimer),i._resizeTimer=null),(o=function(){i._resizeTimer&&clearTimeout(i._resizeTimer),i.resizingGrid=!0,U.jqx.isHidden(i.host)||(i._updatecolumnwidths(),i.refresh(),i._oldWidth=r,i._oldHeight=s,i.resizingGrid=!1)})(),i._resizeTimer=setTimeout(function(){var e=i.host.width(),t=i.host.height();i._oldWidth==e&&i._oldHeight==t||o()},300))},resize:function(e,t){null!=e&&(this.width=e),null!=t&&(this.height=t),this._updatecolumnwidths(),this.refresh()},isTouchDevice:function(){if(null!=this.touchDevice)return this.touchDevice;var e=U.jqx.mobile.isTouchDevice();return this.touchDevice=e,1==this.touchmode?(e=!0,U.jqx.mobile.setMobileSimulator(this.table[0]),this.touchDevice=e):0==this.touchmode&&(e=!1),e&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollBarSize=this.touchScrollBarSize),e},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(e,t){if(this._cellscache=new Array,U.jqx.dataFormat&&U.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);if(null!=e){for(var i in e)i.toLowerCase()!==i&&(e[i.toLowerCase()]=e[i]);for(var r=["pagergotopagestring","pagershowrowsstring","pagerrangestring","pagernextbuttonstring","pagerpreviousbuttonstring","pagerfirstbuttonstring","pagerlastbuttonstring","toppagerstring","firstDay","days","months","AM","PM","patterns","percentsymbol","currencysymbol","currencysymbolposition","decimalseparator","thousandsseparator","filterapplystring","filteraddnew","filtercancelstring","filterclearstring","filterstring","filterstringcomparisonoperators","filternumericcomparisonoperators","filterdatecomparisonoperators","filterbooleancomparisonoperators","emptydatastring","filterselectstring","todaystring","clearstring","validationstring","loadtext","filtersearchstring","loadingErrorMessage"],s=0;s<r.length;s++){var o=r[s];void 0!==e[o]&&(this.gridlocalization[o]=e[o])}e.loadingErrorMessage&&(this.loadingErrorMessage=e.loadingErrorMessage),!1!==t&&(this._builddataloadelement(),U(this.dataloadelement).css("visibility","hidden"),U(this.dataloadelement).css("display","none"))}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",filterapplystring:"Apply",filtercancelstring:"Cancel",filterclearstring:"Clear Filter",filterstring:"advanced",filtersearchstring:"Search:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed."}},_updateScrollbars:function(e){var t=!1,i=("auto"!==this.width&&null!==this.width&&!this.autowidth||999999!=this.maxWidth||(t=!0),parseInt(this.scrollBarSize)),r=this.table?this.table.height():0,s=0,o="inherit",l=this.vScrollBar[0].style.visibility,a=(this.hScrollBar[0].style.visibility,e=e||this.host.height(),this.columnGroups?e-=this.showHeader?this.columnsheader.height():0:e-=this.showHeader?this.columnsHeight:0,this.filterable&&(e-=this.filter.height()),this.pageable&&(e-=this.pagerHeight,"both"===this.pagerPosition&&(e-=this.pagerHeight)),this.showtoolbar&&(e-=this.toolbarHeight),this.showstatusbar&&(e-=this.statusBarHeight),this.showAggregates&&(e-=this.aggregatesHeight),!1),l=(!(a="auto"!==this.height&&null!==this.height&&!this.autoheight||999999!=this.maxHeight?a:!0)&&e<r&&(0<this.source.records.length||this.source.hierarchy&&0<this.source.hierarchy.length)?(this.vScrollBar[0].style.visibility=o,s=4+parseInt(i),this.vScrollBar.jqxScrollBar({max:r-e})):this.vScrollBar[0].style.visibility="hidden",l!=this.vScrollBar[0].style.visibility&&(this._updatecolumnwidths(),r!=(l=this.table.height())&&(r=l,!a&&e<r&&(0<this.source.records.length||this.source.hierarchy&&0<this.source.hierarchy.length)&&(this.vScrollBar[0].style.visibility=o,s=4+parseInt(i),this.vScrollBar.jqxScrollBar({max:r-e})))),0==this.scrollBarSize&&(s=0),this.table?this.table.width():0),n=(3<l&&(l-=3),parseInt(this.host.css("border-left-width"))+parseInt(this.host.css("border-right-width"))),d=n+this.host.width()-s;d<l&&!t?(this.hScrollBar[0].style.visibility=o,this.hScrollBar.jqxScrollBar({max:l-d}),s=4+parseInt(i),0==i&&(s=0),a||(e-s+4<r&&(0<this.source.records.length||this.source.hierarchy&&0<this.source.hierarchy.length)&&(this.hScrollBar.jqxScrollBar({max:n+l-d}),t="hidden"===this.vScrollBar[0].style.visibility,this.vScrollBar[0].style.visibility=o,this._updatecolumnwidths(),t&&this.hScrollBar.jqxScrollBar({max:l-d+s+n}),3<(i=this.table?this.table.width():0)&&(i-=3),i!=l&&i<d&&(this.hScrollBar.jqxScrollBar({max:n+i-d}),this.hScrollBar[0].style.visibility="hidden",s=0)),this.vScrollBar.jqxScrollBar({max:r-e+s}))):this.hScrollBar[0].style.visibility="hidden",0===this.source.records.length&&this.source.hierarchy&&0===this.source.hierarchy.length&&(this.vScrollBar[0].style.visibility="hidden",this.bottomRight[0].style.visibility="hidden"),"hidden"==this.vScrollBar[0].style.visibility&&0!=this.vScrollInstance.value&&this.vScrollInstance.setPosition(0)},_measureElementWidth:function(e){var e=U("<span style='visibility: hidden; white-space: nowrap;'>"+e+"</span>"),t=(e.addClass(this.toTP("jqx-widget")),e.addClass(this.toTP("jqx-grid")),e.addClass(this.toTP("jqx-grid-column-header")),e.addClass(this.toTP("jqx-widget-header")),U(document.body).append(e),e.outerWidth()+20);return e.remove(),t},_arrangeAutoHeight:function(e){var t,i,r;return e=e||0,!("auto"!==this.height&&null!==this.height&&!this.autoheight)&&(i=this.table.height(),t=0,this.columnGroups?t+=this.showHeader?this.columnsheader.height():-1:t+=this.showHeader?this.columnsHeight:-1,t=(t=(t=(t+=this.showstatusbar?this.statusBarHeight:0)+(this.showAggregates?this.aggregatesHeight:0))+(this.showtoolbar?this.toolbarHeight:0))+(this.pageable?this.pagerHeight:0),"both"===this.pagerPosition&&(t+=this.pageable?this.pagerHeight:0),t+=i,this.filterable&&(i=this.filter.find(".filterrow"),r=1,0<this.filter.find(".filterrow-hidden").length&&(r=0),t+=this.filterHeight-1+this.filterHeight*i.length*r),t+e>this.maxHeight?this.host.height(this.maxHeight):this.host.height(t+e),!0)},escapeHTML:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]})},sanitizeHTML:function(e){var t=this,i=new RegExp("<s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)[^>]*>(.*?)<s*/s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)>","ig");return String(e).replace(i,function(e){return t.escapeHTML(e)})},escape_HTML:function(e){return this.enableSanitizeAll||e&&(0<=e.indexOf("onclick")||0<=e.indexOf("onload")||0<=e.indexOf("onerror"))?this.escapeHTML(e):this.sanitizeHTML(e)},_arrangeAutoWidth:function(e){if(e=e||0,"auto"===this.width||null===this.width||this.autowidth){for(var t=0,i=0;i<this.columns.records.length;i++){var r=this.columns.records[i].width;this.columns.records[i].hidden||(t+="auto"==r?r=this._measureElementWidth(this.escape_HTML(this.columns.records[i].text)):r)}var s=t;return s+e>this.maxWidth?this.host.width(this.maxWidth):this.host.width(s+e),!0}return!1},_measureTopAndHeight:function(){var e,t,i=this.host.height(),r=0;return this.showtoolbar&&(r+=this.toolbarHeight,i-=parseInt(this.toolbarHeight)),this.filterable&&(e=this.filter.find(".filterrow"),t=1,0<this.filter.find(".filterrow-hidden").length&&(t=0),r+=this.filterHeight,i-=parseInt(this.filterHeight),t=1==t?e.length:0,r+=this.filterHeight*t,i-=this.filterHeight*t),this.pageable&&"bottom"!=this.pagerPosition&&(r+=parseInt(this.pagerHeight)+1,i>this.pagerHeight&&"both"===this.pagerPosition&&(i-=parseInt(this.pagerHeight))),{top:r,height:i}},_arrange:function(){var t,e,i,r,s,o,l,a,n,d,h;this.table&&(this._arrangeAutoHeight(),this._arrangeAutoWidth(),r=this.host.width(),l=o=this.host.height(),this.pageable?"bottom"===this.pagerPosition?(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="inherit"):"both"===this.pagerPosition?(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="inherit"):"top"===this.pagerPosition&&(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="hidden"):(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="hidden"),s=0,this.showtoolbar?(this.toolbar.width(r),this.toolbar.height(this.toolbarHeight-1),this.toolbar.css("top",0),s+=this.toolbarHeight,o-=parseInt(this.toolbarHeight)):this.toolbar[0].style.height="0px",this.filterable&&(this.filter.width(r),this.filter.css("top",s),i=this.filter.find(".filterrow"),e=1,0<this.filter.find(".filterrow-hidden").length&&(e=0),this.filter.height(this.filterHeight-1+this.filterHeight*i.length*e),s+=this.filterHeight,o-=parseInt(this.filterHeight),e=1==e?i.length:0,s+=this.filterHeight*e,o-=this.filterHeight*e),this.showstatusbar?(this.statusbar.width(this.table?Math.max(r,this.table.width()):r),this.statusbar.height(this.statusBarHeight-1)):this.statusbar[0].style.height="0px",this.showAggregates?this.aggregates.height(this.aggregatesHeight-1):this.aggregates[0].style.height="0px",this.pageable&&"bottom"!=this.pagerPosition?(this.toppager[0].style.width=r+"px",this.toppager[0].style.height=parseInt(this.pagerHeight)+"px",this.toppager[0].style.top=parseInt(s)+"px",s+=parseInt(this.pagerHeight)+1,o>this.pagerHeight&&(o-=parseInt(this.pagerHeight))):(this.toppager[0].style.width!=r+"px"&&(this.toppager[0].style.width=parseInt(r)+"px"),this.toppager[0].style.height!=this.pagerHeight+"px"&&(this.toppager[0].style.height=parseInt(this.pagerHeight)+"px"),this.toppager[0].style.top!=s+"px"&&(this.toppager[0].style.top=s+"px"),i="bottom"!=this.pagerPosition?this.pagerHeight:0,this.content[0].style.top!=s+i+"px"&&(this.content[0].style.top=s+this.pagerHeight+"px")),this._updateScrollbars(l),t=parseInt(this.scrollBarSize),e=2,"hidden"!=this.vScrollBar[i=0].style.visibility&&(i=t+4),"hidden"!=this.hScrollBar[0].style.visibility&&(e=t+4+2),0==t&&(e=i=0),this.showAggregates&&("hidden"===this.hScrollBar[0].style.visibility?this.aggregates.width(this.table?Math.max(r,this.table.width())+4:r):this.aggregates.width("auto")),"hidden"==this.vScrollBar[0].style.visibility&&"hidden"==this.hScrollBar[0].style.visibility||(l=this._arrangeAutoHeight(e-2),n=this._arrangeAutoWidth(i+1),(l||n)&&(r=this.host.width(),this.toppager[0].style.width=parseInt(r)+"px",this.toolbar[0].style.width=parseInt(r)+"px",this.statusbar[0].style.width=parseInt(r)+"px",this.filter[0].style.width=parseInt(r)+"px"),l&&(s=(n=this._measureTopAndHeight()).top,o=n.height)),l=0,this.pageable&&(l=this.pagerHeight,"top"!=this.pagerPosition&&(e+=this.pagerHeight)),this.showAggregates&&(e+=this.aggregatesHeight,l+=this.aggregatesHeight),this.showstatusbar&&(e+=this.statusBarHeight,l+=this.statusBarHeight),this.hScrollBar[0].style.height!=t+"px"&&(this.hScrollBar[0].style.height=parseInt(t)+"px"),this.hScrollBar[0].style.top==s+o-4-t-l+"px"&&"0px"==this.hScrollBar[0].style.left||(this.hScrollBar[0].style.top=s+o-4-t-l-1+"px",this.hScrollBar[0].style.left="0px"),n=this.hScrollBar[0].style.width,a=d=!1,0==i?n!=r-2+"px"&&(this.hScrollBar[0].style.width=r-2+"px",d=!0):n!=r-t-4+"px"&&(this.hScrollBar[0].style.width=r-t-4+"px",d=!0),this.vScrollBar[0].style.width!=t+"px"&&(this.vScrollBar[0].style.width=t+"px",a=!0),this.vScrollBar[0].style.height!=parseInt(o)-e+"px"&&(this.vScrollBar[0].style.height=parseInt(o)-e+"px",a=!0),this.vScrollBar[0].style.left==parseInt(r)-parseInt(t)-4+"px"&&this.vScrollBar[0].style.top==s+"px"||(this.vScrollBar[0].style.top=s+"px",this.vScrollBar[0].style.left=parseInt(r)-parseInt(t)-4+"px"),this.rtl&&(this.vScrollBar.css({left:"0px",top:s}),"hidden"!=this.vScrollBar.css("visibility")&&this.hScrollBar.css({left:t+2})),(n=this.vScrollInstance).disabled=this.disabled,(h=this.hScrollInstance).disabled=this.disabled,d&&h.refresh(),a&&n.refresh(),(d=function(e){"hidden"!=e.vScrollBar[0].style.visibility&&"hidden"!=e.hScrollBar[0].style.visibility?(e.bottomRight[0].style.visibility="inherit",e.bottomRight[0].style.left=1+parseInt(e.vScrollBar.css("left"))+"px",e.bottomRight[0].style.top=parseInt(e.hScrollBar.css("top"))+"px",e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight[0].style.width=parseInt(t)+3+"px",e.bottomRight[0].style.height=parseInt(t)+4+"px",e.showAggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(t)+4+e.aggregatesHeight),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.aggregatesHeight}))):e.bottomRight[0].style.visibility="hidden"})(this),this.content[0].style.width!=r-i+"px"&&(this.content[0].style.width=r-i+"px"),this.content[0].style.height!=o-e+3+"px"&&(this.content[0].style.height=o-e+3+"px"),this.content[0].style.top!=s+"px"&&(this.content[0].style.top=parseInt(s)+"px"),this.rtl&&(this.content.css("left",i),this.filter&&0<this.filter.children().length&&U(this.filter.children()).css("left",i),this.table&&(h=this.table.width())<r-i&&(this.content.css("left",r-h+2),this.filter&&0<this.filter.children().length&&U(this.filter.children()).css("left",r-h+2))),this.showAggregates&&(this.aggregates.css("top",s+o-this.aggregatesHeight-(this.pageable?this.pagerHeight:0)-(this.showstatusbar?this.statusBarHeight+1:0)),this.rtl&&this.aggregates.css("left","0px"),"hidden"!=this.hScrollBar.css("visibility")&&(this.hScrollBar.css({top:s+o-4-t-l+this.aggregatesHeight+"px"}),this.aggregates.css("top",1+s+o-t-5-this.aggregatesHeight-(this.pageable?this.pagerHeight:0)-(this.showstatusbar?this.statusBarHeight+1:0))),d(this)),this.showstatusbar&&(this.statusbar.css("top",s+o-this.statusBarHeight-(this.pageable?this.pagerHeight:0)),this.rtl&&("hidden"==this.hScrollBar.css("visibility")?this.statusbar.css("left",this.content.css("left")):this.statusbar.css("left","0px"))),this.pageable?(this.pager[0].style.width=r+"px",this.pager[0].style.height=this.pagerHeight+"px",this.pager[0].style.top=parseInt(s)+parseInt(o)-parseInt(this.pagerHeight)-1+"px"):this.pager[0].style.height="0px",this.vScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,this.hScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,r!=parseInt(this.dataloadelement[0].style.width)&&(this.dataloadelement[0].style.width=this.element.style.width),o!=parseInt(this.dataloadelement[0].style.height)&&(this.dataloadelement[0].style.height=this.element.style.height),this._hostwidth=r)},scrollOffset:function(e,t){if(0==arguments.length||null!=e&&"object"==typeof e&&!e.top)return{left:this.hScrollBar.jqxScrollBar("value"),top:this.vScrollBar.jqxScrollBar("value")};null!=e&&"object"==typeof e&&(t=e.left,e=e.top),null!=e&&null!=t&&null!=e&&null!=t&&(this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(e){null!=e&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){null!=e&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginUpdate:function(){this._updating=!0,this._datachanged=!1},endUpdate:function(e){(this._updating=!1)!==e&&(this._rendercolumnheaders(),this.refresh())},updating:function(){return this._updating},databind:function(e,w,v){var y,x,t,i;!0!==this.loadingstate&&(y=window,"block"==this.host.css("display")&&(this.autoShowLoadElement?(U(this.dataloadelement).css("visibility","visible"),U(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height())):(U(this.dataloadelement).css("visibility","hidden"),U(this.dataloadelement).css("display","none"))),x=this,null!=(e=null==e?{}:e).sortcomparer&&null!=e.sortcomparer||(e.sortcomparer=null),null!=e.filter&&null!=e.filter||(e.filter=null),null!=e.sort&&null!=e.sort||(e.sort=null),null!=e.data&&null!=e.data||(e.data=null),null!=e&&(null!=e._source?e._source:e).url,this.dataview=this.dataview||new U.jqx.dataView,this.dataview.pageable=this.pageable,this.dataview.grid=this,x.initializedcall||(e._source&&this.sortable&&(null!=e._source.sortcolumn&&(this.sortcolumn=e._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=e._source.sortcolumn,e._source.sortcolumn=null),null!=e._source.sortdirection&&(this.dataview.sortfielddirection=e._source.sortdirection,i="a"==(t=e._source.sortdirection)||"asc"==t||"ascending"==t||1==t,this.sortdirection=null!=t?{ascending:i,descending:!i}:{ascending:!1,descending:!1})),this.pageable&&e._source&&(null!=e._source.pagenum&&(this.dataview.pagenum=e._source.pagenum),null!=e._source.pagesize?(this.pageSize=e._source.pagesize,this.dataview.pagesize=e._source.pagesize):(this.dataview.pagesize=e._source.pagesize,null==this.dataview.pagesize&&(this.dataview.pagesize=this.pageSize))),this.sortable&&(e.sortcolumn&&(this.dataview.sortfield=e.sortcolumn),e.sortdirection&&(this.dataview.sortfielddirection=e.sortdirection))),this._loading=!0,this.dataview.update=function(e){x._loading=!1,x.rowsByKey=new Array;var t,i,r,s=x.source._source.datafields;x.groups&&0<x.groups.length&&(o=Object.prototype.toString,t=x.groups[0],Object.prototype.toString="function"==typeof t?t:function(){return this[t]},x.source.records.sort||(i=new Array,r=0,U.each({},function(){i[0+r++]=this})),x.source.records.sort(function(e,t){if(void 0===t&&(t=null),null===(e=void 0===e?null:e)&&null===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var i=0,r=0;if(e&&e.uid&&(i=e.uid),t&&t.uid&&(r=t.uid),e=e.toString(),t=t.toString(),U.jqx.dataFormat.isNumber(e)&&U.jqx.dataFormat.isNumber(t))return e<t?-1:t<e?1:0;if(U.jqx.dataFormat.isDate(e)&&U.jqx.dataFormat.isDate(t))return e<t?-1:t<e?1:0;U.jqx.dataFormat.isNumber(e)||U.jqx.dataFormat.isNumber(t)||(e=String(e).toLowerCase(),t=String(t).toLowerCase());try{if(e<t)return-1;if(t<e)return 1}catch(e){}if("number"==typeof i){if(i<r)return-1;if(r<i)return 1}return 0}),Object.prototype.toString=o);for(var o,l,a=0;a<x.source.records.length;a++){var n,d=x.source.records[a];if((x.rowsByKey[d.uid]=d).records&&0<d.records.length&&(n=function(e){for(var t=0;t<e.length;t++)e[t]&&(x.rowsByKey[e[t].uid]=e[t],e[t].records&&0<e[t].records.length&&n(e[t].records))})(d.records),0===a){var h=!1;if(s)for(var c,u,g,p=0;p<s.length;p++)!s[p]||s[p].type||(h=!0,s[p].type="string",null!=(c=d[s[p].name])&&(!0!==c&&!1!==c||(s[p].type="boolean"),(null!=c&&-1<c.toString().indexOf(x.gridlocalization.currencysymbol)||-1<c.toString().indexOf(x.gridlocalization.percentsymbol))&&(u=c.toString().split(" ").length,g=new Number(x._toNumber(c.toString())),isNaN(g)||1!=u||(s[p].type="number")),(U.jqx.dataFormat.isNumber(c)||!isNaN(parseFloat(c))&&isFinite(c))&&(s[p].type="number"),U.jqx.dataFormat.isDate(c)&&(s[p].type="date")));if(h)for(p=0;p<s.length;p++){var f,m=x.source.getvaluebytype(d[s[p].name],s[p]);null!=m&&"number"==s[p].type&&(f=m,f=new Number(x._toNumber(f.toString())),isNaN(f)||(m=f)),d[s[p].name]=m}}}"pager"===w||"filter"===w||"sort"===w?x.refresh():x._render(),x.autoShowLoadElement&&!x._loading&&(U(x.dataloadelement).css("visibility","hidden"),U(x.dataloadelement).css("display","none")),x.pageable&&!x.disabled&&x.pagernexttop&&(x.pagerfirsttop.jqxButton({disabled:!1}),x.pagerfirstbottom.jqxButton({disabled:!1}),x.pagerlasttop.jqxButton({disabled:!1}),x.pagerlastbottom.jqxButton({disabled:!1}),x.pagernexttop.jqxButton({disabled:!1}),x.pagerprevioustop.jqxButton({disabled:!1}),x.pagershowrowscombotop.jqxDropDownList&&"advanced"==x.pagerMode&&(x.pagershowrowscombotop.jqxDropDownList({disabled:!1}),x.pagershowrowscombobottom.jqxDropDownList({disabled:!1})),x.pagernextbottom.jqxButton({disabled:!1}),x.pagerpreviousbottom.jqxButton({disabled:!1})),x._updateTouchScrolling(),x._raiseEvent("bindingComplete"),v&&v(),x.initializedcall||(x.initializedcall=!0,x.isInitialized=!0,x.ready&&x.ready(),(null!=x.width&&-1!=x.width.toString().indexOf("%")||null!=x.height&&-1!=x.height.toString().indexOf("%"))&&x._updatesize(!0),x._rendercelltexts&&x._rendercelltexts(),x._gridRenderElement&&(U(x._gridRenderElement).show("slow"),o=6e3+Math.floor(4e3*Math.random()+1),l=String.fromCharCode(83,69,84).toLowerCase()+"-"+String.fromCharCode(84,73,77,69,79,85,84).toLowerCase(),y[U.camelCase(l)](function(){U(x._gridRenderElement).hide("slow",function(){U(x._gridRenderElement).remove()})},o)),"hidden"==x.host.css("visibility")&&(U.jqx.browser.msie&&U.jqx.browser.version,"visible"==x.vScrollBar.css("visibility")&&x.vScrollBar.css("visibility","inherit"),"visible"==x.hScrollBar.css("visibility")&&x.hScrollBar.css("visibility","inherit"),x._intervalTimer=setInterval(function(){"visible"==x.host.css("visibility")&&(x._updatesize(!0),clearInterval(x._intervalTimer))},100)))},this.dataview.databind(e))},_raiseEvent:function(e,t){var i=t=null==t?{owner:null}:t,e=(i.owner=this,new U.Event(e)),i=(e.owner=this,e.args=i,this.host.trigger(e));return t=e.args,i},ensureColumnVisible:function(e){for(var t,i,r=0,s=0,o=0;o<this.columns.records.length;o++){if(this.columns.records[o].datafield==e){r+=this.columns.records[o].width,s=this.columns.records[o].width;break}r+=this.columns.records[o].width}"hidden"!=this.hScrollBar.css("visibility")&&(i=(t=this.hScrollBar.jqxScrollBar("value"))+this.host.width(),r-s<t?this.hScrollBar.jqxScrollBar("setPosition",r-s):i<r&&this.hScrollBar.jqxScrollBar("setPosition",t+r-i))},ensurerowvisiblebykey:function(e){if("hidden"===this.vScrollBar[0].style.visibility)return!1;e=this._getuirow(e);if(e){var t=this.vScrollBar.jqxScrollBar("value"),i=this.host.height(),r=0,r=(this.columnGroups?r+=this.showHeader?this.columnsheader.height():0:r+=this.showHeader?this.columnsHeight:0,this.filterable&&(r+=this.filter.height()),this.pageable&&"top"===this.pagerPosition&&(r+=this.pagerHeight),this.showtoolbar&&(r+=this.toolbarHeight),i-=r,this.pageable&&"top"!==this.pagerPosition&&(i-=this.pagerHeight),this.showstatusbar&&(i-=this.statusBarHeight),this.showAggregates&&(i-=this.aggregatesHeight),"hidden"!=this.hScrollBar.css("visibility")&&(i-=20),this.host.coord().top+r),s=t,o=i+s,t=e.coord().top+t-r,r=(t=Math.round(t))+e.outerHeight(),r=Math.round(r);if(0===Math.round(e.position().top))return this.vScrollBar.jqxScrollBar("setPosition",0);var l=U(this._table.children()[1]).children().length-1,l=this._getuikey(l),l=this._getuirow(l);return l&&l[0]===e[0]?this.vScrollBar.jqxScrollBar("setPosition",this.vScrollBar.jqxScrollBar("max")):t<s?(l=t-e.height(),this.vScrollBar.jqxScrollBar("setPosition",l=l<0?0:l)):o<r?this.vScrollBar.jqxScrollBar("setPosition",4+r-i):void 0}},ensureRowVisible:function(e){e=this._getkey(e);this.ensurerowvisiblebykey(e)},getColumn:function(e){var t=null;return this.columns.records&&U.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}),t},_setcolumnproperty:function(e,t,i){if(null==e||null==t||null==i)return null;var r=t,s=(t=t.toLowerCase(),this.getColumn(e));if(null!=s){s[t];s[t]=i,s[r]=i;r=this.getColumn(e);switch(null!=r&&(r[t]=i),t){case"filteritems":case"text":case"editable":case"resizable":case"draggable":case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"class":case"width":case"minwidth":case"maxwidth":"align"==t||"text"==t||"class"==t||"hidden"==t||"pinned"==t||"resizable"==t||"renderer"==t?this._rendercolumnheaders():"width"!=t&&"maxwidth"!=t&&"minwidth"!=t||(s._width=null,s._percentagewidth=null,this._updatecolumnwidths()),this.refresh()}}},getColumnProperty:function(e,t){return null==e||null==t?null:(t=t.toLowerCase(),this.getColumn(e)[t])},setColumnProperty:function(e,t,i){this._setcolumnproperty(e,t,i)},hideColumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showColumn:function(e){this._setcolumnproperty(e,"hidden",!1)},updateBoundData:function(e,t){this.databind(this.source,e,t)},refresh:function(e){1==e||U.jqx.isHidden(this.host)||(this.vScrollInstance.setPosition(0),this._renderrows(),this.updatepagerdetails(),this._arrange(),this._arrangeFilterRow&&this._arrangeFilterRow(),this._renderhorizontalscroll(),this._showicons(),this.showAggregates&&this._updateaggregates(),this._updateTouchScrolling())},_rendercelltexts:function(){var e,t,i;"10208878-FCD1-4EC7-9249-BA0F153A5DE8"!==U.jqx.credits&&(e="www.jqwidgets.com",-1==location.hostname.indexOf(e.substring(4))&&(this._gridRenderElement&&U(this._gridRenderElement).remove(),i=String.fromCharCode(83,80,65,78),t=String.fromCharCode(72,84,84,80,58,47,47),(i=document.createElement(i)).id=U.jqx.utilities.createId(),i.innerHTML=e,i.style.position="absolute",i.style.right="5px",i.style.bottom="5px",i.style.color="#909090",i.style.cursor="pointer",i.style.zIndex="999999",i.style.display="none",i.style.fontSize="9px",i.onmousedown=function(){open(t+e)},this.content[0].appendChild(i),this._gridRenderElement=i))},_updateTouchScrolling:function(){var e,t,i,r=this.that;r.isTouchDevice()&&(e=U.jqx.mobile.getTouchEventName("touchstart"),t=U.jqx.mobile.getTouchEventName("touchend"),i=U.jqx.mobile.getTouchEventName("touchmove"),r.table&&(r.removeHandler(r.table,e+".touchScroll"),r.removeHandler(r.table,i+".touchScroll"),r.removeHandler(r.table,t+".touchScroll"),r.removeHandler(r.table,"touchcancel.touchScroll"),U.jqx.mobile.touchScroll(r.table[0],Math.max(r.vScrollInstance.max,r.hScrollInstance.max),function(e,t){null!=t&&"hidden"!=r.vScrollBar.css("visibility")&&(r.vScrollInstance.value,r.vScrollInstance.setPosition(t)),null!=e&&"hidden"!=r.hScrollBar.css("visibility")&&(r.hScrollInstance.value,r.hScrollInstance.setPosition(e)),r.scrolled=new Date,r.vScrollInstance.thumbCapture=!0},this.element.id,this.hScrollBar,this.vScrollBar)))},_showicons:function(){if(this.table)for(var e=0;e<this.columns.records.length;e++){var t,i,r=this.columns.records[e];if(U(r.filtericon).hide(),U(r.sortasc).hide(),U(r.sortdesc).hide(),"simple"!==this.filterMode)for(var s=0;s<this.dataview.filters.length;s++)if(this.dataview.filters[s].datafield===r.displayfield){U(r.filtericon).show();break}null!==this.sortcolumn&&this.sortcolumn===r.displayfield&&null!=this.sortdirection&&(this.sortdirection.ascending?U(r.sortasc):U(r.sortdesc)).show(),("left"!=r.align&&"center"!=r.align&&!this.rtl||this.rtl&&"right"!=r.align&&"center"!=r.align)&&(t=U.jqx.isHidden(U(r.filtericon))?0:16,t=(t+=U.jqx.isHidden(U(r.sortasc))?0:16)+(U.jqx.isHidden(U(r.sortdesc))?0:16),i=U(U(U(r.element).children()[0]).children()[0]),this.rtl?0<t?i.css("margin-left",4+t+"px"):i.css("margin-left","4px"):0<t?i.css("margin-right",4+t+"px"):i.css("margin-right","4px"))}},render:function(e){var t="<div style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='toppager' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='filter' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'></div><div id='aggregates' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='statusbar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='pager' style='z-index: 20; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div></div></div>",t=(this.element.innerText="",this.element.innerHTML=t,this.wrapper=this.host.find("#wrapper"+this.element.id),this.content=this.host.find("#content"+this.element.id),this.content.addClass(this.toTP("jqx-reset")),this.host.find("#verticalScrollBar"+this.element.id)),i=this.host.find("#horizontalScrollBar"+this.element.id),r=(this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal")),this.vScrollBar&&this.vScrollBar.jqxScrollBar("destroy"),this.hScrollBar&&this.hScrollBar.jqxScrollBar("destroy"),this.vScrollBar=t.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.hScrollBar=i.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.vScrollBar.css("visibility","hidden"),this.hScrollBar.css("visibility","hidden"),this.vScrollInstance=U.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=U.data(this.hScrollBar[0],"jqxScrollBar").instance,this.filter=this.host.find("#filter"),this.filter[0].id="filter"+this.element.id,this.filter.addClass(this.toTP("jqx-widget-header")),this.filter.addClass(this.toTP("jqx-grid-toolbar")),this.pager=this.host.find("#pager"),this.pager[0].id="pager"+this.element.id,this.toolbar=this.host.find("#toolbar"),this.toolbar[0].id="toolbar"+this.element.id,this.toolbar.addClass(this.toTP("jqx-grid-toolbar")),this.toolbar.addClass(this.toTP("jqx-widget-header")),this.aggregates=this.host.find("#aggregates"),this.aggregates[0].id="aggregates"+this.element.id,this.aggregates.addClass(this.toTP("jqx-grid-statusbar")),this.aggregates.addClass(this.toTP("jqx-widget-header")),this.statusbar=this.host.find("#statusbar"),this.statusbar[0].id="statusbar"+this.element.id,this.statusbar.addClass(this.toTP("jqx-grid-statusbar")),this.statusbar.addClass(this.toTP("jqx-widget-header")),this.pager.addClass(this.toTP("jqx-grid-pager")),this.pager.addClass(this.toTP("jqx-widget-header")),this.toppager=this.host.find("#toppager"),this.toppager.addClass(this.toTP("jqx-grid-pager-top")),this.toppager.addClass(this.toTP("jqx-widget-header")),this.gridtable=null,this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1)),this._builddataloadelement(),this._cachedcolumns=this.columns,this.source.datafields);if(r=null==r&&this.source._source?this.source._source.datafields:r)for(var s=0;s<this.columns.length;s++){var o=this.columns[s];if(o&&o.cellsFormat&&2<o.cellsFormat.length)for(var l=0;l<r.length;l++)if(r[l].name==o.datafield&&!r[l].format){r[l].format=o.cellsFormat;break}}this.databind(this.source),this.showtoolbar&&this.toolbar.css("visibility","inherit"),this.showstatusbar&&this.statusbar.css("visibility","inherit"),this.showAggregates&&this.aggregates.css("visibility","inherit"),this.tableheight=null;var a=this;this.removeHandler(this.content,"scroll"),this.removeHandler(this.content,"mousedown"),this.addHandler(this.content,"scroll",function(e){return a.content&&(a.content[0].scrollTop=0,a.content[0].scrollLeft=0),a.gridcontent&&(a.gridcontent[0].scrollLeft=0,a.gridcontent[0].scrollTop=0),!1}),!0!==e&&this._render()},_render:function(){var e,t,i=this;null==i.dataview||i._loading||(25==i.columnsHeight&&!i.columnGroups||i._measureElement("column"),i.filterable?i.filter[0].style.visibility="inherit":i.filter[0].style.visibility="hidden",i.rowinfo=new Array,i._removeHandlers(),null==i.columns?i.columns=new U.jqx.dataCollection(i.element):i._initializeColumns(),e=t=!1,(t=null!=i.width&&-1!=i.width.toString().indexOf("%")?!0:t)?i.element.style.width=i.width:i.host.width(i.width),(e=null!=i.height&&-1!=i.height.toString().indexOf("%")?!0:e)?i.element.style.height=i.height:i.host.height(i.height),i._lastHostWidth=i.host.width(),i._lastHostHeight=i.host.height(),U.jqx.utilities.html(i.content,""),i.columnsheader=i.columnsheader||U('<div style="overflow: hidden;"></div>'),i.columnsheader.remove(),i.columnsheader.addClass(i.toTP("jqx-widget-header")),i.columnsheader.addClass(i.toTP("jqx-grid-header")),i.showHeader?i.columnsheader&&i.columnsheader.css("display","block"):i.columnsheader.css("display","none"),i.gridcontent=i.gridcontent||U('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),i.gridcontent.remove(),t=i.columnsHeight,t=i._preparecolumnGroups(),i.columnsheader.height(t),i.content.append(i.columnsheader),i.content.append(i.gridcontent),i._rendercolumnheaders(),i.tableheight=null,i.gridcontent.find("#contenttable"+i.element.id).remove(),null!=i.table&&(i.table.remove(),i.table=null),i.table=U('<div id="contenttable'+i.element.id+'" style="overflow: hidden; position: relative;"></div>'),i.gridcontent.addClass(i.toTP("jqx-grid-content")),i.gridcontent.addClass(i.toTP("jqx-widget-content")),i.gridcontent.append(i.table),i._renderrows(),i.filterable&&i._renderfilter(),i.pageable&&i._initpager(),i._arrange(),i.renderStatusBar&&i.renderStatusBar(i.statusbar),i.rendertoolbar&&i.rendertoolbar(i.toolbar),i.showAggregates&&i._updateaggregates(),i.disabled&&i.host.addClass(i.toThemeProperty("jqx-fill-state-disabled")),i._renderhorizontalscroll(),i._showicons(),i._addHandlers())},clear:function(){this.source&&(this.source.records=new Array,this.source.hierarchy=new Array),this.dataview._filteredData=new Array,this.databind(null),this._render()},_initpager:function(){var e,b=this.gridlocalization.pagergotopagestring,_=(this.gridlocalization.pagerrangestring,this.gridlocalization.pagershowrowsstring),t=(this.pagerHeight-28)/2;if(this.pagerdiv=this.pagerdiv||U('<div style="line-height: 28px; width: 100%; height: 100%; position: relative;"></div>'),this.toppagerdiv=this.toppagerdiv||U('<div style="line-height: 28px; width: 100%; height: 100%; position: relative;"></div>'),!this.pageable)return this.pagerdiv.remove(),void this.toppagerdiv.remove();this.pagerRenderer?(this.pagerdiv.children().remove(),this.toppager.children().remove(),null!=(e=this.pagerRenderer())&&this.pagerdiv.append(U(e)),this.pager.append(this.pagerdiv),null!=(e=this.pagerRenderer())&&this.toppagerdiv.append(U(e)),this.toppager.append(this.toppagerdiv)):(this.pagerdiv.css("top",t),this.toppagerdiv.css("top",t),e=function(e,t){var i,r,s,o=this,l=U('<div style="margin-right: 12px; height: 28px; float: right;"><input style="height:100%; box-sizing: border-box; text-align: right; width: 36px;" type="text"/></div>'),a=U('<div style="float: right; margin-right: 7px;"></div>'),n=U('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),d=U('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),h=U('<div type="button" style="margin-left: 3px; padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),c=U('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),u=U('<div style="margin-right: 7px; float: right;"></div>'),g=U('<div style="margin-right: 7px; float: right;"></div>'),p=U('<div style="padding-bottom: 3px; margin-right: 3px; float: right;"></div>'),f=(l.attr("disabled",o.disabled),U('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>')),m=(f[0].id="gridpagerlist"+t+o.element.id,o.removeHandler(n,"mousedown"),o.removeHandler(n,"mouseup"),o.removeHandler(n,"click"),o.removeHandler(d,"mousedown"),o.removeHandler(d,"mouseup"),o.removeHandler(d,"click"),o.removeHandler(h,"mousedown"),o.removeHandler(h,"mouseup"),o.removeHandler(h,"click"),o.removeHandler(c,"mousedown"),o.removeHandler(c,"mouseup"),o.removeHandler(c,"click"),o.rtl?(n.attr("title",o.gridlocalization.pagerpreviousbuttonstring),d.attr("title",o.gridlocalization.pagernextbuttonstring)):(d.attr("title",o.gridlocalization.pagerpreviousbuttonstring),n.attr("title",o.gridlocalization.pagernextbuttonstring)),U.jqx.browser.msie&&U.jqx.browser.version<8&&p.css("padding-top","3px"),this["pagerfirst"+t]=h,this["pagerlast"+t]=c,this["pagernext"+t]=n,this["pagerprevious"+t]=d,this["pagergotoinput"+t]=l,this["pagerdetails"+t]=u,this["pagershowrows"+t]=g,this["pagergotolabel"+t]=a,this["pagershowrowscombo"+t]=f,this["pagerbuttons"+t]=p,"default"==o.pagerMode?(o.rtl?(c.attr("title",o.gridlocalization.pagerfirstbuttonstring),h.attr("title",o.gridlocalization.pagerlastbuttonstring)):(h.attr("title",o.gridlocalization.pagerfirstbuttonstring),c.attr("title",o.gridlocalization.pagerlastbuttonstring)),(i=U("<div style='margin-left: 6px; width: 15px; height: 26px;'></div>")).addClass(o.toThemeProperty("jqx-icon-arrow-first")),h.wrapInner(i),(r=U("<div style='margin-left: 6px; width: 15px; height: 26px;'></div>")).addClass(o.toThemeProperty("jqx-icon-arrow-last")),c.wrapInner(r),o.rtl?(e.append(c),e.append(n),e.append(p),e.append(d),e.append(h)):(e.append(h),e.append(d),e.append(p),e.append(n),e.append(c)),c.jqxButton({cursor:"pointer",disabled:o.disabled,theme:o.theme}),h.jqxButton({cursor:"pointer",disabled:o.disabled,theme:o.theme}),s=o.rtl?"right":"left",p.css("float",s),c.css("float",s),h.css("float",s),n.css("float",s),d.css("float",s),u.css("float",o.rtl?"left":"right"),o.rtl?(u.css("margin-left","7px"),u.css("margin-right","0px")):(u.css("margin-left","0px"),u.css("margin-right","7px"))):o.rtl||(e.append(n),e.append(d)),n.jqxButton({cursor:"pointer",disabled:o.disabled,theme:o.theme}),d.jqxButton({cursor:"pointer",disabled:o.disabled,theme:o.theme}),U("<div style='margin-left: 6px; width: 15px; height: 26px;'></div>")),w=(m.addClass(o.toThemeProperty("jqx-icon-arrow-left")),d.wrapInner(m),U("<div style='margin-left: 6px; width: 15px; height: 26px;'></div>"));if(w.addClass(o.toThemeProperty("jqx-icon-arrow-right")),n.wrapInner(w),o.rtl||e.append(u),"default"!=o.pagerMode){o.rtl?(e.append(a),e.append(l),e.append(g),e.append(f),e.append(u),e.append(n),e.append(d)):(e.append(f),e.append(g),e.append(l),e.append(a));for(var v=o.pageSizeOptions,y=(f.jqxDropDownList({_checkForHiddenParent:!1,rtl:o.rtl,disabled:o.disabled,source:v,enableBrowserBoundsDetection:!0,keyboardSelection:!1,autoDropDownHeight:!0,width:"auto",height:28,theme:o.theme}),0),x=0;x<v.length;x++)this.pageSize>=v[x]&&(y=x);a[0].innerHTML=b,f.jqxDropDownList({selectedIndex:y});p=l.find("input"),o=(p.addClass(o.toThemeProperty("jqx-input")),p.addClass(o.toThemeProperty("jqx-widget-content")),this.rtl&&p.css("direction","rtl"),this);this.removeHandler(f,"select"),this.addHandler(f,"select",function(e){var t,i;e.args&&(o.vScrollInstance&&o.vScrollInstance.setPosition(0),e=e.args.index,o.pagershowrowscombotop.data().jqxDropDownList.instance.selectIndex(e),o.pagershowrowscombobottom.data().jqxDropDownList.instance.selectIndex(e),o.pagershowrowscombobottom.data().jqxDropDownList.instance.renderSelection("mouse"),o.pagershowrowscombotop.data().jqxDropDownList.instance.renderSelection("mouse"),i=o.dataview.pagenum*o.dataview.pagesize,e=v[e],t=o.pageSize,o.pageSize=parseInt(e),isNaN(o.pageSize)&&(o.pageSize=10),100<=e?(o.pagershowrowscombotop.jqxDropDownList({width:55}),o.pagershowrowscombobottom.jqxDropDownList({width:55})):(o.pagershowrowscombotop.jqxDropDownList({width:44}),o.pagershowrowscombobottom.jqxDropDownList({width:44})),o.dataview.pagesize=o.pageSize,(i=Math.floor(i/o.dataview.pagesize))===o.dataview.pagenum&&parseInt(e)===parseInt(t)||(o._raiseEvent("pageSizeChanged",{pagenum:i,oldpageSize:t,pageSize:o.dataview.pagesize}),o.goToPage(i)||(o.serverProcessing?o.updateBoundData("pager"):o.refresh())))}),(l=l.find("input")).addClass(o.toThemeProperty("jqx-grid-pager-input")),l.addClass(o.toThemeProperty("jqx-rc-all")),this.removeHandler(l,"keydown"),this.removeHandler(l,"change"),o.addHandler(l,"keydown",function(e){return!(65<=e.keyCode&&e.keyCode<=90)&&("13"==e.keyCode?(e=l.val(),e=parseInt(e),isNaN(e)||o.goToPage(e-1),!1):void 0)}),o.addHandler(l,"change",function(){var e=l.val(),e=parseInt(e);isNaN(e)||o.goToPage(e-1)})}g[0].innerHTML=_,o.addHandler(n,"mouseenter",function(){w.addClass(o.toThemeProperty("jqx-icon-arrow-right-hover"))}),o.addHandler(d,"mouseenter",function(){m.addClass(o.toThemeProperty("jqx-icon-arrow-left-hover"))}),o.addHandler(n,"mouseleave",function(){w.removeClass(o.toThemeProperty("jqx-icon-arrow-right-hover"))}),o.addHandler(d,"mouseleave",function(){m.removeClass(o.toThemeProperty("jqx-icon-arrow-left-hover"))}),o.addHandler(n,"mousedown",function(){w.addClass(o.toThemeProperty("jqx-icon-arrow-right-selected"))}),o.addHandler(n,"mouseup",function(){w.removeClass(o.toThemeProperty("jqx-icon-arrow-right-selected"))}),o.addHandler(d,"mousedown",function(){m.addClass(o.toThemeProperty("jqx-icon-arrow-left-selected"))}),o.addHandler(d,"mouseup",function(){m.removeClass(o.toThemeProperty("jqx-icon-arrow-left-selected"))}),"default"===o.pagerMode&&(o.addHandler(c,"mouseenter",function(){r.addClass(o.toThemeProperty("jqx-icon-arrow-last-hover"))}),o.addHandler(h,"mouseenter",function(){i.addClass(o.toThemeProperty("jqx-icon-arrow-first-hover"))}),o.addHandler(c,"mouseleave",function(){r.removeClass(o.toThemeProperty("jqx-icon-arrow-last-hover"))}),o.addHandler(h,"mouseleave",function(){i.removeClass(o.toThemeProperty("jqx-icon-arrow-first-hover"))}),o.addHandler(c,"mousedown",function(){r.addClass(o.toThemeProperty("jqx-icon-arrow-last-selected"))}),o.addHandler(h,"mousedown",function(){i.addClass(o.toThemeProperty("jqx-icon-arrow-first-selected"))}),o.addHandler(c,"mouseup",function(){r.removeClass(o.toThemeProperty("jqx-icon-arrow-last-selected"))}),o.addHandler(h,"mouseup",function(){i.removeClass(o.toThemeProperty("jqx-icon-arrow-first-selected"))})),o.addHandler(U(document),"mouseup.pagerbuttons"+t+this.element.id,function(){w.removeClass(o.toThemeProperty("jqx-icon-arrow-right-selected")),m.removeClass(o.toThemeProperty("jqx-icon-arrow-left-selected")),r&&(r.removeClass(o.toThemeProperty("jqx-icon-arrow-last-selected")),i.removeClass(o.toThemeProperty("jqx-icon-arrow-first-selected")))}),o.addHandler(n,"click",function(){n.jqxButton("disabled")||(o.rtl?o.goToPrevPage():o.goToNextPage())}),o.addHandler(d,"click",function(){d.jqxButton("disabled")||(o.rtl?o.goToNextPage():o.goToPrevPage())}),"default"===this.pagerMode&&(o.addHandler(h,"click",function(){var e;h.jqxButton("disabled")||(o.rtl?(e=o.dataview.totalrecords,e=Math.ceil(e/o.pageSize),o.goToPage(e-1)):o.goToPage(0))}),o.addHandler(c,"click",function(){var e;c.jqxButton("disabled")||(o.rtl?o.goToPage(0):(e=o.dataview.totalrecords,e=Math.ceil(e/o.pageSize),o.goToPage(e-1)))}))},this.pagerdiv.children().remove(),this.toppagerdiv.children().remove(),e.call(this,this.pagerdiv,"bottom"),e.call(this,this.toppagerdiv,"top"),this.pager.append(this.pagerdiv),this.toppager.append(this.toppagerdiv),this.updatepagerdetails())},_updatepagertheme:function(){},goToPage:function(e,t){if(this._loading)return!1;if(null!=this.editKey){if(!this.editSettings.saveOnPageChange)return!1;if(!this.endroweditbykey(this.editKey))return!1}if((e=-1==(e=null==e?0:e)?0:e)<0)return!1;var i=this.dataview.totalrecords,r=this.dataview.pagenum,i=Math.ceil(i/this.pageSize);return i<=e&&(0==this.dataview.totalrecords&&(this.dataview.pagenum=0,this.updatepagerdetails()),0<e&&(e=i-1)),this.dataview.pagenum!=e&&(this.pageable&&(this.dataview.pagenum=e,this._raiseEvent("pageChanged",{pagenum:e,oldpagenum:r,pageSize:this.dataview.pagesize})),this.serverProcessing?this.updateBoundData("pager",t):(this.refresh(),t&&U.isFunction(t)&&t()),!0)},goToPrevPage:function(e){return 0<this.dataview.pagenum?this.goToPage(this.dataview.pagenum-1,e):"default"!=this.pagerMode&&"advanced"!=this.pagerMode&&(t=this.dataview.totalrecords,t=Math.ceil(t/this.pageSize),this.goToPage(t-1,e));var t},goToNextPage:function(e){var t=this.dataview.totalrecords,t=(this.summaryrows&&(t+=this.summaryrows.length),Math.ceil(t/this.pageSize));return this.dataview.pagenum<t-1?this.goToPage(this.dataview.pagenum+1,e):"default"!=this.pagerMode&&"advanced"!=this.pagerMode&&this.goToPage(0,e)},updatepagerdetails:function(){if(this.pageable){var r,s,o,e,l=this,t=(this.serverProcessing||(this.source.hierarchy?(r=l._names(),(o=function(e,t){for(var i=0;i<t.length;i++)0==l.dataview.filters.length&&(t[i]._visible=!0),!1!==t[i]._visible&&s++,l.treeGrid&&"root"==l.treeGrid.pageSizeMode||t[i].records&&(t[i][r.expanded]||t[i][r.leaf])&&!1!==t[i]._visible&&(o(e+1,t[i].records),l.treeGrid&&U(l.treeGrid).jqxTreeGrid("showSubAggregates")&&0!=e&&s--)})(s=0,this.dataview.rows),this.dataview.totalrecords=s):this.dataview.totalrecords=this.dataview.rows.length),this.dataview.pagenum*this.pageSize),i=(this.dataview.pagenum+1)*this.pageSize,a=(i>=this.dataview.totalrecords&&(i=this.dataview.totalrecords),this.dataview.totalrecords),n=(t++,Math.ceil(a/this.dataview.pagesize));if(1<=n&&n--,n++,"root"==this.pageSizeMode&&(1<=(n=Math.ceil(this.rootRecordsLength/this.dataview.pagesize))&&n--,n++,a=this.rootRecordsLength,this.dataview.totalrecords=this.rootRecordsLength),"default"!=this.pagerMode)this.pagergotoinputbottom&&((e=this.pagergotoinputbottom.find("input")).val(this.dataview.pagenum+1),e.attr("title","1 - "+n),(e=this.pagergotoinputtop.find("input")).val(this.dataview.pagenum+1),e.attr("title","1 - "+n));else{var d="",h=this.pagerButtonsCount,c=(0!=h&&h||(h=5),0);for(this.rtl&&(c=h-1);this.rtl&&0<=c||!this.rtl&&c<h;){var u=1+c,g=this.dataview.pagenum/h,g=(u+=Math.floor(g)*h,this.toTP("jqx-grid-pager-number"));if(g+=" "+this.toTP("jqx-rc-all"),n<u&&!this.rtl)break;this.rtl&&n<u?c--:(this.rtl||0==c&&h<u&&(d+="<a class='"+g+"' tabindex=-1 href='javascript:;' data-page='"+(-1+u)+"'>...</a>"),this.dataview.pagenum===u-1&&(g+=" "+this.toTP("jqx-fill-state-pressed")),this.rtl?(c===h-1&&(g=this.toTP("jqx-grid-pager-number"),g+=" "+this.toTP("jqx-rc-all"),1+u<=n&&(d+="<a class='"+g+"' tabindex=-1 href='javascript:;' data-page='"+(1+u)+"'>...</a>")),this.dataview.pagenum===u-1&&(g+=" "+this.toTP("jqx-fill-state-pressed")),d+="<a class='"+g+"' tabindex=-1 href='javascript:;' data-page='"+u+"'>"+u+"</a>"):(d+="<a class='"+g+"' tabindex=-1 href='javascript:;' data-page='"+u+"'>"+u+"</a>",c===h-1&&(g=this.toTP("jqx-grid-pager-number"),g+=" "+this.toTP("jqx-rc-all"),1+u<=n&&(d+="<a class='"+g+"' tabindex=-1 href='javascript:;' data-page='"+(1+u)+"'>...</a>"))),this.rtl&&(g=this.toTP("jqx-grid-pager-number"),g+=" "+this.toTP("jqx-rc-all"),0==c&&h<u&&(d+="<a class='"+g+"' tabindex=-1 href='javascript:;' data-page='"+(-1+u)+"'>...</a>")),this.rtl?c--:c++)}if(!this.pagerbuttonsbottom)return;function p(){f.click(function(e){l.disabled||(e=U(e.target).attr("data-page"),l.goToPage(parseInt(e)-1))}),f.mouseenter(function(e){l.disabled||U(e.target).addClass(l.toTP("jqx-fill-state-hover"))}),f.mouseleave(function(e){l.disabled||U(e.target).removeClass(l.toTP("jqx-fill-state-hover"))})}var f=this.pagerbuttonsbottom.find("a"),f=(this.removeHandler(f,"click"),this.removeHandler(f,"mouseenter"),this.removeHandler(f,"mouseleave"),this.pagerbuttonstop.find("a"));this.removeHandler(f,"click"),this.removeHandler(f,"mouseenter"),this.removeHandler(f,"mouseleave"),this.pagerbuttonsbottom[0].innerHTML=d,this.pagerbuttonstop[0].innerHTML=d,this.disabled&&this.host.find(".jqx-grid-pager-number").css("cursor","default");"both"!==this.pagerPosition&&"bottom"!==this.pagerPosition||(f=this.pagerbuttonsbottom.find("a"),p()),"both"!==this.pagerPosition&&"top"!==this.pagerPosition||(f=this.pagerbuttonstop.find("a"),p())}0==i&&i<t&&(t=0),this.pagerdetailsbottom&&(this.rtl?(this.pagerdetailsbottom[0].innerHTML=a+this.gridlocalization.pagerrangestring+i+"-"+t,this.pagerdetailstop[0].innerHTML=a+this.gridlocalization.pagerrangestring+i+"-"+t):(this.pagerdetailsbottom[0].innerHTML=t+"-"+i+this.gridlocalization.pagerrangestring+a,this.pagerdetailstop[0].innerHTML=t+"-"+i+this.gridlocalization.pagerrangestring+a)),"default"==this.pagerMode&&(e=this.pagerbuttonsbottom.width()+U(this.pagerdetailsbottom).width()+160,this.pagerdiv.css("min-width",e),this.toppagerdiv.css("min-width",e)),i<t&&this.goToPrevPage()}},_preparecolumnGroups:function(){var e=this.columnsHeight;if(this.columnGroups){if(this.columnshierarchy=new Array,this.columnGroups.length){for(var r=this,t=0;t<this.columnGroups.length;t++)this.columnGroups[t].parent=null,this.columnGroups[t].groups=null;for(t=0;t<this.columns.records.length;t++)this.columns.records[t].parent=null,this.columns.records[t].groups=null;function i(e){for(var t=0;t<r.columnGroups.length;t++){var i=r.columnGroups[t];if(i.name===e)return i}return null}for(t=0;t<this.columnGroups.length;t++)(d=this.columnGroups[t]).groups||(d.groups=null),d.parentGroup&&(d.parentgroup=d.parentGroup),d.parentgroup&&(s=i(d.parentgroup))&&((d.parent=s).groups||(s.groups=new Array),-1===s.groups.indexOf(d)&&s.groups.push(d));for(var s,t=0;t<this.columns.records.length;t++)(d=this.columns.records[t]).columngroup&&(s=i(d.columngroup))&&(s.groups||(s.groups=new Array),-1===(d.parent=s).groups.indexOf(d)&&s.groups.push(d));for(var o=0,t=0;t<this.columns.records.length;t++){var l=d=this.columns.records[t];for(d.level=0;l.parent;)l=l.parent,d.level++;for(var l=d,a=d.level,o=Math.max(o,d.level);l.parent;)(l=l.parent)&&(l.level=--a)}for(var n=function(e){var t=new Array;if(e.columngroup&&t.push(e),!e.groups)return new Array;for(var i=0;i<e.groups.length;i++)if(e.groups[i].columngroup)t.push(e.groups[i]);else if(e.groups[i].groups)for(var r=n(e.groups[i]),s=0;s<r.length;s++)t.push(r[s]);return t},t=0;t<this.columnGroups.length;t++){for(var d=this.columnGroups[t],h=n(d),c=(d.columns=h,new Array),u=0,g=0;g<h.length;g++)c.push(this.columns.records.indexOf(h[g])),h[g].pinned&&u++;if(0!=u)throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group cannot be pinned.");c.sort(function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:t<e?1:0});for(var p=1;p<c.length;p++)if(c[p]!=c[p-1]+1)throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columnGroupslevel=1+o,e=this.columnGroupslevel*this.columnsHeight}return e},wheel:function(e,t){return t.autoheight&&"hidden"==t.hScrollBar.css("visibility")?e.returnValue=!0:(i=0,(e=e||window.event).originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i?((t=t._handleDelta(i))&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),null!=e.stopPropagation&&e.stopPropagation()),!!t&&(e.returnValue=t=!1)):(e.preventDefault&&e.preventDefault(),void(e.returnValue=!1)));var i},_handleDelta:function(e){if("hidden"!=this.vScrollBar.css("visibility")){var t=this.vScrollInstance.value;if(e<0?this.vScrollInstance.setPosition(this.vScrollInstance.value+20):this.vScrollInstance.setPosition(this.vScrollInstance.value-20),t!=this.vScrollInstance.value)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){t=this.hScrollInstance.value;if(0<e?20<this.hScrollInstance.value?this.hScrollInstance.setPosition(this.hScrollInstance.value-20):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+20):this.hScrollInstance.setPosition(this.hScrollInstance.max),t!=this.hScrollInstance.value)return!0}return!1},_removeHandlers:function(){this.removeHandler(this.host,"focus"),this.removeHandler(U(window),"jqxReady."+this.element.id),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);var e="mousedown";this.isTouchDevice()&&(e=U.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(this.host,"dragstart."+this.element.id),this.removeHandler(this.host,"keydown"),this.table&&(this.removeHandler(this.table,"mouseleave"),this.removeHandler(this.table,"mousemove"),this.removeHandler(this.table,e),this.removeHandler(this.table,"selectstart."+this.element.id),U.jqx.browser.msie&&U.jqx.browser.version<9&&this.removeHandler(this.table,"dblclick"))},_addHandlers:function(){function u(e,t){for(var i=null,r=f._table.coord(),s=r.top,o=r.left,l=f._table[0].rows,a=0;a<l.length;a++)for(var n=l[a].cells,d=0;d<n.length;d++){var h=n[d],c=h.offsetLeft+o,u=h.offsetTop+s,g=h.offsetWidth,p=h.offsetHeight;if(0!==g&&0!==p){if(!(u<=t&&t<u+p))break;if(c<=e&&e<c+g){i=h;break}}}return i}function i(){var e,t;f.hoveredRow&&((t=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i.className;r=(r=r.replace(" "+f.toTP("jqx-fill-state-hover"),"")).replace(" "+f.toTP("jqx-grid-cell-hover"),""),i.className=r}})(e=f.hoveredRow[0].cells),f._pinnedTable&&0<e.length&&t(f._pinnedTable[0].rows[f.hoveredRow[0].rowIndex].cells)),f.hoveredRow=null}function g(e){if(f.enableHover&&(f.hoveredRow=e)){var t=e[0].cells,e=f.rowDetails&&!f.treeGrid&&!f.treeGrid?1:0,i=0;0<e&&f.rtl&&(e=0,i=1);for(var r=e;r<t.length-i;r++)t[r].className+=" "+f.toTP("jqx-fill-state-hover")+" "+f.toTP("jqx-grid-cell-hover");if(f._pinnedTable&&f._pinnedTable[0].rows.length)for(var s=f._pinnedTable[0].rows[f.hoveredRow[0].rowIndex].cells,r=e;r<s.length-i;r++)s[r].className+=" "+f.toTP("jqx-fill-state-hover")+" "+f.toTP("jqx-grid-cell-hover")}}var f=this,t=(this._mousewheelfunc=this._mousewheelfunc||function(e){return f.wheel(e,f),!1},this.addHandler(this.host,"dragstart."+this.element.id,function(e){return!1}),this.addHandler(this.table,"selectstart."+this.element.id,function(e){return!!f.enableBrowserSelection||(!(!f.filterable||!U(e.target).ischildof(f.filterrow))||(!!(f.rowDetails&&0<U(e.target).parents("[data-role=details]").length)||null!=f.editKey&&void 0))}),this.addHandler(U(window),"jqxReady."+this.element.id,function(){f._updatecolumnwidths(),f.refresh()}),this.editable&&this.addHandler(U(document),"mousedown.gridedit"+this.element.id,function(r){if(f.editable&&f.editSettings.saveOnBlur&&null!=f.editKey&&!f.vScrollInstance.isScrolling()&&!f.vScrollInstance.isScrolling()){var e=f.host.coord(),t=f.host.width(),i=f.host.height(),s=!1,o=!1;if((r.pageY<e.top||r.pageY>e.top+i)&&(o=s=!0),s=r.pageX<e.left||r.pageX>e.left+t?!0:s){var l=f._editors;if(l)for(var a=0;a<l.length;a++){var n=l[a].editor,d=function(e){var t,i=U(e.children()[0]).data();if((i=(i=i&&!i.jqxWidget?e.data():i)||e.data()).jqxWidget&&i.jqxWidget.container&&"block"==i.jqxWidget.container[0].style.display)return i=(e=i.jqxWidget).container.coord().top,t=e.container.coord().top+e.container.height(),!(!o||!(r.pageY<i||r.pageY>t))&&(s=!0,e.close(),!0)}(n),h=n.attr("aria-owns");if(h){if(h==document.activeElement.id)return!0;if(U(document.activeElement).ischildof(U("#"+h)))return!0}else if(h=n.children().attr("aria-owns")){if(h==document.activeElement.id)return!0;if(U(document.activeElement).ischildof(U("#"+h)))return!0}if(!1===d)return}}s&&f.endroweditbykey(f.editKey)}}),this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"focus",function(e){e.preventDefault}),this.isTouchDevice()),e=(this.vScrollInstance.valueChanged=function(e){f._timer&&clearTimeout(f._timer),t?f.table&&(f.table[0].style.top=0-f.vScrollInstance.value+"px"):f._timer=setTimeout(function(){f.table&&(f.table[0].style.top=0-f.vScrollInstance.value+"px")},5)},this.hScrollInstance.valueChanged=function(e){f._timer&&clearTimeout(f._timer),t?f.table&&f._renderhorizontalscroll():f._timer=setTimeout(function(){f.table&&f._renderhorizontalscroll()},5)},"mousedown");this.isTouchDevice()&&(e=U.jqx.mobile.getTouchEventName("touchend"),U.jqx.browser.msie&&U.jqx.browser.version<10&&(e="mousedown")),this.addHandler(this.table,"mouseleave",function(e){i(),f.wrapper&&(f.wrapper.parent().removeAttr("tabindex",0),f.wrapper.removeAttr("tabindex",1),f.content.removeAttr("tabindex",2))});f.isTouchDevice()&&(f.enableHover=!1),this.addHandler(this.table,"mousemove",function(e){var t=e.pageX,e=e.pageY;if(f.disabled)return!0;if(!f.enableHover)return!0;if(f.hScrollInstance.isScrolling()||f.vScrollInstance.isScrolling())return!0;t=u(t,e);if(!t)return!0;e=U(t).parent();return i(),f.rowDetails&&f.treeGrid&&"row-details"==e.attr("data-role")||f.renderedRecords&&0===f.renderedRecords.length||null!=f.editKey&&f.editKey===e.attr("data-key")||g(e),!0}),this.addHandler(this.host,"keydown",function(e){return f._handleKey(e)}),U.jqx.browser.msie&&U.jqx.browser.version<9&&this.addHandler(this.table,"dblclick",function(e){f.table.trigger("mousedown",e)}),this.addHandler(this.table,e,function(e){e.target;var t=null;if(f.disabled)return!0;if(!(f.touchmode&&e.originalEvent&&e.originalEvent._pageX)){f.table.coord();var i=e.pageX,r=e.pageY,s=(U.jqx.browser.msie&&U.jqx.browser.version<9&&arguments&&2==arguments.length&&(i=arguments[1].pageX,r=arguments[1].pageY),f.isTouchDevice()&&(i=(s=U.jqx.position(e)).left,r=s.top,(isNaN(i)||isNaN(r))&&(i=(s=U.jqx.position(e.originalEvent)).left,r=s.top)),t=u(i,r),U(t).parent()),i=s.attr("data-key");if(f.rowDetails&&f.treeGrid&&"row-details"==s.attr("data-role"))return!0;function o(){f.enableBrowserSelection||(e.preventDefault&&e.preventDefault(),e.stopPropagation()),f.host.focus()}if(void 0!==i){var r=U(t).index(),l=f.columns.records[r];if(i==f.editKey){if(!f.editSettings.editSingleCell)return!0;if(f.clickedTD==t)return!0;if(null!=f.editKey&&f.editSettings.saveOnSelectionChange&&!f.endroweditbykey(f.editKey))return!0}else if(null!=f.editKey&&f.editSettings.saveOnSelectionChange)if(!f.endroweditbykey(f.editKey))return!0;if(f.clickedTD=t,(d=f.rowinfo[i])&&d.group)return!0;var a,n=!1;if(d&&(c=f.getrowdisplayindex(d.row),a=f.getrowindex(d.row),f._raiseEvent("rowClick",{index:c,boundIndex:a,key:i,row:d.row,originalEvent:e,dataField:l.datafield}),h=(new Date).getTime(),f.clickTime||(f.clickTime=new Date),f._lastSelectedKey==i&&h-f.clickTime.getTime()<300&&(f._raiseEvent("rowDoubleClick",{index:c,boundIndex:a,key:i,row:d.row,originalEvent:e,dataField:l.datafield}),n=!0,e.preventDefault&&e.preventDefault())),f.clickTime=new Date,0<=t.className.indexOf("jqx-grid-group"))d.expanded?f.hidedetailsbykey(i):f.showdetailsbykey(i);else if(e.target&&e.target.className.indexOf&&0<=e.target.className.indexOf("jqx-grid-group")&&f.treeGrid)d.expanded?f.treeGrid.collapseRow(i):f.treeGrid.expandRow(i),g(f._getuirow(i)),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();else{if(!(e.target&&e.target.className.indexOf&&0<=e.target.className.indexOf("checkbox")&&f.treeGrid)){var d,h,c,r=U(t).index(),l=f.columns.records[r];if(e.stopPropagation&&e.stopPropagation(),f.editable&&null==f.editKey)if(f._lastSelectedKey==i&&f.editSettings.editOnDoubleClick&&n)return f.beginroweditbykey(i,l),!0;return f.isTouchDevice()&&f.scrolled&&new Date-f.scrolled<500?(f.enableBrowserSelection||e.preventDefault&&e.preventDefault(),!1):"singlerow"===f.selectionMode&&"custom"!==f.selectionMode?(f.selectrowbykey(i,"mouse",!1),f._lastSelectedKey=i,f._updateSelection(),f.enableBrowserSelection||e.preventDefault&&e.preventDefault(),o(),!0):"custom"!==f.selectionMode&&(e.ctrlKey||e.metaKey||f.clearSelection(!1),e.shiftKey&&f._lastSelectedKey)?(d=f.rowinfo[f._lastSelectedKey],f._doSelection(f._lastSelectedKey,!0,!1),h=U(f._table.children()[1]).children("[data-key="+f._lastSelectedKey+"]").index(),c=s.index(),f._selectRange(c,h),f.selectrowbykey(i,"mouse",!1),f._updateSelection(),e.preventDefault&&e.preventDefault(),o(),!0):(f._lastSelectedKey=i,f.clickTime=new Date,"custom"===f.selectionMode||(d&&(d.selected?f.unselectrowbykey(i,"mouse",!1):f.selectrowbykey(i,"mouse",!1),o()),f._updateSelection(),f.enableBrowserSelection||e.preventDefault&&e.preventDefault()),!0)}d.checked?f.treeGrid.uncheckRow(i):f.treeGrid.checkRow(i),g(f._getuirow(i)),e.stopPropagation&&e.stopPropagation()}}}})},_updateSelection:function(){var e=this,t=U(e._table.children()[1]).children(),i=e._pinnedTable?U(e._pinnedTable.children()[1]).children():null,r=e.rowDetails&&!e.treeGrid?1:0,s=0;0<r&&e.rtl&&(r=0,s=1);for(var o=0;o<t.length;o++){var l,a=t[o].cells,n=(i&&(l=i[o].cells),null);if(t[o].getAttribute&&(n=t[o].getAttribute("data-key")),e.rowinfo[n]&&"none"!==e.selectionMode)if(e.rowinfo[n].selected)for(var d=r;d<a.length-s;d++){var h=a[d];U(h).addClass(e.toTP("jqx-grid-cell-selected")+" "+e.toTP("jqx-fill-state-pressed")),l&&U(l[d]).addClass(e.toTP("jqx-grid-cell-selected")+" "+e.toTP("jqx-fill-state-pressed"))}else for(d=r;d<a.length-s;d++){var c,h=a[d],u=(l&&(c=l[d]),h.className);u=(u=(u=(u=u.replace(" jqx-fill-state-pressed","")).replace(" jqx-fill-state-pressed-"+e.theme,"")).replace(" jqx-grid-cell-selected","")).replace(" jqx-grid-cell-selected-"+e.theme,""),h.className=u,c&&(c.className=u)}}},_selectRange:function(e,t){var i=U(U(this._table.children()[1]).children()[t]);if(t<e)for(var r=t,s=i;r<e;){var o=(s=s.next()).attr("data-key");this._doSelection(o,!0,!1),r++}else if(e<t)for(r=t,s=i;e<r;){o=(s=s.prev()).attr("data-key");this._doSelection(o,!0,!1),r--}},_getuikey:function(e,t){var i=null,r=U(this._table.children()[1]).children(),i=U(r[e]).attr("data-key");if(U(r[e]).attr("data-role")){var s=U(r[e]);if("next"==t)for(;s;){s=s.next();if(s)if(!s.attr("data-role"))return i=s.attr("data-key")}else if("prev"==t)for(;s;)if(s=s.prev())if(!s.attr("data-role"))return i=s.attr("data-key");return null}return i},getRows:function(){return this.source.records},getView:function(){var s=this,o=this._names(),e=new Array,l=function(e,t){if(t)for(var i,r=0;r<t.length;r++)t[r]&&!1!==t[r]._visible&&(i=U.extend({},t[r]),e.push(i),(t[r][o.expanded]||0<s.dataview.filters.length)&&(i.records=new Array,l(i.records,t[r].records)))};return l(e,this.dataViewRecords),e},getKeys:function(){for(var e=new Array,t=this.source.records,i=0;i<t.length;i++)e.push(t[i].uid);return e},getKey:function(e){var t=this.getRows();return t?t[e].uid:-1},_getkey:function(a){if(this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);function e(){var e=U(this._table.children()[1]).children(),t=null,i=0;if(this.pageable&&(i-=this.dataview.pagenum*this.dataview.pagesize),0<this.groups.length){for(var r=0,s=0;s<e.length;s++){var o=U(e[s]),l=o.children()[0].getAttribute("colspan");if(!(0<l)){if(r===i+a)return t=o.attr("data-key");r++}}return t}if(this.rowDetails)for(s=r=0;s<e.length;s++){if(r===a+i)return t=U(e[s]).attr("data-key");s%2==1&&r++}else t=U(e[i+a]).attr("data-key");return t}var t=null,t=e.call(this);if(null==t&&this.pageable){var i=Math.floor(a/this.dataview.pagesize);if(this.dataview.pagenum!=i){var r=this.getRows()[a];if(r&&null!=r.uid)return r.uid;if(isNaN(i))return null;this.goToPage(i),t=e.call(this)}}return t},_getuirow:function(t){try{var e=U(this._table.children()[1]).children("[data-key="+t+"]");if(0<e.length)return e}catch(e){for(var i=U(this._table.children()[1]).children(),r=0;r<i.length;r++){var s=i[r];if(t==s.getAttribute("data-key"))return U(s)}return null}return null},_getpinneduirow:function(t){if(!this._pinnedTable)return null;try{var e=U(this._pinnedTable.children()[1]).children("[data-key="+t+"]");if(0<e.length)return e}catch(e){for(var i=U(this._pinnedTable.children()[1]).children(),r=0;r<i.length;r++){var s=i[r];if(t==s.getAttribute("data-key"))return U(s)}return null}return null},_names:function(){var e={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};if(!this.source||this.source&&!this.source._source.hierarchy)return e;var t=this.source._source.hierarchy.reservedNames;return t||e},_getMatches:function(i,e){if(null==i||0==i.length)return-1;var r,t=this.renderedRecords,e=(null!=e&&(t=t.slice(e)),0),s=(this.rowDetails&&!this.treeGrid&&e++,e<this.columns.records.length?r=this.columns.records[e].datafield:new Array,new Array);return U.each(t,function(e){var t=(t=this[r])||"";U.jqx.string.startsWithIgnoreCase(t.toString(),i)&&s.push(this.uid)}),s},_handleKey:function(e){if(this._loading)return!0;if(U(e.target).ischildof(this.filter))return!0;if(U(e.target).ischildof(this.toolbar))return!0;if(U(e.target).ischildof(this.statusbar))return!0;var t=this._names(),s=this,i=e.charCode||e.keyCode||0,r=this._lastSelectedKey,o=(this.rowinfo[r],this._getuirow(r)),l=e.shiftKey&&"singlerow"!=this.selectionMode,a=e.ctrlKey||e.metaKey;if(o){if(this.handleKeyboardNavigation)if(this.handleKeyboardNavigation(i))return!0;if(this.editable&&null==this.editKey&&113===i&&this.editSettings.editOnF2&&this.beginroweditbykey(o.attr("data-key")),null==this.editKey&&!a&&!l&&this.incrementalSearch&&!(33<=i&&i<=40)){this._searchString||(this._searchString=""),(8==i||46==i)&&1<=this._searchString.length&&(this._searchString=this._searchString.substr(0,this._searchString.length-1));var n=String.fromCharCode(i),d=!isNaN(parseInt(n));if(65<=i&&i<=97||d||8==i||32==i||46==i){if(e.shiftKey||(n=n.toLocaleLowerCase()),8==i||32==i||46==i||0<this._searchString.length&&this._searchString.substr(0,1)==n||(this._searchString+=n),32==i&&(this._searchString+=" "),this._searchTime=new Date,1<=(r=this.getSelection()).length){for(var h=r[0].uid,c=-1,u=0;u<this.renderedRecords.length;u++)if(this.renderedRecords[u].uid==h){c=u;break}(0==(g=this._getMatches(this._searchString,c)).length||0<g.length&&g[0]==h)&&(g=this._getMatches(this._searchString))}else var g=this._getMatches(this._searchString);0<g.length&&(!(1<=(r=this.getSelection()).length)||-1==(d=g.indexOf(r[0].uid))?(this.clearSelection(!1),this.selectrowbykey(g[0])):((n=d+1)>=g.length&&(n=0),this.clearSelection(!1),this.selectrowbykey(g[n])),this._lastSearchString=this._searchString)}null!=this._searchTimer&&clearTimeout(this._searchTimer),27!=i&&13!=i||(this._searchString="",this._lastSearchString=""),this._searchTimer=setTimeout(function(){s._searchString="",s._lastSearchString=""},500)}if(null!=this.editKey){if(27===i&&this.editSettings.cancelOnEsc)this.endroweditbykey(this.editKey,!0);else if(13===i&&this.editSettings.saveOnEnter){if(e.target&&"div"!=e.target.nodeName.toLowerCase()&&"input"!=e.target.nodeName.toLowerCase())return!0;this.endroweditbykey(this.editKey,!1)}else if(this.editSettings.editSingleCell&&this.editColumn){d=this.columns.records.indexOf(this.editColumn);if(9==i&&d<this.columns.records.length-1&&!e.shiftKey){for(var p=this.editKey,f=null,u=d+1;u<this.columns.records.length;u++)if(this.columns.records[u].editable&&!this.columns.records[u].hidden){f=this.columns.records[u];break}f&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(p,f))}else if(9==i&&e.shiftKey&&0<d){for(var p=this.editKey,m=null,u=d-1;0<=u;u--)if(this.columns.records[u].editable&&!this.columns.records[u].hidden){m=this.columns.records[u];break}m&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(p,m))}if(9==i){var w=this.rowinfo[this.editKey],c=this.getrowindex(w),o=this._getuirow(this.editKey);if(e.shiftKey||f){if(!m&&e.shiftKey){for(v=null,u=this.columns.records.length-1;0<=u;u--)if(this.columns.records[u].editable&&!this.columns.records[u].hidden){v=this.columns.records[u];break}if(v){for(;o;)if(o=o.prev())if(!o.attr("data-role")){y=o.attr("data-key");break}y&&(this.clearSelection(!1),this._lastSelectedKey=y,w=this.rowsByKey[y],c=this.getrowindex(w),k=this.getrowdisplayindex(w),this._raiseEvent("rowSelect",{key:y,index:k,boundIndex:c,row:this.rowsByKey[y]}),this.endroweditbykey(this.editKey,!1),this._doSelection(y,!0,!0),this.beginroweditbykey(y,v))}}}else{for(var v=null,u=0;u<this.columns.records.length;u++)if(this.columns.records[u].editable&&!this.columns.records[u].hidden){v=this.columns.records[u];break}if(v){for(;o;)if(o=o.next())if(!o.attr("data-role")){var y=o.attr("data-key");break}y&&(this.clearSelection(!1),this._lastSelectedKey=y,w=this.rowsByKey[y],c=this.getrowindex(w),k=this.getrowdisplayindex(w),this._raiseEvent("rowSelect",{key:y,index:k,boundIndex:c,row:this.rowsByKey[y]}),this.endroweditbykey(this.editKey,!1)?(this._doSelection(y,!0,!0),this.beginroweditbykey(y,v)):this.beginroweditbykey(this.editKey,v))}}return!1}}return!0}if(e.ctrlKey||e.metaKey){g=String.fromCharCode(i).toLowerCase();if("c"==g||"x"==g)if(1<=(r=this.getSelection()).length){for(var x,b="",_=0;_<this.renderedRecords.length;_++)for(var j=this.renderedRecords[_],u=0;u<r.length;u++)if((w=r[u]).uid===j.uid){for(var q=0;q<this.columns.records.length;q++)b+=this.getCellTextByKey(w.uid,this.columns.records[q].displayfield),q<this.columns.records.length-1&&(b+="\t");b+="\r\n";break}""!=b&&(b=b.substring(0,b.length-1)),window.clipboardData?window.clipboardData.setData("Text",b):((x=U('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>')).val(b),U("body").append(x),x.select(),setTimeout(function(){document.designMode="off",x.select(),x.remove()},100))}}if(32===i&&this.treeGrid&&this.treeGrid.checkboxes){if(1<(r=this.getSelection()).length){for(u=0;u<r.length;u++){var S=r[u].uid;this.rowinfo[S].checked?this.treeGrid.uncheckRow(S,!1):this.treeGrid.checkRow(S,!1)}return this._renderrows(),!1}if(h=o.attr("data-key"))return this.rowinfo[h].checked?this.treeGrid.uncheckRow(h):this.treeGrid.checkRow(h),!1}function T(){a||l||s.clearSelection(!1),33==i||37==i?h=(h=s._getuikey(t=C,"prev"))||P():34==i||39==i?h=(h=s._getuikey(t=C,"next"))||z():38==i?h=z():40==i&&(h=P()),s._lastSelectedKey=h;var e=s.rowsByKey[h],t=s.getrowindex(e),e=s.getrowdisplayindex(e);s._raiseEvent("rowSelect",{key:h,index:e,boundIndex:t,row:s.rowsByKey[h]}),s._doSelection(h,!0,!0),s.host.focus()}var C=o.index(),z=function(e){var t=null,i=U(s._table.children()[1]).children().length-1;if((r=U(U(s._table.children()[1]).children()[i])).attr("data-role"))for(;r;){var r=r.prev();if(r)if(!r.attr("data-role")){t=r.attr("data-key");break}}else t=r.attr("data-key");return"all"==e?{row:r,key:t}:t},P=function(e){var t=null;if((i=U(U(s._table.children()[1]).children()[0])).attr("data-role"))for(;i;){var i=i.next();if(i)if(!i.attr("data-role")){t=i.attr("data-key");break}}else t=i.attr("data-key");return"all"==e?{row:i,key:t}:t},h=null;if(this.treeGrid&&this.rtl&&(37==i?i=39:39==i&&(i=37)),36==i||a&&38==i)return s.clearSelection(!1),n=P(),l||a?s._selectRange(o.index(),0):s._lastSelectedKey=n,s.selectrowbykey(n,"keyboard"),!1;if(35==i||a&&40==i)return s.clearSelection(!1),d=z("all"),p=d.key,l||a?s._selectRange(o.index(),d.row.index()):s._lastSelectedKey=p,s.selectrowbykey(p,"keyboard"),!1;if(33==i||37==i){h=o.attr("data-key");if(this.rowDetails&&37==i&&!this.treeGrid)return this.hidedetailsbykey(h),!1;if(this.treeGrid&&37==i){if(this.rowinfo[h].row&&!this.rowinfo[h].row[t.parent]&&!this.rowinfo[h][t.leaf]&&!this.rowinfo[h].expanded)return!1;if(this.rowinfo[h].expanded&&!this.rowinfo[h][t.leaf])return this.treeGrid.collapseRow(h),!1;if(this.rowinfo[h].row&&this.rowinfo[h].row[t.parent]&&(h=this.rowinfo[h].row[t.parent].uid),this.rowinfo[h][t.leaf])return!1}if(this.pageable&&!this.treeGrid)return this.rtl?this.goToNextPage(T):this.goToPrevPage(T),!1;if(this.treeGrid&&this.pageable&&33==i)return this.goToPrevPage(T),!1}else if(34==i||39==i){h=o.attr("data-key");if(this.rowDetails&&39==i&&!this.treeGrid)return this.showdetailsbykey(h),!1;if(this.treeGrid&&39==i){if(this.rowinfo[h][t.leaf])return!1;if(!this.rowinfo[h].expanded)return this.treeGrid.expandRow(h),!1;if(this.rowinfo[h].row&&this.rowinfo[h].row.records&&0<this.rowinfo[h].row.records.length)if(0<this.dataview.filters.length){for(var H=this.rowinfo[h].row.records,u=0;u<H.length;u++)if(H[u]._visible){h=H[u].uid;break}}else h=this.rowinfo[h].row.records[0].uid}if(this.pageable&&!this.treeGrid)return this.rtl?this.goToPrevPage(T):this.goToNextPage(T),!1;if(this.treeGrid&&this.pageable&&34==i)return this.goToNextPage(T),!1}else if(38==i){for(;o;)if(o=o.prev())if(!o.attr("data-role")){h=o.attr("data-key");break}if(this.pageable&&null==h)return this.goToPrevPage(T),!1}else if(40==i){for(;o;)if(o=o.next())if(!o.attr("data-role")){h=o.attr("data-key");break}if(this.pageable&&null==h)return this.goToNextPage(T),!1}if(null!=h){if(a||l||this.clearSelection(!1),this.rowinfo[h])if(this.rowinfo[h].selected&&(a||l))return this._doSelection(this._lastSelectedKey,!1,!1),this._lastSelectedKey=h,w=this.rowsByKey[h],c=this.getrowindex(w),s._updateSelection(),k=this.getrowdisplayindex(w),this._raiseEvent("rowUnselect",{key:h,index:k,boundIndex:c,row:w}),!1;this._lastSelectedKey=h;var w=this.rowsByKey[h],c=this.getrowindex(w),k=(this._doSelection(h,!0,!1),s._updateSelection(),this.getrowdisplayindex(w));if(this._raiseEvent("rowSelect",{key:h,index:k,boundIndex:c,row:w}),this.treeGrid)if(37==i){var B=null;if((o=this._getuirow(h))&&!o.attr("data-role")&&(B=o.attr("data-key")),this.pageable&&null==B&&0<this.dataview.pagenum)for(;null==this._getuirow(h)&&0<this.dataview.pagenum;)this.goToPrevPage()}else 39==i&&(B=null,(o=this._getuirow(h))&&!o.attr("data-role")&&(B=o.attr("data-key")),this.pageable&&null==B&&this.goToNextPage());return!1}}},_selection:function(e){if("selectionStart"in e[0])return r=(i=e[0]).selectionEnd-i.selectionStart,{start:i.selectionStart,end:i.selectionEnd,length:r,text:i.value};var t=document.selection.createRange();if(null==t)return{start:0,end:i.value.length,length:0};var i=e[0].createTextRange(),e=i.duplicate(),r=(i.moveToBookmark(t.getBookmark()),e.setEndPoint("EndToStart",i),t.text.length);return{start:e.text.length,end:e.text.length+t.text.length,length:r,text:t.text}},_doSelection:function(e,t,i){var r;null==e?this.clearSelection():("singlerow"===this.selectionMode&&this.clearSelection(!1),(r=this.rowinfo[e])?(r.selected=t,this.ensurerowvisiblebykey(e)):(this.ensurerowvisiblebykey(e),(r=this.rowinfo[e])?r.selected=t:this.rowinfo[e]={selected:t}),"none"!=this.selectionMode&&!1!==i&&this._renderrows())},clearSelection:function(e){if(this.rowinfo){var t,i=this.getRows();for(t in this.rowinfo){var r,s,o=this.rowinfo[t];o.selected&&(o.selected=!1,r=i.indexOf(o.row),s=this.getrowdisplayindex(o.row),this._raiseEvent("rowUnselect",{key:t,index:s,boundIndex:r,row:o.row}))}}!1!==e&&this._renderrows()},exportData:function(h){if(!U.jqx.dataAdapter.ArrayExporter){if(this.treeGrid)throw"jqxTreeGrid: Missing reference to jqxdata.export.js!";throw"jqxDataTable: Missing reference to jqxdata.export.js!"}var l,n=this.exportSettings.columnsHeader,e=(null==n&&(n=!0),this.exportSettings.hiddenColumns),t=(null==e&&(e=!1),this.exportSettings.serverURL),F=this.exportSettings.characterSet,a=this.exportSettings.collapsedRecords,i=(null==a&&(a=!1),this.exportSettings.fileName),c=(void 0===i&&(i=this.treeGrid?"jqxTreeGrid_Data":"jqxDataTable_Data"),this),u=this.getRows();if(1==this.exportSettings.recordsInView&&(u=this.getView()),this.treeGrid&&this.treeGrid.virtualModeCreateRecords&&(u=this.treeGrid.getRows()),this.groups&&0<this.groups.length&&(s=this.source.getGroupedRecords(this.groups,"records","label",null,"data",null,"parent",u),s=(l=function(e,t){for(var i=0;i<e.length;i++){var r=U.extend({},e[i]);if(t.push(r),r.records&&0<r.records.length)for(var s=l(r.records,new Array),o=0;o<s.length;o++)s[o].leaf,t.push(s[o])}return t}).call(this,s,new Array),u=s),0==u.length)throw"No data to export.";this.exporting=!0,this.altRows&&this._renderrows();for(var g=new Array,r=0;r<this.columns.records.length;r++)!e&&this.columns.records[r].hidden||g.push(U.extend({},this.columns.records[r]));if(this.groups&&0<this.groups.length&&0<g.length)for(var d=this._names(),r=0;r<u.length;r++)u[r][d.leaf]||(c.rtl?u[r][g[g.length-1].displayfield]=u[r].label:u[r][g[0].displayfield]=u[r].label);var p=0;if(this.treeGrid){var s=this.treeGrid.getRows(),d=(1==this.exportSettings.recordsInView&&(s=this.getView()),this._names()),o=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i[d.expanded]||!i[d.expanded]&&a;p=Math.max(p,1+i[d.level]),i.records&&0<i.records.length&&r&&o(e[t].records)}};if(o(s),"xml"!=h&&"json"!=h){for(var R=g.length,r=0;r<p;r++)(B=new K(this,this)).width=this.indentWidth,B.datafield="Level"+r,B.displayfield="Level"+r,B.align="center",B.cellsalign="center",B.text="",this.rtl?g.splice(R,0,B):g.splice(r,0,B);var f=new Array,L=!(!this.source._source.hierarchy||!this.source._source.hierarchy.groupingDataFields),m=function(e){for(var t=0;t<e.length;t++){for(var i=U.extend({},e[t]),r=0;r<i[d.level];r++)i["Level"+r]="";var s=i[d.expanded]||!i[d.expanded]&&a;("xls"==h||"html"==h||"pdf"==h)&&i.records&&0<i.records.length?i["Level"+i[d.level]]=s?"-":"+":i["Level"+i[d.level]]="",i[d.leaf]&&(i["Level"+i[d.level]]="");for(r=i[d.level]+1;r<p;r++)i["Level"+r]="";if(L&&!i[d.leaf]&&(c.rtl?i[g[g.length-p-1].displayfield]=i.label:i[g[p].displayfield]=i.label),i.aggregate)for(var o="xls"==h?"_AG":"",r=p;r<g.length;r++){var l=r;c.rtl&&(l=g.length-r-1),null!=i[g[l].displayfield]&&(i[g[l].displayfield]=o+i[g[l].displayfield])}f.push(i),s&&!i[d.leaf]&&m(i.records)}};m(s),u=f}else u=s}for(var w,v,y,A=null!=e&&e,x={},b={},s=this.host.find(".jqx-grid-cell:first"),_=this.host.find(".jqx-grid-cell-alt:first"),j=this,q=(s.removeClass(j.toThemeProperty("jqx-grid-cell-selected")),s.removeClass(j.toThemeProperty("jqx-fill-state-pressed")),_.removeClass(j.toThemeProperty("jqx-grid-cell-selected")),_.removeClass(j.toThemeProperty("jqx-fill-state-pressed")),s.removeClass(j.toThemeProperty("jqx-grid-cell-hover")),s.removeClass(j.toThemeProperty("jqx-fill-state-hover")),_.removeClass(j.toThemeProperty("jqx-grid-cell-hover")),_.removeClass(j.toThemeProperty("jqx-fill-state-hover")),"cell"),S=1,O=1,T=[],C=0;C<g.length;C++)if(""!=(B=g[C]).cellclassname)if(B.customCellStyles=new Array,"string"==typeof B.cellclassname)B.customCellStyles.push(B.cellclassname);else for(r=0;r<u.length;r++){var z=r,z=B.cellclassname(z,B.displayfield,u[r][B.displayfield],u[r]);z&&(B.customCellStyles[r]=z)}if(U.each(g,function(e){function t(e){if(e.removeClass(j.toThemeProperty("jqx-cell")),e.removeClass(j.toThemeProperty("jqx-grid-cell-selected")),e.removeClass(j.toThemeProperty("jqx-fill-state-pressed")),e.removeClass(j.toThemeProperty("jqx-grid-cell-hover")),e.removeClass(j.toThemeProperty("jqx-fill-state-hover")),o.customCellStyles)for(var t in o.customCellStyles)e.removeClass(o.customCellStyles[t])}var i,r=e,s=(c.treeGrid&&(p<=e?r=g.length-p-1:0<p&&e<p&&(r=0)),U(c._table[0].rows[0].cells[r])),o=(1<c._table[0].rows.length&&(0==(i=U(c._table[0].rows[1].cells[r])).length&&(i=U(c._table[0].rows[1].cells[0]))),0==s.length&&(s=U(c._table[0].rows[0].cells[0])),this);if(t(s),i&&t(i),null==this.displayfield)return!0;c.showAggregates&&c.getcolumnaggregateddata&&(c.treeGrid?T.push(c.getcolumnaggregateddata(this.displayfield,this.aggregates,!0,function(e,t){for(var i=0;i<e.length;i++){var r=e[i];0===r.level&&t.push(r)}return t}(u,[]))):T.push(c.getcolumnaggregateddata(this.displayfield,this.aggregates,!0,u)));var d=c._getexportcolumntype(this),r=(!this.exportable||this.hidden&&!A||(x[this.displayfield]={},x[this.displayfield].text=this.text,x[this.displayfield].width=parseInt(this.width),isNaN(x[this.displayfield].width)&&(x[this.displayfield].width=60),500<x[this.displayfield].width&&(x[this.displayfield].width=500),x[this.displayfield].formatString=this.cellsFormat,x[this.displayfield].localization=c.gridlocalization,x[this.displayfield].type=d,x[this.displayfield].cellsAlign=this.cellsalign,x[this.displayfield].hidden=!n,x[this.displayfield].index=r,x[this.displayfield].maxIndex=g.length),q="cell"+S,this.element);if("json"!=h&&"xml"!=h){function l(e,t,i,r,s,o,l,a,n){b[e]={index:1+l,maxIndex:g.length},o.rtl&&(b[e].index=g.length-l),"html"!=h&&"xls"!=h&&"pdf"!=h||(t&&(b[e]["font-size"]=t.css("font-size"),b[e]["font-weight"]=t.css("font-weight"),b[e]["font-style"]=t.css("font-style"),b[e]["background-color"]=o._getexportcolor(t.css("background-color")),b[e].color=o._getexportcolor(t.css("color")),b[e]["border-color"]=o._getexportcolor(t.css("border-top-color"))),i?b[e]["text-align"]=s.align:(b[e]["text-align"]=s.cellsalign,b[e].formatString=s.cellsFormat,b[e].dataType=d),"html"!=h&&"pdf"!=h||(b[e]["border-top-width"]="0px",o.rtl?(b[e]["border-left-width"]="1px",b[e]["border-right-width"]="0px",l==g.length-p-1&&i&&(b[e]["border-right-width"]="1px")):(b[e]["border-left-width"]="0px",b[e]["border-right-width"]="1px"),b[e]["border-bottom-width"]="1px",t&&(b[e]["border-top-style"]=t.css("border-top-style"),b[e]["border-left-style"]=t.css("border-left-style"),b[e]["border-right-style"]=t.css("border-right-style"),b[e]["border-bottom-style"]=t.css("border-bottom-style")),i?(0!=l||o.rtl?l==g.length-1&&o.rtl&&(b[e]["border-right-width"]="1px"):b[e]["border-left-width"]="1px",t&&(b[e]["border-top-width"]="1px",b[e]["border-bottom-width"]=t.css("border-bottom-width"))):0!=l||o.rtl?l==g.length-1&&o.rtl&&(b[e]["border-right-width"]="1px"):b[e]["border-left-width"]="1px",t&&(b[e].height=t.css("height")),o.treeGrid&&!i&&(b[e].index-1<p?o.rtl?b[e]["border-left-width"]="0px":b[e]["border-right-width"]="0px":b[e].index-1==p&&(o.rtl?b[e]["border-right-width"]="0px":b[e]["border-left-width"]="0px")))),!s.exportable||s.hidden&&!A||(1==a?(x[s.displayfield].customCellStyles||(x[s.displayfield].customCellStyles=new Array),x[s.displayfield].customCellStyles[n]=e):i?x[s.displayfield].style=e:r?x[s.displayfield].cellAltStyle=e:x[s.displayfield].cellStyle=e)}if(l("column"+O,r,!0,!1,this,c,e),O++,l(q,s,!1,!1,this,c,e),c.altRows&&l(q="cellalt"+S,i,!1,!0,this,c,e),this.customCellStyles){for(var a in o.customCellStyles)s.removeClass(o.customCellStyles[a]);for(var a in o.customCellStyles)s.addClass(o.customCellStyles[a]),l(q+o.customCellStyles[a],s,!1,!1,this,c,e,!0,a),s.removeClass(o.customCellStyles[a])}S++}}),"json"!=h&&"xml"!=h&&0<p&&this.treeGrid){var P=p+1;if(this.rtl&&(P=g.length-p),b["column"+P]){for(var H=b["column"+P],r=(H.merge=p,H["border-left-width"]="1px",b["cell"+P],0);r<g.length;r++){P=r+1;if(this.rtl&&(P=g.length-r),b["column"+P].level=r,b["column"+P].maxLevel=p,b["cell"+P].maxLevel=p,(B=g[r]).customCellStyles)for(var k in B.customCellStyles)b["cell"+P+B.customCellStyles[k]]&&(b["cell"+P+B.customCellStyles[k]].maxLevel=p);b["cellalt"+P]&&(b["cellalt"+P].maxLevel=p)}for(r=0;r<p;r++){var B,P=r+1,D=r,I=(this.rtl&&(P=g.length-r),b["column"+P]);if(I.disabled=!0,b["cell"+P].level=D,b["cell"+P].maxLevel=p,b["column"+P].level=D,b["cellalt"+P]&&(b["cellalt"+P].level=D,b["cellalt"+P].maxLevel=p),(B=g[r]).customCellStyles)for(var k in B.customCellStyles)b["cell"+P+B.customCellStyles[k]]&&(b["cell"+P+B.customCellStyles[k]].maxLevel=p,b["cell"+P+B.customCellStyles[k]].level=D);"html"!=h&&"pdf"!=h&&"xls"!=h||(I["font-size"]=H["font-size"],I["font-weight"]=H["font-weight"],I["font-style"]=H["font-style"],I["background-color"]=H["background-color"],I.color=H.color,I["border-color"]=H["border-color"],"html"!=h&&"pdf"!=h||(I["border-top-width"]=H["border-top-width"],I["border-left-width"]=H["border-left-width"],this.rtl&&(I["border-right-width"]=H["border-right-width"],0==r&&(I["border-right-width"]="1px")),(0==r&&!this.rtl||0==r&&this.rtl)&&(I["border-left-width"]="0px"),this.rtl?this.rtl&&(I["border-left-width"]="0px"):I["border-right-width"]="0px",I["border-bottom-width"]="0px",I=b["cell"+P],this.rtl?this.rtl&&(I["border-left-width"]="0px"):I["border-right-width"]="0px"))}}}this.showAggregates&&(w=[],v="xls"==h?"_AG":"",y=0,this.rowDetails&&!this.treeGrid&&y++,0<T.length&&(U.each(g,function(e){if(this.aggregates)for(var t,i,r,s=0;s<this.aggregates.length;s++)w[s]||(w[s]={}),w[s]&&(t=c._getaggregatename(this.aggregates[s]),i=c._getaggregatetype(this.aggregates[s]),(r=T[e-y])&&(w[s][this.displayfield]=v+t+": "+r[i]))}),U.each(g,function(e){for(var t=0;t<w.length;t++)null==w[t][this.displayfield]&&(w[t][this.displayfield]=v)})),U.each(w,function(){u.push(this)}));var M,j=this,s=U.jqx.dataAdapter.ArrayExporter(u,x,b,t,this.treeGrid&&("xml"==h||"json"==h));if(null==i)return this._renderrows(),M=this.treeGrid&&("xml"==h||"json"==h),_=s.exportTo(h,this.treeGrid&&("xml"==h||"json"==h)),this.showAggregates&&U.each(w,function(){u.pop(this)}),setTimeout(function(){j.exporting=!1},50),_;M=this.treeGrid&&("xml"==h||"json"==h),s.exportToFile(h,i,t,F,M),this.showAggregates&&U.each(w,function(){u.pop(this)}),this._renderrows(),setTimeout(function(){j.exporting=!1},50)},_getexportcolor:function(e){e="transparent"==e?"#FFFFFF":e;if(-1==(e=e&&e.toString()?e:"#FFFFFF").toString().indexOf("rgb"))return-1!=e.toString().indexOf("#")&&4==e.toString().length&&(t=e.toString().substring(1,4),e+=t),e;var t=e.split(",");if(-1!=e.toString().indexOf("rgba"))return i=parseInt(t[0].substring(5)),r=parseInt(t[1]),s=parseInt(t[2]),e=parseFloat(t[3].substring(1,4)),o=this._rgbToHex(l={r:i,g:r,b:s}),0==i&&0==r&&0==s&&0==e?"#ffffff":"#"+o;var i,r,s,o,l={r:i=parseInt(t[0].substring(4)),g:r=parseInt(t[1]),b:s=parseInt(t[2].substring(1,4))};return"#"+(o=this._rgbToHex(l))},_rgbToHex:function(e){return this._intToHex(e.r)+this._intToHex(e.g)+this._intToHex(e.b)},_intToHex:function(e){e=parseInt(e).toString(16);return(e=1==e.length?"0"+e:e).toUpperCase()},_getexportcolumntype:function(e){var t="string",i=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(i){var r="";if(U.each(i,function(){if(this.name==e.displayfield)return this.type&&(r=this.type),!1}),r)return r}if(null!=e){if(null==this.dataview.cachedrecords)return t;var s=null;if(this.virtualmode)U.each(this.dataview.cachedrecords,function(){return s=this[e.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return t;if(null!=(s=this.dataview.cachedrecords[0][e.displayfield])&&""==s.toString())return"string"}if(null!=s){if(-1!=e.cellsFormat.indexOf("c"))return"number";if(-1!=e.cellsFormat.indexOf("n"))return"number";if(-1!=e.cellsFormat.indexOf("p"))return"number";if(-1!=e.cellsFormat.indexOf("d"))return"date";if(-1!=e.cellsFormat.indexOf("y"))return"date";if(-1!=e.cellsFormat.indexOf("M"))return"date";if(-1!=e.cellsFormat.indexOf("m"))return"date";if(-1!=e.cellsFormat.indexOf("t"))return"date";if("boolean"==typeof s)t="boolean";else if(U.jqx.dataFormat.isNumber(s))t="number";else{var i=new Date(s);if("NaN"==i.toString()||"Invalid Date"==i.toString())if(U.jqx.dataFormat){if(null!=(i=U.jqx.dataFormat.tryparsedate(s))){if(i&&i.getFullYear())if(1970==i.getFullYear()&&0==i.getMonth()&&1==i.getDate())return i=new Number(s),isNaN(i)?"string":"number";return"date"}t="string"}else t="string";else t="date"}}}return t},showDetails:function(e){e=this._getkey(e);this.showdetailsbykey(e)},hideDetails:function(e){e=this._getkey(e);this.hidedetailsbykey(e)},setCellValueByKey:function(e,t,i){var r=this.rowsByKey[e],s=this.getrowindex(r),o=r;if(null!=o&&o[t]==i)return!1;if(null==o||null!==o[t]||""!==i){var l="";if(null!=o&&o[t]!==i){var a,n=this.getColumn(t),d="string",h=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(h&&(a="",U.each(h,function(){if(this.name==n.displayfield)return this.type&&(a=this.type),!1}),a&&(d=a)),l=o[t],!n.nullable||null!=i&&""!==i&&n.nullable&&void 0===i.label)if(U.jqx.dataFormat.isNumber(l)||"number"==d||"float"==d||"int"==d||"decimal"==d&&"date"!=d?(i=new Number(i),i=parseFloat(i),isNaN(i)&&(i=0)):!U.jqx.dataFormat.isDate(l)&&"date"!=d||""==i||(d=i,"Invalid Date"!=(d=new Date(d))&&null!=d?i=d:"Invalid Date"==d&&(i=d=new Date)),o[t]===i)return;this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,o[t]=i,this.treeGrid&&(c=this.treeGrid.getRow(e))&&(c[t]=i),null!=i&&null!=i.label&&(o[(n=this.getColumn(t)).displayfield]=i.label,o[t]=i.value,this.treeGrid&&(c=this.treeGrid.getRow(e))&&(c[n.displayfield]=i.label,c[t]=i.value))}if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var d=s,c=this.source._source._localdata()[d],d=(this.source.suspendKO=!0,c);if(d[t]&&d[t].subscribe)null!=i&&null!=i.label?(d[n.displayfield](i.label),d[t](i.value)):d[t](i);else{var h=this.source._source.datafields,u=null;if(h&&U.each(h,function(){if(this.name==t)return u=this.map,!1}),null==u)null!=i&&null!=i.label?(d[t]=i.value,d[n.displayfield]=i.label):d[t]=i;else{var g=u.split(this.source.mapChar);if(0<g.length){for(var p=d,f=0;f<g.length-1;f++)p=p[g[f]];p[g[g.length-1]]=i}}this.source._source._localdata.replace(c,U.extend({},d))}this.source.suspendKO=!1}if(this.source.updaterow)try{null==this.source.updaterow(e,o,function(e){0==e&&this.setCellValue(r,t,l,!0,!1)})&&0}catch(e){return void this.setCellValue(r,t,l)}h=this.getrowdisplayindex(r),n=this.getColumn(t);this._raiseEvent("cellValueChanged",{value:i,oldValue:l,dataField:t,displayField:n.displayfield,key:e,boundIndex:s,index:h,row:this.rowsByKey[e]}),this.editable&&null!=this.editKey||this._renderrows()}},setCellValue:function(e,t,i){if(null==e||null==t)return!1;e=parseInt(e),e=this._getkey(e);this.setCellValueByKey(e,t,i)},getCellText:function(e,t){if(null==e||null==t)return!1;e=parseInt(e),e=this._getkey(e);return this.getCellTextByKey(e,t)},getCellTextByKey:function(e,t){if(null==e||null==t)return null;e=this.getCellValueByKey(e,t),t=this.getColumn(t);return t&&""!=t.cellsFormat&&U.jqx.dataFormat&&(U.jqx.dataFormat.isDate(e)?e=U.jqx.dataFormat.formatdate(e,t.cellsFormat,this.gridlocalization):(U.jqx.dataFormat.isNumber(e)||!isNaN(parseFloat(e))&&isFinite(e))&&(e=U.jqx.dataFormat.formatnumber(e,t.cellsFormat,this.gridlocalization))),e},getCellValue:function(e,t){if(null==e||null==t)return!1;e=parseInt(e),e=this._getkey(e);return this.getCellValueByKey(e,t)},getCellValueByKey:function(e,t){var i=this.rowsByKey[e];!i&&this.treeGrid&&(i=this.treeGrid.getRow(e)),this.getrowindex(i);return null!=i?i[t]:null},beginRowEdit:function(e){e=this._getkey(e);this.beginroweditbykey(e)},beginCellEdit:function(e,t){e=this._getkey(e),t=this.getColumn(t);this.beginroweditbykey(e,t)},endCellEdit:function(e,t,i){this.endRowEdit(e,i)},endRowEdit:function(e,t){e=this._getkey(e);this.endroweditbykey(e,t)},getrowindex:function(e){var t=this.getRows().indexOf(e);if(-1!=t)return t;if(this.groups&&0<this.groups.length)for(var i=this.getRows(),r=0;r<i.length;r++)if(e.originalRecord){if(i[r].uid==e.originalRecord.uid){t=r;break}}else if(i[r].uid==e.uid){t=r;break}return t},getrowdisplayindex:function(e){if(this.treeGrid)return-1;var t=this.getView(),i=t.indexOf(e);if(-1!=i)return i;if(null==e)return i;for(var r=t,s=0;s<r.length;s++)if(r[s].uid==e.uid||e.originalRecord&&r[s].uid==e.originalRecord.uid){i=s;break}return i},beginroweditbykey:function(e,t){if(this.beginEdit&&!1===this.beginEdit(e,t))return!1;var i=this.treeGrid?this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0:this.groups.length;if(0<i){var r=this.rowsByKey[e];if((r=this.treeGrid?this.treeGrid.getRow(e):r).level<i)return!1}if(null==this._lastSelectedKey&&this.selectrowbykey(e),this.editKey===e&&null!=this.editKey)return!1;if(this.rowinfo[e]&&this.rowinfo[e].locked)return!1;if(null!=this.editKey)return this.endroweditbykey(e,!0),!1;var s=this.editSettings.editSingleCell;if(!t&&s&&this.columns.records&&0<this.columns.records.length){for(var o=0;o<this.columns.records.length&&(!(t=this.columns.records[o]).editable||t.hidden);o++);if(!t)return!1}if(s&&t&&!t.editable)return this.editKey=null,!1;s&&(this.editColumn=t);var l=this,r=this.rowsByKey[e],a=(this.treeGrid&&(r=this.treeGrid.getRow(e)),this.getrowindex(r)),i=this._getuirow(e),n=this._getpinneduirow(e),d=(this._editors=new Array,!1);if(i)for(var h=i[0].cells,c=0,o=0;o<h.length;o++){var u=this.columns.records[o],g=h[o];if(!u.rowDetailscolumn&&!(u.checkboxcolumn||(u.pinned&&(g=n[0].cells[o]),s&&t&&u.datafield!=t.datafield||(U(g).removeClass(this.toTP("jqx-grid-cell-selected")),U(g).removeClass(this.toTP("jqx-fill-state-pressed")),U(g).removeClass(this.toTP("jqx-grid-cell-hover")),U(g).removeClass(this.toTP("jqx-fill-state-hover")),"none"==u.columntype)))){var p=U(g).outerWidth(),f=U(g).width(),m=(0===c&&(c=U(g).outerHeight()-1),U(g).css("padding","0px"),"<div style='height:"+c+"px; width: 100%; overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 9999;'></div>"),w=this.getCellTextByKey(e,u.displayfield),v=(g.innerHTML=m,U(g.firstChild));switch(u.columntype){case"textbox":case"default":var y,x,b=U("<input style='border: none;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox'/>").appendTo(v);this.rtl&&b.css("direction","rtl"),b.addClass(this.toThemeProperty("jqx-input")),b.addClass(this.toThemeProperty("jqx-widget-content")),b.addClass(this.toThemeProperty("jqx-cell-editor")),b[0].onfocus=function(t){setTimeout(function(){var e;t?0<=(e=U(t.target).parent().parent().index())&&l.ensureColumnVisible(l.columns.records[e].datafield):0<=(e=U(document.activeElement).parent().parent().index())&&l.ensureColumnVisible(l.columns.records[e].datafield),l.content&&(l.content[0].scrollTop=0,l.content[0].scrollLeft=0),l.gridcontent&&(l.gridcontent[0].scrollLeft=0,l.gridcontent[0].scrollTop=0)},10)},u.editable?d||(d=!0,(y=U.jqx.browser.msie&&10<U.jqx.browser.version)||b.focus(),x=b,setTimeout(function(){var e,t=x.val().length;y||x.focus();try{"selectionStart"in x[0]?x[0].setSelectionRange(0,t):((e=x[0].createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",0),e.select())}catch(e){}},10)):(b.attr("disabled",!0),b.attr("readOnly",!0),b.addClass(this.toThemeProperty("jqx-fill-state-disabled"))),b.width(f),b.height(c),U.jqx.browser.msie&&U.jqx.browser.version<9&&b.css("line-height",parseInt(c)+"px"),b.css("text-align",u.cellsalign),null==(w=null===w?"":w)&&(w=""),b.val(w),u.createeditor&&(S=w,w=this.getCellValueByKey(e,u.displayfield),u.createeditor(this.treeGrid?e:a,w,b,S,f,c)),this._editors.push({column:u,editor:b}),""==u.cellsFormat||-1==u.cellsFormat.indexOf("p")&&-1==u.cellsFormat.indexOf("c")&&-1==u.cellsFormat.indexOf("n")&&-1==u.cellsFormat.indexOf("f")||b.keydown(function(e){e=e.charCode||e.keyCode||0,e=String.fromCharCode(e),e=parseInt(e);if(isNaN(e))return!0;if(0<l._selection(b).length)return!0;var t,i="",r=b.val();if(1<u.cellsFormat.length?(t=parseInt(u.cellsFormat.substring(1)),isNaN(t)&&(t=0)):t=0,0<t&&-1!=r.indexOf(l.gridlocalization.decimalseparator)&&l._selection(b).start>r.indexOf(l.gridlocalization.decimalseparator))return!0;for(var s=0;s<r.length-t;s++){var o=r.substring(s,s+1);null!=o.match(/^[0-9]+$/)&&(i+=o)}return!(11<=i.length)&&void 0}),u.initeditor&&(S=w,w=this.getCellValueByKey(e,u.displayfield),u.initeditor(this.treeGrid?e:a,w,b,S,f,c));break;case"custom":case"template":this.editorsCache||(this.editorsCache=new Array);var _=U("<div style='width: 100%; height: 100%; border: none;'></div>").appendTo(v),j=U.trim(u.datafield).split(" ").join(""),q=(-1!=j.indexOf(".")&&(j=j.replace(".","")),this.editorsCache["templateeditor_"+j]),S=("custom"==u.columntype&&(q=this.editorsCache["customeditor_"+j+"_"+e]),w),w=this.getCellValueByKey(e,u.displayfield);q?((b=q).width(p),b.height(c),b.appendTo(_)):((b=U("<div style='border: none;'></div>")).width(p),b.height(c),q=b,null===w&&(w=""),"custom"!=u.columntype?this.editorsCache["templateeditor_"+j]=b:this.editorsCache["customeditor_"+j+"_"+e]=b,b.appendTo(_),u.createeditor&&u.createeditor(this.treeGrid?e:a,w,b,S,p,c)),u.initeditor&&u.initeditor(this.treeGrid?e:a,w,b,S,p,c),this._editors.push({column:u,editor:b})}}}this.editKey=e,this.beginUpdate();var T,C,i=this.getrowdisplayindex(r);this._raiseEvent("rowBeginEdit",{key:e,index:i,boundIndex:a,row:this.rowsByKey[e]}),s&&(C=T=null,(r=this.rowsByKey[e])&&(T=r[t.datafield],C=r[t.displayfield]),this._raiseEvent("cellBeginEdit",{value:T,displayValue:C,key:e,index:i,dataField:t.datafield,displayField:t.displayfield,boundIndex:a,row:this.rowsByKey[e]})),this.endUpdate(!1)},_toNumber:function(e){-1<(e=(e=function(e,t,i){var r=e;if(t==i)return e;for(var s=r.indexOf(t);-1!=s;)s=(r=r.replace(t,i)).indexOf(t);return r}(e=-1<(e=e.indexOf||null==e?e:e.toString()).indexOf(this.gridlocalization.currencysymbol)?e.replace(this.gridlocalization.currencysymbol,""):e,this.gridlocalization.thousandsseparator,"")).replace(this.gridlocalization.decimalseparator,".")).indexOf(this.gridlocalization.percentsymbol)&&(e=e.replace(this.gridlocalization.percentsymbol,""));for(var t="",i=0;i<e.length;i++){var r=e.substring(i,i+1);"-"===r&&(t+="-"),"."===r&&(t+="."),null!=r.match(/^[0-9]+$/)&&(t+=r)}return e=(e=t).replace(/ /g,"")},_geteditorvalue:function(e,t,i,r){var s=new String;if(t){if(!e.geteditorvalue){if(e.columntype,s=t.val(),""!=e.cellsFormat){var o,l="string",a=this.source.datafields||(this.source._source?this.source._source.datafields:null),a=(a&&(o="",U.each(a,function(){if(this.name==e.displayfield)return this.type&&(o=this.type),!1}),o&&(l=o)),"number"===l||"float"===l||"int"===l||"integer"===l),n="date"===l||"time"===l;if(a||"string"===l&&(-1!=e.cellsFormat.indexOf("p")||-1!=e.cellsFormat.indexOf("c")||-1!=e.cellsFormat.indexOf("n")||-1!=e.cellsFormat.indexOf("f"))){if(""===s&&e.nullable)return"";s=this._toNumber(s),s=new Number(s),isNaN(s)&&(s="")}if(n||"string"===l&&(-1!=e.cellsFormat.indexOf("H")||-1!=e.cellsFormat.indexOf("m")||-1!=e.cellsFormat.indexOf("M")||-1!=e.cellsFormat.indexOf("y")||-1!=e.cellsFormat.indexOf("h")||-1!=e.cellsFormat.indexOf("d"))){if(""===s&&e.nullable)return"";a=s;!("Invalid Date"==(s=new Date(s))||null==s||1<e.cellsFormat.length)||"Invalid Date"!=(s=U.jqx.dataFormat?U.jqx.dataFormat.parsedate(a,e.cellsFormat,this.gridlocalization):s)&&null!=s||(s="")}}e.displayfield!=e.datafield&&(s={label:s,value:s})}e.geteditorvalue&&(n=this.getCellValueByKey(r,e.displayfield),s=e.geteditorvalue(this.treeGrid?r:i,n,t))}return s},_validateEditors:function(e){for(var t=this,i=!0,r=t.rowsByKey[e],s=t.getrowindex(r),o=t._editors,e=t.editKey,l=t._getuirow(e),a=0;a<o.length;a++){var n=o[a].editor,d=o[a].column,h=t._geteditorvalue(d,n,s,e);if(d.validation){n.removeClass(t.toThemeProperty("jqx-grid-validation-label"));var c=d.datafield;try{var u=d.validation({value:h,row:e,datafield:d.datafield,displayfield:d.displayfield,column:d},h),g=t.gridlocalization.validationstring;null!=u.message&&(g=u.message),("boolean"==typeof u?u:u.result)||(null!=u.showmessage&&1!=u.showmessage||t._showvalidationpopup(l,c,g,n),i=!1)}catch(e){t._showvalidationpopup(l,c,t.gridlocalization.validationstring,n),i=!1}}}return i},endroweditbykey:function(d,e){var h=this;if(null!==h.editKey){if(this.endEdit)if(!1===this.endEdit(d))return;var c=h.rowsByKey[d],u=h.getrowindex(c),g=h._editors,p=h.editKey;h._getuirow(p);if(!0!==e){e=!0;if(g&&(e=h._validateEditors(p))){for(var t=U.extend({},c),f=U.extend({},c),i=0;i<g.length;i++){var r=g[i].editor,s=g[i].column,r=h._geteditorvalue(s,r,u,p);r&&null!=r.label?(t[s.displayfield]=r.label,t[s.datafield]=r.value):t[s.displayfield]=r}h.updaterowbykey(h.editKey,t,!1,function(){h.dataview._sortHierarchyData=null,h.dataview._sortData=null;for(var e=0;e<g.length;e++){var t,i,r,s,o,l=g[e].editor,a=g[e].column,l=h._geteditorvalue(a,l,u,p),n=f[a.displayfield];l&&null!=l.label?(c[a.displayfield]=l.label,c[a.datafield]=l.value):c[a.displayfield]=l,!h.treeGrid||(t=h.treeGrid.getRow(p))&&(t[a.displayfield]=l),h.editorsCache&&(t=function(e){var t;e&&e.jqxWidget&&((0<=(t=e.jqxWidget.element.className).indexOf("dropdownlist")||0<=t.indexOf("datetimeinput")||0<=t.indexOf("combobox")||0<=t.indexOf("menu"))&&e.jqxWidget.isOpened&&e.jqxWidget.isOpened()&&e.jqxWidget.close())},i="customeditor_"+a.displayfield+"_"+d,r="templateeditor_"+a.displayfield,h.editorsCache[i]&&(s=U(h.editorsCache[i]).data(),o=h.editorsCache[i],t(s=!s.jqxWidget&&U(o).children()[0]&&U(U(o).children()[0]).data().jqxWidget?U(U(o).children()[0]).data():s),h.editorsCache[i].detach()),h.editorsCache[r]&&(h.editorsCache[r].detach(),s=U(h.editorsCache[r]).data(),o=h.editorsCache[r],t(s=!s.jqxWidget&&U(o).children()[0]&&U(U(o).children()[0]).data().jqxWidget?U(U(o).children()[0]).data():s))),l!=n&&(h.beginUpdate(),h._raiseEvent("cellValueChanged",{value:l,oldValue:n,dataField:a.datafield,displayField:a.displayfield,key:d,index:u,row:c}),h.endUpdate(!1))}})}if(!e)return!1}return h._detachEditors(p),!0}},_detachEditors:function(e){var t=this,i=t.rowsByKey[e],r=t.getrowindex(i);if(t.editorsCache)for(var s in t.editorsCache){var o,l=U(t.editorsCache[s]).data();l&&l.jqxWidget&&((0<=(o=l.jqxWidget.element.className).indexOf("dropdownlist")||0<=o.indexOf("datetimeinput")||0<=o.indexOf("combobox")||0<=o.indexOf("menu"))&&l.jqxWidget.isOpened&&l.jqxWidget.isOpened()&&l.jqxWidget.close()),U(t.editorsCache[s]).detach()}t.beginUpdate();var a,n,d=t.getrowdisplayindex(i);t.editSettings.editSingleCell&&(n=a=null,(i=t.rowsByKey[e])&&(a=i[t.editColumn.datafield],n=i[t.editColumn.displayfield]),t._raiseEvent("cellEndEdit",{value:a,displayValue:n,key:e,index:d,dataField:t.editColumn.datafield,displayField:t.editColumn.displayfield,boundIndex:r,row:t.rowsByKey[e]})),t._raiseEvent("rowEndEdit",{key:e,index:d,boundIndex:r,row:t.rowsByKey[e]}),t.endUpdate(!1),t.editColumn=null,t.editKey=null,t._renderrows(),t._renderhorizontalscroll(),t.host.focus(),setTimeout(function(){t.host.focus()},10)},_showvalidationpopup:function(e,t,i,r){null==i&&(i=this.gridlocalization.validationstring),r.addClass(this.toThemeProperty("jqx-grid-validation-label"));var s=U("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),o=U("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");s.html(i),o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),s.addClass(this.toThemeProperty("jqx-grid-validation")),s.addClass(this.toThemeProperty("jqx-rc-all")),s.hide(),o.hide(),s.prependTo(this.table),o.prependTo(this.table);var l,a,i=this.hScrollInstance.value,i=parseInt(i),t=this.getColumn(t).uielement;e&&(e=e,s.css("top",parseInt(e.position().top)+30+"px"),a=parseInt(s.css("top")),o.css("top",a-11),o.removeClass(),o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),l=!1,a>=this._table.height()&&(o.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),(a=parseInt(e.position().top)-e.outerHeight()-5)<0&&(a=0,o.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),l=!0),s.css("top",a+"px"),o.css("top",a+s.outerHeight()-9)),e=-i+parseInt(U(t).position().left),a=parseInt(this._table.css("left")),isNaN(a)&&(a=0),o.css("left",(i=0!=a?0:i)+e+30),(a=s.width())+e>this.host.width()-20&&(e-=a+e-this.host.width()+40),l?s.css("left",i+parseInt(U(t).position().left)-s.outerWidth()):s.css("left",i+e),r.mouseenter(function(){r.hasClass("jqx-grid-validation-label")&&(s.show(),o.show())}),r.mouseleave(function(){s.hide(),o.hide()}),this.popups||(this.popups=new Array),this.popups[this.popups.length]={validation:s,validationrow:o})},addRow:function(r,s,i,h){if(null==s)return!1;this._datachanged=!0,null==i&&(i="last");var e,o,l,t=!1,a=this.that,c=(null==r?(e=this.dataview.filters&&0<this.dataview.filters.length,o=e?this.source.records.length:this.dataview.totalrecords,this.pageable||(this.source._source.totalrecords?this.dataview.totalrecords=this.source._source.totalrecords:this.source._source.totalRecords?this.dataview.totalrecords=this.source._source.totalRecords:0!==this.source.hierarchy.length?this.dataview.totalrecords=this.source.hierarchy.length:this.dataview.totalrecords=this.source.records.length,o=e?this.source.records.length:this.dataview.totalrecords),U.isArray(s)?(l=new Array,U.each(s,function(e,t){var i=a.dataview.getid(a.dataview.source.id,s[e],o+e);l.push(i),a.getColumn(a.dataview.source.id)&&(s[e][a.dataview.source.id]=i)}),r=l):(r=this.dataview.getid(this.dataview.source.id,s,o),this.getColumn(this.dataview.source.id)&&(s[this.dataview.source.id]=r))):U.isArray(s)?U.each(s,function(e,t){var i=r[e];a.getColumn(a.dataview.source.id)&&(s[e][a.dataview.source.id]=i)}):this.getColumn(this.dataview.source.id)&&(s[this.dataview.source.id]=r),!!this.treeGrid&&!!this.treeGrid.virtualModeCreateRecords),n=function(r,s,e,o){if(r._loading)throw new Error("jqxDataTable: "+r.loadingErrorMessage);var t,i,l,a,n=r.vScrollInstance.value,d=!1;return U.isArray(e)?U.each(e,function(e,t){var i=null;null!=s&&null!=s[e]&&(i=s[e]),this.uid=i,r.rowsByKey[i]=this,s==h&&(h=null),d=r.source.addRecord(this,o,h,c)}):(e.uid=s,r.rowsByKey[s]=e,s==h&&(h=null),d=r.source.addRecord(e,o,h,c)),r.groups&&0<r.groups.length&&(t=Object.prototype.toString,i=r.groups[0],Object.prototype.toString="function"==typeof i?i:function(){return this[i]},r.source.records.sort||(l=new Array,a=0,U.each([],function(){l[0+a++]=this}),0),r.source.records.sort(function(e,t){if(void 0===t&&(t=null),null===(e=void 0===e?null:e)&&null===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var i=0,r=0;if(e&&e.uid&&(i=e.uid),t&&t.uid&&(r=t.uid),e=e.toString(),t=t.toString(),U.jqx.dataFormat.isNumber(e)&&U.jqx.dataFormat.isNumber(t))return e<t?-1:t<e?1:0;if(U.jqx.dataFormat.isDate(e)&&U.jqx.dataFormat.isDate(t))return e<t?-1:t<e?1:0;U.jqx.dataFormat.isNumber(e)||U.jqx.dataFormat.isNumber(t)||(e=String(e).toLowerCase(),t=String(t).toLowerCase());try{if(e<t)return-1;if(t<e)return 1}catch(e){}if("number"==typeof i){if(i<r)return-1;if(r<i)return 1}return 0}),Object.prototype.toString=t),r.dataview._filteredData=null,r.dataview._sortData=null,(r.dataview._sortHierarchyData=null)!=r._updating&&0!=r._updating||r.refresh(),r.source&&r.source._knockoutdatasource&&!r._updateFromAdapter&&r.autokoupdates&&r.source._source._localdata&&(r.source.suspendKO=!0,r.source._source._localdata.push(e),r.source.suspendKO=!1),r.vScrollInstance.setPosition(n),d};if(this.source.addrow){function d(e,t){1!=e&&null!=e||n(a,r=null!=t?t:r,s,i)}try{null==(t=a.treeGrid?this.source.addrow(r,s,i,h,d):this.source.addrow(r,s,i,d))&&(t=!0)}catch(e){t=!1}if(0==t)return!1}else n(this,r,s,i);return t},deleteRow:function(e){e=this._getkey(e);this.deleterowbykey(e)},deleterowbykey:function(t){if(null==t)return!1;function i(o,e){if(o._loading)throw new Error("jqxDataTable: "+o.loadingErrorMessage);o.dataview._filteredData=null,o.dataview._sortData=null,o.dataview._sortHierarchyData=null;var t,i,r,s,l=!1,a=o.vScrollInstance.value;return U.isArray(e)?U.each(e,function(){var e,t,i,r,s=this;o.rowsByKey[s]&&(l=!0,o.rowinfo[s].selected&&o.unselectrowbykey(s,!1),o.treeGrid&&(e=o._names(),t=o.rowsByKey[s][e.parent]),delete o.rowsByKey[s],o.treeGrid&&o.rowinfo[s]&&(i=o.rowinfo[s].row.records,r=function(e){for(var t=0;t<e.length;t++){var i=e[t].uid;delete o.rowsByKey[i],delete o.rowinfo[i],e[t].records&&r(e[t].records)}},i&&(r(i),delete o.rowinfo[s])),o.source.deleteRecord(s),t&&e&&t.records&&0==t.records.length&&(t[e.leaf]=!0,o.rowinfo[t.uid][e.leaf]=!0))}):(l=!1,o.rowsByKey[e]&&(l=!0,o.rowinfo[e]&&o.rowinfo[e].selected&&o.unselectrowbykey(e,!1),o.treeGrid&&(t=o._names(),i=o.rowsByKey[e][t.parent]),delete o.rowsByKey[e],o.treeGrid&&o.rowinfo[e]&&(r=o.rowinfo[e].row.records,s=function(e){for(var t=0;t<e.length;t++){var i=e[t].uid;delete o.rowsByKey[i],delete o.rowinfo[i],e[t].records&&s(e[t].records)}},r&&s(r)),delete o.rowinfo[e],o.source.deleteRecord(e),i&&t&&i.records&&0==i.records.length&&(i[t.leaf]=!0,o.rowinfo[i.uid][t.leaf]=!0))),o.refresh(),o.source&&o.source._knockoutdatasource&&!o._updateFromAdapter&&o.autokoupdates&&o.source._source._localdata&&(o.source.suspendKO=!0,o.source._source._localdata.pop(),o.source.suspendKO=!1),o.vScrollInstance.setPosition(a),l}var r=!(this._datachanged=!0),s=this.that;if(this.source.deleterow)try{this.source.deleterow(t,function(e){1!=e&&null!=e||i(s,t)}),null==r&&(r=!0)}catch(e){r=!1}else r=i(s,t);return r},updateRow:function(e,t){e=this._getkey(e);this.updaterowbykey(e,t)},updaterowbykey:function(t,i,r,s){if(null==t||null==i)return!1;function o(s,e,o){if(s._loading)throw new Error("jqxDataTable: "+s.loadingErrorMessage);s.dataview._filteredData=null,s.dataview._sortData=null,s.dataview._sortHierarchyData=null;var t,l=!1,i=(U.isArray(e)?U.each(e,function(i,e){function t(e,t){r?r[this]=o[i]:l=!1,l=!0}var r=s.rowsByKey[this];t(),s.treeGrid&&(r=s.treeGrid.getRow(this),t())}):((i=function(e){if(e){for(var t=0;t<s.columns.records.length;t++)e[s.columns.records[t].datafield]=o[s.columns.records[t].datafield],0<s.groups.length&&e.originalRecord&&(e.originalRecord[s.columns.records[t].datafield]=o[s.columns.records[t].datafield]);l=!0}else l=!1})(t=s.rowsByKey[e]),s.treeGrid&&i(t=s.treeGrid.getRow(e))),s.vScrollInstance.value);return null!=r&&1!=r||null!=s._updating&&0!=s._updating||s._renderrows(),s.showAggregates&&s._updatecolumnsaggregates&&s._updatecolumnsaggregates(),s.source&&s.source._knockoutdatasource&&!s._updateFromAdapter&&s.autokoupdates&&s.source._source._localdata&&(t=s.rowsByKey[e],e=s.getrowindex(t),e=s.source._source._localdata()[e],s.source.suspendKO=!0,s.source._source._localdata.replace(e,U.extend({},t)),s.source.suspendKO=!1),s.vScrollInstance.setPosition(i),l}var l=this.that,a=!1;if(this.source.updaterow)try{null==(a=this.source.updaterow(t,i,function(e){1!=e&&null!=e||(o(l,t,i),s&&s(),l._renderrows(!1),l.autoRowHeight&&(l._updateScrollbars(),l._arrange()))}))&&(a=!0)}catch(e){a=!1}else(a=o(l,t,i))&&s&&s(),l._renderrows(!1),l.autoRowHeight&&(l._updateScrollbars(),l._arrange());return a},lockRow:function(e){e=this._getkey(e);this.lockrowbykey(e)},unlockRow:function(e){e=this._getkey(e);this.unlockrowbykey(e)},lockrowbykey:function(e){this.rowinfo[e]?this.rowinfo[e].locked=!0:this.rowinfo[e]={locked:!0},this._renderrows()},unlockrowbykey:function(e){this.rowinfo[e]?this.rowinfo[e].locked=!1:this.rowinfo[e]={locked:!1},this._renderrows()},selectRow:function(e){e=this._getkey(e);this.selectrowbykey(e)},unselectRow:function(e){e=this._getkey(e);this.unselectrowbykey(e)},selectrowbykey:function(e,t,i){"keyboard"!=t&&"mouse"!=t&&(this._lastSelectedKey=e);this._doSelection(e,!0,!1!==i);t=this.rowsByKey[e],i=this.getrowindex(t),t=this.getrowdisplayindex(t);this._raiseEvent("rowSelect",{key:e,index:t,boundIndex:i,row:this.rowsByKey[e]})},unselectrowbykey:function(e,t){this._doSelection(e,!1,!1!==t);var t=this.rowsByKey[e],i=this.getrowindex(t),t=this.getrowdisplayindex(t);this._raiseEvent("rowUnselect",{key:e,index:t,boundIndex:i,row:this.rowsByKey[e]})},getSelection:function(){var e=new Array;if(this.rowinfo)for(var t in this.rowinfo){t=this.rowinfo[t];t.selected&&e.push(t.row)}return e},showdetailsbykey:function(e){var t,i,r,s,o;!this.rowDetails||(t=this.rowinfo[e])&&(t.expanded=!0,r=U(this._table.children()[1]).children("[data-key="+e+"]"),s=U(this._pinnedTable.children()[1]).children("[data-key="+e+"]"),r&&(i=s.children(),o=U(i[0]),this.rtl&&(o=U(i[i.length-1])),this.rtl?(o.removeClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")),o.addClass(this.toThemeProperty("jqx-grid-group-expand-rtl")),o.removeClass(this.toThemeProperty("jqx-icon-arrow-left"))):(o.removeClass(this.toThemeProperty("jqx-grid-group-collapse")),o.addClass(this.toThemeProperty("jqx-grid-group-expand")),o.removeClass(this.toThemeProperty("jqx-icon-arrow-right"))),o.addClass(this.toThemeProperty("jqx-icon-arrow-down")),r.next().show(),(i=s.next()).show(),U.jqx.browser.msie&&U.jqx.browser.version<8&&(r.next().children().show(),s.next().children().show()),t.initialized||(o=t.detailsHeight,r=this.initRowDetails(e,t.row,U(U(i).children().children().children()[0]),t),t.details=U(i).children().children().children()[0],!(t.initialized=!0)!==r&&t.detailsHeight==o||(!1===r&&(t.expanded=!1,t.nodetails=!0,i.hide()),this._renderrows())),this._updateScrollbars(),"auto"!==this.height&&null!==this.height&&!this.autoheight||this._arrange(),s=this.getrowindex(t.row),o=this.getrowdisplayindex(t.row),this._raiseEvent("rowExpand",{row:t.row,index:o,boundIndex:s,rowKey:e})))},hidedetailsbykey:function(e){var t,i,r,s,o;!this.rowDetails||(t=this.rowinfo[e])&&(t.expanded=!1,i=U(this._table.children()[1]).children("[data-key="+e+"]"),r=U(this._pinnedTable.children()[1]).children("[data-key="+e+"]"),i&&(s=r.children(),o=U(s[0]),this.rtl&&(o=U(s[s.length-1])),this.rtl?(o.addClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")),o.removeClass(this.toThemeProperty("jqx-grid-group-expand-rtl")),o.addClass(this.toThemeProperty("jqx-icon-arrow-left"))):(o.addClass(this.toThemeProperty("jqx-grid-group-collapse")),o.removeClass(this.toThemeProperty("jqx-grid-group-expand")),o.addClass(this.toThemeProperty("jqx-icon-arrow-right"))),o.removeClass(this.toThemeProperty("jqx-icon-arrow-down")),i.next().hide(),r.next().hide(),U.jqx.browser.msie&&U.jqx.browser.version<8&&(i.next().children().hide(),r.next().children().hide()),this._updateScrollbars(),"auto"!==this.height&&null!==this.height&&!this.autoheight||this._arrange(),s=this.getrowindex(t.row),o=this.getrowdisplayindex(t.row),this._raiseEvent("rowCollapse",{row:t.row,index:o,boundIndex:s,rowKey:e})))},_getvirtualcolumnsindexes:function(e,t,i,r,s){if(this.rowDetails||this.rtl||this.editcell||this.width&&0<=this.width.toString().indexOf("%")||this.exporting)return{start:0,end:i+r};var o=0,l=-1,a=i+r;if(this.autorowheight)return{start:0,end:i+r};if(!s)for(var n=0;n<i+r;n++)if(this.columns.records[n].hidden||(o+=this.columns.records[n].width),e<=o&&-1==l&&(l=n),t+e<o){a=n;break}return{start:l=-1==l?0:l,end:a=i+r<++a?i+r:a}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value,i=("hidden"===this.hScrollBar.css("visibility")&&(t=e.value=0),parseInt(t));if(null!=this.table){var r=this.columnsrow,s=+this.columns.records.length,o=this.columns.records,l=0==this.source.records.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(i=e.max-i),l&&!this._haspinned)this.table[0].style.left=-i+"px",r[0].style.marginLeft=-i+"px";else{if(this._haspinned||null==this._haspinned){for(var a,n,d=0;d<0+s;d++)o[d].pinned&&(a=null,this.showAggregates&&this.statusbar[0].cells&&(a=this.statusbar[0].cells[d]),this.filterrow&&this.filterrow[0].cells&&(n=this.filterrow[0].cells[d]),this.rtl?(r[0].cells[d].style.marginLeft=-parseInt(t)+"px",a&&(a.style.marginLeft=-parseInt(t)+"px"),this.filterrow&&n&&(n.style.marginLeft=-parseInt(t)+"px")):(r[0].cells[d].style.marginLeft=i+"px",a&&(a.style.marginLeft=i+"px"),this.filterrow&&n&&(n.style.marginLeft=i+"px")));if(this.columnsVirtualization){for(var h=(f=this._getvirtualcolumnsindexes(i,this.host.width(),0,this.columns.records.length,!1)).start,c=f.end,u=0;u<h;u++){var g=u,p=this.columns.records[g].element[0];this.columns.records[g].pinned||(p.parentNode&&p.parentNode.removeChild(p),this.filterrow&&this.filterrow[0]&&(m=this.filterrow[0].cells[g]).parentNode&&m.parentNode.removeChild(m))}for(u=c;u<this.columns.records.length;u++){g=u,p=this.columns.records[g].element[0];this.columns.records[g].pinned||(p.parentNode&&p.parentNode.removeChild(p),this.filterrow&&this.filterrow[0]&&(m=this.filterrow[0].cells[g]).parentNode&&m.parentNode.removeChild(m))}for(u=h;u<c;u++){g=u;p=this.columns.records[g].element[0],this.columns.records[g].pinned||(p.parentNode||this.columnsrow[0].appendChild(p),this.filterrow&&this.filterrow[0]&&((m=this.filterrow[0].cells[g]).parentNode||this.filterrow[0].appendChild(m)))}}this._table[0].style.left=-i+"px",r[0].style.marginLeft=-i+"px"}else if(0==this._haspinned){if(this.columnsVirtualization){for(var f,h=(f=this._getvirtualcolumnsindexes(i,this.host.width(),0,this.columns.records.length,!1)).start,c=f.end,u=0;u<h;u++){g=u;(p=this.columns.records[g].element[0]).parentNode&&p.parentNode.removeChild(p),this.filterrow&&this.filterrow[0]&&(m=this.filterrow[0].cells[g]).parentNode&&m.parentNode.removeChild(m)}for(u=c;u<this.columns.records.length;u++){g=u;(p=this.columns.records[g].element[0]).parentNode&&p.parentNode.removeChild(p),this.filterrow&&this.filterrow[0]&&(m=this.filterrow[0].cells[g]).parentNode&&m.parentNode.removeChild(m)}for(u=h;u<c;u++){var m,g=u;(p=this.columns.records[g].element[0]).parentNode||this.columnsrow[0].appendChild(p),this.filterrow&&this.filterrow[0]&&((m=this.filterrow[0].cells[g]).parentNode||this.filterrow[0].appendChild(m))}}this.table[0].style.left=-i+"px",r[0].style.marginLeft=-i+"px"}this.filterrow&&(this.filterrow[0].style.left=-i+"px",this.rtl&&(this.filterrow[0].style.left=-i+parseInt(this.content.css("left"))+"px"))}this.showAggregates&&this.aggregates[0].cells&&(e=0,this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&(e="hidden"!=this.hScrollBar.css("visibility")?2+parseInt(this.hScrollBar.css("left")):3+parseInt(this.vScrollBar.width())),this.aggregates[0].style.marginLeft=-i+e+"px")}},_initializeColumns:function(){var e=this.source.datafields,i=!!(e=null==e&&this.source._source?this.source._source.datafields:e)&&0<e.length;if(this.columns&&this.columns.records)for(var t=0;t<this.columns.records.length;t++)this._removecolumnhandlers(this.columns.records[t]);var r,s=this,o=new U.jqx.dataCollection(this.element),l=0,a=(this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,"checkbox"==this.selectionMode&&((r=new K(s,this)).visibleindex=l++,r.width=s.indentWidth,r.checkboxcolumn=!0,r.editable=!1,r.columntype="checkbox",r.groupable=!1,r.draggable=!1,r.filterable=!1,r.resizable=!1,r.datafield="_checkboxcolumn",o.add(r)),this.rowDetails&&!this.treeGrid&&((r=new K(s,this)).visibleindex=l++,r.width=s.indentWidth,r.editable=!1,r.rowDetailscolumn=!0,r.groupable=!1,r.draggable=!1,r.pinned=!0,r.filterable=!1,r.resizable=!1,r.text="",o.add(r)),new Array);U.each(this.columns,function(e){if(null!=s.columns[e]){var t=new K(s,this);if(t.visibleindex=l++,null!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(s._haspinned=!0),null==this.datafield)s.source&&s.source._source&&"array"==s.source._source.datatype&&(i||(s.source._source.datafields||(s.source._source.datafields=new Array),s.source._source.datafields.push({name:e.toString()})),this.datafield=e.toString(),this.displayfield=e.toString(),t.datafield=this.datafield,t.displayfield=this.displayfield);else{if(a[this.datafield])throw new Error("jqxDataTable: Invalid column 'dataField' setting. jqxDataTable's columns should be initialized with unique data fields.");a[this.datafield]=!0}o.add(t)}}),this.rtl&&o.records.reverse(),this.columns=o},addFilter:function(e,t){this.getColumn(e)&&this.dataview.addFilter(e,t)},removeFilter:function(e){this.getColumn(e)&&this.dataview.removeFilter(e)},clearFilters:function(e,t){this.dataview.filters=new Array,this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,!1!==t&&this.resetfilter(),!1!==e&&this.applyFilters()},resetfilter:function(){if(this.filterinput&&this.filterinput.val(""),this.filterrow)for(var e=0;e<this.filterrow[0].cells.length;e++){var t=this.filterrow[0].cells[e],i=U(t).find("input:first"),t=U(t).find(".filterconditions"),r=this.columns.records[e];if(r.filterable){i.val("");var s,i=this.getcolumntypebydatafield(r),o=new U.jqx.filter;switch(i){case"number":case"int":case"float":case"decimal":o.getoperatorsbyfiltertype(s="numericfilter");break;case"boolean":case"bool":o.getoperatorsbyfiltertype(s="booleanfilter");break;case"date":case"time":o.getoperatorsbyfiltertype(s="datefilter");break;case"string":o.getoperatorsbyfiltertype(s="stringfilter")}0<t.length&&("stringfilter"===s?t.jqxDropDownList({selectedIndex:2}):t.jqxDropDownList({selectedIndex:0}))}}},applyFilters:function(){var e;this.editable&&null!=this.editKey&&this.endroweditbykey(this.editKey),this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this.serverProcessing?(this.dataview.pagenum=0,this.updateBoundData("filter")):(this.goToPage(0),this.refresh()),arguments&&0<arguments.length&&(this._updateSimpleFilter&&this.filtercolumnsList&&(e=this.filtercolumnsList.jqxDropDownList("getSelectedItem").value,this._updateSimpleFilter(e)),this._updateFilterRow&&this._updateFilterRow()),this._raiseEvent("filter",{filters:this.dataview.filters})},sortBy:function(e,t){if(this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);var i,r;this.editable&&null!=this.editKey&&this.endroweditbykey(this.editKey),null==e&&(t=null,e=this.sortcolumn),e&&(r="a"==t||"asc"==t||"ascending"==t||1==t,(i=this).sortdirection=null!=t?{ascending:r,descending:!r}:{ascending:!1,descending:!1},i.sortcolumn=null!=t?e:null,i.source.sort&&(i.dataview.sortfield=e,i.dataview.sortfielddirection=null==t?"":r?"asc":"desc",i.source.sort&&!this._loading&&i.source.sort(e,t)),i.dataview.sortBy(e,t),i._raiseEvent("sort",{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection})),this.serverProcessing?this.updateBoundData("sort"):this.refresh()},_togglesort:function(e){var t,i;this.disabled||e.sortable&&this.sortable&&(i=(i=null)==(t={sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}).sortcolumn||t.sortcolumn!=e.displayfield||1!=(i=t.sortdirection.ascending)&&null,this.sortBy(e.displayfield,i))},_renderfilter:function(){for(var a=this,e=U("<div style='position: relative; margin: 4px;'><input style='width: 200px; height: 22px; direction: ltr;' role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>"),l=(e.height(22),e.find("input")),n=e.find("div:first"),t=(e.addClass(this.toThemeProperty("jqx-rc-all")),e.addClass(this.toThemeProperty("jqx-widget")),e.addClass(this.toThemeProperty("jqx-input-group")),l.addClass(this.toThemeProperty("jqx-input")),l.addClass(this.toThemeProperty("jqx-rc-l")),l.addClass(this.toThemeProperty("jqx-input-group-addon")),l.addClass(this.toThemeProperty("jqx-widget")),l.addClass(this.toThemeProperty("jqx-widget-content")),n.addClass(this.toThemeProperty("jqx-fill-state-normal")),n.addClass(this.toThemeProperty("jqx-rc-r")),n.addClass(this.toThemeProperty("jqx-input-group-addon")),n.find("div").addClass(this.toThemeProperty("jqx-icon-search")),this.rtl&&(l.addClass(this.toThemeProperty("jqx-rtl")),l.css("direction","rtl")),this.filter.children().remove(),this.filterbutton=n,new Array),i=0;i<a.columns.records.length;i++)a.columns.records[i].datafield&&a.columns.records[i].filterable&&t.push({label:a.columns.records[i].text,value:a.columns.records[i].displayfield});function s(e){a.filterinput.val("");for(var t=0;t<a.dataview.filters.length;t++){var i=a.dataview.filters[t];i.datafield===e&&a.filterinput.val(i.filter.getfilterat(0).filtervalue)}}function r(){if(!n.hasClass("jqx-fill-state-disabled")){function e(e,t,i){var r=new U.jqx.filter,s=a.getcolumntypebydatafield(e),s=a._getfiltertype(s);return e="datefilter"==s?r.createfilter(s,t,"EQUAL",null,e.cellsFormat,a.gridlocalization):"numericfilter"==s||"booleanfilter"==s?("numericfilter"==s&&0<=(t=0<=(t=","==a.gridlocalization.decimalseparator&&0<=t.indexOf(a.gridlocalization.decimalseparator)?t.replace(a.gridlocalization.decimalseparator,"."):t).indexOf(a.gridlocalization.currencysymbol)?t.replace(a.gridlocalization.currencysymbol,""):t).indexOf(a.gridlocalization.percentagesymbol)&&(t=t.replace(a.gridlocalization.percentagesymbol,"")),r.createfilter(s,t,"EQUAL",null,e.cellsFormat,a.gridlocalization)):r.createfilter(s,t,"CONTAINS"),r.operator=i,r.addfilter(0,e),r}var t,i=l.val();h.jqxDropDownList&&(t=h.jqxDropDownList("getSelectedItem"));if("simple"!==a.filterMode)t&&(t=t.value,o=e(s=a.getColumn(t),i,"and"),0<i.length?(a.removeFilter(t),a.addFilter(t,o)):a.removeFilter(t),a.applyFilters(),"advanced"===a.filterMode&&a._updateFilterRow&&a._updateFilterRow(!0));else{if(a.clearFilters(!1,!1),0<i.length)for(var r=0;r<a.columns.records.length;r++){var s,o=e(s=a.columns.records[r],i,"or");a.addFilter(s.datafield,o)}a.applyFilters()}0==a.dataview.filters.length?a.filtericon.fadeOut(200):a.filtericon.fadeIn(200)}}var o=t.length<10,d=U("<div style='position: relative; top: 50%; display: none; margin-right: 4px; margin-left: 4px; float: left;'>"+this.gridlocalization.filtersearchstring+"</div>"),h=(this.filter.append(d),U("<div class='filtercolumns' style='position: relative; margin: 4px; float: left;'></div>")),d=(this.filter.append(h),h.jqxDropDownList&&h.jqxDropDownList({theme:this.theme,enableBrowserBoundsDetection:!0,autoDropDownHeight:o,rtl:a.rtl,dropDownWidth:220,selectedIndex:0,width:"auto",height:20,source:t,displayMember:"label",valueMember:"value"}),this.filtercolumnsList=h,35!==a.filterHeight&&(a.filtercolumnsList.css("margin-top",a.filterHeight/2-10),e.css("margin-top",a.filterHeight/2-10)),a._updateSimpleFilter=s,this.addHandler(h,"select",function(e){e=e.args.item.value;s(e)}),"simple"===this.filterMode?(this.filtercolumnsList.hide(),d.show(),d.css("margin-top",-this.filter.height()/2),e.css("float","left")):(this.filtercolumnsList.show(),d.hide()),l.keydown(function(e){if(13===e.keyCode)return r(),e.preventDefault&&e.preventDefault(),!1}),n.click(function(){r()}),this.filterinput=l,this.filter.append(e),"advanced"==this.filterMode&&(o=U("<a style='float: left; position: relative; margin: 2px; margin-left: 10px;' href='#'>"+this.gridlocalization.filterstring+"</a>"),e.append(o),this.addHandler(o,"click",function(e){function t(e){if(a.filterrow)for(var t=0;t<a.filterrow[0].cells.length;t++){var i=a.filterrow[0].cells[t],r=U(i).find("input:first"),s=a.columns.records[t];if(s.filterable){!0===e&&r.val("");for(var o=0;o<a.dataview.filters.length;o++){var l=a.dataview.filters[o];if(l.datafield===s.displayfield){r.val(l.filter.getfilterat(0).filtervalue);break}}}}}function i(e){if(a.filterrow)for(var t=0;t<a.filterrow[0].cells.length;t++){var i=a.filterrow[0].cells[t],r=U(i).find("input:first"),s=a.columns.records[t];s.hidden?i.style.visibility="hidden":i.style.visibility="inherit",s.filterable&&(i.style.left=parseInt(0)+parseInt(s.uielement[0].style.left)+"px",i.style.width=6+s.width+"px",r[0]&&(r[0].style.width=s.width-6-22+"px"))}}function r(){a.filtercolumnsList.jqxDropDownList({disabled:!0}),a.filterinput.addClass(a.toThemeProperty("jqx-fill-state-disabled")),a.filterinput.attr("disabled",!0),a.filterbutton.addClass(a.toThemeProperty("jqx-fill-state-disabled"))}a._updateFilterRow=t,a._arrangeFilterRow=i;return 0===a.filter.find(".filterrow").length?(a._renderadvancedfilter(),r(),t(),a._arrange(),i()):("none"===a.filter.find(".filterrow").css("display")?(r(),a.filter.find(".filterrow").removeClass("filterrow-hidden"),t(),a.filter.find(".filterrow").show(),i()):(a.filtercolumnsList.jqxDropDownList({disabled:!1}),a.filterinput.removeClass(a.toThemeProperty("jqx-fill-state-disabled")),a.filterinput.attr("disabled",!1),a.filterbutton.removeClass(a.toThemeProperty("jqx-fill-state-disabled")),s(a.filtercolumnsList.jqxDropDownList("getSelectedItem").value),a.filter.find(".filterrow").addClass("filterrow-hidden"),a.filter.find(".filterrow").hide()),a._arrange()),!1})),U("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>"));d.attr("title",a.gridlocalization.filterclearstring),d.addClass(a.toThemeProperty("jqx-icon-close")),e.append(d),d.hide(),(a.filtericon=d).click(function(){a.clearFilters(),a.filtericon.fadeOut(200)}),0<a.dataview.filters.length&&("advanced"!=a.filterMode?s(a.dataview.filters[0].datafield):a._updateFilterRow&&a._updateFilterRow())},_renderadvancedfilter:function(){function t(){h.clearFilters(!1,!1);for(var e=h.filtercolumnsList.jqxDropDownList("getSelectedItem").value,t=(h.filterinput.val(),0);t<h.filterrow[0].cells.length;t++){var i=h.filterrow[0].cells[t],r=U(i).find("input:first"),i=U(i).find(".filterconditions"),s=h.columns.records[t],o="";if(s.filterable){s.displayfield===e&&h.filterinput.val(r.val());var l,a,n=h.getcolumntypebydatafield(s),d=new U.jqx.filter;switch(n){case"number":case"int":case"float":case"decimal":a=d.getoperatorsbyfiltertype(l="numericfilter");break;case"boolean":case"bool":a=d.getoperatorsbyfiltertype(l="booleanfilter");break;case"date":case"time":a=d.getoperatorsbyfiltertype(l="datefilter");break;case"string":a=d.getoperatorsbyfiltertype(l="stringfilter")}o=0!=i.length&&(n=i.jqxDropDownList("getSelectedItem"))?a[n.index]:"stringfilter"===l?a[2]:a[0];i=r.val();(0<i.length||0==i.length&&"NOT_NULL"==o||0==i.length&&"NOT_EMPTY"==o||0==i.length&&"EMPTY"==o||0==i.length&&"NULL"==o)&&(n=s.displayfield,r=new U.jqx.filter,"numericfilter"==l&&0<=(i=0<=(i=","==h.gridlocalization.decimalseparator&&0<=i.indexOf(h.gridlocalization.decimalseparator)?i.replace(h.gridlocalization.decimalseparator,"."):i).indexOf(h.gridlocalization.currencysymbol)?i.replace(h.gridlocalization.currencysymbol,""):i).indexOf(h.gridlocalization.percentagesymbol)&&(i=i.replace(h.gridlocalization.percentagesymbol,"")),d=r.createfilter(l,i,o,null,s.cellsFormat,h.gridlocalization),r.addfilter(0,d),h.addFilter(n,r))}}0<h.dataview.filters.length?h.applyFilters():h.clearFilters(),0==h.dataview.filters.length?h.filtericon.fadeOut(200):h.filtericon.fadeIn(200)}var i,l,a,h=this,e=(i=U("<div style='position: relative;' class='filterrow'></div>").appendTo(h.filter),(h.filterrow=i)[0].cells=new Array,i.height(24),i.width(h.table.width()),l=h.filtercolumnsList.jqxDropDownList("getSelectedItem").value,a=h.filterinput.val(),U.each(h.columns.records,function(){var r=this,e=U("<div></div>").appendTo(i);if(e.css("position","absolute"),e.css("left",0+parseInt(r.uielement[0].style.left)),r.pinned&&(e.css("z-index",h.tableZIndex+h.columns.records.length),e.addClass(h.toThemeProperty("jqx-widget-header"))),i[0].cells.push(e[0]),!this.filterable)return!0;var s=U("<input style='margin-left: 4px; height: 20px; float: left;' role='textbox' type='text'/>").appendTo(e),o=(s.keydown(function(e){13===e.keyCode&&t()}),r.displayfield===l&&s.val(a),s.addClass(h.toThemeProperty("jqx-input")),s.addClass(h.toThemeProperty("jqx-rc-all")),s.addClass(h.toThemeProperty("jqx-widget")),s.addClass(h.toThemeProperty("jqx-widget-content")),U("<div style='cursor: pointer; margin-left: 4px; margin-bottom: 4px; margin-top: 6px; width: 18px; position: relative; margin-top: 4px; float: left;'></div>").appendTo(e));o.append(U("<div style='width: 16px; height: 16px;' class='"+h.toThemeProperty("jqx-grid-column-filterbutton")+"'></div>")),s.focus(function(){h.ensureColumnVisible(r.displayfield),h.filter[0].scrollLeft=0,h.ensureColumnVisible(r.displayfield),setTimeout(function(){h.filter[0].scrollLeft=0,h.ensureColumnVisible(r.displayfield)},10)}),o.click(function(){var e=U("<div class='filterconditions' style='position: relative; margin-top: 1px; float: left;'></div>"),t=(e.insertAfter(o),o.remove(),h.getcolumntypebydatafield(r)),i=h._getfiltersbytype(t),t="string"===t?2:0;e.jqxDropDownList({theme:h.theme,enableBrowserBoundsDetection:!0,renderMode:"simple",arrowSize:0,selectedIndex:t,rtl:h.rtl,dropDownWidth:230,dropDownHeight:180,width:20,height:20,source:i,selectionRenderer:function(){return"<div style='width: 16px; height: 16px;' class='"+h.toThemeProperty("jqx-grid-column-filterbutton")+"'></div>"}}),h.addHandler(e,"close",function(e){s.focus(),setTimeout(function(){s.focus()},10)}),e.removeAttr("tabindex"),e.find("div").removeAttr("tabindex"),e.jqxDropDownList("open")}),s[0].style.width=r.width-6-22+"px"}),U("<div style='clear: both;'></div>").appendTo(i),U("<div style='position:relative;' class='filterrow'></div>").appendTo(h.filter)),r=U("<input type='button' style='position: relative; float: left; margin-top: 4px; margin-left: 4px;' value='"+h.gridlocalization.filterapplystring+"'/>").appendTo(e),e=U("<input type='button' style='position: relative; float: left; margin-top: 4px;  margin-left: 4px;' value='"+h.gridlocalization.filtercancelstring+"'/>").appendTo(e);r.css("left",0),e.css("left",0),r.css("top","4px"),e.css("top","4px"),r.jqxButton({theme:h.theme}),e.jqxButton({theme:h.theme}),e.click(function(){h.filtercolumnsList.jqxDropDownList({disabled:!1}),h.filterinput.removeClass(h.toThemeProperty("jqx-fill-state-disabled")),h.filterinput.attr("disabled",!1),h.filterbutton.removeClass(h.toThemeProperty("jqx-fill-state-disabled")),h.filter.find(".filterrow").addClass("filterrow-hidden"),h.filter.find(".filterrow").hide(),h._arrange()}),r.click(function(){t()}),h._renderhorizontalscroll()},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":t="datefilter";break;case"string":t="stringfilter"}return t},getcolumntypebydatafield:function(e){var t=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(t){var i="";if(U.each(t,function(){if(this.name==e.displayfield)return this.type&&(i=this.type),!1}),i)return i}return"string"},_getfiltersbytype:function(e){var t="";switch(e){case"number":case"float":case"int":t=this.gridlocalization.filternumericcomparisonoperators;break;case"date":t=this.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":t=this.gridlocalization.filterbooleancomparisonoperators;break;default:t=this.gridlocalization.filterstringcomparisonoperators}return t},_getcellvalue:function(e,t){var i=null,i=t[e.datafield];return i=null==(i=null!=e.displayfield?t[e.displayfield]:i)?"":i},_renderrows:function(e){if(this.editable&&null!=this.editKey&&!1!==e&&this.endroweditbykey(this.editKey),this.treeGrid)this.treeGrid._renderrows();else if(!this._loading&&!this._updating){this.rendering&&this.rendering();var t,o=this,i=0,r=(this.table[0].rows=new Array,this.toTP("jqx-cell")+" "+this.toTP("jqx-widget-content")),s=(this.rtl&&(r+=" "+this.toTP("jqx-cell-rtl")),this.columns.records.length),l=U.jqx.browser.msie&&U.jqx.browser.version<8,a=(l&&this.host.attr("hideFocus","true"),o.groups.length),n=new Array,e=this.source.records,e=this.dataview.evaluate(e);if(this.dataViewRecords=e,"all"==this.dataview.pagesize||!this.pageable||this.serverProcessing?(t=e,this.pageable&&this.serverProcessing&&e.length>this.dataview.pagesize&&(t=e.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize))):t=e.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize),o.groups&&0<o.groups.length){var d=this.pageable?this.dataview.pagesize*this.dataview.pagenum:0,F=(x="root"===this.pageSizeMode?(x=o.source.getGroupedRecords(o.groups,"records","label",null,"data",null,"parent",e,0),o.rootRecordsLength=x.length,function(e){for(var t=0,i=new Array,r=0;r<e.length;r++){var s=e[r];if(0==s.level&&t++,t>o.dataview.pagesize*o.dataview.pagenum&&t<=o.dataview.pagesize*o.dataview.pagenum+o.dataview.pagesize&&i.push(s),t>o.dataview.pagesize*o.dataview.pagenum+o.dataview.pagesize)break}return i}(x)):o.source.getGroupedRecords(o.groups,"records","label",null,"data",null,"parent",t,d),function(e,t){for(var i=0;i<e.length;i++){var r=e[i];if(t.push(r),r.records&&0<r.records.length)for(var s=F(r.records,new Array),o=0;o<s.length;o++)s[o].leaf,t.push(s[o])}return t});t=n=F.call(o,x,new Array),this.rowsByKey=new Array;for(var h=0;h<t.length;h++){var c=t[h];this.rowsByKey[c.uid]=c}}var n=t,u=(this.renderedRecords=n).length,e=this.tableZIndex,g=0,p=0;if(l)for(var f=0;f<s;f++){(T=(T=(w=this.columns.records[f]).width)<w.minwidth?w.minwidth:T)>w.maxwidth&&(T=w.maxwidth);var m=U('<table><tr><td role="gridcell" style="max-width: '+T+"px; width:"+T+'px;" class="'+r+'"></td></tr></table>'),R=(U(document.body).append(m),m.find("td")),g=1+parseInt(R.css("padding-left"))+parseInt(R.css("padding-right"));m.remove();break}for(var w,d=this.rtl?" "+this.toTP("jqx-grid-table-rtl"):"",v="<table cellspacing='0' cellpadding='0' class='"+this.toTP("jqx-grid-table")+d+"' id='table"+this.element.id+"'><colgroup>",y="<table cellspacing='0' cellpadding='0' class='"+this.toTP("jqx-grid-table")+d+"' id='pinnedtable"+this.element.id+"'><colgroup>",L=0,f=0;f<s;f++)(w=this.columns.records[f]).hidden?(L++,0):((T=(T=w.width)<w.minwidth?w.minwidth:T)>w.maxwidth&&(T=w.maxwidth),(T-=g)<0&&(T=0),l?(z=T,f==L&&z++,w.rowDetailscolumn?y+="<col style='max-width: "+(z=z+4)+"px; width: "+z+"px;'>":y+="<col style='max-width: "+z+"px; width: "+z+"px;'>",v+="<col style='max-width: "+z+"px; width: "+z+"px;'>"):(y+="<col style='max-width: "+T+"px; width: "+T+"px;'>",v+="<col style='max-width: "+T+"px; width: "+T+"px;'>"),p+=T);v+="</colgroup>",y+="</colgroup>";for(var x,A=this._hiddencolumns=!1,O=(this.rowDetails&&this._pinnedTable&&(this._pinnedTable.find("[data-role=details]").detach(),this._table.find("[data-role=details]").detach()),0===u&&(q='<tr role="row">',x=this.host.height(),this.pageable&&(x-=this.pagerHeight,"both"===this.pagerPosition&&(x-=this.pagerHeight)),x-=this.columnsHeight,this.filterable&&(d=this.filter.find(".filterrow"),M=1,0<this.filter.find(".filterrow-hidden").length&&(M=0),x-=this.filterHeight+this.filterHeight*d.length*M),this.showstatusbar&&(x-=this.statusBarHeight),this.showAggregates&&(x-=this.aggregatesHeight),x<25&&(x=25),"hidden"!=this.hScrollBar[0].style.visibility&&(x-=this.hScrollBar.outerHeight()),"auto"!==this.height&&null!==this.height&&!this.autoheight||(x=300),m='<td colspan="'+this.columns.records.length+'" role="gridcell" style="border: none; min-height: '+x+"px; height: "+x+"px; max-width:"+p+"px; width:"+p+"px;",r=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item"),m=m+('" class="'+(r+=" "+this.toTP("jqx-center-align")))+'">'+this.gridlocalization.emptydatastring,v+=q+=m+="</td>",y+=q,this.table[0].style.width=p+2+"px",i=p),this.getRows()),b=new Array,h=0;h<n.length;h++){for(var _,K,j=(c=n[h]).uid,q=(void 0===c.uid&&(c.uid=this.dataview.generatekey()),'<tr data-key="'+j+'" role="row" id="row'+h+this.element.id+'">'),N='<tr data-key="'+j+'" role="row" id="row'+h+this.element.id+'">',E=(0<a&&c.level<a&&(q='<tr data-role="row-group" data-key="'+j+'" role="row" id="row'+h+this.element.id+'">',N='<tr data-role="row-group" data-key="'+j+'" role="row" id="row'+h+this.element.id+'">'),0),G=0,f=0;f<s;f++){var S=this.columns.records[f];(S.pinned||this.rtl&&this.columns.records[s-1].pinned)&&(A=!0);(T=(T=S.width)<S.minwidth?S.minwidth:T)>S.maxwidth&&(T=S.maxwidth),(T-=g)<0&&(T=0);var T,r=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item"),C=(S.pinned&&(r+=" "+this.toTP("jqx-grid-cell-pinned")),this.sortcolumn===S.displayfield&&(r+=" "+this.toTP("jqx-grid-cell-sort")),this.altRows&&h%2!=0&&(r+=" "+this.toTP("jqx-grid-cell-alt")),this.rtl&&(r+=" "+this.toTP("jqx-cell-rtl")),"");if(0<a&&c.level<a)if(l)r+=" "+this.toTP("jqx-grid-cell-pinned");else{r+=" "+this.toTP("jqx-grid-cell-pinned"),C+=' colspan="'+s+'"';for(var z=0,P=0;P<s;P++){var H=o.columns.records[P],k=H.width;k<H.minwidth&&(T=H.minwidth),k>H.maxwidth&&(T=H.maxwidth),(k-=g)<0&&(k=0),H.hidden||(z+=k)}T=z}var m='<td role="gridcell" '+C+' style="max-width:'+T+"px; width:"+T+"px;",C='<td role="gridcell" '+C+' style="pointer-events: none; visibility: hidden; border-color: transparent; max-width:'+T+"px; width:"+T+"px;",B=(f==s-1&&1==s&&(m+="border-right-color: transparent;",C+="border-right-color: transparent;"),!1),D=((B=0<a&&c.level<a?!0:B)?this.rtl&&(r+=" "+this.toTP("jqx-right-align")):"left"!=S.cellsalign&&("right"===S.cellsalign?r+=" "+this.toTP("jqx-right-align"):r+=" "+this.toTP("jqx-center-align")),this.rowinfo[c.uid]&&(this.rowinfo[c.uid].selected&&!S.rowDetailscolumn&&this.editKey!==c.uid&&"none"!==this.selectionMode&&(r=(r+=" "+this.toTP("jqx-grid-cell-selected"))+" "+this.toTP("jqx-fill-state-pressed")),this.rowinfo[c.uid].locked&&(r+=" "+this.toTP("jqx-grid-cell-locked"))),S.hidden?B||(m+="display: none;",C+="display: none;",this._hiddencolumns=!0):(E+=g+T,0==G&&(m+="border-left-width: 0px;",C+="border-left-width: 0px;"),G++),0<a&&l&&B&&a<=f&&(m+="font-size: 1px; border-color: transparent;  color: transparent;",C+="font-size: 1px; border-color: transparent; color: transparent;"),S.pinned&&(m+="pointer-events: auto;",C+="pointer-events: auto;"),!B&&S.rowDetailscolumn&&(this.rowinfo[c.uid]?this.rowinfo[c.uid].nodetails||(this.rowinfo[c.uid].expanded?(this.rtl?r+=" "+this.toTP("jqx-grid-group-expand-rtl"):r+=" "+this.toTP("jqx-grid-group-expand"),r+=" "+this.toTP("jqx-icon-arrow-down")):r=this.rtl?(r+=" "+this.toTP("jqx-grid-group-collapse-rtl"))+" "+this.toTP("jqx-icon-arrow-left"):(r+=" "+this.toTP("jqx-grid-group-collapse"))+" "+this.toTP("jqx-icon-arrow-right")):r=this.rtl?(r+=" "+this.toTP("jqx-grid-group-collapse-rtl"))+" "+this.toTP("jqx-icon-arrow-left"):(r+=" "+this.toTP("jqx-grid-group-collapse"))+" "+this.toTP("jqx-icon-arrow-right")),this.autoRowHeight&&(!this.autoRowHeight||S.autoCellHeight)||(r+=" "+this.toTP("jqx-grid-cell-nowrap ")),o._getcellvalue(S,c)),I=S.cellsFormat;if(0<a&&c.level<a&&(D=c.label,I=o.getColumn(o.groups[c.level]).cellsFormat),""!=I&&U.jqx.dataFormat&&(U.jqx.dataFormat.isDate(D)?D=U.jqx.dataFormat.formatdate(D,I,o.gridlocalization):(U.jqx.dataFormat.isNumber(D)||!isNaN(parseFloat(D))&&isFinite(D))&&(D=U.jqx.dataFormat.formatnumber(D,I,o.gridlocalization))),B?this.groupsRenderer&&(D=this.groupsRenderer(D,c,c.level)):(""!=S.cellclassname&&S.cellclassname&&("string"==typeof S.cellclassname?r+=" "+S.cellclassname:(I=S.cellclassname(h,S.datafield,D,c))&&(r+=" "+I)),""!=S.cellsRenderer&&S.cellsRenderer&&(-1===(I=O.indexOf(c))&&c.originalRecord&&(I=O.indexOf(c.originalRecord)),(D=S.cellsRenderer(I,S.datafield,D,c))&&(0<=D.indexOf("<jqx-")||0<=D.indexOf(" ng-"))&&b.push({rowKey:c.uid,row:I,column:S.datafield,value:D,columnIndex:f}))),m=(m+='" class="'+r+'">')+D+"</td>",C=(C+='" class="'+r+'">')+D+"</td>",S.pinned?(N+=m,q+=m):(q+=m,A&&(N+=C)),0<a&&!l&&c.level<a)break}0==i&&(this.table[0].style.width=E+2+"px",i=E),v+=q+="</tr>",y+=N+="</tr>",this.rowinfo[c.uid]?("group"in this.rowinfo[c.uid]||(this.rowinfo[c.uid].group=B),"row"in this.rowinfo[c.uid]||(this.rowinfo[c.uid].row=c),"details"in this.rowinfo[c.uid]||(this.rowinfo[c.uid].details=null),"detailsHeight"in this.rowinfo[c.uid]||(this.rowinfo[c.uid].detailsHeight=200),"initialized"in this.rowinfo[c.uid]||(this.rowinfo[c.uid].initialized=!1),"expanded"in this.rowinfo[c.uid]||(this.rowinfo[c.uid].expanded=!1)):this.rowinfo[c.uid]={group:B,row:c,details:null,detailsHeight:200,initialized:!1,expanded:!1},this.serverProcessing&&(this.rowinfo[c.uid].row=c),this.rowDetails&&(_=this.rowinfo[c.uid].detailsHeight,K=this.rowinfo[c.uid]&&this.rowinfo[c.uid].expanded?'<tr data-role="row-details"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+_+"px; max-height: "+_+"px; height: "+_+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"':'<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+_+"px; max-height: "+_+"px; height: "+_+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"',r=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item"),r=(r+=" "+this.toTP("jqx-details"))+" "+this.toTP("jqx-reset"),v+=K+='" class="'+r+'"><div style="pointer-events: auto; overflow: hidden; min-height: '+_+"px; max-height: "+_+"px; height: "+_+'px;"><div data-role="details"></div></div></td></tr>',y+=K)}if(v+="</table>",y+="</table>",A){o.WinJS?MSApp.execUnsafeLocalFunction(function(){o.table.html(y+v)}):o.table[0].innerHTML=y+v;var d=this.table.find("#table"+this.element.id),M=this.table.find("#pinnedtable"+this.element.id);if(M.css("float","left"),M.css("pointer-events","none"),d.css("float","left"),M[0].style.position="absolute",d[0].style.position="relative",d[0].style.zIndex=e-10,M[0].style.zIndex=e+10,this._table=d,this._table[0].style.left="0px",this._pinnedTable=M,this._pinnedTable[0].style.left="0px",this._pinnedTable[0].style.width=i+"px",this._table[0].style.width=i+"px",this.rtl&&i>parseInt(this.element.style.width)&&this._haspinned&&(this._pinnedTable[0].style.left=3-i+parseInt(this.element.style.width)+"px"),this.rowDetails)for(h=0;h<u;h++){var W,V,j=(c=n[h]).uid;this.rowinfo[j].details&&(W=U(this._table.children()[1]).children("[data-key="+j+"]"),V=U(this._pinnedTable.children()[1]).children("[data-key="+j+"]"),W&&(W=V.next(),(V=U(U(W).children().children())).children().detach(),V.append(this.rowinfo[c.uid].details)))}}else{o.WinJS?MSApp.execUnsafeLocalFunction(function(){o.table.html(v)}):o.table[0].innerHTML=v;P=this.table.find("#table"+this.element.id);this._table=P,U.jqx.browser.msie&&U.jqx.browser.version<10&&(this._table[0].style.width=i+"px"),0===u&&(this._table[0].style.width=2+i+"px")}0===u&&(this._table[0].style.tableLayout="auto",this._pinnedTable&&(this._pinnedTable[0].style.tableLayout="auto")),b&&0<b.length&&(this._table[0].rows,U.each(b,function(){this.row;var e=this.rowKey,t=(this.column,this.columnIndex),e=o._getuirow(e);e&&(e=e[0].cells[t],U.jqx.angularCompile&&U.jqx.angularCompile(e,"<div>"+e.innerHTML+"</div>"))})),this.rendered&&this.rendered()}},getcolumnindex:function(e){e=this.getColumn(e);return this.columns.records.indexOf(e)},setcolumnindex:function(e,t,i){var r,s,o,l,a,e=this.getColumn(e);e.pinned||e.hidden||e.checkboxcolumn||e.grouped||(r=this.columns.records.indexOf(e),this.columns.records.splice(r,1),this.columns.records.splice(t,0,e),s=0,o=this.headerZIndex,this.columnsrow.children().detach(),a=this.toThemeProperty("jqx-grid-cell"),a=(a+=" "+this.toThemeProperty("jqx-grid-cell-pinned"))+" "+this.toThemeProperty("jqx-item"),null!=(l=this).filterrow&&U(l.filterrow.children()[0]),this.columnsrow[0].cells=[],U.each(this.columns.records,function(e,t){var i=this.uielement,r=(l.columnsrow.append(i),l.rtl?i.css("z-index",o++):i.css("z-index",o--),l.rtl?250+o+1:250+o-1),r=(this.pinned&&i.css("z-index",r),this.width);i.css("left",s),l.columnsrow[0].cells[l.columnsrow[0].cells.length]=i[0],this.hidden,this.hidden&&this.hideable||(s+=r)}),this.groupable&&0<(a=this.groups.length)&&0<=r-a&&(r-=a,t-=a),this.rowDetails&&0<=r-1&&(r--,t--),"checkbox"==this.selectionMode&&0<=r-1&&(r--,t--),e=this._columns[r],this._columns.splice(r,1),this._columns.splice(t,0,e),this.resize(),this._rendercolumnGroups(),this._raiseEvent("columnReordered",{dataField:e.datafield,oldIndex:r,newIndex:t}))},_pinnedColumnsLength:function(){var e=0;return U.each(this.columns.records,function(){this.pinned&&e++,this.grouped&&e++}),this.rowDetails&&e++,"checkbox"==this.selectionMode&&e++,e},_handlecolumnsReorder:function(){var e,t,i,a,n=this,d=-1,h=!1;n.columnsReorder&&(e="mousemove.reorder"+this.element.id,t="mousedown.reorder"+this.element.id,i="mouseup.reorder"+this.element.id,a=!1,this.isTouchDevice()&&!0!==this.touchmode&&(a=!0,e=U.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,t=U.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,i=U.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id),this.removeHandler(U(document),e),this.addHandler(U(document),e,function(e){if(n.resizing)return!0;if(null!=n.reordercolumn){var t=parseInt(e.pageX),i=parseInt(e.pageY),r=(!a||null!=(r=n.getTouches(e)[0])&&(t=parseInt(r.pageX),i=parseInt(r.pageY)),n.host.coord()),s=parseInt(r.left),r=parseInt(r.top),o=(null!=n.dragmousedownoffset&&null!=n.dragmousedownoffset||(n.dragmousedownoffset={left:0,top:0}),parseInt(t)-parseInt(n.dragmousedownoffset.left)),l=parseInt(i)-parseInt(n.dragmousedownoffset.top);if(n.reordercolumn.css({left:o+"px",top:l+"px"}),h=!1,s<=t&&t<=s+n.host.width()&&r<=i&&i<=r+n.host.height()&&(h=!0),d=-1,h){n.reordercolumnicon.removeClass(n.toThemeProperty("jqx-grid-dragcancel-icon")),n.reordercolumnicon.addClass(n.toThemeProperty("jqx-grid-drag-icon"));o=n.columnsheader.coord(),l=o.top+n.columnsheader.height();if(null!=n.columnsdropline)if(i>=o.top&&i<=l){if(d=n._handlereordercolumnsdroplines(t),n.columnGroups&&-1!=d){s=0,r=(s+=n._pinnedColumnsLength(),d.index);if(s<=r){o=n.columns.records[r];if(null!=o){i=n.columns.records.indexOf(n.getColumn(o.datafield)),l=(null==o.datafield&&(i=n.columns.records.indexOf(n.getcolumnbytext(o.text))),U.data(n.reordercolumn[0],"reorderrecord")),t=o;if((t=n.columns.records.indexOf(n.getColumn(l))<i&&"before"==d.position?n.columns.records[i-1]:t).columngroup!=n.getColumn(l).columngroup)return void n.columnsdropline.hide()}}}}else n.columnsdropline.fadeOut("slow")}else null!=n.columnsdropline&&n.columnsdropline.fadeOut("slow"),n.reordercolumnicon.removeClass(n.toThemeProperty("jqx-grid-drag-icon")),n.reordercolumnicon.addClass(n.toThemeProperty("jqx-grid-dragcancel-icon"));if(e.preventDefault&&(e.preventDefault(),e.stopPropagation()),a)return e.preventDefault(),e.stopPropagation(),!1}}),this.columnsbounds=new Array,this.removeHandler(U(document),t),this.addHandler(U(document),t,function(e){if(n.resizing)return!0;n.columnsbounds=new Array;var r=n.host.coord().left,s=n.host.coord().top,o=(n.showtoolbar&&(s+=n.toolbarHeight),n.filter&&(s+=n.filter.height()),0);U.each(n.columns.records,function(e){var t=this;if(t.hidden)return n.columnsbounds[n.columnsbounds.length]={top:s,column:t,left:r,width:0,height:2},!0;0==o&&(r=n.rtl?parseInt(n.host.coord().left)-n.hScrollInstance.max+n.hScrollInstance.value:parseInt(n.host.coord().left)-n.hScrollInstance.value),o++;var i=2+n.columnsHeight;n.columnshierarchy&&(s=U(t.uielement).coord().top,i=U(t.uielement).height()),n.columnsbounds[n.columnsbounds.length]={top:s,column:t,left:r,width:t.width,height:i},r+=t.width})}),this.removeHandler(U(document),i),this.addHandler(U(document),i,function(e){if(n.resizing)return!0;n.__drag=!1,U(document.body).removeClass("jqx-disableselect");parseInt(e.pageX),parseInt(e.pageY);a&&(e=n.getTouches(e)[0],parseInt(e.pageX),parseInt(e.pageY));e=n.host.coord();parseInt(e.left),parseInt(e.top);if(n.showtoolbar&&n.toolbarHeight,n.columndragstarted=!1,(n.dragmousedown=null)!=n.reordercolumn){var e=U.data(n.reordercolumn[0],"reorderrecord"),t=n.columns.records.indexOf(n.getColumn(e)),i=(n.reordercolumn.remove(),n.reordercolumn=null,0);if(i+=n._pinnedColumnsLength(),null!=e){if(h&&-1!=d){var r=d.index;if(i<=r){i=n.columns.records[r];if(null!=i){r=n.columns.records.indexOf(n.getColumn(i.datafield));if(null==i.datafield&&(r=n.columns.records.indexOf(n.getcolumnbytext(i.text))),n.columnGroups)if((i=t<r&&"before"==d.position?n.columns.records[r-1]:i).columngroup!=n.getColumn(e).columngroup)return void(null!=n.columnsdropline&&(n.columnsdropline.remove(),n.columnsdropline=null));t<r?"before"==d.position?n.setcolumnindex(e,r-1):n.setcolumnindex(e,r):r<t&&n.setcolumnindex(e,r)}}}null!=n.columnsdropline&&(n.columnsdropline.remove(),n.columnsdropline=null)}}}))},getcolumnbytext:function(e){var t=null;return this.columns.records&&U.each(this.columns.records,function(){if(this.text==e)return t=this,!1}),t},_handlereordercolumnsdroplines:function(t){var i=this,r=-1,s=i._pinnedColumnsLength(),o=parseInt(i.host.coord().left)+i.host.width(),l="hidden"!=i.vScrollBar.css("visibility")?19:0;return i.rtl||(l=0),U.each(i.columnsbounds,function(e){if(s<=e){if(0==this.width)return!0;if(t<=this.left+this.width/2)return o<t?(i.columnsdropline.fadeOut(),!1):(i.columnsdropline.css("left",l+parseInt(this.left)+"px"),i.columnsdropline.css("top",parseInt(this.top)+"px"),i.columnsdropline.height(this.height),i.columnsdropline.fadeIn("slow"),!(r={index:e,position:"before"}));if(t>=this.left+this.width/2){if(this.left+this.width>o)return i.columnsdropline.fadeOut(),!1;i.columnsdropline.css("left",l+1+this.left+this.width),i.columnsdropline.css("top",this.top),i.columnsdropline.height(this.height),i.columnsdropline.fadeIn("slow"),r={index:e,position:"after"}}}}),r},_createreordercolumn:function(e,t,i){var r=this,s=(r.reordercolumn&&r.reordercolumn.remove(),r.columnsdropline&&r.columnsdropline.remove(),r.reordercolumn=U("<div></div>"),e.clone()),o=(r.reordercolumn.css("z-index",999999),s.css("border-width","1px"),s.css("opacity","0.4"),U(s.find("."+r.toThemeProperty("jqx-grid-column-menubutton")))),o=(0<o.length&&o.css("display","none"),U(s.find(".jqx-icon-close")));0<o.length&&o.css("display","none"),r.reordercolumnicon=U('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'),r.reordercolumnicon.addClass(r.toThemeProperty("jqx-grid-drag-icon")),r.reordercolumn.css("float","left"),r.reordercolumn.css("position","absolute"),r.host.coord();s.width(e.width()+16),r.reordercolumn.append(s),r.reordercolumn.height(e.height()),r.reordercolumn.width(s.width()),r.reordercolumn.append(r.reordercolumnicon),U(document.body).append(r.reordercolumn),s.css("margin-left",0),s.css("left",0),s.css("top",0),r.reordercolumn.css("left",t.left+r.dragmousedown.left),r.reordercolumn.css("top",t.top+r.dragmousedown.top),null!=i&&i&&(r.columnsdropline=U('<div style="z-index: 9999; display: none; position: absolute;"></div>'),r.columnsdropline.width(2),r.columnsdropline.addClass(r.toThemeProperty("jqx-grid-group-drag-line")),U(document.body).append(r.columnsdropline))},_handlecolumnsdragreorder:function(s,r){this.reordercolumn&&this.reordercolumn.remove(),this.columnsdropline&&this.columnsdropline.remove(),this.dragmousedown=null,this.dragmousedownoffset=null,this.columndragstarted=!1,this.reordercolumn=null;var o=this,l=!1,e=(this.isTouchDevice()&&!0!==this.touchmode&&(l=!0),"mousedown.drag"),a="mousemove.drag";l?(e=U.jqx.mobile.getTouchEventName("touchstart")+".drag",a=U.jqx.mobile.getTouchEventName("touchmove")+".drag"):this.addHandler(r,"dragstart",function(e){return!1}),this.addHandler(r,e,function(e){if(0==s.draggable)return!0;if(o.resizing)return!0;o.__drag=!0;var t=e.pageX,i=e.pageY,r=(l&&(t=(r=o.getTouches(e)[0]).pageX,i=r.pageY),o.dragmousedown={left:t,top:i},U(e.target).coord());return o.dragmousedownoffset={left:parseInt(t)-parseInt(r.left),top:parseInt(i-r.top)},e.preventDefault&&e.preventDefault(),!0}),this.addHandler(r,a,function(e){return!s.draggable||(null==s.datafield||(!!s.pinned||(!!o.resizing||void(o.dragmousedown&&(i=e.pageX,t=e.pageY,l&&null!=(e=o.getTouches(e)[0])&&(i=e.pageX,t=e.pageY),a={left:i,top:t},o.columndragstarted||null!=o.reordercolumn||(e=Math.abs(a.left-o.dragmousedown.left),i=Math.abs(a.top-o.dragmousedown.top),(3<e||3<i)&&(o._createreordercolumn(r,a,!0),U(document.body).addClass("jqx-disableselect"),U.data(o.reordercolumn[0],"reorderrecord",s.datafield))))))));var t,i})},getTouches:function(e){return U.jqx.mobile.getTouches(e)},_handlecolumnsResize:function(){var a=this;if(this.columnsResize){var e,t,n=!1,i=(a.isTouchDevice()&&(n=!0),"mousemove.resize"+this.element.id),r="mousedown.resize"+this.element.id,s="mouseup.resize"+this.element.id,o=(n&&(i=U.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,r=U.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,s=U.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id),this.removeHandler(U(document),i),this.addHandler(U(document),i,function(e){if(null!=a.resizablecolumn&&!a.disabled&&a.resizing&&null!=a.resizeline){a.resizablecolumn.columnelement;var t=a.host.coord(),i=parseInt(a.resizestartline.coord().left),r=i-a._startcolumnwidth,s="auto"==(s=a.resizablecolumn.column.minwidth)?0:parseInt(s),o="auto"==(o=a.resizablecolumn.column.maxwidth)?0:parseInt(o),l=e.pageX,s=(n&&(l=U.jqx.mobile.getTouches(e)[0].pageX),r+=s,0<o?i+o:0),i=0==o||a._startcolumnwidth+l-i<o;if(i=a.rtl?!0:i)if(a.rtl){if(l>=t.left&&l<=t.left+a.host.width()&&(a.resizeline.css("left",l),n))return!1}else if(l>=t.left&&r<=l&&((0!=s&&e.pageX<s||0==s)&&a.resizeline.css("left",l),n))return!1}if(!n&&null!=a.resizablecolumn)return!1}),this.removeHandler(U(document),r),this.addHandler(U(document),r,function(e){var s,t;null==a.resizablecolumn||a.disabled||((t=a.resizablecolumn.columnelement).coord().top+t.height()+5<e.pageY||t.coord().top-5>e.pageY?a.resizablecolumn=null:(a._startcolumnwidth=a.resizablecolumn.column.width,a.resizablecolumn.column._width=null,U(document.body).addClass("jqx-disableselect"),U(document.body).addClass("jqx-position-reset"),a._mouseDownResize=new Date,a.resizing=!0,a._resizecolumn=a.resizablecolumn.column,a.resizeline=a.resizeline||U('<div style="position: absolute;"></div>'),a.resizestartline=a.resizestartline||U('<div style="position: absolute;"></div>'),a.resizebackground=a.resizebackground||U('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),a.resizebackground.css("opacity",.01),a.resizebackground.css("cursor","col-resize"),a.resizeline.css("cursor","col-resize"),a.resizestartline.css("cursor","col-resize"),a.resizeline.addClass(a.toThemeProperty("jqx-grid-column-resizeline")),a.resizestartline.addClass(a.toThemeProperty("jqx-grid-column-resizestartline")),U(document.body).append(a.resizeline),U(document.body).append(a.resizestartline),U(document.body).append(a.resizebackground),s=a.resizablecolumn.columnelement.coord(),a.resizebackground.css("left",a.host.coord().left),a.resizebackground.css("top",a.host.coord().top),a.resizebackground.width(a.host.width()),a.resizebackground.height(a.host.height()),a.resizebackground.css("z-index",999999999),(t=function(e){a.rtl?e.css("left",parseInt(s.left)):e.css("left",parseInt(s.left)+a._startcolumnwidth);var t=0,i=(t=(t+=a.showtoolbar?a.toolbarHeight:0)+(a.showstatusbar?a.statusBarHeight:0)+(a.showAggregates?a.aggregatesHeight:0),a.pageable&&"bottom"!=a.pagerPosition&&(t+=a.pagerHeight),a.filterable&&(t+=a.filter.height()),0),r=(a.pageable&&"top"!=a.pagerPosition&&(i=a.pagerHeight),"hidden"!=a.hScrollBar.css("visibility")?a.scrollBarSize:0);e.css("top",parseInt(s.top)),e.css("z-index",9999999999),a.columnGroups?e.height(a.host.height()+a.resizablecolumn.columnelement.height()-i-t-r-a.columnGroupslevel*a.columnsHeight):e.height(a.host.height()-i-t-r),e.show("fast")})(a.resizeline),t(a.resizestartline),a.dragmousedown=null))}),function(){if(U(document.body).removeClass("jqx-disableselect"),U(document.body).removeClass("jqx-position-reset"),a.resizing){if(a._mouseUpResize=new Date,a._mouseUpResize-a._mouseDownResize<200)return a.resizing=!1,void(null!=a._resizecolumn&&null!=a.resizeline&&"block"==a.resizeline.css("display")&&(a._resizecolumn=null,a.resizeline.hide(),a.resizestartline.hide(),a.resizebackground.remove()));if(a.resizing=!1,!a.disabled){var e=a.host.width();if("hidden"!=a.vScrollBar[0].style.visibility&&(e-=20),e<0&&(e=0),null!=a._resizecolumn&&null!=a.resizeline&&"block"==a.resizeline.css("display")){var t=parseInt(a.resizeline.css("left")),i=parseInt(a.resizestartline.css("left")),r=a._startcolumnwidth+t-i,t=(a.rtl&&(r=a._startcolumnwidth-t+i),a._resizecolumn.width);a._resizecolumn.width=r,null!=a._resizecolumn._percentagewidth&&(a._resizecolumn._percentagewidth=r/e*100);for(var s=0;s<a._columns.length;s++)if(a._columns[s].datafield===a._resizecolumn.datafield){a._columns[s].width=a._resizecolumn.width;break}a.hScrollBar[0].style.visibility;i=a._resizecolumn.displayfield;a._updatecolumnwidths(),a.refresh(),a._resizecolumn=null,a.resizeline.hide(),a.resizestartline.hide(),a.resizebackground.remove(),a.resizablecolumn=null,a._raiseEvent("columnResized",{dataField:i,oldWidth:t,newWidth:r})}else a.resizablecolumn=null}}});try{""==document.referrer&&!window.frameElement||(e=(e=null)!=window.top&&window.top!=window.self&&window.parent&&document.referrer?document.referrer:e)&&-1!=e.indexOf(document.location.host)&&(t=function(e){o()},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",t,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",t))}catch(e){}this.removeHandler(U(document),s),this.addHandler(U(document),s,function(e){if(null!=U.data(document.body,"contextmenu"+a.element.id)&&a.autoshowcolumnsmenubutton)return!0;o()})}},_updatecolumnwidths:function(){var l,a,e,n,d,h,c=this.host.width(),u=c,g=("hidden"!==this.vScrollBar.css("visibility")&&0<this.scrollBarSize&&(c-=parseInt(this.scrollBarSize)+6,u=c),"");null!=this.columns&&null!=this.columns.records&&(a=!1,U.each((l=this).columns.records,function(e,t){this.hidden||(-1!=this.width.toString().indexOf("%")||null!=this._percentagewidth?("hidden"!=l.vScrollBar[t=0].style.visibility&&l.scrollBarSize,l.scrollBarSize,t=parseFloat(this.width)*u/100,(t=(t=null!=this._percentagewidth?parseFloat(this._percentagewidth)*u/100:t)<this.minwidth&&"auto"!=this.minwidth?this.minwidth:t)>this.maxwidth&&"auto"!=this.maxwidth&&(t=this.maxwidth),c-=Math.round(t)):"auto"==this.width||this._width?g+=this.text:c-=this.width)}),0!=(e=this.columnsheader.find("#columntable"+this.element.id)).length&&(n=0,d=e.find(".jqx-grid-column-header"),h=0,U.each(this.columns.records,function(e,t){var i=U(d[e]),r=!1,s=this.width,o=this.width;-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(s=null!=this._percentagewidth?parseFloat(this._percentagewidth)*u/100:parseFloat(this.width)*u/100,s=Math.round(s),r=!0),"auto"==this.width||this._width||r?r?(s<this.minwidth&&"auto"!=this.minwidth&&(s=this.minwidth,this.width=s),s>this.maxwidth&&"auto"!=this.maxwidth&&(s=this.maxwidth,this.width=s),parseInt(i[0].style.width)!=s&&(i.width(s),this.width=s)):(r=Math.floor(c*(this.text.length/g.length)),isNaN(r)&&(r=this.minwidth),s=c*(this.text.length/g.length)-r,1<=(n+=s)&&(--n,r++),.5<=n&&e==l.columns.records.length-1&&r++,r<0&&(s=U("<span>"+l.escape_HTML(this.text)+"</span>"),U(document.body).append(s),r=10+s.width(),s.remove()),(r=r<this.minwidth?this.minwidth:r)>this.maxwidth&&(r=this.maxwidth),this._width="auto",this.width=r,i.width(this.width)):parseInt(i[0].style.width)!=this.width&&i.width(this.width),parseInt(i[0].style.left)!=h&&i.css("left",h),this.hidden||(h+=this.width),this._requirewidthupdate=!0,o!==this.width&&(a=!0)}),this.columnsheader.width(2+h),e.width(this.columnsheader.width()),this._resizecolumnGroups(),a&&this._renderrows(),this.showAggregates&&this._refreshcolumnsaggregates()))},_rendercolumnheaders:function(){var g=this;if(!this._updating){g.columns.records.length>g.headerZIndex&&(g.headerZIndex=g.columns.records.length+10),this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var p=U('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>'),f=(p[0].cells=new Array,0),m="",w=this.host.width(),v=w,i=new Array,r=new Array;if(U.each(this.columns.records,function(e,t){this.hidden||("auto"==this.width||this._width?m+=this.text:this.width<this.minwidth&&"auto"!=this.minwidth?w-=this.minwidth:this.width>this.maxwidth&&"auto"!=this.maxwidth?w-=this.maxwidth:-1!=this.width.toString().indexOf("%")?(t=0,(t=(t=parseFloat(this.width)*v/100)<this.minwidth&&"auto"!=this.minwidth?this.minwidth:t)>this.maxwidth&&"auto"!=this.maxwidth&&(t=this.maxwidth),w-=t):("string"==typeof this.width&&(this.width=parseInt(this.width)),w-=this.width)),this.pinned||this.grouped||this.checkboxcolumn?(g._haspinned&&(this.pinned=!0),i[i.length]=this):r[r.length]=this}),this.rtl){var e=0;i.reverse();for(t=this.columns.records.length-1;t>=this.columns.records.length-i.length;t--)this.columns.replace(t,i[e++]);for(s=0;s<r.length;s++)this.columns.replace(s,r[s])}else{for(var t=0;t<i.length;t++)this.columns.replace(t,i[t]);for(var s=0;s<r.length;s++)this.columns.replace(i.length+s,r[s])}var y=this.headerZIndex,x=g.columnsHeight,b=0;U.each(this.columns.records,function(e,t){this.height=g.columnsHeight,g.columnGroups&&g.columnGroups.length&&(this.height=(this.datafield,o=this,l=g.columnGroupslevel*g.columnsHeight,l-=o.level*g.columnsHeight),x=this.height);var i,r,s,o=g.toTP("jqx-grid-column-header")+" "+g.toTP("jqx-widget-header"),l=(g.rtl&&(o+=" "+g.toTP("jqx-grid-column-header-rtl")),g.enableBrowserSelection||(o+=" "+g.toTP("jqx-disableselect")),g.rtl?250+y+1:250+y-1),a=g.rtl?y++:y--,n=U('<div role="columnheader" style="z-index: '+a+';position: absolute; height: 100%;" class="'+o+'"><div style="height: 100%; width: 100%;"></div></div>'),a=(g.rtl&&0===e&&(n[0].style.borderLeftColor="transparent"),g.columnGroups&&(n[0].style.height=x+"px",n[0].style.bottom="0px",this.pinned&&(n[0].style.zIndex=l)),this.uielement=n,this.element=n,""!=this.classname&&this.classname&&n.addClass(this.classname),this.width),d=!1,h=(null===this.width&&(this.width="auto"),-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(a=null!=this._percentagewidth?parseFloat(this._percentagewidth)*v/100:parseFloat(this.width)*v/100,a=Math.round(a),d=!0),"auto"==this.width||this._width||d?d?((a=a<this.minwidth&&"auto"!=this.minwidth?this.minwidth:a)>this.maxwidth&&"auto"!=this.maxwidth&&(a=this.maxwidth),null!=this._percentagewidth&&-1==this.width.toString().indexOf("%")||(this._percentagewidth=this.width),n.width(a),this.width=a):(d=Math.floor(w*(this.text.length/m.length)),r=w*(this.text.length/m.length)-d,1<=(b+=r)&&(--b,d++),.5<=b&&e==g.columns.records.length-1&&d++,(d=isNaN(d)?this.minwidth:d)<0&&(r=U("<span>"+g.escape_HTML(this.text)+"</span>"),U(document.body).append(r),d=10+r.width(),r.remove()),(d=d<this.minwidth?this.minwidth:d)>this.maxwidth&&(d=this.maxwidth),this._width="auto",this.width=parseInt(d),a=this.width,n.width(this.width)):((a=a<this.minwidth&&"auto"!=this.minwidth?this.minwidth:a)>this.maxwidth&&"auto"!=this.maxwidth&&(a=this.maxwidth),n[0].style.width=parseInt(a)+"px"),this.hidden&&n.css("display","none"),U(n.children()[0])),c=(p[0].cells[e]=n[0],null!=this.renderer?this.renderer(g.escape_HTML(this.text),this.align,x):g._rendercolumnheader(g.escape_HTML(this.text),this.align,x,g)),u=(null==c&&(c=g._rendercolumnheader(g.escape_HTML(this.text),this.align,x,g)),null!=this.renderer&&(c=U(c)),g.WinJS?MSApp.execUnsafeLocalFunction(function(){h.append(U(c))}):this.renderer?h.append(U(c)):c&&(h[0].innerHTML=c),null!=c&&(i=U('<div class="iconscontainer" style="height: '+x+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+g.toTP("jqx-widget-header")+'" style="height: '+x+'px; float: right; display: none; width: 16px;"><div class="'+g.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+g.toTP("jqx-widget-header")+'" style="height: '+x+'px; float: right; display: none; width: 16px;"><div class="'+g.toTP("jqx-grid-column-sortascbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+g.toTP("jqx-widget-header")+'" style="height: '+x+'px; float: right; display: none; width: 16px;"><div class="'+g.toTP("jqx-grid-column-sortdescbutton")+'" style="width: 100%; height:100%;"></div></div></div>'),h.append(i),r=i.children(),this.sortasc=r[1],this.sortdesc=r[2],this.filtericon=r[0],this.iconscontainer=i,g.rtl&&(i.css("margin-left","0px"),i.css("left","0px"),U(this.sortasc).css("float","left"),U(this.filtericon).css("float","left"),U(this.sortdesc).css("float","left"))),p.append(n),g.columnsReorder&&this.draggable&&g._handlecolumnsdragreorder&&g._handlecolumnsdragreorder(this,n),this);g.addHandler(n,"click",function(e){if(u.checkboxcolumn)return!0;g._togglesort&&!g._loading&&g._togglesort(u),e.preventDefault()}),g.columnsResize&&(s=!1,d="mousemove",g.isTouchDevice()&&(s=!0,d=U.jqx.mobile.getTouchEventName("touchstart")),g.addHandler(n,d,function(e){if(!u.resizable)return!(g.resizablecolumn=null);var t=parseInt(e.pageX),i=5,r=parseInt(n.coord().left);if(g.hasTransform&&(r=U.jqx.utilities.getOffset(n).left),g._handlecolumnsResize){if(s)return i=40,(t=U.jqx.mobile.getTouches(e)[0].pageX)>=r+u.width-i?(g.resizablecolumn={columnelement:n,column:u},n.css("cursor","col-resize")):(n.css("cursor",""),g.resizablecolumn=null),!0;e=u.width;if(r+(e=g.rtl?0:e)-i<=t){if(t<=r+e+i)return g.resizablecolumn={columnelement:n,column:u},n.css("cursor","col-resize"),!1;n.css("cursor",""),g.resizablecolumn=null}else n.css("cursor",""),t<r+e-i&&(u._animating||u._menuvisible||n.mouseenter()),g.resizablecolumn=null}})),n.css("left",f),this.hidden||(f+=a),u.rendered&&u.rendered(U(h[0].firstChild),u.align,x)&&null!=i&&i.hide()}),0<f?this.columnsheader.width(2+f):this.columnsheader.width(f),this.columnsrow=p,g.columnsheader.append(p),p.width(f),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsReorder&&this._handlecolumnsReorder(),this._handlecolumnsResize&&this._handlecolumnsResize(),this.columnGroups&&this._rendercolumnGroups()}},_rendercolumnGroups:function(){if(this.columnGroups){for(var e=0,t=0;t<this.columns.records.length;t++)this.columns.records[t].pinned&&e++;var i=this.headerZIndex-e+this.columns.records.length,r=this,s=r.toTP("jqx-grid-column-header")+" "+r.toTP("jqx-grid-columngroup-header")+" "+r.toTP("jqx-widget-header"),o=(r.rtl&&(s+=" "+r.toTP("jqx-grid-columngroup-header-rtl")),this.columnsheader.find("#columntable"+this.element.id));o.find("jqx-grid-columngroup-header").remove();for(var l=0;l<this.columnGroupslevel-1;l++)for(t=0;t<this.columnGroups.length;t++){var a,n,d,h,c,u=this.columnGroups[t],g=u.level;g===l&&(g=g*this.columnsHeight,a=99999,u.groups&&(n=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=n(r):r.hidden||(t+=r.width,a=Math.min(parseInt(r.element[0].style.left),a))}return t},u.width=n(u),u.left=a,d=this.columnsHeight,h=i--,h=U('<div role="columnheader" style="z-index: '+h+';position: absolute;" class="'+s+'"></div>'),c=U(this._rendercolumnheader(u.text,u.align,this.columnsHeight,this)),h.append(c),h[0].style.left=a+"px",0===a&&(h[0].style.borderLeftColor="transparent"),h[0].style.top=g+"px",h[0].style.height=d+"px",h[0].style.width=-1+u.width+"px",o.append(h),u.element=h))}}},_resizecolumnGroups:function(){if(this.columnGroups)for(var e=0;e<this.columnGroups.length;e++){var s,t,i,r=this.columnGroups[e],o=r.level*this.columnsHeight,l=99999;r.groups&&(r.width=(s=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=s(r):r.hidden||(t+=r.width,l=Math.min(parseInt(r.element[0].style.left),l))}return t})(r),r.left=l,t=this.columnsHeight,(i=r.element)[0].style.left=l+"px",i[0].style.top=o+"px",i[0].style.height=t+"px",i[0].style.width=-1+r.width+"px")}},_removecolumnhandlers:function(e){var t=this,i=U(e.element);0<i.length&&(t.removeHandler(i,"mouseenter"),t.removeHandler(i,"mouseleave"),e=U(e.filtericon),t.removeHandler(e,"mousedown"),t.removeHandler(e,"click"),t.removeHandler(i,"click"))},_calculateaggregate:function(e,t,i,r){if(!e.datafield)return null;var s=e.aggregates;if(s=s||t){for(var o=new Array,l=0;l<s.length;l++)"count"!=s[l]&&(o[o.length]=e.cellsFormat);if(this.source&&this.source.getAggregatedData){null==r&&(r=this.getRows(),this.dataViewRecords&&(r=this.dataViewRecords));var a,n,d,h,c,u=r,g=-1;if(this.treeGrid&&(a=new Array,(n=function(e){for(var t=0;t<e.length;t++)null!=e[t]&&(-1==g&&(g=e[t].level),e[t].aggregate||a.push(e[t]),!e[t].leaf&&e[t].records&&0<e[t].records.length&&n(e[t].records))})(r),r=a),this.treeGrid&&this.filterable&&0<this.dataview.filters.length){for(var p=new Array,l=0;l<r.length;l++)r[l]&&!1!==r[l]._visible&&p.push(r[l]);r=p;for(var f=new Array,l=0;l<u.length;l++)u[l]&&!1!==u[l]._visible&&f.push(u[l]);u=f}return null==i||1==i?(d=this.source.getAggregatedData([{name:e.datafield,aggregates:s,formatStrings:o}],this.gridlocalization,r,g),this.treeGrid&&(0==(h=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0)||h<=g)&&d&&(null!=d[e.datafield].sum||null!=d[e.datafield].avg)&&(c=this.source.getAggregatedData([{name:e.datafield,aggregates:s,formatStrings:o}],this.gridlocalization,u,g),null!=d[e.datafield].sum&&(d[e.datafield].sum=c[e.datafield].sum),null!=d[e.datafield].avg&&(d[e.datafield].avg=c[e.datafield].avg))):(d=this.source.getAggregatedData([{name:e.datafield,aggregates:s}],this.gridlocalization,r,g),this.treeGrid&&d&&(null==d[e.datafield].sum&&null==d[e.datafield].avg||(0==(h=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0)||h<=g)&&(c=this.source.getAggregatedData([{name:e.datafield,aggregates:s}],this.gridlocalization,u,g),null!=d[e.datafield].sum&&(d[e.datafield].sum=c[e.datafield].sum),null!=d[e.datafield].avg&&(d[e.datafield].avg=c[e.datafield].avg)))),d}}return null},getcolumnaggregateddata:function(e,t,i,r){var s=this.getColumn(e);if(!s)return"";i=null!=i&&0!=i&&i;if(null==t)return"";var o=s.aggregates,t=(s.aggregates=null,this._calculateaggregate(s,t,i,r)),i={};return t&&(i=t[e],s.aggregates=o),i},_updatecolumnaggregates:function(e,t,i){var r,s,o=this;if(!t)return i.children().remove(),i.html(""),void(e.aggregatesRenderer&&(r={},e.aggregates&&(r=this.getcolumnaggregateddata(e.datafield,e.aggregates)),s=e.aggregatesRenderer({},e,i,null),i.html(s)));i.children().remove(),i.html(""),e.aggregatesRenderer?t&&(s=e.aggregatesRenderer(t[e.datafield],e,i,this.getcolumnaggregateddata(e.datafield,e.aggregates),"aggregates"),i.html(s)):U.each(t,function(){for(r in this){var e=U('<div style="position: relative; margin: 4px; overflow: hidden;"></div>'),t=r,t=o._getaggregatename(t);e.html(t+":"+this[r]),o.rtl&&e.addClass(o.toThemeProperty("jqx-rtl")),i.append(e)}})},_getaggregatetype:function(e){switch(e){case"min":case"max":case"count":case"avg":case"product":case"var":case"varp":case"stdev":case"stdevp":case"sum":return e}var t,i=e;for(t in e){i=t;break}return i},_getaggregatename:function(e){var t=e;switch(e){case"min":t="Min";break;case"max":t="Max";break;case"count":t="Count";break;case"avg":t="Avg";break;case"product":t="Product";break;case"var":t="Var";break;case"stdevp":t="StDevP";break;case"stdev":t="StDev";break;case"varp":t="VarP";case"sum":t="Sum"}if(e===t&&"string"!=typeof t)for(var i in e){t=i;break}return t},_updatecolumnsaggregates:function(){var e=this.getRows(),t=(this.dataViewRecords&&(e=this.dataViewRecords),this.columns.records.length);if(null!=this.aggregates[0].cells)for(var i=0;i<t;i++){var r=U(this.aggregates[0].cells[i]),s=this.columns.records[i],o=this._calculateaggregate(s,null,!0,e);this._updatecolumnaggregates(s,o,r)}},_refreshcolumnsaggregates:function(){var e=this.columns.records.length;if(null!=this.aggregates[0].cells)for(var t=0,i=0;i<e;i++){var r=U(this.aggregates[0].cells[i]),s=this.columns.records[i];r&&(r.width(s.width),r[0].style.left=t+"px",s.hidden&&s.hideable?r.css("display","none"):t+=s.width)}},_updateaggregates:function(){var e=U('<div style="position: relative;" id="statusrow'+this.element.id+'"></div>'),t=0,i=this.columns.records.length,r=this.toThemeProperty("jqx-grid-cell"),s=(this.rtl&&(r+=" "+this.toThemeProperty("jqx-grid-cell-rtl"),t=0,e.css("border-left-width","0px"),this.aggregates.css("border-left-color","transparent")),r+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),i+10),o=new Array;this.aggregates[0].cells=o;for(var l=0;l<i;l++){var a=this.columns.records[l],n=this._calculateaggregate(a),d=a.width,h=((d=d<a.minwidth?a.minwidth:d)>a.maxwidth&&(d=a.maxwidth),r),h=(a.cellsalign&&(h+=" "+this.toThemeProperty("jqx-"+a.cellsalign+"-align")),U('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+h+'"></div>'));e.append(h),h.css("left",t),this.rtl?(h.css("z-index",s++),0==l&&h.css("border-left-width","0px")):h.css("z-index",s--),h.width(d),h[0].style.left=t+"px",a.hidden&&a.hideable?h.css("display","none"):t+=d,o[o.length]=h[0],this._updatecolumnaggregates(a,n,h)}U.jqx.browser.msie&&U.jqx.browser.version<8&&e.css("z-index",s--),e.width(parseInt(t)+2),e.height(this.aggregatesHeight),this.aggregates.children().remove(),this.aggregates.append(e),this.aggregates.removeClass(this.toThemeProperty("jqx-widget-header")),this.aggregates.addClass(r),this.aggregates.css("border-bottom-color","transparent"),this.aggregates.css("border-top-width","1px"),this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&this._renderhorizontalscroll()},destroy:function(){var e=this;if(e.columns&&e.columns.records)for(var t=0;t<e.columns.records.length;t++)e._removecolumnhandlers(e.columns.records[t]);e.removeHandler(U(document),"mouseup.pagerbuttonstop"),e.removeHandler(U(document),"mouseup.pagerbuttonsbottom"),e.removeHandler(e.content,"scroll"),e.removeHandler(e.content,"mousedown"),e.removeHandler(U(document),"mousedown.gridedit"+e.element.id);var i="mousemove.resize"+e.element.id,r="mousedown.resize"+e.element.id,s="mouseup.resize"+e.element.id,i=(e.removeHandler(U(document),i),e.removeHandler(U(document),r),e.removeHandler(U(document),s),"mousemove.reorder"+e.element.id),r="mousedown.reorder"+e.element.id,s="mouseup.reorder"+e.element.id;if(e.removeHandler(U(document),i),e.removeHandler(U(document),r),e.removeHandler(U(document),s),e.filterable){if(e.filterrow)for(t=0;t<e.filterrow[0].cells.length;t++){var o=e.filterrow[0].cells[t],o=U(o).find(".filterconditions");e.columns.records[t];0<o.length&&o.jqxDropDownList("destroy")}e.filtercolumnsList&&e.filtercolumnsList.jqxDropDownList("destroy")}e.pageable&&(e.pagershowrowscombotop&&e.pagershowrowscombotop.jqxDropDownList&&e.pagershowrowscombotop.jqxDropDownList("destroy"),e.pagershowrowscombobottom&&e.pagershowrowscombobottom.jqxDropDownList&&e.pagershowrowscombobottom.jqxDropDownList("destroy"),i=e.pagerbuttonsbottom.find("a"),e.removeHandler(i,"click"),e.removeHandler(i,"mouseenter"),e.removeHandler(i,"mouseleave"),i.remove(),i=e.pagerbuttonstop.find("a"),e.removeHandler(i,"click"),e.removeHandler(i,"mouseenter"),e.removeHandler(i,"mouseleave"),i.remove(),e.pagernexttop&&(e.pagernexttop.jqxButton("destroy"),e.pagerprevioustop.jqxButton("destroy"),e.pagernextbottom.jqxButton("destroy"),e.pagerpreviousbottom.jqxButton("destroy"),e.pagerfirsttop.jqxButton("destroy"),e.pagerfirstbottom.jqxButton("destroy"),e.pagerlasttop.jqxButton("destroy"),e.pagerlastbottom.jqxButton("destroy"))),e._removeHandlers(),e.vScrollBar.jqxScrollBar("destroy"),e.hScrollBar.jqxScrollBar("destroy"),delete e.vScrollBar,delete e.hScrollBar,delete e._mousewheelfunc,U.jqx.utilities.resize(e.host,null,!0),e.host.remove()},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&e.refresh()},propertyChangedHandler:function(e,t,i,r){if(null!=this.isInitialized&&0!=this.isInitialized&&!(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length)&&r!==i)if("filterable"==t)e._render();else if("height"===t)e.host.height(e.height),e.host.width(e.width),e._updatesize(!1,!0);else if("width"===t)e.host.height(e.height),e.host.width(e.width),e._updatesize(!0,!1);else if("source"===t)e.updateBoundData();else if("columnGroups"===t)e._render();else if("columns"===t)e._columns=null,e._render();else if("rtl"===t)e.content.css("left",""),e.columns=e._columns,e.vScrollBar.jqxScrollBar({rtl:r}),e.hScrollBar.jqxScrollBar({rtl:r}),e._render();else if("pagerMode"===t)e.pagerMode=r,e._initpager();else if("pageSizeOptions"==t){e._initpager();for(var s=!1,o=0;o<r.length;o++)if(parseInt(r[o])==e.pageSize){s=!0;break}s||U.jqx.set(e,[{pageSize:r[0]}])}else{var l;"pageSize"==t?(l=e.dataview.pagenum*e.dataview.pagesize,e.dataview.pagesize=e.pageSize,(l=Math.floor(l/e.dataview.pagesize))===e.dataview.pagenum&&parseInt(r)===parseInt(i)||(e._raiseEvent("pageSizeChanged",{pagenum:r,oldpageSize:i,pageSize:e.dataview.pagesize}),e.goToPage(l)||(e.serverProcessing?e.updateBoundData("pager"):e.refresh()))):"pagerPosition"===t?e.refresh():"selectionMode"===t?e.selectionMode=r.toLowerCase():"touchmode"==t?(e.touchDevice=null,e._removeHandlers(),e.touchDevice=null,e.vScrollBar.jqxScrollBar({touchMode:r}),e.hScrollBar.jqxScrollBar({touchMode:r}),e._updateTouchScrolling(),e._arrange(),e._updatecolumnwidths(),e._renderrows(),e._addHandlers()):"enableHover"!=t&&("disabled"==t?(r?e.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):e.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),e.pageable&&(e.pagernexttop&&(e.pagernexttop.jqxButton({disabled:r}),e.pagerprevioustop.jqxButton({disabled:r}),e.pagernextbottom.jqxButton({disabled:r}),e.pagerpreviousbottom.jqxButton({disabled:r}),e.pagerfirsttop.jqxButton({disabled:r}),e.pagerfirstbottom.jqxButton({disabled:r}),e.pagerlasttop.jqxButton({disabled:r}),e.pagerlastbottom.jqxButton({disabled:r}),e.pagershowrowscombotop.jqxDropDownList&&"advanced"==e.pagerMode&&(e.pagershowrowscombotop.jqxDropDownList({disabled:!1}),e.pagershowrowscombobottom.jqxDropDownList({disabled:!1}))),e.host.find(".jqx-grid-pager-number").css("cursor",r?"default":"pointer")),e.host.find(".jqx-grid-group-collapse").css("cursor",r?"default":"pointer"),e.host.find(".jqx-grid-group-expand").css("cursor",r?"default":"pointer")):"columnsHeight"==t?e._render():("theme"==t&&(U.jqx.utilities.setTheme(i,r,e.host),e.vScrollBar.jqxScrollBar({theme:e.theme}),e.hScrollBar.jqxScrollBar({theme:e.theme}),e.pageable&&e.pagernexttop&&(e.pagernexttop.jqxButton({theme:e.theme}),e.pagerprevioustop.jqxButton({theme:e.theme}),e.pagernextbottom.jqxButton({theme:e.theme}),e.pagerpreviousbottom.jqxButton({theme:e.theme}),e.pagerfirsttop.jqxButton({theme:e.theme}),e.pagerfirstbottom.jqxButton({theme:e.theme}),e.pagerlasttop.jqxButton({theme:e.theme}),e.pagerlastbottom.jqxButton({theme:e.theme}),e.pagershowrowscombotop.jqxDropDownList&&"advanced"==e.pagerMode&&(e.pagershowrowscombotop.jqxDropDownList({theme:e.theme}),e.pagershowrowscombobottom.jqxDropDownList({theme:e.theme}))),e.filterable&&(0<(l=U(".filterconditions")).length&&l.jqxDropDownList({theme:e.theme}),e.filtercolumnsList&&e.filtercolumnsList.jqxDropDownList({theme:e.theme}))),e.refresh()))}},_rendercolumnheader:function(e,t,i,r){var s="4px";return r.columnGroups?((s=i/2-this._columnheight/2)<0&&(s=4),s+="px"):25!=this.columnsHeight&&((s=this.columnsHeight/2-this._columnheight/2)<0&&(s=4),s+="px"),'<div style="overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 4px; margin-bottom: "+s+"; margin-top: "+s+';"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>"}}),U.jqx.dataCollection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginUpdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t},this.isempty=function(e){return null==this.records[e]},this.initialize=function(e){this.records[(e=e<1?1:e)-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,!0)},this.insertAt=function(e,t){return null!=e&&(null!=t&&(0<=e&&(e<this.records.length?(this.records.splice(e,0,t),!0):this.add(t))))},this.remove=function(e){if(null==e)return!1;e=this.records.indexOf(e);return-1!=e&&(this.records.splice(e,1),!0)},this.removeAt=function(e){return null!=e&&(!(e<0)&&(e<this.records.length&&(this.records[e],this.records.splice(e,1),!0)))},this},U.jqx.dataView=function(){return(this.that=this).grid=null,this.records=[],this.rows=[],this.columns=[],this.filters=new Array,this.pagesize=0,this.pagenum=0,this.source=null,this.databind=function(e,t){var i=!!e._source,r=null,s=(this._sortData=null,this._sortHierarchyData=null,i?e=(r=e)._source:r=new U.jqx.dataAdapter(e,{autoBind:!1}),function(e){e.originaldata=r.originaldata,e.records=r.records,e.hierarchy=r.hierarchy,e.grid.serverProcessing||(e._sortData=null,e._sortfield=null,e._filteredData=null,e._sortHierarchyData=null),e.hierarchy||(e.hierarchy=new Array,r.hierarchy=new Array),r._source.totalrecords?e.totalrecords=r._source.totalrecords:r._source.totalRecords?e.totalrecords=r._source.totalRecords:0!==e.hierarchy.length?e.totalrecords=e.hierarchy.length:e.totalrecords=e.records.length,e.cachedrecords=r.cachedrecords}),o=(i=this,r.recordids=[],r.records=new Array,r.cachedrecords=new Array,r.originaldata=new Array,r._options.totalrecords=i.totalrecords,r._options.originaldata=i.originaldata,r._options.recordids=i.recordids,r._options.cachedrecords=new Array,r._options.pagenum=i.pagenum,r._options.pageable=i.pageable,null!=e.type&&(r._options.type=e.type),null!=e.formatdata&&(r._options.formatData=e.formatdata),null!=e.contenttype&&(r._options.contentType=e.contenttype),null!=e.async&&(r._options.async=e.async),null!=e.updaterow&&(r._options.updaterow=e.updaterow),null!=e.addrow&&(r._options.addrow=e.addrow),null!=e.deleterow&&(r._options.deleterow=e.deleterow),0==i.pagesize&&(i.pagesize=10),r._options.pagesize=i.pagesize,this.source=e,void 0!==t&&0,this);switch(e.datatype){case"local":case"array":default:null==e.localdata&&(e.localdata=[]),null!=e.localdata&&(r.unbindBindingUpdate(o.grid.element.id),(!o.grid.autoBind&&o.grid.isInitialized||o.grid.autoBind)&&r.dataBind(),(b=function(){s(o),o.update()})(),r.bindBindingUpdate(o.grid.element.id,b));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=e.localdata)return r.unbindBindingUpdate(o.grid.element.id),(!o.grid.autoBind&&o.grid.isInitialized||o.grid.autoBind)&&r.dataBind(),(b=function(e){s(o),o.update()})(),void r.bindBindingUpdate(o.grid.element.id,b);for(var l=[],a=0,n={},d=0;d<this.filters.length;d++){var h=this.filters[d].datafield,c=this.filters[d].filter;if(c.getfilters){var u=c.getfilters();n[h+"operator"]=c.operator;for(var g=0;g<u.length;g++){u[g].datafield=h;var p,f=u[g].value,m=("datefilter"==u[g].type?u[g].value&&u[g].value.toLocaleString&&(p=this.grid.getColumn(u[g].datafield))&&p.cellsformat?(p=this.grid.source.formatDate(u[g].value,p.cellsformat,this.grid.gridlocalization),n["filtervalue"+a]=p||u[g].value.toLocaleString()):n["filtervalue"+a]=f.toString():(n["filtervalue"+a]=f.toString(),u[g].data&&(n["filterid"+a]=u[g].data.toString()),u[g].id&&(n["filterid"+a]=u[g].id.toString())),n["filtercondition"+a]=u[g].condition,n["filteroperator"+a]=u[g].operator,n["filterdatafield"+a]=h,{label:f.toString()}),w=(u[g].data&&(m.value=u[g].data.toString()),u[g].id?m.value=u[g].id.toString():m.value=f.toString(),m.condition=u[g].condition,m.operator=0==u[g].operator?"and":"or",m.field=h,m.type=u[g].type,!1);if(0<l.length)for(var v=0;v<l.length;v++){var y=l[v];if(y.field==h){y.filters.push(m),w=!0;break}}w||(l.push({field:h,filters:[]}),l[l.length-1].filters.push(m)),a++}}}n.filterGroups=l,n.filterslength=a,U.extend(n,{sortdatafield:o.sortfield,sortorder:o.sortfielddirection,pagenum:o.pagenum,pagesize:o.grid.pageSize});var x=r._options.data,b=(r._options.data?U.extend(r._options.data,n):(e.data&&U.extend(n,e.data),r._options.data=n),function(){function e(){s(o),o.update()}if(U.jqx.browser.msie&&U.jqx.browser.version<9)try{e()}catch(e){}else e()});r.unbindDownloadComplete(o.grid.element.id),r.bindDownloadComplete(o.grid.element.id,b),r._source.loaderror=function(e,t,i){b()},(!o.grid.autoBind&&o.grid.isInitialized||o.grid.autoBind)&&r.dataBind(),r._options.data=x}},this.addFilter=function(e,t){this._sortData=null,this._sortHierarchyData=null;for(var i=-1,r=0;r<this.filters.length;r++)if(this.filters[r].datafield==e){i=r;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removeFilter=function(e){this._sortData=null,this._sortHierarchyData=null;for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.sortBy=function(e,t){if(null==t)return this.sortfield="",void(this.sortfielddirection="");t="a"==(t=null==t?!0:t)||"asc"==t||"ascending"==t||1==t,this.sortfield=e="constructor"==e?"":e,this.sortfielddirection=t?"asc":"desc"},this._sort=function(e){if(!this.sortfield||!this.sortfielddirection)return e;if(this._sortfield==this.sortfield&&this._sortfielddirection==this.sortfielddirection&&this._sortData)return this._sortData;for(var t,i=this,r=Object.prototype.toString,s=(Object.prototype.toString="function"==typeof i.sortfield?i.sortfield:function(){return this[i.sortfield]},""),o=(this.source.datafields&&U.each(this.source.datafields,function(){if(this.name==i.sortfield)return this.type&&(s=this.type),!1}),new Array),l=0;l<e.length;l++)o.push(U.extend({originalRecord:e[l]},e[l]));return this._sortfield=this.sortfield,this._sortfielddirection=this.sortfielddirection,t="desc"===this.sortfielddirection?o.sort(function(e,t){return i._compare(e,t,s)}).reverse():o.sort(function(e,t){return i._compare(e,t,s)}),this._sortData=t,Object.prototype.toString=r,t},this._compare=function(e,t,i){if(void 0===(t=t)&&(t=null),null===(e=void 0===(e=e)?null:e)&&null===t)return 0;if(null===e&&null!==t)return 1;if(null!==e&&null===t)return 1;if(e=e.toString(),t=t.toString(),U.jqx.dataFormat)if(i&&""!=i)switch(i){case"number":case"int":case"float":return e<t?-1:t<e?1:0;case"date":case"time":return e<t?-1:t<e?1:0;case"string":case"text":e=String(e).toLowerCase(),t=String(t).toLowerCase()}else{if(U.jqx.dataFormat.isNumber(e)&&U.jqx.dataFormat.isNumber(t))return e<t?-1:t<e?1:0;if(U.jqx.dataFormat.isDate(e)&&U.jqx.dataFormat.isDate(t))return e<t?-1:t<e?1:0;U.jqx.dataFormat.isNumber(e)||U.jqx.dataFormat.isNumber(t)||(e=String(e).toLowerCase(),t=String(t).toLowerCase())}try{if(e<t)return-1;if(t<e)return 1}catch(e){}return 0},this._equals=function(e,t){return 0===this._compare(e,t)},this.evaluate=function(e){var t;if(this.grid.serverProcessing)return!e||""!=this.grid.source._source.id&&null!=this.grid.source._source.id||this.grid.pageable&&(t=this.grid.pageSize*this.pagenum,this.grid.rowsByKey=new Array,s=this,U.each(e,function(e){this.uid=t,s.grid.rowsByKey[this.uid]=this,t++})),e;var s,i,o,r=new Array;if(this.filters.length){function l(e,t){for(var i=0;i<e.length;i++){for(var r=e[i],s=(r._visible=!0,void 0),o=0;o<this.filters.length;o++)var l=this.filters[o].filter,a=r[this.filters[o].datafield],a=l.evaluate(a),s=null==s?a:"or"==l.operator?s||a:s&&a;r._visible=!1,(s||r.aggregate)&&(r._visible=!0,t.push(r),n[r.uid]=r)}}var n=new Array;if(this._filteredData)this.rows=this._filteredData;else{if(this.source.hierarchy||this.grid.source.hierarchy&&0<this.grid.source.hierarchy.length){var a=new Array,d=function(e,t){for(var i=0;i<t.length;i++){var r=t[i];a.push(r),r.records&&0<r.records.length&&d(r,r.records)}};d(null,e),l.call(this,a,r);for(var h=0;h<r.length;h++)for(var c=r[h];c.parent;){var u=c.parent;n[u.uid]||(u._visible=!0,n[u.uid]=u),c=u}r=e}else l.call(this,e,r);this._filteredData=r,this.rows=r}}else this.rows=e;return this.source.hierarchy||this.grid.source.hierarchy&&0<this.grid.source.hierarchy.length?(s=this,i=new Array,this._sortData=null,o=function(e,t){var i=s._sortData=null;if(s.source.hierarchy.groupingDataFields)if(t&&0<t.length&&t[0].level<s.source.hierarchy.groupingDataFields.length)for(var i=new Array,r=0;r<t.length;r++)i.push(U.extend({originalRecord:t[r]},t[r]));else i=s._sort(t);else i=s._sort(t);e.records?e.records=i:e=e.concat(i);for(r=0;r<i.length;r++)i[r].records&&i[r].records.length&&o(i[r],i[r].records);return e},(this.sortfield||this.sortfielddirection)&&(i=this._sortHierarchyData||o(i,e),this.rows=i,this._sortHierarchyData=i)):this.rows=this._sort(this.rows),this.rows},this.getid=function(e,t,i){if(0<U(e,t).length)return U(e,t).text();if(this.rows&&""!=e&&null!=e&&0<this.rows.length){null==(s=this.rows[this.rows.length-1][e])&&(s=null);for(var r=1;r<=100;r++)if(!(o=this.grid.rowsByKey[r+s])){if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){if(o=this.grid.rowsByKey["jqx"+s+r])continue;return"jqx"+s+r}return s+r}}if(null!=e&&0<e.toString().length){t=U(t).attr(e);if(null!=t&&0<t.toString().length)return this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords?"jqx"+t:t}var s;if(this.rows&&0<this.rows.length&&(o=this.grid.rowsByKey[i])){null==(s=this.rows[this.rows.length-1][e])&&(s="");for(r=1;r<=1e3;r++)if(!(o=this.grid.rowsByKey[r+s])){if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){if(o=this.grid.rowsByKey["jqx"+s+r])continue;return"jqx"+s+r}return s+r}}if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){if(!(o=this.grid.rowsByKey["jqx"+i]))return"jqx"+i;for(r=i+1;r<=100;r++)if(!(o=this.grid.rowsByKey["jqx"+r])){var o=this.grid.rowsByKey["jqx"+r];if(!o)return"jqx"+r}}return i},this.generatekey=function(){function e(){return 16*(1+Math.random())|0}return""+e()+e()+"-"+e()+"-"+e()},this}}(jqxBaseFramework);