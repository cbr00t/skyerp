!function(f){f.jqx.jqxWidget("jqxValidator","",{}),f.extend(f.jqx._jqxValidator.prototype,{defineInstance:function(){var t={rules:null,scroll:!0,focus:!0,scrollDuration:300,scrollCallback:null,position:"right",arrow:!0,animation:"fade",animationDuration:150,closeOnClick:!0,onError:null,onSuccess:null,ownerElement:null,_events:["validationError","validationSuccess"],hintPositionOffset:5,_inputHint:[],rtl:!1,hintType:"tooltip"};return this===f.jqx._jqxValidator.prototype||f.extend(!0,this,t),t},createInstance:function(){"label"==this.hintType&&150==this.animationDuration&&(this.animationDuration=0),this._configureInputs(),this._removeEventListeners(),this._addEventListeners()},destroy:function(){this._removeEventListeners(),this.hide()},validate:function(i){for(var n,r,o,s,a=!0,l=1/0,h=[],u=(this.updatePosition(),this),d=0,t=0;t<this.rules.length;t+=1)"function"==typeof this.rules[t].rule&&d++;this.positions=new Array;for(t=0;t<this.rules.length;t+=1){var e;f(this.rules[t].input);"function"==typeof this.rules[t].rule?this._validateRule(this.rules[t],function(t,e){0==(n=t)&&(a=!1,f(e.input),s=f(e.input),h.push(s),(t=s.offset())&&(r=t.top)<l&&(l=r,o=s)),0==--d&&"function"==typeof i&&(u._handleValidation(a,l,o,h),i&&i(a))}):n=this._validateRule(this.rules[t]),0==n&&(a=!1,s=f(this.rules[t].input),h.push(s),(e=s.offset())&&(r=e.top)<l&&(l=r,o=s))}if(0==d)return this._handleValidation(a,l,o,h),a},validateInput:function(t){for(var e=this._getRulesForInput(t),i=!0,n=0;n<e.length;n+=1)this._validateRule(e[n])||(i=!1);return i},hideHint:function(t){for(var e=this._getRulesForInput(t),i=0;i<e.length;i+=1)this._hideHintByRule(e[i])},hide:function(){for(var t=0;t<this.rules.length;t+=1)this.rules[t],this._hideHintByRule(this.rules[t])},updatePosition:function(){var t;this.positions=new Array;for(var e=0;e<this.rules.length;e+=1)(t=this.rules[e]).hint&&this._hintLayout(t.hint,f(t.input),t.position,t)},_getRulesForInput:function(t){for(var e=[],i=0;i<this.rules.length;i+=1)this.rules[i].input===t&&e.push(this.rules[i]);return e},_validateRule:function(e,i){var n,r=f(e.input),t=!0,o=this,s=!1;return"function"==typeof e.rule&&1==(s=e.rule.call(this,r,function(t){t?(o._hideHintByRule(e),i&&i(!0,e)):(t=o.animation,o.animation=null,e.hint&&o._hideHintByRule(e),"none"==f(r).css("display")||0==f(r).parents().length?o._hideHintByRule(e):(n=e.hintRender.apply(o,[e.message,r]),o._hintLayout(n,r,e.position,e),o._showHint(n),e.hint=n,o._removeLowPriorityHints(e),i&&i(!1,e),o.animation=t))}))&&i&&i(!0,e),"function"==typeof e.rule&&0==s?("function"!=typeof e.hintRender||e.hint||this._higherPriorityActive(e)||!r.is(":visible")||(n=e.hintRender.apply(this,[e.message,r]),this._removeLowPriorityHints(e),this._hintLayout(n,r,e.position,e),this._showHint(n),e.hint=n),t=!1,i&&i(!1,e)):this._hideHintByRule(e),t},_hideHintByRule:function(t){function e(){if("label"==r.hintType){var t=r;if("top"==t.position||"left"==t.position){if(n.prev().hasClass(".jqx-validator-error-label"))return}else if(n.next().hasClass(".jqx-validator-error-label"))return;"input"!=n[0].nodeName.toLowerCase()&&0<n.find("input").length?(0<n.find(".jqx-input").length?n.find(".jqx-input").removeClass(t.toThemeProperty("jqx-validator-error-element")):0<n.find(".jqx-text-area").length?n.find(".jqx-text-area").removeClass(t.toThemeProperty("jqx-validator-error-element")):n.is(".jqx-checkbox")&&n.find(".jqx-checkbox-default").removeClass(t.toThemeProperty("jqx-validator-error-element")),(n.is(".jqx-radiobutton")?n.find(".jqx-radiobutton-default"):n).removeClass(t.toThemeProperty("jqx-validator-error-element"))):n.removeClass(t.toThemeProperty("jqx-validator-error-element"))}}var i,n=f(t.input),r=this;t&&((i=t.hint)&&(this.positions&&this.positions[Math.round(i.offset().top)+"_"+Math.round(i.offset().left)]&&(this.positions[Math.round(i.offset().top)+"_"+Math.round(i.offset().left)]=null),"fade"===this.animation?i.fadeOut(this.animationDuration,function(){i.remove(),e()}):(i.remove(),e())),t.hint=null)},_handleValidation:function(t,e,i,n){t?(this._raiseEvent(1),"function"==typeof this.onSuccess&&this.onSuccess()):(this._scrollHandler(e),this.focus&&i.focus(),this._raiseEvent(0,{invalidInputs:n}),"function"==typeof this.onError&&this.onError(n))},_scrollHandler:function(t){var e;this.scroll&&(e=this,f("html,body").animate({scrollTop:t},this.scrollDuration,function(){"function"==typeof e.scrollCallback&&e.scrollCallback.call(e)}))},_higherPriorityActive:function(t){for(var e,i=!1,n=this.rules.length-1;0<=n;--n){if(e=this.rules[n],i&&e.input===t.input&&e.hint)return!0;e===t&&(i=!0)}return!1},_removeLowPriorityHints:function(t){for(var e,i=!1,n=0;n<this.rules.length;n+=1)e=this.rules[n],i&&e.input===t.input&&this._hideHintByRule(e),e===t&&(i=!0)},_getHintRuleByInput:function(t){for(var e,i=0;i<this.rules.length;i+=1)if(e=this.rules[i],f(e.input)[0]===t[0]&&e.hint)return e;return null},_removeEventListeners:function(){for(var t=0;t<this.rules.length;t+=1)for(var e,i=(e=this.rules[t]).action.split(","),n=f(e.input),r=0;r<i.length;r+=1)this.removeHandler(n,f.trim(i[r])+".jqx-validator")},_addEventListeners:function(){var t,e,i,n,r;0<this.host.parents(".jqx-window").length&&(n=function(){i.updatePosition()},r=(i=this).host.parents(".jqx-window"),this.addHandler(r,"closed",function(){i.hide()}),this.addHandler(r,"moved",n),this.addHandler(r,"moving",n),this.addHandler(r,"resized",n),this.addHandler(r,"resizing",n),this.addHandler(f(document.parentWindow),"scroll",function(){i.scroll&&n()}));for(var o=0;o<this.rules.length;o+=1)t=this.rules[o],e=f(t.input),this._addListenerTo(e,t)},_addListenerTo:function(t,e){var i=this,n=e.action.split(","),r=!1;this._isjQWidget(t)&&(r=!0);for(var o=0;o<n.length;o+=1){var s=f.trim(n[o]);!r||"blur"!=s&&"focus"!=s||t&&"input"!=t[0].nodeName.toLowerCase()&&(t=t.find("input")),this.addHandler(t,s+".jqx-validator",function(t){i._validateRule(e)})}},_configureInputs:function(){this.rules=this.rules||[];for(var t=0;t<this.rules.length;t+=1)this._handleInput(t)},_handleInput:function(t){t=this.rules[t];t.position||(t.position=this.position),t.message||(t.message="Validation Failed!"),t.action||(t.action="blur"),t.hintRender||(t.hintRender=this._hintRender),t.rule?this._handleRule(t):t.rule=null},_handleRule:function(t){var i,n,e=t.rule,r=!1;if("string"==typeof e?(0<=e.indexOf("=")&&(e=e.split("="),n=e[1].split(","),e=e[0]),(i=this["_"+e])?t.rule=function(t,e){return i.apply(this,[t].concat(n))}:r=!0):"function"!=typeof e?r=!0:t.rule=e,r)throw new Error("Wrong parameter!")},_required:function(t){switch(this._getType(t)){case"jqx-input-inner":if(0<t.find("input").length)return""!==f.trim(t.find("input").val());break;case"textarea":case"password":case"jqx-input":case"jqx-text-area":case"text":var e,i=f.data(t[0]);return i.jqxMaskedInput?(e=t.jqxMaskedInput("promptChar"),(n=t.jqxMaskedInput("value"))&&n.indexOf(e)<0):i.jqxNumberInput?""!==t.jqxNumberInput("inputValue"):i.jqxDateTimeInput?null!==t.jqxDateTimeInput("getDate"):""!==f.trim(t.val());case"checkbox":case"radio":return t.is(":checked");case"jqx-check-box":case"jqx-radio-button":return t[0].val();case"jqxCheckBox":case"jqxcheckbox":case"jqxradiobutton":case"jqxRadioButton":var n;return!0===(n=t.find("input").val())||1===n||"true"===n?!0:!1;case"div":return t.is(".jqx-checkbox")?t.jqxCheckBox("checked"):!!t.is(".jqx-radiobutton")&&t.jqxRadioButton("checked")}return!1},_notNumber:function(t){return this._validateText(t,function(t){if(""==t)return!0;return!/\d/.test(t)})},_startWithLetter:function(t){return this._validateText(t,function(t){if(""==t)return!0;return!/\d/.test(t.substring(0,1))})},_number:function(t){return this._validateText(t,function(t){if(""==t)return!0;t=new Number(t);return!isNaN(t)&&isFinite(t)})},_phone:function(t){return this._validateText(t,function(t){if(""==t)return!0;return/^\(\d{3}\)(\d){3}-(\d){4}$/.test(t)})},_length:function(t,e,i){return this._minLength(t,e)&&this._maxLength(t,i)},_maxLength:function(t,e){return e=parseInt(e,10),this._validateText(t,function(t){return t.length<=e})},_minLength:function(t,e){return e=parseInt(e,10),this._validateText(t,function(t){return t.length>=e})},_email:function(t){return this._validateText(t,function(t){if(""==t)return!0;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)})},_zipCode:function(t){return this._validateText(t,function(t){if(""==t)return!0;return/^(^\d{5}$)|(^\d{5}-\d{4}$)|(\d{3}-\d{2}-\d{4})$/.test(t)})},_ssn:function(t){return this._validateText(t,function(t){if(""==t)return!0;return/\d{3}-\d{2}-\d{4}/.test(t)})},_validateText:function(t,e){return!!this._isTextInput(t)&&e((this._isjQWidget(t)&&0<t.find("input").length?t.find("input"):t).val())},_isjQWidget:function(t){var e=f.data(t[0]);return!!(e.jqxMaskedInput||e.jqxNumberInput||e.jqxDateTimeInput)||(0<=t[0].tagName.toLowerCase().indexOf("jqx")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-password-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-complex-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-formatted-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-masked-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-date-time-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-number-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-check-box")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-radio-button")||(0<=t[0].tagName.toLowerCase().indexOf("jqxcheckbox")||0<=t[0].tagName.toLowerCase().indexOf("angular"))))))))))))},_isTextInput:function(t){var e=this._getType(t);return"text"===e||"textarea"===e||"password"===e||"jqx-input-inner"===e||t.is(".jqx-input")||t.is(".jqx-text-area")},_getType:function(t){var e;if(t[0])return e=t[0].tagName.toLowerCase(),"textarea"===e?"textarea":t.is(".jqx-input")?"jqx-input":t.is(".jqx-text-area")?"jqx-text-area":0<t.find(".jqx-input").length?"jqx-input-inner":"input"===e?f(t).attr("type")?f(t).attr("type").toLowerCase():"text":"jqx-password-input"===e?"password":"jqx-check-box"===e?"jqx-check-box":"jqx-radio-button"===e?"jqx-radio-button":e},_hintRender:function(t,e){var i,n;if("label"==this.hintType)return(r=f('<label class="'+this.toThemeProperty("jqx-validator-error-label")+'"></label>')).html(t),i=!1,0<e.parent().find(".jqx-input-label").length&&!e.hasClass("jqx-dropdownlist")&&!e.hasClass("jqx-combobox")&&!e.hasClass("jqx-datetimeinput")&&(r=e.parent().find(".jqx-input-label"),e.data().jqxWidget.hint&&(r.html(t),r.addClass(this.toThemeProperty("jqx-validator-error-label")),e.data().jqxWidget.host.attr("hint",!0)),this.hasHint=i=!0),(n=this).closeOnClick&&r.click(function(){n.hideHint(e.selector)}),i||("left"==this.position||"top"==this.position?r.insertBefore(f(e)):r.insertAfter(f(e))),r;var r=f('<div class="'+this.toThemeProperty("jqx-validator-hint")+' jqx-rc-all"></div>'),o=this;return r.html(t),this.closeOnClick&&r.click(function(){o.hideHint(e.selector)}),null==this.ownerElement?r.appendTo(document.body):this.ownerElement.innerHTML?r.appendTo(f(this.ownerElement)):r.appendTo(this.ownerElement),r},_hintLayout:function(t,e,i,n){if(this._hintRender===n.hintRender){var r,o,s,n=this._getPosition(e,i,t,n);if("label"==this.hintType)return r="2px","left"!=this.position&&"top"!=this.position||(r="-2px"),"input"!=e[0].nodeName.toLowerCase()&&"textarea"!=e[0].nodeName.toLowerCase()?(0<e.find(".jqx-text-area").length&&e.find(".jqx-text-area").addClass(this.toThemeProperty("jqx-validator-error-element")),0<e.find("input").length&&(0<e.find(".jqx-input").length?e.find(".jqx-input").addClass(this.toThemeProperty("jqx-validator-error-element")):0<e.find(".jqx-text-area").length?e.find(".jqx-text-area").addClass(this.toThemeProperty("jqx-validator-error-element")):e.is(".jqx-checkbox")&&e.find(".jqx-checkbox-default").addClass(this.toThemeProperty("jqx-validator-error-element")),(e.is(".jqx-radiobutton")?e.find(".jqx-radiobutton-default"):e).addClass(this.toThemeProperty("jqx-validator-error-element")))):e.addClass(this.toThemeProperty("jqx-validator-error-element")),(o=f("<span></span>")).addClass(this.toThemeProperty("jqx-validator-hint")),o.html(t.text()),o.appendTo(f(document.body)),s=o.outerWidth(),o.remove(),void(this.hasHint||(t.css({position:"relative",left:f(e).css("margin-left"),width:f(e).width(),top:r}),"center"==i&&(t.css("width",s),t.css("left","0px"),t.css("margin-left","auto"),t.css("margin-right","auto"))));t.css({position:"absolute",left:n.left,top:n.top}),this.arrow&&this._addArrow(e,t,i,n)}},_showHint:function(t){t&&"fade"===this.animation&&(t.fadeOut(0),t.fadeIn(this.animationDuration))},_getPosition:function(t,e,i,n){var r=t.offset(),o=t.outerWidth(),s=t.outerHeight();return this.rtl&&0<=e.indexOf("left")&&(e="right"),this.rtl&&0<=e.indexOf("right")&&(e="left"),null!=this.ownerElement&&((r={left:0,top:0}).top=parseInt(r.top)+t.position().top,r.left=parseInt(r.left)+t.position().left),n&&n.hintPositionRelativeElement&&(r=(n=f(n.hintPositionRelativeElement)).offset(),o=n.width(),s=n.height()),n=0<=e.indexOf("top")?r.top-s:0<=e.indexOf("bottom")?r.top+i.outerHeight()+this.hintPositionOffset+5:r.top,s=0<=e.indexOf("center")?r.left+this.hintPositionOffset+(o-i.outerWidth())/2:0<=e.indexOf("left")?r.left-i.outerWidth()-this.hintPositionOffset:0<=e.indexOf("right")?r.left+o+this.hintPositionOffset:r.left+this.hintPositionOffset,0<=e.indexOf(":")&&(e=e.split(":")[1].split(","),s+=parseInt(e[0],10),n+=parseInt(e[1],10)),this.positions||(this.positions=new Array),this.positions[Math.round(n)+"_"+Math.round(s)]&&this.positions[Math.round(n)+"_"+Math.round(s)].top==n&&(n+=t.outerHeight()),this.positions[Math.round(n)+"_"+Math.round(s)]={left:s,top:n},{left:s,top:n}},_addArrow:function(t,e,i,n){var r,o=f('<div class="'+this.toThemeProperty("jqx-validator-hint-arrow")+'"></div>'),s=(this.rtl&&0<=i.indexOf("left")&&(i="right"),this.rtl&&0<=i.indexOf("right")&&(i="left"),e.children(".jqx-validator-hint-arrow").remove(),e.append(o),o.outerHeight()),a=o.outerWidth(),l=e.outerHeight(),e=e.outerWidth();this._addImage(o),l=0<=i.indexOf("top")?l-s:0<=i.indexOf("bottom")?-s:(l-s)/2-s/2,0<=i.indexOf("center")?r=(e-a)/2:0<=i.indexOf("left")?r=e-a/2-1:0<=i.indexOf("right")&&(r=-a/2),(0<=i.indexOf("topright")||0<=i.indexOf("bottomright"))&&(r=0),(0<=i.indexOf("topleft")||0<=i.indexOf("bottomleft"))&&(r=e-a),o.css({position:"absolute",left:r,top:l})},_addImage:function(t){var e=t.css("background-image");e=(e=(e=(e=e.replace('url("',"")).replace('")',"")).replace("url(","")).replace(")",""),t.css("background-image","none"),t.append('<img src="'+e+'" alt="Arrow" style="position: relative; top: 0px; left: 0px; width: '+t.width()+"px; height: "+t.height()+'px;" />')},_raiseEvent:function(t,e){t=f.Event(this._events[t]);return t.args=e,this.host.trigger(t)},propertyChangedHandler:function(t,e,i,n){"rules"===e&&(this._configureInputs(),this._removeEventListeners(),this._addEventListeners())}})}(jqxBaseFramework);