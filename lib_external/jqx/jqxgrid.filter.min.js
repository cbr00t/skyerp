!function(k){k.extend(k.jqx._jqxGrid.prototype,{_updatefilterrowui:function(e){var t=this.columns.records.length,i=0,r=this;if(this.filterrow){for(var l=0;l<t;l++){var s=this.columns.records[l],a=parseInt(s.width),o=((a=a<s.minwidth?s.minwidth:a)>s.maxwidth&&(a=s.maxwidth),k(this.filterrow[0].cells[l])),n=(o.css("left",i),!0);if(o.width()==a&&(n=!1),e&&(n=!0),o.width(a),o[0]&&(o[0].left=i,s.element&&(o[0].style.width=s.element.style.width,o[0].style.left=s.element.style.left),s.hidden&&s.hideable?o.css("display","none"):i+=a,n))if(s.createfilterwidget&&"custom"==s.filtertype)s.createfilterwidget(s,o);else if(s.filterable){function d(e,t){t=k(t.children()[0]);t[0]&&(t[0].style.width=a-8+"px",k.jqx.browser.msie&&(t[0].style.width=a-16+"px")),t.attr("disabled",e.disabled)}switch(s.filtertype){case"number":case"input":k(o.children()[0]).width(a),o.find("input")[0].style.width=a-30+"px",k.jqx.browser.msie&&(o.find("input")[0].style.width=a-36+"px"),o.find("input").attr("disabled",r.disabled),k(o.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({theme:r.theme,disabled:r.disabled});break;case"date":case"range":this.host.jqxDateTimeInput?k(o.children()[0]).jqxDateTimeInput({theme:r.theme,disabled:r.disabled,width:a-10}):d(this,o);break;case"textbox":case"default":d(this,o);break;case"list":case"checkedlist":this.host.jqxDropDownList?k(o.children()[0]).jqxDropDownList({theme:r.theme,disabled:r.disabled,width:a-10}):d(this,o);break;case"bool":case"boolean":this.host.jqxCheckBox?k(o.children()[0]).jqxCheckBox({theme:r.theme,disabled:r.disabled}):d(this,o)}}}var f=k(this.filterrow.children()[0]);f.width(parseInt(i)+2),f.height(this.filterrowheight)}},clearfilterrow:function(e){if(this._disablefilterrow=!0,this.columns.records){for(var t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i],l=k(this.filterrow[0].cells[i]);if(("string"!=typeof e||r.displayfield==e)&&r.filterable){function s(e,t){t=k(t.children()[0]);t.val(""),t[0]&&(e["_oldWriteText"+t[0].id]="")}var a,o,n;switch(r.filtertype){case"number":case"input":l.find("input").val(""),this.host.jqxDropDownList&&((a=k(k(k(l).children()[0]).children()[1])).jqxDropDownList("clearSelection"),(o=0)==o&&(this._getfiltersbytype("number"==r.filtertype?"number":"string"),n=(new k.jqx.filter).getoperatorsbyfiltertype("number"==r.filtertype?"numberfilter":"stringfilter"),null!=r.filtercondition&&-1!=(o=n.indexOf(r.filtercondition.toUpperCase()))||(o="number"==r.filtertype?0:2)),a.jqxDropDownList({selectedIndex:o}),a.jqxDropDownList("ensureVisible",o));break;case"date":case"range":this.host.jqxDateTimeInput?k(l.children()[0]).jqxDateTimeInput("setDate",null):s(this,l);break;case"textbox":case"default":s(this,l);break;case"list":this.host.jqxDropDownList?k(l.children()[0]).jqxDropDownList("clearSelection"):s(this,l);break;case"checkedlist":this.host.jqxDropDownList?k(l.children()[0]).jqxDropDownList("checkAll",!1):s(this,l);break;case"bool":case"boolean":this.host.jqxCheckBox?k(l.children()[0]).jqxCheckBox({checked:null}):s(this,l)}}}this._disablefilterrow=!1}},_applyfilterfromfilterrow:function(){if(1!=this._disablefilterrow&&!this.disabled){for(var e=this.columns.records.length,o=this.that,t=0;t<e;t++){var i=new k.jqx.filter,r=this.columns.records[t];if(r.filterable&&null!==r.datafield){function l(e,t,i){var r=!0;if(e._filterwidget){var l=e._filterwidget.val();if(""!=l){var s="stringfilter"==t?"contains":"equal";if("numericfilter"==t&&","==o.gridlocalization.decimalseparator&&0<=l.indexOf(o.gridlocalization.decimalseparator)&&(l=l.replace(o.gridlocalization.decimalseparator,".")),"stringfilter"!=t){var a=0;if(-1!=l.indexOf(">")&&(s="greater_than",a=1),-1!=l.indexOf("<")&&(s="less_than",a=1),0!=(a=-1!=l.indexOf("=")?"greater_than"==s?(s="greater_than_or_equal",2):"less_than"==s?(s="less_than_or_equal",2):(s="equal",1):a)&&(l=l.substring(a)).length<1)return!1}null!=e.filtercondition&&(s=e.filtercondition),a="datefilter"==t?i.createfilter(t,l,s,null,e.cellsformat,o.gridlocalization):i.createfilter(t,l,s),i.addfilter(m,a)}else r=!1}return r}var s,a,n,d,f,c,h,p,u=o._getcolumntypebydatafield(r),g=o._getfiltertype(u),m=1,x=!0;r.filtertype;switch(r.filtertype){case"range":case"date":r._filterwidget.jqxDateTimeInput?"range"==r.filtertype?null!=(b=r._filterwidget.jqxDateTimeInput("getRange"))&&null!=b.from&&null!=b.to?(q="GREATER_THAN_OR_EQUAL",(s=new Date(0)).setHours(0),s.setMinutes(0),s.setFullYear(b.from.getFullYear(),b.from.getMonth(),b.from.getDate()),(p=new Date(0)).setHours(0),p.setMinutes(0),p.setFullYear(b.to.getFullYear(),b.to.getMonth(),b.to.getDate()),p.setHours(b.to.getHours()),p.setMinutes(b.to.getMinutes()),p.setSeconds(b.to.getSeconds()),a=i.createfilter(g,s,q),i.addfilter(0,a),p=i.createfilter(g,p,"LESS_THAN_OR_EQUAL"),i.addfilter(0,p)):x=!1:null!=(b=r._filterwidget.jqxDateTimeInput("getDate"))?((s=new Date(0)).setHours(0),s.setMinutes(0),s.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),r._filterwidget.jqxDateTimeInput("showTimeButton")&&(s.setHours(b.getHours()),s.setMinutes(b.getMinutes())),q="EQUAL",null!=r.filtercondition&&(q=r.filtercondition),a=i.createfilter(g,s,q),r._filterwidget.jqxDateTimeInput("showTimeButton")&&(a=i.createfilter(g,s,q,null,r.cellsformat)),i.addfilter(0,a)):x=!1:x=l(r,g,i);break;case"input":r._filterwidget?(b=r._filterwidget.find("input").val(),(n=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"))<0&&(n=0),f=i.getoperatorsbyfiltertype(g)[n],o.updatefilterconditions&&(null!=(d=o.updatefilterconditions(g,i.getoperatorsbyfiltertype(g)))&&i.setoperatorsbyfiltertype(g,d),f=i.getoperatorsbyfiltertype(g)[n]),c="NULL"==f||"NOT_NULL"==f,h="EMPTY"==f||"NOT_EMPTY"==f,null!=b&&0<b.length||c||h?(a=i.createfilter(g,b,f,null,r.cellsformat,o.gridlocalization),i.addfilter(0,a)):x=!1):x=!1;break;case"number":r._filterwidget?(b=r._filterwidget.find("input").val(),","==o.gridlocalization.decimalseparator&&0<=b.indexOf(o.gridlocalization.decimalseparator)&&(b=b.replace(o.gridlocalization.decimalseparator,".")),n=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),f=i.getoperatorsbyfiltertype(g)[n],o.updatefilterconditions&&(null!=(d=o.updatefilterconditions(g,i.getoperatorsbyfiltertype(g)))&&i.setoperatorsbyfiltertype(g,d),f=i.getoperatorsbyfiltertype(g)[n]),c="NULL"==f||"NOT_NULL"==f,h="EMPTY"==f||"NOT_EMPTY"==f,null!=b&&0<b.length||c||h?(a=i.createfilter(g,new Number(b),f,null,r.cellsformat,o.gridlocalization),i.addfilter(0,a)):x=!1):x=!1;break;case"textbox":case"default":x=l(r,g,i);break;case"bool":case"boolean":r._filterwidget.jqxCheckBox?null!=(b=r._filterwidget.jqxCheckBox("checked"))?(_=i.createfilter(g,b,q="equal"),i.addfilter(m,_)):x=!1:x=l(r,g,i);break;case"list":0<=(w=r._filterwidget.jqxDropDownList("listBox")).selectedIndex?(b=(p=w.getSelectedItem()).label,D=p.value,q="equal",_=i.createfilter(g,b,q=""===b?"NULL":q),i.addfilter(m,_),D!==b&&(_.data=D)):x=!1;break;case"checkedlist":if(r._filterwidget.jqxDropDownList){var w,y=(w=r._filterwidget.jqxDropDownList("listBox")).getCheckedItems();if(0==y.length){for(var v=1;v<w.items.length;v++){var b=w.items[v].label,D=w.items[v].value,q="not_equal",_=i.createfilter(g,b,q=""===b?"NOT_NULL":q);D!==b&&(_.data=D),i.addfilter(0,_)}x=!0}else if(y.length!=w.items.length)for(v=0;v<y.length;v++){b=y[v].label,D=y[v].value,q="equal",_=i.createfilter(g,b,q=""===b?"NULL":q);D!==b&&(_.data=D),i.addfilter(m,_)}else x=!1}else x=l(r,g,i)}this._loading||(x?this.addfilter(r.displayfield,i,!1):this.removefilter(r.displayfield,!1))}}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){for(var e=k('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),t=0,i=this.columns.records.length,r=this.toThemeProperty("jqx-grid-cell"),l=(r=(r+=" "+this.toThemeProperty("jqx-grid-cell-pinned"))+(" "+this.toThemeProperty("jqx-grid-cell-filter-row")),i+10),s=new Array,a=this.that,o=(this.filterrow[0].cells=s,e.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(e),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes(),!1),n=new Array,d=document.createDocumentFragment(),f=0;f<i;f++){var c,h=this.columns.records[f],p=h.width,u=((p=p<h.minwidth?h.minwidth:p)>h.maxwidth&&(p=h.maxwidth),document.createElement("div")),g=(u.style.overflow="hidden",u.style.position="absolute",u.style.height="100%",u.className=r,u=k(u),d.appendChild(u[0]),u[0].style.left=t+"px",this.rtl?(u.css("z-index",l++),u.css("border-left-width","1px")):u.css("z-index",l--),"auto"==p&&(p=0),u[0].style.width=parseFloat(p)+"px",u[0].left=t,h.hidden&&h.hideable?u.css("display","none"):t+=p,s[s.length]=u[0],!0);this.rtl?(this.groupable&&(c=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+c+f>i-1&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&f==i-1&&(g=!1)):(this.groupable&&(c=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+c>f&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&0==f&&(g=!1)),g&&("custom"==h.filtertype&&h.createfilterwidget?h.createfilterwidget(h,u,function(){a._applyfilterfromfilterrow()}):h.filterable&&(this._filterrowcache[h.datafield]?(o=!0,u.append(this._filterrowcache[h.datafield]),h._filterwidget=this._filterrowcache[h.datafield]):(this._addfilterwidget(h,u,p),n[h.datafield]=h._filterwidget)))}e[0].appendChild(d),this._filterrowcache=n,k.jqx.browser.msie&&k.jqx.browser.version<8&&e.css("z-index",l--),e.width(parseFloat(t)+2),this.filterrow.addClass(r),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),o&&this._updatefilterrowui(!0)},_getfilterdataadapter:function(s){var a,e=!!this.source._source;if(o=e?(t={localdata:k.extend(!0,{},this.source.records),datatype:this.source.datatype,async:!1},a=this,new k.jqx.dataAdapter(t,{autoBind:!1,autoSort:!0,autoSortField:s.displayfield,async:!1,uniqueDataFields:[s.displayfield],beforeLoadComplete:function(e){var t=new Array;if(s.cellsformat){for(var i=a._getcolumntypebydatafield(s),r=0;r<e.length;r++){t.push(e[r]);var l=e[r][s.displayfield];e[r][s.displayfield+"JQValue"]=l,"date"===i?e[r][s.displayfield]=null!=l?o.formatDate(l,s.cellsformat,a.gridlocalization):"":"number"!==i&&"float"!==i&&"int"!==i||(e[r][s.displayfield]=null!=l?o.formatNumber(l,s.cellsformat,a.gridlocalization):"")}return t}return e}})):new k.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[s.displayfield],autoSort:!0,autoSortField:s.displayfield,async:!1}),s.filteritems&&0<s.filteritems.length)var t={localdata:s.filteritems,datatype:this.source.datatype,async:!1},o=new k.jqx.dataAdapter(t,{autoBind:!1,async:!1});else if(s.filteritems){if(s.filteritems._source)return s.filteritems._options.autoBind=!1,s.filteritems._options.async=!1,s.filteritems;if(k.isFunction(s.filteritems))return s.filteritems()}return o},refreshfilterrow:function(){if(this.showfilterrow){this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);for(var e=this.that,t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i];if(r.filterable&&r.filter){var l=r.filter.getfilters();if(0<l.length){var s,a,o=l[0].value,n=r._filterwidget,d=r._filterwidget.parent();if(null!=n)switch(r.filtertype){case"number":d.find("input").val(o),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("numericfilter"),n.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"input":d.find("input").val(o),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("stringfilter"),n.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"date":case"range":this.host.jqxDateTimeInput?null!=(o=r.filter.getfilterat(0).filtervalue)&&(a=r.filter.getfilterat(1)?r.filter.getfilterat(1).filtervalue:o,"range"==r.filtertype?k(d.children()[0]).jqxDateTimeInput("setRange",new Date(o),new Date(a)):k(d.children()[0]).jqxDateTimeInput("setDate",new Date(o))):n.val(o);break;case"textbox":case"default":n.val(o),e["_oldWriteText"+n[0].id]=o;break;case"bool":case"boolean":this.host.jqxCheckBox?k(d.children()[0]).jqxCheckBox({checked:o}):n.val(o)}}}}this.refreshingfilter=!1}},_destroyedfilters:function(){this.that;for(var e=this.columns.records.length,t=0;t<e;t++){var i,r=this.columns.records[t];r.filterable&&(i=r._filterwidget,"list"==r.filtertype||"checkedlist"==r.filtertype?(this.removeHandler(i,"select"),this.removeHandler(i,"close"),i.jqxDropDownList("destroy")):"date"==r.filtertype||"range"==r.filtertype?(this.removeHandler(i,"valueChanged"),i.jqxDateTimeInput("destroy")):"bool"==r.filtertype?(this.removeHandler(i,"change"),i.jqxCheckBox("destroy")):"number"==r.filtertype||"input"===r.filtertype?(r=i.find(".jqx-input"),this.removeHandler(r,"keydown"),k(i.children()[1]).jqxDropDownList("destroy")):this.removeHandler(i,"keydown"),i.remove())}},_updatelistfilters:function(e,t){for(var i=this.that,r=this.columns.records.length,l=0;l<r;l++){var s=this.columns.records[l];if(s.filterable&&("list"==s.filtertype||"checkedlist"==s.filtertype)){var a=s._filterwidget;if(e){var o=this._getfilterdataadapter(s);a.jqxDropDownList({source:o});var n=!0;if(n=(c=a.jqxDropDownList("getItems")).length!=o.records.length+1?!1:n)for(var d=1;d<c.length;d++)if(c[d].label!=o.records[d-1][s.displayfield]){n=!1;break}if(n&&!t)continue}else if(null==s.filter){a.jqxDropDownList("renderSelection");continue}var f="checkedlist"==s.filtertype,c=a.jqxDropDownList("getItems"),h=a.jqxDropDownList("listBox");if(a.jqxDropDownList("dataBind"),f){a.jqxDropDownList({selectionRenderer:function(){return i.gridlocalization.filterselectstring}}),null==h.getItem(this.gridlocalization.filterselectallstring)&&h.insertAt({label:this.gridlocalization.filterselectallstring},0);f=k('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+this.gridlocalization.filterselectstring+"</span>");if(f.addClass(this.toThemeProperty("jqx-item")),a.jqxDropDownList("setContent",f),h.checkAll(!1),s.filter){for(var p=s.filter.getfilters(),d=0;d<h.items.length;d++){var u=h.items[d].label,g=void 0;k.each(p,function(){var e;"NOT_EQUAL"==this.condition?e=u!=this.value:"EQUAL"==this.condition&&(e=u==this.value),g=null==g&&void 0!==e?e:"EQUAL"==this.condition?g||e:g&&e}),g?h.checkIndex(d,!1,!1):h.uncheckIndex(d,!1,!1)}h._updateCheckedItems();f=h.getCheckedItems().length;h.items.length!=f&&0<f&&h.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(null==h.getItem(this.gridlocalization.filterchoosestring)&&h.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),a.jqxDropDownList({selectedIndex:0}),s.filter){for(var p=s.filter.getfilters(),m=-1,d=0;d<h.items.length;d++){u=h.items[d].label;k.each(p,function(){return"NOT_EQUAL"==this.condition||(u==this.value?(m=d,!1):void 0)})}-1!=m&&h.selectIndex(m)}c.length<8?a.jqxDropDownList("autoDropDownHeight",!0):a.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfilter:function(){for(var a=this,e=k("<div style='display: flex; height: calc(100% - 10px); margin-top: 5px; align-items: center; position: relative; margin-left: 4px;'><input style='width: 200px; height: 100%; direction: ltr;' role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>"),o=e.find("input"),n=e.find("div:first"),t=(e.addClass(this.toThemeProperty("jqx-rc-all")),e.addClass(this.toThemeProperty("jqx-widget")),e.addClass(this.toThemeProperty("jqx-input-group")),o.addClass(this.toThemeProperty("jqx-input")),o.addClass(this.toThemeProperty("jqx-rc-l")),o.addClass(this.toThemeProperty("jqx-input-group-addon")),o.addClass(this.toThemeProperty("jqx-widget")),o.addClass(this.toThemeProperty("jqx-widget-content")),n.addClass(this.toThemeProperty("jqx-fill-state-normal")),n.addClass(this.toThemeProperty("jqx-rc-r")),n.addClass(this.toThemeProperty("jqx-input-group-addon")),n.find("div").addClass(this.toThemeProperty("jqx-icon-search")),this.rtl&&(o.addClass(this.toThemeProperty("jqx-rtl")),o.css("direction","rtl")),this.filterbar.children().remove(),this.filterbutton=n,new Array),i=0;i<a.columns.records.length;i++)a.columns.records[i].datafield&&a.columns.records[i].filterable&&t.push({label:a.columns.records[i].text,value:a.columns.records[i].displayfield});function r(e){a.filterinput.val("");for(var t=0;t<a.dataview.filters.length;t++){var i=a.dataview.filters[t];i.datafield===e&&a.filterinput.val(i.filter.getfilterat(0).filtervalue)}}function l(){if(!n.hasClass("jqx-fill-state-disabled")){function e(e,t,i){var r=new k.jqx.filter,l=a._getcolumnbydatafield(e),l=a._getfiltertype(l);return e="datefilter"==l?r.createfilter(l,t,"EQUAL",null,e.cellsFormat,a.gridlocalization):"numericfilter"==l||"booleanfilter"==l?("numericfilter"==l&&0<=(t=0<=(t=","==a.gridlocalization.decimalseparator&&0<=t.indexOf(a.gridlocalization.decimalseparator)?t.replace(a.gridlocalization.decimalseparator,"."):t).indexOf(a.gridlocalization.currencysymbol)?t.replace(a.gridlocalization.currencysymbol,""):t).indexOf(a.gridlocalization.percentagesymbol)&&(t=t.replace(a.gridlocalization.percentagesymbol,"")),r.createfilter(l,t,"EQUAL",null,e.cellsFormat,a.gridlocalization)):r.createfilter(l,t,"CONTAINS"),r.operator=i,r.addfilter(0,e),r}var t,i=o.val();f.jqxDropDownList&&(t=f.jqxDropDownList("getSelectedItem"));if("simple"!==a.filterbarmode)t&&(l=e(t=t.value,i,"and"),0<i.length?(a.removefilter(t),a.addfilter(t,l)):a.removefilter(t),a.applyfilters());else{if(a.clearfilters(!1,!1),0<i.length)for(var r=0;r<a.columns.records.length;r++){var l,s=a.columns.records[r];!0===s.filterable&&("date"!==s.datatype&&"number"!==s.datatype||-1!==i.indexOf("1")||-1!==i.indexOf("2")||-1!==i.indexOf("3")||-1!==i.indexOf("4")||-1!==i.indexOf("5")||-1!==i.indexOf("6")||-1!==i.indexOf("7")||-1!==i.indexOf("8")||-1!==i.indexOf("9"))&&(l=e(s,i,"or"),a.addfilter(s.datafield,l))}a.applyfilters()}0==a.dataview.filters.length?a.filtericon.fadeOut(200):a.filtericon.fadeIn(200)}}var s=t.length<10,d=k("<div style='position: relative;  display: none; margin-right: 4px; margin-left: 4px; float: left;'>"+this.gridlocalization.filtersearchstring+"</div>"),f=(this.filterbar.append(d),k("<div class='filtercolumns' style='position: relative; margin-top:5px; margin-left:4px; margin-right: 4px; float: left;'></div>")),s=(this.filterbar.append(f),f.jqxDropDownList&&f.jqxDropDownList({theme:this.theme,enableBrowserBoundsDetection:!0,autoDropDownHeight:s,rtl:a.rtl,dropDownWidth:220,selectedIndex:0,width:"auto",height:25,source:t,displayMember:"label",valueMember:"value"}),this.filtercolumnsList=f,o[0].parentElement.insertBefore(d[0],o[0]),a.filterHeight,a._updateSimpleFilter=r,this.addHandler(f,"select",function(e){e=e.args.item.value;r(e)}),"simple"===this.filterbarmode?(this.filtercolumnsList.hide(),d.show()):(this.filtercolumnsList.show(),d.hide()),o.keydown(function(e){if(13===e.keyCode)return l(),e.preventDefault&&e.preventDefault(),!1}),n.click(function(){l()}),this.filterinput=o,this.filterbar.append(e),k("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>"));s.attr("title",a.gridlocalization.filterclearstring),s.addClass(a.toThemeProperty("jqx-icon-close")),e.append(s),s.hide(),(a.filtericon=s).click(function(){a.clearfilters(),o.val(""),a.filtericon.fadeOut(200)}),0<a.dataview.filters.length&&r(a.dataview.filters[0].datafield)},_renderfiltercolumn:function(){var r=this.that;this.filterable&&this.columns.records&&k.each(this.columns.records,function(e,t){var i=!1;r.autoshowfiltericon?this.filter?(k(this.filtericon).show(),i=!0):k(this.filtericon).hide():this.filterable&&(k(this.filtericon).show(),i=!0),this.element.removeAttribute("filter"),i&&this.element.setAttribute("filter",!0),"right"!=this.align||this.renderer||this.element&&(this.element.firstChild.firstChild.style.marginRight=i?"18px":"2px")})},_initcolumntypes:function(){if(this.columns&&this.columns.records){var e=this.source._source.datafields;if(e)for(var t=0;t<this.columns.records.length;t++){var i,r=this.columns.records[t];r.datatype||(i="",k.each(e,function(){if(this.name==r.displayfield)return this.type&&(i=this.type),!1}),r.datatype=""!=i?i:"")}}},_getcolumntypebydatafield:function(e){var t=this.that,i="string",t=t.source.datafields||(t.source._source?t.source._source.datafields:null);if(t){var r="";if(k.each(t,function(){if(this.name==e.displayfield)return this.type&&(r=this.type),!1}),r)return r}if(null!=e){if(null==this.dataview.cachedrecords)return i;var l=null;if(this.virtualmode)k.each(this.dataview.cachedrecords,function(){return l=this[e.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return i;if(null!=(l=this.dataview.cachedrecords[0][e.displayfield])&&""==l.toString())return"string"}if(null!=l)if("boolean"==typeof l)i="boolean";else if(k.jqx.dataFormat.isNumber(l))i="number";else{t=new Date(l);if("NaN"==t.toString()||"Invalid Date"==t.toString())if(k.jqx.dataFormat){if(null!=(t=k.jqx.dataFormat.tryparsedate(l))){if(t&&t.getFullYear())if(1970==t.getFullYear()&&0==t.getMonth()&&1==t.getDate())return t=new Number(l),isNaN(t)?"string":"number";return"date"}i="string"}else i="string";else i="date"}}return i},_getfiltersbytype:function(e){var t=this.that,i="";switch(e){case"number":case"float":case"int":i=t.gridlocalization.filternumericcomparisonoperators;break;case"date":i=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":i=t.gridlocalization.filterbooleancomparisonoperators;break;default:i=t.gridlocalization.filterstringcomparisonoperators}return i},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":case"range":t="datefilter";break;case"string":case"input":t="stringfilter"}return t},_buildfilter:function(e,t,i){var r=k(t).find(".filter1"),l=k(t).find(".filter2"),s=k(t).find(".filter3"),a=k(t).find(".filtertext1"+e.element.id),o=k(t).find(".filtertext2"+e.element.id),a=a.val(),o=o.val(),n=e._getcolumntypebydatafield(i),d=(e._getfiltersbytype(n),new k.jqx.filter),f=e._getfiltertype(n);if("default"===e.filtermode&&"list"!==i.filtertype&&"checkedlist"!==i.filtertype){var n=r.jqxDropDownList("selectedIndex"),l=l.jqxDropDownList("selectedIndex"),c=s.jqxDropDownList("selectedIndex"),h=(!e.updatefilterconditions||null!=(h=e.updatefilterconditions(f,d.getoperatorsbyfiltertype(f)))&&d.setoperatorsbyfiltertype(f,h),!1),n=d.getoperatorsbyfiltertype(f)[n],s=d.getoperatorsbyfiltertype(f)[c],c="NULL"==n||"NOT_NULL"==n,p="EMPTY"==n||"NOT_EMPTY"==n,p=(null==n&&(n=d.getoperatorsbyfiltertype(f)[0]),null==s&&(s=d.getoperatorsbyfiltertype(f)[0]),(0<a.length||c||p)&&(c=d.createfilter(f,a,n,null,i.cellsformat,e.gridlocalization),d.addfilter(l,c),h=!0),"NULL"==s||"NOT_NULL"==s);(0<o.length||p||("EMPTY"==s||"NOT_EMPTY"==s))&&(a=d.createfilter(f,o,s,null,i.cellsformat,e.gridlocalization),d.addfilter(l,a),h=!0),h?(u=i.displayfield,this.addfilter(u,d,!0)):this._clearfilter(e,t,i)}else if("excel"===e.filtermode||"list"===i.filtertype||"checkedlist"===i.filtertype){var u,n=!1,g=r.data().jqxListBox.instance,c="excel"===this.filtermode||"checkedlist"===i.filtertype,m=g.getCheckedItems();if(0==(m=c?m:g.getSelectedItems()).length){for(var x=1;x<g.items.length;x++){var w="not_equal";(y=void 0===(y=g.items[x].value)?"":y)&&y.indexOf&&(0<=y.indexOf("|")||0<=y.indexOf(" AND ")||0<=y.indexOf(" OR ")||0<=y.indexOf(" and ")||0<=y.indexOf(" or "))&&(y=(y=(y=(y=(y=y.replace("|","")).replace("AND","")).replace("OR","")).replace("and","")).replace("or",""),w="equal"),v="datefilter"==f?d.createfilter(f,y,w,null,i.cellsformat,e.gridlocalization):d.createfilter(f,y,w,null),d.addfilter(0,v)}n=!0}else if(m.length!=g.items.length)for(var y,v,n=!0,x=0;x<m.length;x++)e.gridlocalization.filterselectallstring!==m[x].value&&(void 0===(y=m[x].value)&&(y=""),w="equal",v="datefilter"==f?d.createfilter(f,y,w,null,i.cellsformat,e.gridlocalization):d.createfilter(f,y,w,null),d.addfilter(1,v));else n=!1;n?(u=i.displayfield,this.addfilter(u,d,!0)):(u=i.displayfield,this.removefilter(u,!0))}},_clearfilter:function(e,t,i){i=i.displayfield;this.removefilter(i,!0)},addfilter:function(e,t,i){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var r=this.getcolumn(e),l=this._getcolumn(e);null!=r&&(r.filter=t,l&&(l.filter=t),this.dataview.addfilter(e,t),1==i&&null!=i&&this.applyfilters("add"))},removefilter:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var i=this.getcolumn(e),r=this._getcolumn(e);null!=i&&null!=i.filter&&(this.dataview.removefilter(e,i.filter),i.filter=null,r.filter=null,this.showfilterrow&&this.clearfilterrow(e),1!=t&&!1===t||this.applyfilters("remove"))},applyfilters:function(e){if(0<=this.dataview.filters.length&&(this.virtualmode||!this.source.localdata)&&null!=this.source&&this.source.filter&&(t=-1,this.pageable?(t=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=t)),this._cellscache=new Array,this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode)return this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&"string"!=typeof e&&k.isEmptyObject(e)&&this.refreshfilterrow(),this._postrender("filter"),void this._raiseEvent(13,{filters:this.dataview.filters});var t;this.selectedrowindexes,this.that;this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection&&(t=this.sortdirection.ascending?"asc":"desc",this._loading?this.sortby(this.sortcolumn,t,null,!1,!1):this.sortby(this.sortcolumn,t,null,!1)),this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&0==this.groups.length?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&0<this.columns.records.length&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates()):(this.collapseallgroups(),this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),this._postrender("filter"),this.showfilterrow&&"string"!=typeof e&&k.isEmptyObject(e)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var e=new Array,t=0;t<this.dataview.filters.length;t++){var i=this.getcolumn(this.dataview.filters[t].datafield);e[t]={filter:this.dataview.filters[t].filter,datafield:i.datafield,displayfield:i.displayfield,filtercolumn:i.datafield,filtercolumntext:i.text}}return e},clearfilters:function(e){var t,i=this.that;this.showfilterrow&&this.clearfilterrow(),this.columns.records&&(t=1==e||!1!==e,k.each(this.columns.records,function(){i.removefilter(this.displayfield,!t)})),!1===e||1!=e&&!1===e||this.applyfilters("clear")},_updatefilterpanel:function(i,t,r){var e=(i=null==i?this:i)._getcolumntypebydatafield(r),l=i._getfiltersbytype(e);if(!i.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");i.filterpanel.detach(),i.excelfilterpanel.detach(),r.filterpanel&&r.filterpanel.detach(),k(t).children().detach();var s=k(i.menuitemsarray[6]),s=(k(s).css("height","190px"),r.createfilterpanel&&!r.filterpanel&&(s=k("<div class='filter' style='margin-left: 7px;'></div>"),k(t).append(s),r.createfilterpanel(r.displayfield,s),r.filterpanel=s),"list"===r.filtertype||"checkedlist"===r.filtertype?k(t).append(i.excelfilterpanel):"custom"!==r.filtertype?k(t).append(i.filterpanel):r.filterpanel&&k(t).append(r.filterpanel),k(t)),a=s.find("#filterclearbutton"+i.element.id),o=s.find("#filterbutton"+i.element.id),n=s.find(".filter1"),d=s.find(".filter2"),f=s.find(".filter3"),c=s.find(".filtertext1"+i.element.id),h=s.find(".filtertext2"+i.element.id);if(this._hasdatefilter&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype&&(m=c.parent(),x=h.parent(),m.children().remove(),x.children().remove(),p="date"==r.filtertype?(i._showwhere.text(i.gridlocalization.filtershowrowdatestring),p=k("<div class='filtertext1"+i.element.id+"' style=''></div>"),m.append(p),(_=function(e){var t={calendar:i.gridlocalization,todayString:i.gridlocalization.todaystring,clearString:i.gridlocalization.clearstring};e.jqxDateTimeInput({disabled:i.disabled,firstDayOfWeek:i.gridlocalization.firstDay,localization:t,rtl:i.rtl,width:i._filterpanelwidth-10,height:this.filterMenuItemsHeight,value:null,formatString:r.cellsformat,theme:i.theme})})(p),k("<div class='filtertext2"+i.element.id+"' style=''></div>")):(i._showwhere.text(i.gridlocalization.filtershowrowstring),p=k("<input autocomplete='off' class='filtertext1"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>"),m.append(p),(_=function(e){e.addClass(i.toThemeProperty("jqx-input")),e.addClass(i.toThemeProperty("jqx-filter-input jqx-widget-content")),e.addClass(i.toThemeProperty("jqx-rc-all")),e.width(i._filterpanelwidth-18),e[0].style.height=this.filterMenuItemsHeight+"px"})(p),k("<input autocomplete='off' class='filtertext2"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>")),x.append(p),_(p),c=s.find(".filtertext1"+i.element.id),h=s.find(".filtertext2"+i.element.id)),"date"!=r.filtertype?(c.val(""),h.val("")):(c.val(null),h.val(null)),this.removeHandler(o,"click"),this.addHandler(o,"click",function(){i._buildfilter(i,t,r),i._closemenu()}),this.removeHandler(a,"click"),this.addHandler(a,"click",function(){i._clearfilter(i,t,r),i._closemenu()}),this.removeHandler(o,"keydown"),this.addHandler(o,"keydown",function(e){13===e.keyCode&&(i._buildfilter(i,t,r),i._closemenu())}),this.removeHandler(a,"keydown"),this.addHandler(a,"keydown",function(e){13===e.keyCode&&(i._clearfilter(i,t,r),i._closemenu())}),this.removeHandler(c,"keydown"),this.addHandler(c,"keydown",function(e){13===e.keyCode&&o.trigger("click"),27===e.keyCode&&i._closemenu()}),this.removeHandler(h,"keydown"),this.addHandler(h,"keydown",function(e){13===e.keyCode&&o.trigger("click"),27===e.keyCode&&i._closemenu()}),"default"===this.filtermode&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype){n.jqxDropDownList("source")!=l&&(n.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l}),f.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l})),"boolean"==e||"bool"==e?(n.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),f.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0})):(_=!1,l&&l.length&&l.length<5&&(_=!0),n.jqxDropDownList({autoDropDownHeight:_,selectedIndex:2}),f.jqxDropDownList({autoDropDownHeight:_,selectedIndex:2})),d.jqxDropDownList({selectedIndex:0});var p=r.filter,u=new k.jqx.filter,g="";switch(e){case"number":case"int":case"float":case"decimal":w=u.getoperatorsbyfiltertype(g="numericfilter");break;case"boolean":case"bool":w=u.getoperatorsbyfiltertype(g="booleanfilter");break;case"date":case"time":w=u.getoperatorsbyfiltertype(g="datefilter");break;case"string":w=u.getoperatorsbyfiltertype(g="stringfilter")}if(null!=p){var m=p.getfilterat(0),x=p.getfilterat(1);p.getoperatorat(0);if(i.updatefilterconditions){var w=[],y=i.updatefilterconditions(g,w);if(null!=y){for(var v=0;v<y.length;v++)y[v]=y[v].toUpperCase();p.setoperatorsbyfiltertype(g,y),w=y}}s="default";null!=m&&(l=w.indexOf(m.comparisonoperator),_=m.filtervalue,c.val(_),n.jqxDropDownList({selectedIndex:l,animationType:s})),null!=x&&(m=w.indexOf(x.comparisonoperator),_=x.filtervalue,h.val(_),f.jqxDropDownList({selectedIndex:m,animationType:s})),null==p.getoperatorat(0)?d.jqxDropDownList({selectedIndex:0,animationType:s}):"and"==p.getoperatorat(0)||0==p.getoperatorat(0)?d.jqxDropDownList({selectedIndex:0}):d.jqxDropDownList({selectedIndex:1})}i.updatefilterpanel&&i.updatefilterpanel(n,f,d,c,h,o,a,p,g,w),this._hasdatefilter&&(!this._hasdatefilter||"date"==r.filtertype)||this.touchdevice||(c.focus(),setTimeout(function(){c.focus()},10))}else if("excel"===this.filtermode||"list"===r.filtertype||"checkedlist"===r.filtertype){l=i._getfilterdataadapter(r),g=i._getfiltertype(e),x="excel"===this.filtermode||"checkedlist"===r.filtertype;if("date"==r.filtertype&&i._showwhere.text(i.gridlocalization.filtershowrowstring),n.jqxListBox("focus"),this.removeHandler(n,"keyup"),this.addHandler(n,"keyup",function(e){13===e.keyCode&&o.trigger("click"),27===e.keyCode&&i._closemenu()}),r.cellsformat?n.jqxListBox({checkboxes:x,displayMember:r.displayfield,valueMember:r.displayfield+"JQValue",source:l}):n.jqxListBox({checkboxes:x,displayMember:r.displayfield,valueMember:r.displayfield,source:l}),x){n.jqxListBox("insertAt",{label:i.gridlocalization.filterselectallstring},0);(j=n.data().jqxListBox.instance).checkAll(!1);if(r.filter){j.uncheckAll(!1);for(var b=r.filter.getfilters(),D=0;D<j.items.length;D++){var q=j.items[D].value;k.each(b,function(){return"NOT_EQUAL"==this.condition?q!=this.value||null!=q&&null!=this.value&&q.toString()!=this.value.toString()?(j.uncheckIndex(D,!1,!1),!1):void 0:"EQUAL"==this.condition&&(q==this.value||null!=q&&null!=this.value&&q.toString()==this.value.toString())?(j.checkIndex(D,!1,!1),!1):void 0})}j._updateCheckedItems();var _=j.getCheckedItems().length;j.items.length!=_&&0<_&&j.host.jqxListBox("indeterminateIndex",0,!0,!1),_===j.items.length-1&&j.host.jqxListBox("checkIndex",0,!0,!1)}}else if(r.filter){(j=n.data().jqxListBox.instance).clearSelection();for(var j,b=r.filter.getfilters(),D=0;D<j.items.length;D++){q=j.items[D].value;k.each(b,function(){if("NOT_EQUAL"==this.condition){if(q!=this.value)return j.unselectIndex(D,!1,!1),!1}else if("EQUAL"==this.condition&&q==this.value)return j.selectIndex(D,!0,!1),!1})}j._renderItems()}}},_initfilterpanel:function(r,e,t,i,l){null==r&&(r=this),e[0].innerHTML="";var s=k("<div class='filter' style='position: absolute; bottom: 3px; margin-left: 3px;'></div>"),e=(e.append(s),k("<div class='filter showwhere' style='height: 18px; margin-top: 3px; margin-bottom: 3px;'></div>")),a=(e.text(r.gridlocalization.filtershowrowstring),this._showwhere=e,l?"ex":""),o=k("<div class='filter filter1' id='filter1"+r.element.id+a+"'></div>"),n=k("<div class='filter filter2' id='filter2"+r.element.id+a+"' style='margin-top: 3px; margin-bottom: 3px;'></div>"),a=k("<div class='filter filter3' id='filter3"+r.element.id+a+"'></div>"),t=r._getcolumntypebydatafield(t);if(!o.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");t=r._getfiltersbytype(t);if(this._hasdatefilter=!1,this._filterpanelwidth=i,this.columns&&this.columns.records){for(var d=0;d<this.columns.records.length;d++)if("date"==this.columns.records[d].filtertype){this._hasdatefilter=!0;break}}else if(this.columns&&!this.columns.records)for(d=0;d<this.columns.length;d++)if("date"==this.columns[d].filtertype){this._hasdatefilter=!0;break}function f(e){var t;return e?(-1!=e.text().indexOf("case sensitive")&&(t=(t=e.text()).replace("case sensitive","match case"),e.text(t)),e.css("font-family",r.host.css("font-family")),e.css("font-size",r.host.css("font-size")),e.css("top","2px"),e.css("position","relative"),e):""}var c,h=k("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext1"+r.element.id+"' style='padding: 3px; height: 17px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),p=h.find("input"),u=(p.addClass(this.toThemeProperty("jqx-input")),p.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),p.addClass(this.toThemeProperty("jqx-rc-all")),p.width(i-18),k("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext2"+r.element.id+"' style='padding: 3px; height: 17px; margin-top: 3px;' type='text'></input></div>")),g=u.find("input"),p=(g.addClass(this.toThemeProperty("jqx-input")),g.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),g.addClass(this.toThemeProperty("jqx-rc-all")),g.width(i-18),r.rtl&&(p.css("direction","rtl"),g.css("direction","rtl")),k("<div class='filter' style='height: 35px; text-align:center; margin-top: 15px; margin-left:-2px;'></div>")),g=k('<span tabIndex=0 id="filterbutton'+r.element.id+'" class="primary filterbutton" style="padding: 6px 15px;">'+r.gridlocalization.filterstring+"</span>"),m=(p.append(g),k('<span tabIndex=0 id="filterclearbutton'+r.element.id+'" class="secondary filterclearbutton" style="position: relative; left: 1px; padding: 6px 15px; margin-left: 7px;">'+r.gridlocalization.filterclearstring+"</span>"));p.append(m),g.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme}),m.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme});"default"!==this.filtermode||l?"excel"!==this.filtermode&&!l||(s.append(e),s.append(o),o.attr("tabindex",0),o.jqxListBox({rtl:r.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:i-10,height:130,theme:r.theme}),c=!0,r.addHandler(o,"checkChange",function(e){var t,i;c=c&&(e.args.label!=r.gridlocalization.filterselectallstring?(c=!1,o.jqxListBox("checkIndex",0,!0,!1),t=o.jqxListBox("getCheckedItems"),i=o.jqxListBox("getItems"),1==t.length?o.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&o.jqxListBox("indeterminateIndex",0,!0,!1)):(c=!1,e.args.checked?o.jqxListBox("checkAll",!1):o.jqxListBox("uncheckAll",!1)),!0)})):(s.append(e),s.append(o),o.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:24,dropDownHeight:150,dropDownWidth:i-10,selectionRenderer:f,source:t,theme:r.theme}),s.append(h),(l=new Array)[0]=r.gridlocalization.filterandconditionstring,l[1]=r.gridlocalization.filterorconditionstring,n.jqxDropDownList({_checkForHiddenParent:!1,rtl:r.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:24,source:l,selectionRenderer:f,theme:r.theme}),s.append(n),a.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:24,dropDownHeight:150,dropDownWidth:i-10,selectionRenderer:f,source:t,theme:r.theme}),s.append(a),s.append(u)),s.append(p),r.updatefilterpanel&&r.updatefilterpanel(o,a,n,h,u,g,m,null,null,t)}})}(jqxBaseFramework),function(L){L.extend(L.jqx._jqxGrid.prototype,{_updatefilterrowui:function(e){var t=this.columns.records.length,i=0,r=this;if(this.filterrow){for(var l=0;l<t;l++){var s=this.columns.records[l],a=parseInt(s.width),o=((a=a<s.minwidth?s.minwidth:a)>s.maxwidth&&(a=s.maxwidth),L(this.filterrow[0].cells[l])),n=(o.css("left",i),!0);if(o.width()==a&&(n=!1),e&&(n=!0),o.width(a),o[0].left=i,s.element&&(o[0].style.width=s.element.style.width,o[0].style.left=s.element.style.left),s.hidden&&s.hideable?o.css("display","none"):i+=a,n)if(s.createfilterwidget&&"custom"==s.filtertype)s.createfilterwidget(s,o);else if(s.filterable){function d(e,t){t=L(t.children()[0]);t[0]&&(t[0].style.width=a-8+"px",L.jqx.browser.msie&&(t[0].style.width=a-16+"px")),t.attr("disabled",e.disabled)}switch(s.filtertype){case"number":case"input":L(o.children()[0]).width(a),o.find("input")[0].style.width=a-30+"px",L.jqx.browser.msie&&(o.find("input")[0].style.width=a-36+"px"),o.find("input").attr("disabled",r.disabled),L(o.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({theme:r.theme,disabled:r.disabled});break;case"date":case"range":this.host.jqxDateTimeInput?L(o.children()[0]).jqxDateTimeInput({theme:r.theme,disabled:r.disabled,width:a-10}):d(this,o);break;case"textbox":case"default":d(this,o);break;case"list":case"checkedlist":this.host.jqxDropDownList?L(o.children()[0]).jqxDropDownList({theme:r.theme,disabled:r.disabled,width:a-10}):d(this,o);break;case"bool":case"boolean":this.host.jqxCheckBox?L(o.children()[0]).jqxCheckBox({theme:r.theme,disabled:r.disabled}):d(this,o)}}}var f=L(this.filterrow.children()[0]);f.width(parseInt(i)+2),f.height(this.filterrowheight)}},clearfilterrow:function(e){if(this._disablefilterrow=!0,this.columns.records){for(var t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i],l=L(this.filterrow[0].cells[i]);if(("string"!=typeof e||r.displayfield==e)&&r.filterable){function s(e,t){t=L(t.children()[0]);t.val(""),t[0]&&(e["_oldWriteText"+t[0].id]="")}var a,o,n;switch(r.filtertype){case"number":case"input":l.find("input").val(""),this.host.jqxDropDownList&&((a=L(L(L(l).children()[0]).children()[1])).jqxDropDownList("clearSelection"),(o=0)==o&&(this._getfiltersbytype("number"==r.filtertype?"number":"string"),n=(new L.jqx.filter).getoperatorsbyfiltertype("number"==r.filtertype?"numberfilter":"stringfilter"),null!=r.filtercondition&&-1!=(o=n.indexOf(r.filtercondition.toUpperCase()))||(o="number"==r.filtertype?0:2)),a.jqxDropDownList({selectedIndex:o}),a.jqxDropDownList("ensureVisible",o));break;case"date":case"range":this.host.jqxDateTimeInput?L(l.children()[0]).jqxDateTimeInput("setDate",null):s(this,l);break;case"textbox":case"default":s(this,l);break;case"list":this.host.jqxDropDownList?L(l.children()[0]).jqxDropDownList("clearSelection"):s(this,l);break;case"checkedlist":this.host.jqxDropDownList?L(l.children()[0]).jqxDropDownList("checkAll",!1):s(this,l);break;case"bool":case"boolean":this.host.jqxCheckBox?L(l.children()[0]).jqxCheckBox({checked:null}):s(this,l)}}}this._disablefilterrow=!1}},_applyfilterfromfilterrow:function(){if(1!=this._disablefilterrow&&!this.disabled){for(var e=this.columns.records.length,o=this.that,t=0;t<e;t++){var i=new L.jqx.filter,r=this.columns.records[t];if(r.filterable&&null!==r.datafield){function l(e,t,i){var r=!0;if(e._filterwidget){var l=e._filterwidget.val();if(""!=l){var s="stringfilter"==t?"contains":"equal";if("numericfilter"==t&&","==o.gridlocalization.decimalseparator&&0<=l.indexOf(o.gridlocalization.decimalseparator)&&(l=l.replace(o.gridlocalization.decimalseparator,".")),"stringfilter"!=t){var a=0;if(-1!=l.indexOf(">")&&(s="greater_than",a=1),-1!=l.indexOf("<")&&(s="less_than",a=1),0!=(a=-1!=l.indexOf("=")?"greater_than"==s?(s="greater_than_or_equal",2):"less_than"==s?(s="less_than_or_equal",2):(s="equal",1):a)&&(l=l.substring(a)).length<1)return!1}null!=e.filtercondition&&(s=e.filtercondition),a="datefilter"==t?i.createfilter(t,l,s,null,e.cellsformat,o.gridlocalization):i.createfilter(t,l,s),i.addfilter(w,a)}else r=!1}return r}var s,a,n,d,f,c,h,p,u,g,m=o._getcolumntypebydatafield(r),x=o._getfiltertype(m),w=1,y=!0;r.filtertype;switch(r.filtertype){case"range":case"date":r._filterwidget.jqxDateTimeInput?"range"==r.filtertype?null!=(q=r._filterwidget.jqxDateTimeInput("getRange"))&&null!=q.from&&null!=q.to?(j="GREATER_THAN_OR_EQUAL",(s=new Date(0)).setHours(0),s.setMinutes(0),s.setFullYear(q.from.getFullYear(),q.from.getMonth(),q.from.getDate()),(a=new Date(0)).setHours(0),a.setMinutes(0),a.setFullYear(q.to.getFullYear(),q.to.getMonth(),q.to.getDate()),a.setHours(q.to.getHours()),a.setMinutes(q.to.getMinutes()),a.setSeconds(q.to.getSeconds()),n=i.createfilter(x,s,j),i.addfilter(0,n),a=i.createfilter(x,a,"LESS_THAN_OR_EQUAL"),i.addfilter(0,a)):y=!1:null!=(q=r._filterwidget.jqxDateTimeInput("getDate"))?((s=new Date(0)).setHours(0),s.setMinutes(0),s.setFullYear(q.getFullYear(),q.getMonth(),q.getDate()),(a=r._filterwidget.jqxDateTimeInput("showTimeButton"))&&(s.setHours(q.getHours()),s.setMinutes(q.getMinutes())),j="EQUAL",null!=r.filtercondition&&(j=r.filtercondition),n=i.createfilter(x,s,j),a&&(n=i.createfilter(x,s,j,null,r.cellsformat)),i.addfilter(0,n)):y=!1:y=l(r,x,i);break;case"input":r._filterwidget?(q=r._filterwidget.find("input").val(),(d=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"))<0&&(d=0),c=i.getoperatorsbyfiltertype(x)[d],o.updatefilterconditions&&(null!=(f=o.updatefilterconditions(x,i.getoperatorsbyfiltertype(x)))&&i.setoperatorsbyfiltertype(x,f),c=i.getoperatorsbyfiltertype(x)[d]),h="NULL"==c||"NOT_NULL"==c,p="EMPTY"==c||"NOT_EMPTY"==c,null!=q&&0<q.length||h||p?(n=i.createfilter(x,q,c,null,r.cellsformat,o.gridlocalization),i.addfilter(0,n)):y=!1):y=!1;break;case"number":r._filterwidget?(q=r._filterwidget.find("input").val(),","==o.gridlocalization.decimalseparator&&0<=q.indexOf(o.gridlocalization.decimalseparator)&&(q=q.replace(o.gridlocalization.decimalseparator,".")),d=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),c=i.getoperatorsbyfiltertype(x)[d],o.updatefilterconditions&&(null!=(f=o.updatefilterconditions(x,i.getoperatorsbyfiltertype(x)))&&i.setoperatorsbyfiltertype(x,f),c=i.getoperatorsbyfiltertype(x)[d]),h="NULL"==c||"NOT_NULL"==c,p="EMPTY"==c||"NOT_EMPTY"==c,null!=q&&0<q.length||h||p?(n=i.createfilter(x,new Number(q),c,null,r.cellsformat,o.gridlocalization),i.addfilter(0,n)):y=!1):y=!1;break;case"textbox":case"default":y=l(r,x,i);break;case"bool":case"boolean":r._filterwidget.jqxCheckBox?null!=(q=r._filterwidget.jqxCheckBox("checked"))?(k=i.createfilter(x,q,j="equal"),i.addfilter(w,k)):y=!1:y=l(r,x,i);break;case"list":0<=(v=r._filterwidget.jqxDropDownList("listBox")).selectedIndex?(q=(u=v.getSelectedItem()).label,g=this.gridlocalization.filterchoosestring,"Please Choose:"!==q&&q!==g&&(_=u.value,j="equal",k=i.createfilter(x,q,j=""===q?"NULL":j),i.addfilter(w,k),_!==q&&(k.data=_))):y=!1;break;case"checkedlist":if(r._filterwidget.jqxDropDownList){var v,b=(v=r._filterwidget.jqxDropDownList("listBox")).getCheckedItems();if(0==b.length){for(var D=1;D<v.items.length;D++){var q=v.items[D].label,_=v.items[D].value,j="not_equal",k=i.createfilter(x,q,j=""===q?"NOT_NULL":j);_!==q&&(k.data=_),i.addfilter(0,k)}y=!0}else if(b.length!=v.items.length)for(D=0;D<b.length;D++){q=b[D].label,_=b[D].value,j="equal",k=i.createfilter(x,q,j=""===q?"NULL":j);_!==q&&(k.data=_),i.addfilter(w,k)}else y=!1}else y=l(r,x,i)}this._loading||(y?this.addfilter(r.displayfield,i,!1):this.removefilter(r.displayfield,!1))}}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){for(var e=L('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),t=0,i=this.columns.records.length,r=this.toThemeProperty("jqx-grid-cell"),l=(r=(r+=" "+this.toThemeProperty("jqx-grid-cell-pinned"))+(" "+this.toThemeProperty("jqx-grid-cell-filter-row")),i+10),s=new Array,a=this.that,o=(this.filterrow[0].cells=s,e.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(e),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes(),!1),n=new Array,d=document.createDocumentFragment(),f=0;f<i;f++){var c,h=this.columns.records[f],p=h.width,u=((p=p<h.minwidth?h.minwidth:p)>h.maxwidth&&(p=h.maxwidth),document.createElement("div")),g=(u.style.overflow="hidden",u.style.position="absolute",u.style.height="100%",u.className=r,u=L(u),d.appendChild(u[0]),u[0].style.left=t+"px",this.rtl?(u.css("z-index",l++),u.css("border-left-width","1px")):u.css("z-index",l--),"auto"==p&&(p=0),u[0].style.width=parseFloat(p)+"px",u[0].left=t,h.hidden&&h.hideable?u.css("display","none"):t+=p,s[s.length]=u[0],!0);this.rtl?(this.groupable&&(c=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+c+f>i-1&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&f==i-1&&(g=!1)):(this.groupable&&(c=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+c>f&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&0==f&&(g=!1)),g&&("custom"==h.filtertype&&h.createfilterwidget?h.createfilterwidget(h,u,function(){a._applyfilterfromfilterrow()}):h.filterable&&(this._filterrowcache[h.datafield]?(o=!0,u.append(this._filterrowcache[h.datafield]),h._filterwidget=this._filterrowcache[h.datafield]):(this._addfilterwidget(h,u,p),n[h.datafield]=h._filterwidget)))}e[0].appendChild(d),this._filterrowcache=n,L.jqx.browser.msie&&L.jqx.browser.version<8&&e.css("z-index",l--),e.width(parseFloat(t)+2),this.filterrow.addClass(r),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),o&&this._updatefilterrowui(!0)},_addfilterwidget:function(r,e,l){for(var s=this.that,t=this,a="",i=0;i<s.dataview.filters.length;i++){var o=s.dataview.filters[i];if(o.datafield&&o.datafield==r.datafield){a=(i=o.filter.getfilters()[0]).value;"range"===r.filtertype&&(a={from:a,to:o.filter.getfilters()[1].value}),o=i.condition,r.filtercondition=o;break}}function n(t,e){var i=L('<input autocomplete="off" type="textarea"/>');i.attr("tabindex",5+r.visibleindex),i[0].id=L.jqx.utilities.createId(),i.addClass(t.toThemeProperty("jqx-widget")),i.addClass(t.toThemeProperty("jqx-filter-input jqx-input jqx-input-widget")),i.addClass(t.toThemeProperty("jqx-rc-all")),i.addClass(t.toThemeProperty("jqx-widget-content")),t.rtl&&i.css("direction","rtl"),t.disabled&&i.attr("disabled",!0),i.attr("disabled",!1),i.appendTo(e),i.css("margin","4px"),i.width(l-8),i.height(t.filterrowheight-9),r.createfilterwidget&&r.createfilterwidget(r,e,i),(r._filterwidget=i).focus(function(){return t.content[0].scrollLeft=0,setTimeout(function(){t.content[0].scrollLeft=0},10),(t.focusedfilter=i).addClass(t.toThemeProperty("jqx-fill-state-focus")),!1}),i.blur(function(){i.removeClass(t.toThemeProperty("jqx-fill-state-focus"))}),i.keydown(function(e){"13"==e.keyCode&&t._applyfilterfromfilterrow(),i[0]._writeTimer&&clearTimeout(i[0]._writeTimer),i[0]._writeTimer=setTimeout(function(){t._loading||(t["_oldWriteText"+i[0].id]||(t["_oldWriteText"+i[0].id]=""),(0<t["_oldWriteText"+i[0].id].length&&t["_oldWriteText"+i[0].id]!=i.val()||0==t["_oldWriteText"+i[0].id].length)&&(t._applyfilterfromfilterrow(),t["_oldWriteText"+i[0].id]=i.val()))},r.filterdelay),t.focusedfilter=i}),t.host.removeClass("jqx-disableselect"),t.content.removeClass("jqx-disableselect"),i.val(a)}var d,f,c,h;switch(null!=r.datatype&&("number"!=r.filtertype||"string"!=r.datatype&&"date"!=r.datatype&&"bool"!=r.datatype||(r.filtertype="textbox"),"date"!=r.filtertype||"string"!=r.datatype&&"number"!=r.datatype&&"bool"!=r.datatype||(r.filtertype="textbox"),"bool"!=r.filtertype||"string"!=r.datatype&&"number"!=r.datatype&&"date"!=r.datatype||(r.filtertype="textbox")),r.filtertype){case"number":case"input":var p,u,g=L("<div></div>"),m=(g.width(e.width()),g.height(this.filterrowheight),e.append(g),20),l=("fluent"===this.theme&&(m=25),e.width()-m-1),x=(x=g,w=l,h=L('<input style="float: left;" autocomplete="off" type="textarea"/>'),s.rtl&&(h.css("float","right"),h.css("direction","rtl")),h.attr("tabindex",5+r.visibleindex),h[0].id=L.jqx.utilities.createId(),h.addClass(s.toThemeProperty("jqx-widget jqx-input jqx-rc-all jqx-input-widget jqx-filter-input jqx-widget-content")),h.appendTo(x),h.width(w-10),s.disabled&&h.attr("disabled",!0),h.attr("disabled",!1),h[0].style.height=s.filterrowheight-9+"px",h.css("margin","4px"),h.css("margin-right","3px"),h.focus(function(){(s.focusedfilter=h).addClass(s.toThemeProperty("jqx-fill-state-focus"))}),h.blur(function(){h.removeClass(s.toThemeProperty("jqx-fill-state-focus"))}),h.keydown(function(e){"13"==e.keyCode&&s._applyfilterfromfilterrow(),"9"!=e.keyCode&&(h[0]._writeTimer&&clearTimeout(h[0]._writeTimer),h[0]._writeTimer=setTimeout(function(){s._loading||s["_oldWriteText"+h[0].id]!=h.val()&&(s._applyfilterfromfilterrow(),s["_oldWriteText"+h[0].id]=h.val())},r.filterdelay),s.focusedfilter=h)}),h.val(a),s._getfiltersbytype("number"==r.filtertype?"number":"string")),w=((p=L("<div class='filter' style='float: left;'></div>")).css("margin-top","4px"),p.appendTo(g),s.rtl&&p.css("float","right"),0),y=(null!=r.filtercondition&&-1!=(u=(i=new L.jqx.filter).getoperatorsbyfiltertype("number"==r.filtertype?"numericfilter":"stringfilter").indexOf(r.filtercondition.toUpperCase()))&&(w=u),180),v=("input"==r.filtertype&&(y=240,0==w&&(w=-1!=(u=x.indexOf("contains")||2)&&null==r.filtercondition?u:-1)),p.jqxDropDownList({disabled:s.disabled,touchMode:s.touchmode,rtl:s.rtl,dropDownHorizontalAlignment:"right",enableBrowserBoundsDetection:!0,selectedIndex:w,width:m,height:27,dropDownHeight:150,dropDownWidth:y,source:x,theme:s.theme}),p.jqxDropDownList({selectionRenderer:function(e){return""}}),p.attr("tabindex",5+r.visibleindex),p.jqxDropDownList("setContent",""),p.find(".jqx-dropdownlist-content").hide(),r.createfilterwidget&&r.createfilterwidget(r,e,g),r._filterwidget=g,null);this.addHandler(p,"open",function(){t._activeFilterElement=p}),this.addHandler(p,"select",function(){var e=(e=p.jqxDropDownList("getSelectedItem"))?e.label:"contains";0<r._filterwidget.find("input").val().length&&!s.refreshingfilter&&s._applyfilterfromfilterrow(),("input"!=r.filtertype||s.refreshingfilter)&&(0!=r._filterwidget.find("input").val().length||s.refreshingfilter||"null"!=v&&"not null"!=v&&"null"!=e&&"not null"!=e)||s._applyfilterfromfilterrow(),v=e});break;case"textbox":case"default":default:n(this,e);break;case"none":break;case"date":case"range":this.host.jqxDateTimeInput?((u=L("<div></div>")).css("margin","4px"),u.css("margin-left","5px"),u.appendTo(e),w={calendar:this.gridlocalization,todayString:this.gridlocalization.todaystring,clearString:this.gridlocalization.clearstring},u.jqxDateTimeInput({firstDayOfWeek:this.gridlocalization.firstDay,readonly:!0,disabled:s.disabled,localization:w,rtl:s.rtl,showFooter:!0,formatString:r.cellsformat,selectionMode:r.filtertype,value:null,theme:this.theme,width:l-9,height:"fluent"===this.theme?20:this.filterrowheight-9}),r.createfilterwidget&&r.createfilterwidget(r,e,u),a&&a.from?u.jqxDateTimeInput("setRange",a.from,a.to):a&&1<a.toString().length&&u.val(a),u.find("input").attr("tabindex",5+r.visibleindex),r._filterwidget=u,this.addHandler(u,"valueChanged",function(e){s.refreshingfilter||(s._applyfilterfromfilterrow(),s.focusedfilter=null)})):n(this,e);break;case"list":case"checkedlist":this.host.jqxDropDownList?(m=this._getfilterdataadapter(r),x=!1,(p=L("<div></div>")).css("margin","4px"),p.css("margin-left","5px"),g=r.datafield,u="checkedlist"==r.filtertype,y=l<150?220:"auto",m.dataBind(),x=d=m.records.length<8,p.appendTo(e),p.jqxDropDownList({hint:!1,placeHolder:s.gridlocalization.filterchoosestring,disabled:s.disabled,touchMode:s.touchmode,rtl:s.rtl,checkboxes:u,dropDownWidth:y,source:m.records,autoDropDownHeight:d,theme:this.theme,width:l-9,height:this.filterrowheight-9,displayMember:r.displayfield,valueMember:g}),p.attr("tabindex",5+r.visibleindex),p.attr("default-placeholder",!0),r.createfilterwidget&&r.createfilterwidget(r,e,p),this.addHandler(p,"open",function(){t._activeFilterElement=p}),f=p.jqxDropDownList("listBox"),u?(p.jqxDropDownList({selectionRenderer:function(){return'<span class="'+s.toThemeProperty("jqx-item")+'" style="top: 4px; position: relative; color: inherit; border: none; background-color: transparent;">'+s.gridlocalization.filterselectstring+"</span>"}}),(y=L('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+s.gridlocalization.filterselectstring+"</span>")).addClass(this.toThemeProperty("jqx-item")),null!=f&&(x||f.host.height(200),f.insertAt({label:s.gridlocalization.filterselectallstring},0),p.jqxDropDownList("setContent",y),c=!0,new Array,f.checkAll(!1),s.addHandler(f.host,"checkChange",function(e){var t,i;p[0]._selectionChanged=!0,c=c&&(e.args.label!=s.gridlocalization.filterselectallstring?(c=!1,f.host.jqxListBox("checkIndex",0,!0,!1),t=f.host.jqxListBox("getCheckedItems"),i=f.host.jqxListBox("getItems"),1==t.length?f.host.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&f.host.jqxListBox("indeterminateIndex",0,!0,!1)):(c=!1,e.args.checked?f.host.jqxListBox("checkAll",!1):f.host.jqxListBox("uncheckAll",!1)),!0)}))):(f.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),p.jqxDropDownList({selectedIndex:0})),(r._filterwidget=p).jqxDropDownList("dropdownlistWrapper"),"list"==r.filtertype?this.addHandler(p,"select",function(e){s.refreshingfilter||e.args&&"none"!=e.args.type&&(s._applyfilterfromfilterrow(),s.focusedfilter=null)}):this.addHandler(p,"close",function(e){p[0]._selectionChanged&&(s._applyfilterfromfilterrow(),s.focusedfilter=null,p[0]._selectionChanged=!1)})):n(this,e);break;case"bool":case"boolean":this.host.jqxCheckBox?((m=L('<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -9px; margin-left: -12px;"></div>')).appendTo(e),m.jqxCheckBox({disabled:s.disabled,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,hasThreeStates:!0,theme:this.theme,checked:null}),m.attr("tabindex",5+r.visibleindex),r.createfilterwidget&&r.createfilterwidget(r,e,m),!0===a||"true"==a?m.jqxCheckBox({checked:!0}):!1!==a&&"false"!=a||m.jqxCheckBox({checked:!1}),r._filterwidget=m,this.addHandler(m,"change",function(e){s.refreshingfilter||e.args&&(s.focusedfilter=null,s._applyfilterfromfilterrow())})):n(this,e)}},_getfilterdataadapter:function(s){var a,e=!!this.source._source;if(o=e?(t={localdata:L.extend(!0,{},this.source.records),datatype:this.source.datatype,async:!1},a=this,new L.jqx.dataAdapter(t,{autoBind:!1,autoSort:!0,autoSortField:s.displayfield,async:!1,uniqueDataFields:[s.displayfield],beforeLoadComplete:function(e){var t=new Array;if(s.cellsformat){for(var i=a._getcolumntypebydatafield(s),r=0;r<e.length;r++){t.push(e[r]);var l=e[r][s.displayfield];e[r][s.displayfield+"JQValue"]=l,"date"===i?e[r][s.displayfield]=null!=l?o.formatDate(l,s.cellsformat,a.gridlocalization):"":"number"!==i&&"float"!==i&&"int"!==i||(e[r][s.displayfield]=null!=l?o.formatNumber(l,s.cellsformat,a.gridlocalization):"")}return t}return e}})):new L.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[s.displayfield],autoSort:!0,autoSortField:s.displayfield,async:!1}),s.filteritems&&0<s.filteritems.length)var t={localdata:s.filteritems,datatype:this.source.datatype,async:!1},o=new L.jqx.dataAdapter(t,{autoBind:!1,async:!1});else if(s.filteritems){if(s.filteritems._source)return s.filteritems._options.autoBind=!1,s.filteritems._options.async=!1,s.filteritems;if(L.isFunction(s.filteritems))return s.filteritems()}return o},refreshfilterrow:function(){if(this.showfilterrow){this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);for(var e=this.that,t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i];if(r.filterable&&r.filter){var l=r.filter.getfilters();if(0<l.length){var s,a,o,n=l[0].value,d=r._filterwidget,f=r._filterwidget.parent();if(null!=d)switch(r.filtertype){case"number":f.find("input").val(n),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("numericfilter"),d.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"input":f.find("input").val(n),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("stringfilter"),d.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"date":case"range":this.host.jqxDateTimeInput?null!=(n=r.filter.getfilterat(0).filtervalue)&&(o=r.filter.getfilterat(1)?r.filter.getfilterat(1).filtervalue:n,"range"==r.filtertype?(a=new Date(n),o=new Date(o),isNaN(a)&&(a=L.jqx.dataFormat.tryparsedate(n)),isNaN(o)&&(o=L.jqx.dataFormat.tryparsedate(n)),L(f.children()[0]).jqxDateTimeInput("setRange",a,o)):L(f.children()[0]).jqxDateTimeInput("setDate",new Date(n))):d.val(n);break;case"textbox":case"default":d.val(n),e["_oldWriteText"+d[0].id]=n;break;case"bool":case"boolean":this.host.jqxCheckBox?L(f.children()[0]).jqxCheckBox({checked:n}):d.val(n)}}}}this.refreshingfilter=!1}},_destroyedfilters:function(){this.that;for(var e=this.columns.records.length,t=0;t<e;t++){var i,r=this.columns.records[t];r.filterable&&(i=r._filterwidget,"list"==r.filtertype||"checkedlist"==r.filtertype?(this.removeHandler(i,"select"),this.removeHandler(i,"close"),i.jqxDropDownList("destroy")):"date"==r.filtertype||"range"==r.filtertype?(this.removeHandler(i,"valueChanged"),i.jqxDateTimeInput("destroy")):"bool"==r.filtertype?(this.removeHandler(i,"change"),i.jqxCheckBox("destroy")):"number"==r.filtertype||"input"===r.filtertype?(r=i.find(".jqx-input"),this.removeHandler(r,"keydown"),L(i.children()[1]).jqxDropDownList("destroy")):this.removeHandler(i,"keydown"),i.remove())}},_updatelistfilters:function(e,t){for(var i=this.that,r=this.columns.records.length,l=0;l<r;l++){var s=this.columns.records[l];if(s.filterable&&("list"==s.filtertype||"checkedlist"==s.filtertype)){var a=s._filterwidget;if(e){var o=this._getfilterdataadapter(s);a.jqxDropDownList({source:o});var n=!0;if(n=(c=a.jqxDropDownList("getItems")).length!=o.records.length+1?!1:n)for(var d=1;d<c.length;d++)if(c[d].label!=o.records[d-1][s.displayfield]){n=!1;break}if(n&&!t)continue}else if(null==s.filter){a.jqxDropDownList("renderSelection");continue}var f="checkedlist"==s.filtertype,c=a.jqxDropDownList("getItems"),h=a.jqxDropDownList("listBox");if(a.jqxDropDownList("dataBind"),f){a.jqxDropDownList({selectionRenderer:function(){return i.gridlocalization.filterselectstring}}),null==h.getItem(this.gridlocalization.filterselectallstring)&&h.insertAt({label:this.gridlocalization.filterselectallstring},0);f=L('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+this.gridlocalization.filterselectstring+"</span>");if(f.addClass(this.toThemeProperty("jqx-item")),a.jqxDropDownList("setContent",f),h.checkAll(!1),s.filter){for(var p=s.filter.getfilters(),d=0;d<h.items.length;d++){var u=h.items[d].label,g=void 0;L.each(p,function(){var e;"NOT_EQUAL"==this.condition?e=u!=this.value:"EQUAL"==this.condition&&(e=u==this.value),g=null==g&&void 0!==e?e:"EQUAL"==this.condition?g||e:g&&e}),g?h.checkIndex(d,!1,!1):h.uncheckIndex(d,!1,!1)}h._updateCheckedItems();f=h.getCheckedItems().length;h.items.length!=f&&0<f&&h.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(null==h.getItem(this.gridlocalization.filterchoosestring)&&h.items[0].label!==this.gridlocalization.filterchoosestring&&h.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),a.jqxDropDownList({selectedIndex:0}),s.filter){for(var p=s.filter.getfilters(),m=-1,d=0;d<h.items.length;d++){u=h.items[d].label;L.each(p,function(){return"NOT_EQUAL"==this.condition||(u==this.value?(m=d,!1):void 0)})}-1!=m&&h.selectIndex(m)}c.length<8?a.jqxDropDownList("autoDropDownHeight",!0):a.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfiltercolumn:function(){var r=this.that;this.filterable&&this.columns.records&&L.each(this.columns.records,function(e,t){var i=!1;r.autoshowfiltericon?this.filter?(L(this.filtericon).show(),i=!0):L(this.filtericon).hide():this.filterable&&(L(this.filtericon).show(),i=!0),this.element.removeAttribute("filter"),i&&this.element.setAttribute("filter",!0),"right"!=this.align||this.renderer||this.element&&(this.element.firstChild.firstChild.style.marginRight=i?"18px":"2px")})},_initcolumntypes:function(){if(this.columns&&this.columns.records){var e=this.source._source.datafields;if(e)for(var t=0;t<this.columns.records.length;t++){var i,r=this.columns.records[t];r.datatype||(i="",L.each(e,function(){if(this.name==r.displayfield)return this.type&&(i=this.type),!1}),r.datatype=""!=i?i:"")}}},_getcolumntypebydatafield:function(e){var t=this.that,i="string",t=t.source.datafields||(t.source._source?t.source._source.datafields:null);if(t){var r="";if(L.each(t,function(){if(this.name==e.displayfield)return this.type&&(r=this.type),!1}),r)return r}if(null!=e){if(null==this.dataview.cachedrecords)return i;var l=null;if(this.virtualmode)L.each(this.dataview.cachedrecords,function(){return l=this[e.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return i;if(null!=(l=this.dataview.cachedrecords[0][e.displayfield])&&""==l.toString())return"string"}if(null!=l)if("boolean"==typeof l)i="boolean";else if(L.jqx.dataFormat.isNumber(l))i="number";else{t=new Date(l);if("NaN"==t.toString()||"Invalid Date"==t.toString())if(L.jqx.dataFormat){if(null!=(t=L.jqx.dataFormat.tryparsedate(l))){if(t&&t.getFullYear())if(1970==t.getFullYear()&&0==t.getMonth()&&1==t.getDate())return t=new Number(l),isNaN(t)?"string":"number";return"date"}i="string"}else i="string";else i="date"}}return i},_getfiltersbytype:function(e){var t=this.that,i="";switch(e){case"number":case"float":case"int":i=t.gridlocalization.filternumericcomparisonoperators;break;case"date":i=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":i=t.gridlocalization.filterbooleancomparisonoperators;break;default:i=t.gridlocalization.filterstringcomparisonoperators}return i},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":case"range":t="datefilter";break;case"string":case"input":t="stringfilter"}return t},_buildfilter:function(e,t,i){var r=L(t).find(".filter1"),l=L(t).find(".filter2"),s=L(t).find(".filter3"),a=L(t).find(".filtertext1"+e.element.id),o=L(t).find(".filtertext2"+e.element.id),a=a.val(),o=o.val(),n=e._getcolumntypebydatafield(i),d=(e._getfiltersbytype(n),new L.jqx.filter),f=e._getfiltertype(n);if("default"===e.filtermode&&"list"!==i.filtertype&&"checkedlist"!==i.filtertype){var n=r.jqxDropDownList("selectedIndex"),l=l.jqxDropDownList("selectedIndex"),c=s.jqxDropDownList("selectedIndex"),h=(!e.updatefilterconditions||null!=(h=e.updatefilterconditions(f,d.getoperatorsbyfiltertype(f)))&&d.setoperatorsbyfiltertype(f,h),!1),n=d.getoperatorsbyfiltertype(f)[n],s=d.getoperatorsbyfiltertype(f)[c],c="NULL"==n||"NOT_NULL"==n,p="EMPTY"==n||"NOT_EMPTY"==n,p=(null==n&&(n=d.getoperatorsbyfiltertype(f)[0]),null==s&&(s=d.getoperatorsbyfiltertype(f)[0]),(0<a.length||c||p)&&(c=d.createfilter(f,a,n,null,i.cellsformat,e.gridlocalization),d.addfilter(l,c),h=!0),"NULL"==s||"NOT_NULL"==s);(0<o.length||p||("EMPTY"==s||"NOT_EMPTY"==s))&&(a=d.createfilter(f,o,s,null,i.cellsformat,e.gridlocalization),d.addfilter(l,a),h=!0),h?(u=i.displayfield,this.addfilter(u,d,!0)):this._clearfilter(e,t,i)}else if("excel"===e.filtermode||"list"===i.filtertype||"checkedlist"===i.filtertype){var u,n=!1,g=r.data().jqxListBox.instance,c="excel"===this.filtermode||"checkedlist"===i.filtertype,m=g.getCheckedItems();if(0==(m=c?m:g.getSelectedItems()).length){for(var x=1;x<g.items.length;x++){var w="not_equal";(y=void 0===(y=g.items[x].value)?"":y)&&y.indexOf&&(0<=y.indexOf("|")||0<=y.indexOf(" AND ")||0<=y.indexOf(" OR ")||0<=y.indexOf(" and ")||0<=y.indexOf(" or "))&&(y=(y=(y=(y=(y=y.replace("|","")).replace("AND","")).replace("OR","")).replace("and","")).replace("or",""),w="equal"),v="datefilter"==f?d.createfilter(f,y,w,null,i.cellsformat,e.gridlocalization):d.createfilter(f,y,w,null),d.addfilter(0,v)}n=!0}else if(m.length!=g.items.length)for(var y,v,n=!0,x=0;x<m.length;x++)e.gridlocalization.filterselectallstring!==m[x].value&&(void 0===(y=m[x].value)&&(y=""),w="equal",v="datefilter"==f?d.createfilter(f,y,w,null,i.cellsformat,e.gridlocalization):d.createfilter(f,y,w,null),d.addfilter(1,v));else n=!1;n?(u=i.displayfield,this.addfilter(u,d,!0)):(u=i.displayfield,this.removefilter(u,!0))}},_clearfilter:function(e,t,i){i=i.displayfield;this.removefilter(i,!0)},addfilter:function(e,t,i){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var r=this.getcolumn(e),l=this._getcolumn(e);null!=r&&(r.filter=t,null!=l&&(l.filter=t,this.dataview.addfilter(e,t),1==i&&null!=i&&this.applyfilters("add")))},removefilter:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var i=this.getcolumn(e),r=this._getcolumn(e);null!=i&&null!=i.filter&&(this.dataview.removefilter(e,i.filter),i.filter=null,r.filter=null,this.showfilterrow&&this.clearfilterrow(e),1!=t&&!1===t||this.applyfilters("remove"))},applyfilters:function(e){if(0<=this.dataview.filters.length&&(this.virtualmode||!this.source.localdata)&&null!=this.source&&this.source.filter&&(t=-1,this.pageable?(t=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=t)),this._cellscache=new Array,this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode)return this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&"string"!=typeof e&&L.isEmptyObject(e)&&this.refreshfilterrow(),this._postrender("filter"),void this._raiseEvent(13,{filters:this.dataview.filters});var t;this.selectedrowindexes,this.that;this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection&&(t=this.sortdirection.ascending?"asc":"desc",this._loading?this.sortby(this.sortcolumn,t,null,!1,!1):this.sortby(this.sortcolumn,t,null,!1)),this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&0==this.groups.length?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&0<this.columns.records.length&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this._postrender("filter")):(this.collapseallgroups(),this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this._postrender("group")),this.showfilterrow&&"string"!=typeof e&&L.isEmptyObject(e)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var e=new Array,t=0;t<this.dataview.filters.length;t++){var i=this.getcolumn(this.dataview.filters[t].datafield);e[t]={filter:this.dataview.filters[t].filter,datafield:i.datafield,displayfield:i.displayfield,filtercolumn:i.datafield,filtercolumntext:i.text}}return e},clearfilters:function(e){var t,i=this.that;this.showfilterrow&&this.clearfilterrow(),this.columns.records&&(t=1==e||!1!==e,L.each(this.columns.records,function(){i.removefilter(this.displayfield,!t)})),!1===e||1!=e&&!1===e||this.applyfilters("clear")},_destroyfilterpanel:function(){var e=L(L.find("#filterclearbutton"+this.element.id)),t=L(L.find("#filterbutton"+this.element.id)),i=L(L.find("#filter1"+this.element.id)),r=L(L.find("#filter2"+this.element.id)),l=L(L.find("#filter3"+this.element.id)),s=L(L.find(".filtertext1"+this.element.id)),a=L(L.find(".filtertext2"+this.element.id)),i=(0<s.length&&0<a.length&&(s.removeClass(),a.removeClass(),s.remove(),a.remove()),0<e.length&&(e.jqxButton("destroy"),t.jqxButton("destroy"),this.removeHandler(e,"click"),this.removeHandler(t,"click")),0<i.length&&i.jqxDropDownList("destroy"),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy"),L(L.find("#filter1"+this.element.id+"ex"))),r=L(L.find("#filter2"+this.element.id+"ex")),l=L(L.find("#filter3"+this.element.id+"ex"));0<i.length&&i.jqxDropDownList("destroy"),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy"),this.excelfilterpanel&&(i=L(this.excelfilterpanel).find("#filter1"+this.element.id+"ex"),r=L(this.excelfilterpanel).find("#filter2"+this.element.id+"ex"),l=L(this.excelfilterpanel).find("#filter3"+this.element.id+"ex"),0<i.length&&(this.removeHandler(i,"checkChange"),i.jqxListBox("destroy")),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy"),e=L(this.excelfilterpanel).find("#filterclearbutton"+this.element.id+"ex"),t=L(this.excelfilterpanel).find("#filterbutton"+this.element.id+"ex"),i=L(this.excelfilterpanel).find("#filter1"+this.element.id+"ex"),r=L(this.excelfilterpanel).find("#filter2"+this.element.id+"ex"),l=L(this.excelfilterpanel).find("#filter3"+this.element.id+"ex"),s=L(this.excelfilterpanel).find(".filtertext1"+this.element.id+"ex"),a=L(this.excelfilterpanel).find(".filtertext2"+this.element.id+"ex"),0<s.length&&0<a.length&&(s.removeClass(),a.removeClass(),s.remove(),a.remove()),0<e.length&&(e.jqxButton("destroy"),t.jqxButton("destroy"),this.removeHandler(e,"click"),this.removeHandler(t,"click")),this.excelfilterpanel.removeData(),this.excelfilterpanel.remove(),delete this.excelfilterpanel)},_updatefilterpanel:function(i,t,r){var e=(i=null==i?this:i)._getcolumntypebydatafield(r),l=i._getfiltersbytype(e);if(!i.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");i.filterpanel.detach(),i.excelfilterpanel.detach(),r.filterpanel&&r.filterpanel.detach(),L(t).children().detach();var s=L(i.menuitemsarray[6]),s=(L(s).css("height","220px"),r.createfilterpanel&&!r.filterpanel&&(s=L("<div class='filter' style='margin-left: 7px;'></div>"),L(t).append(s),r.createfilterpanel(r.displayfield,s),r.filterpanel=s),"list"===r.filtertype||"checkedlist"===r.filtertype?L(t).append(i.excelfilterpanel):"custom"!==r.filtertype?L(t).append(i.filterpanel):r.filterpanel&&L(t).append(r.filterpanel),this._showwhere=L(t).find(".filter.showwhere"),L(t)),a=s.find("#filterclearbutton"+i.element.id),o=s.find("#filterbutton"+i.element.id),n=s.find(".filter1"),d=s.find(".filter2"),f=s.find(".filter3"),c=s.find(".filtertext1"+i.element.id),h=s.find(".filtertext2"+i.element.id);if(this._hasdatefilter&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype&&(m=c.parent(),x=h.parent(),p="date"==r.filtertype?(c.jqxDateTimeInput("destroy"),h.jqxDateTimeInput("destroy"),m.children().remove(),x.children().remove(),i._showwhere.text(i.gridlocalization.filtershowrowdatestring),p=L("<div class='filtertext1"+i.element.id+"' style=''></div>"),m.append(p),(b=function(e){var t={calendar:i.gridlocalization,todayString:i.gridlocalization.todaystring,clearString:i.gridlocalization.clearstring};e.jqxDateTimeInput({disabled:i.disabled,firstDayOfWeek:i.gridlocalization.firstDay,localization:t,rtl:i.rtl,width:i._filterpanelwidth-10,height:24,value:null,formatString:r.cellsformat,theme:i.theme})})(p),L("<div class='filtertext2"+i.element.id+"' style=''></div>")):(m.children().remove(),x.children().remove(),i._showwhere.text(i.gridlocalization.filtershowrowstring),p=L("<input autocomplete='off' class='filtertext1"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>"),m.append(p),(b=function(e){e.addClass(i.toThemeProperty("jqx-input")),e.addClass(i.toThemeProperty("jqx-filter-input jqx-widget-content")),e.addClass(i.toThemeProperty("jqx-rc-all")),e.width(i._filterpanelwidth-18)})(p),L("<input autocomplete='off' class='filtertext2"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>")),x.append(p),b(p),c=s.find(".filtertext1"+i.element.id),h=s.find(".filtertext2"+i.element.id)),"date"!=r.filtertype?(c.val(""),h.val("")):(c.val(null),h.val(null)),0<o.length&&(o.jqxButton({height:this.filterMenuItemsHeight}),a.jqxButton({height:this.filterMenuItemsHeight}),this.removeHandler(o,"click"),this.addHandler(o,"click",function(){i._buildfilter(i,t,r),i._closemenu()}),this.removeHandler(a,"click"),this.addHandler(a,"click",function(){i._clearfilter(i,t,r),i._closemenu()}),this.removeHandler(o,"keydown"),this.addHandler(o,"keydown",function(e){13===e.keyCode&&(i._buildfilter(i,t,r),i._closemenu())}),this.removeHandler(a,"keydown"),this.addHandler(a,"keydown",function(e){13===e.keyCode&&(i._clearfilter(i,t,r),i._closemenu())})),0<c.length&&(this.removeHandler(c,"keydown"),this.addHandler(c,"keydown",function(e){if(13===e.keyCode)return o.trigger("click"),!1;27===e.keyCode&&i._closemenu()}),this.removeHandler(h,"keydown"),this.addHandler(h,"keydown",function(e){if(13===e.keyCode)return o.trigger("click"),!1;27===e.keyCode&&i._closemenu()})),"default"===this.filtermode&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype){n.jqxDropDownList("source")!=l&&(n.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l}),f.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l})),"boolean"==e||"bool"==e?(n.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),f.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0})):(b=!1,l&&l.length&&l.length<5&&(b=!0),n.jqxDropDownList({autoDropDownHeight:b,selectedIndex:2}),f.jqxDropDownList({autoDropDownHeight:b,selectedIndex:2})),d.jqxDropDownList({selectedIndex:0});var p=r.filter,u=new L.jqx.filter,g="";switch(e){case"number":case"int":case"float":case"decimal":w=u.getoperatorsbyfiltertype(g="numericfilter");break;case"boolean":case"bool":w=u.getoperatorsbyfiltertype(g="booleanfilter");break;case"date":case"time":w=u.getoperatorsbyfiltertype(g="datefilter");break;case"string":w=u.getoperatorsbyfiltertype(g="stringfilter")}if(null!=p){var m=p.getfilterat(0),x=p.getfilterat(1);p.getoperatorat(0);if(i.updatefilterconditions){var w=[],y=i.updatefilterconditions(g,w);if(null!=y){for(var v=0;v<y.length;v++)y[v]=y[v].toUpperCase();p.setoperatorsbyfiltertype(g,y),w=y}}s="default";null!=m&&(l=w.indexOf(m.comparisonoperator),b=m.filtervalue,c.val(b),n.jqxDropDownList({selectedIndex:l,animationType:s})),null!=x&&(m=w.indexOf(x.comparisonoperator),b=x.filtervalue,h.val(b),f.jqxDropDownList({selectedIndex:m,animationType:s})),null==p.getoperatorat(0)?d.jqxDropDownList({selectedIndex:0,animationType:s}):"and"==p.getoperatorat(0)||0==p.getoperatorat(0)?d.jqxDropDownList({selectedIndex:0}):d.jqxDropDownList({selectedIndex:1})}i.updatefilterpanel&&i.updatefilterpanel(n,f,d,c,h,o,a,p,g,w),this._hasdatefilter&&(!this._hasdatefilter||"date"==r.filtertype)||this.touchdevice||setTimeout(function(){c.focus()},10)}else if("excel"===this.filtermode||"list"===r.filtertype||"checkedlist"===r.filtertype){l=i._getfilterdataadapter(r),g=i._getfiltertype(e),x="excel"===this.filtermode||"checkedlist"===r.filtertype;if(n.jqxListBox("focus"),this.removeHandler(n,"keyup"),this.addHandler(n,"keyup",function(e){13===e.keyCode&&o.trigger("click"),27===e.keyCode&&i._closemenu()}),r.cellsformat?n.jqxListBox({checkboxes:x,displayMember:r.displayfield,valueMember:r.displayfield+"JQValue",source:l}):n.jqxListBox({checkboxes:x,displayMember:r.displayfield,valueMember:r.displayfield,source:l}),x){var b=n.jqxListBox("getItem",0);b&&b.label===i.gridlocalization.filterselectallstring||n.jqxListBox("insertAt",{label:i.gridlocalization.filterselectallstring},0);(j=n.data().jqxListBox.instance).checkAll(!1);if(r.filter){j.uncheckAll(!1);for(var D=r.filter.getfilters(),q=0;q<j.items.length;q++){var _=j.items[q].value;L.each(D,function(){return"NOT_EQUAL"==this.condition?_!=this.value||null!=_&&null!=this.value&&_.toString()!=this.value.toString()?(j.uncheckIndex(q,!1,!1),!1):void 0:"EQUAL"==this.condition&&(_==this.value||null!=_&&null!=this.value&&_.toString()==this.value.toString())?(j.checkIndex(q,!1,!1),!1):void 0})}j._updateCheckedItems();m=j.getCheckedItems().length;j.items.length!=m&&0<m&&j.host.jqxListBox("indeterminateIndex",0,!0,!1),m===j.items.length-1&&j.host.jqxListBox("checkIndex",0,!0,!1)}}else if(r.filter){(j=n.data().jqxListBox.instance).clearSelection();for(var j,D=r.filter.getfilters(),q=0;q<j.items.length;q++){_=j.items[q].value;L.each(D,function(){if("NOT_EQUAL"==this.condition){if(_!=this.value)return j.unselectIndex(q,!1,!1),!1}else if("EQUAL"==this.condition&&_==this.value)return j.selectIndex(q,!0,!1),!1})}j._renderItems()}}},_initfilterpanel:function(r,e,t,i,l){null==r&&(r=this),e[0].innerHTML="";var s=L("<div class='filter' style='position: absolute; bottom: 3px; margin-left: 3px;'></div>"),e=(e.append(s),L("<div class='filter showwhere' style='height: 18px; margin-top: 3px; margin-bottom: 3px;'></div>")),a=(e.text(r.gridlocalization.filtershowrowstring),this._showwhere=e,l?"ex":""),o=L("<div class='filter filter1' id='filter1"+r.element.id+a+"'></div>"),n=L("<div class='filter filter2' id='filter2"+r.element.id+a+"' style='margin-top: 3px; margin-bottom: 3px;'></div>"),a=L("<div class='filter filter3' id='filter3"+r.element.id+a+"'></div>"),t=r._getcolumntypebydatafield(t);if(!o.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");t=r._getfiltersbytype(t);if(this._hasdatefilter=!1,this._filterpanelwidth=i,this.columns&&this.columns.records){for(var d=0;d<this.columns.records.length;d++)if("date"==this.columns.records[d].filtertype){this._hasdatefilter=!0;break}}else if(this.columns&&!this.columns.records)for(d=0;d<this.columns.length;d++)if("date"==this.columns[d].filtertype){this._hasdatefilter=!0;break}this._hasdatefilter=!0;function f(e){var t;return e?(-1!=e.text().indexOf("case sensitive")&&(t=(t=e.text()).replace("case sensitive","match case"),e.text(t)),e.css("font-family",r.host.css("font-family")),e.css("font-size",r.host.css("font-size")),e.css("top","2px"),e.css("position","relative"),e):""}var c,h=L("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext1"+r.element.id+"' style='padding: 3px; height: 16px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),p=h.find("input"),u=(p.addClass(this.toThemeProperty("jqx-input")),p.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),p.addClass(this.toThemeProperty("jqx-rc-all")),p.width(i-18),L("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext2"+r.element.id+"' style='padding: 3px; height: 16px; margin-top: 3px;' type='text'></input></div>")),g=u.find("input"),p=(g.addClass(this.toThemeProperty("jqx-input")),g.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),g.addClass(this.toThemeProperty("jqx-rc-all")),g.width(i-18),r.rtl&&(p.css("direction","rtl"),g.css("direction","rtl")),L("<div class='filter' style='height: 35px; text-align:center; margin-top: 15px; margin-left:-2px;'></div>")),g=L('<span tabIndex=0 id="filterbutton'+r.element.id+'" class="primary filterbutton" style="padding: 6px 15px;">'+r.gridlocalization.filterstring+"</span>"),m=(p.append(g),L('<span tabIndex=0 id="filterclearbutton'+r.element.id+'" class="filterclearbutton secondary" style="position: relative; left: 2px; padding: 6px 15px; margin-left: 7px;">'+r.gridlocalization.filterclearstring+"</span>"));p.append(m),g.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme}),m.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme});"default"!==this.filtermode||l?"excel"!==this.filtermode&&!l||(s.append(e),s.append(o),o.attr("tabindex",0),o.jqxListBox({rtl:r.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:i-10,height:160,theme:r.theme}),c=!0,r.addHandler(o,"checkChange",function(e){var t,i;c=c&&(e.args.label!=r.gridlocalization.filterselectallstring?(c=!1,o.jqxListBox("checkIndex",0,!0,!1),t=o.jqxListBox("getCheckedItems"),i=o.jqxListBox("getItems"),1==t.length?o.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&o.jqxListBox("indeterminateIndex",0,!0,!1)):(c=!1,e.args.checked?o.jqxListBox("checkAll",!1):o.jqxListBox("uncheckAll",!1)),!0)})):(s.append(e),s.append(o),o.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:this.filterMenuItemsHeight,dropDownHeight:200,dropDownWidth:i-10,selectionRenderer:f,source:t,theme:r.theme}),s.append(h),(l=new Array)[0]=r.gridlocalization.filterandconditionstring,l[1]=r.gridlocalization.filterorconditionstring,n.jqxDropDownList({_checkForHiddenParent:!1,rtl:r.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:this.filterMenuItemsHeight,source:l,selectionRenderer:f,theme:r.theme}),s.append(n),a.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:this.filterMenuItemsHeight,dropDownHeight:200,dropDownWidth:i-10,selectionRenderer:f,source:t,theme:r.theme}),s.append(a),s.append(u)),s.append(p),r.updatefilterpanel&&r.updatefilterpanel(o,a,n,h,u,g,m,null,null,t)}})}(jqxBaseFramework);