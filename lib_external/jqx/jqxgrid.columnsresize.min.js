!function(S){S.extend(S.jqx._jqxGrid.prototype,{autoresizecolumns:function(e,t){"cells"!=e&&"all"!=e&&"column"!=e&&(e="all");var i,l=this.that,s=this.getrows(),o=(this.pageable&&(s=this.dataview.rows,this.groupable&&(s=this.dataview.records)),t=null==t?0:parseInt(t),s.length),r=(null==o&&null!=s&&(i=new Array,S.each(s,function(e){i.push(this)}),o=(s=i).length),S("<span></span>")),n=(r.addClass(this.toThemeProperty("jqx-widget")),r.addClass(this.toThemeProperty("jqx-grid-cell")),S(document.body).append(r),[]),a=[],d=[],u=[],c=l.host.width(),h=0;"hidden"!=l.vScrollBar[0].style.visibility&&(c-=this.scrollbarsize+5),c<0&&(c=0);for(var m=0;m<o;m++)for(var p,w,f,g,z,b=s[m],_=0;_<this.columns.records.length;_++)(q=this.columns.records[_]).hidden||0<this.groups.length&&_<=this.groups.length-1||(null==a[q.displayfield]&&(a[q.displayfield]=0),null==d[q.displayfield]&&(d[q.displayfield]=""),w=b[q.displayfield],""!=q.cellsformat?S.jqx.dataFormat&&(S.jqx.dataFormat.isDate(w)?w=S.jqx.dataFormat.formatdate(w,q.cellsformat,this.gridlocalization):S.jqx.dataFormat.isNumber(w)&&(w=S.jqx.dataFormat.formatnumber(w,q.cellsformat,this.gridlocalization))):q.cellsrenderer&&(p=l._defaultcellsrenderer(w,q),null!=(p=q.cellsrenderer(m,q.datafield,w,p,q.getcolumnproperties(),b))&&(w=S(p).text())),null!=e&&"cells"!=e&&"all"!=e||null!=w&&(n=w.toString().length,f=w.toString().replace(/[^A-Z]/g,"").length,n>a[q.displayfield]&&(a[q.displayfield]=n,d[q.displayfield]=w,u[q.displayfield]=f),0<n&&f<=n&&((z=20*u[q.displayfield]+15*(a[q.displayfield]-u[q.displayfield]))<(g=20*f+15*(n-f))&&0<g&&0<z&&(a[q.displayfield]=n,d[q.displayfield]=w,u[q.displayfield]=f))),"column"!=e&&"all"!=e||(null!==q.text&&void 0!==q.text||(q.text=""),q.text.toString().length>a[q.displayfield]&&(d[q.displayfield]=q.text,a[q.displayfield]=q.text.length,f=q.text.toString().replace(/[^A-Z]/g,"").length,u[q.displayfield]=f),n=(w=q.text).toString().length,f=w.toString().replace(/[^A-Z]/g,"").length,0<n&&f<=n&&((z=20*u[q.displayfield]+15*(a[q.displayfield]-u[q.displayfield]))<(g=20*f+15*(n-f))&&0<g&&0<z&&(a[q.displayfield]=n,d[q.displayfield]=w,u[q.displayfield]=f))));if(this.columns.records){for(var v,y,x=0,_=0;_<this.columns.records.length;_++)(q=this.columns.records[_]).displayfield&&(null==d[q.displayfield]&&(d[q.displayfield]=q.text),0<=r[0].className.indexOf("jqx-grid-column-header")&&r.removeClass(this.toThemeProperty("jqx-grid-column-header")),d[q.displayfield]==q.text&&r.addClass(this.toThemeProperty("jqx-grid-column-header")),r[0].innerHTML=this.escape_HTML(d[q.displayfield].toString()),v=r.outerWidth()+10,0<r.children().length&&(v=r.children().outerWidth()+10),S.jqx.browser.msie&&S.jqx.browser.version<8&&(v+=10),this.filterable&&this.showfilterrow&&(v+=5),(v=v+t+20)>q.maxwidth&&(v=q.maxwidth),null!=q._width&&(q.__width=q._width),q._width=null,("auto"==q.maxwidth||v<=q.maxwidth)&&(y=q.width,v<q.minwidth&&(v=q.minwidth),q.width=v,null!=q._percentagewidth&&(q._percentagewidth=null),this._raiseEvent(14,{columntext:q.text,column:q.getcolumnproperties(),datafield:q.datafield,displayfield:q.displayfield,oldwidth:y,newwidth:v})),h+=q.width,x++);if(h<c)for(var j=Math.round((c-h-2)/x),_=0;_<this.columns.records.length;_++)(q=this.columns.records[_]).displayfield&&(q._width=null,q.width+=j);r.remove(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo);for(var q,_=0;_<this.columns.records.length;_++)null!=(q=this.columns.records[_]).__width&&(q._width=q.__width)}},autoresizecolumn:function(e,t,i){if("cells"!=t&&"all"!=t&&"column"!=t&&(t="all"),null==e)return!1;var l=this.getrows(),s=(this.pageable&&(l=this.dataview.rows,this.groupable&&(l=this.dataview.records)),this.getcolumn(e));if(null==s)return!1;i=null==i?0:parseInt(i);var o=l.length,r=S("<span></span>"),n=(r.addClass(this.toThemeProperty("jqx-widget")),r.addClass(this.toThemeProperty("jqx-grid-cell")),S(document.body).append(r),0),a="",d=0,u=this.that,c=u.host.width();if("hidden"!=u.vScrollBar[0].style.visibility&&(c-=this.scrollbarsize+5),c<0&&(c=0),null==t||"cells"==t||"all"==t)for(var h=0;h<o;h++){var m,p,w,f,g,z=l[h][s.displayfield];""!=s.cellsformat?S.jqx.dataFormat&&(S.jqx.dataFormat.isDate(z)?z=S.jqx.dataFormat.formatdate(z,s.cellsformat,this.gridlocalization):S.jqx.dataFormat.isNumber(z)&&(z=S.jqx.dataFormat.formatnumber(z,s.cellsformat,this.gridlocalization))):s.cellsrenderer&&null!=(m=s.cellsrenderer(h,s,z))&&(z=S(m).text()),null!=z&&(p=z.toString().length,w=z.toString().replace(/[^A-Z]/g,"").length,n<p&&(n=p,a=z,d=w),0<p&&w<=p&&(g=20*d+15*(n-d))<(f=20*w+15*(p-w))&&0<f&&0<g&&(n=p,a=z,d=w))}"column"!=t&&"all"!=t||(s.text.toString().length>n&&(a=s.text),p=(z=s.text.toString()).toString().length,w=z.toString().replace(/[^A-Z]/g,"").length,0<p&&w<=p&&(g=20*d+15*(n-d))<(f=20*w+15*(p-w))&&0<f&&0<g&&(n=p,a=z,d=w)),null==a&&(a=s.text),r[0].innerHTML=this.escape_HTML(a),a==s.text&&r.addClass(this.toThemeProperty("jqx-grid-column-header"));u=r.outerWidth()+10;S.jqx.browser.msie&&S.jqx.browser.version<8&&(u+=5),this.filterable&&this.showfilterrow&&(u+=5),u+=i,r.remove(),u>s.maxwidth&&(u=s.maxwidth),("auto"==s.maxwidth||u<=s.maxwidth)&&(c=s.width,u<s.minwidth&&(u=s.minwidth),s.width=u,null!=s._width&&(s.__width=s._width),(s._width=null)!=s._percentagewidth&&(s._percentagewidth=null),this._updatecolumnwidths(),this._updatecellwidths(),this._raiseEvent(14,{columntext:s.text,column:s.getcolumnproperties(),datafield:e,displayfield:s.displayfield,oldwidth:c,newwidth:u}),this._renderrows(this.virtualsizeinfo),null!=s._width&&(s._width=s.__width))},_handlecolumnsresize:function(){var n=this.that;if(this.columnsresize){var e,t,a=!1,i=(n.isTouchDevice()&&!0!==n.touchmode&&(a=!0),"mousemove.resize"+this.element.id),l="mousedown.resize"+this.element.id,s="mouseup.resize"+this.element.id,o=(a&&(i=S.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,l=S.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,s=S.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id),this.removeHandler(S(document),i),this.addHandler(S(document),i,function(e){if(null!=S.data(document.body,"contextmenu"+n.element.id)&&n.autoshowcolumnsmenubutton)return!0;if(null!=n.resizablecolumn&&!n.disabled&&n.resizing&&null!=n.resizeline){n.resizablecolumn.columnelement;var t=n.host.coord(),i=parseInt(n.resizestartline.coord().left),l=i-n._startcolumnwidth,s="auto"==(s=n.resizablecolumn.column.minwidth)?0:parseInt(s),o="auto"==(o=n.resizablecolumn.column.maxwidth)?0:parseInt(o),r=e.pageX,s=(a&&(r=n.getTouches(e)[0].pageX),l+=s,0<o?i+o:0),i=0==o||n._startcolumnwidth+r-i<o;if(i=n.rtl?!0:i)if(n.rtl){if(r>=t.left&&r<=t.left+n.host.width()&&(n.resizeline.css("left",r),a))return!1}else if(r>=t.left&&l<=r&&((0!=s&&e.pageX<s||0==s)&&n.resizeline.css("left",r),a))return!1}return!(!a&&null!=n.resizablecolumn)&&void 0}),this.removeHandler(S(document),l),this.addHandler(S(document),l,function(e){if(null!=S.data(document.body,"contextmenu"+n.element.id)&&n.autoshowcolumnsmenubutton)return!0;if(null!=n.resizablecolumn&&!n.disabled){var t=n.resizablecolumn.columnelement;if(t.coord().top+t.height()+5<e.pageY)n.resizablecolumn=null;else if(t.coord().top-5>e.pageY)n.resizablecolumn=null;else{if(n._startcolumnwidth=n.resizablecolumn.column.width,n.resizablecolumn.column._width=null,S(document.body).addClass("jqx-disableselect"),S(document.body).addClass("jqx-position-reset"),n.host.addClass("jqx-disableselect"),n.content.addClass("jqx-disableselect"),n._mouseDownResize=new Date,n.resizing=!0,n._lastmouseDownResize&&n.columnsautoresize&&n._lastmouseDownResize-n._mouseDownResize<300&&-500<n._lastmouseDownResize-n._mouseDownResize){var i,t=n.resizablecolumn.column;if(t.resizable)return n.resizablecolumn.column.width,i=n.hScrollBar[0].style.visibility,n._resizecolumn=null,n.resizeline.hide(),n.resizestartline.hide(),n.resizebackground.remove(),n.resizablecolumn=null,n.columndragstarted=!1,n.dragmousedown=null,n.__drag=!1,n.autoresizecolumn(t.displayfield,"all"),i!=n.hScrollBar[0].style.visibility&&n.hScrollInstance.setPosition(0),n.rtl&&n._arrange(),n.autosavestate&&n.savestate&&n.savestate(),e.stopPropagation(),n.suspendClick=!0,setTimeout(function(){n.suspendClick=!1},100),!1}n._lastmouseDownResize=new Date,n._resizecolumn=n.resizablecolumn.column,n.resizeline=n.resizeline||S('<div style="position: absolute;"></div>'),n.resizestartline=n.resizestartline||S('<div style="position: absolute;"></div>'),n.resizebackground=n.resizebackground||S('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),n.resizebackground.css("opacity",.01),n.resizebackground.css("cursor","col-resize"),n.resizeline.css("cursor","col-resize"),n.resizestartline.css("cursor","col-resize"),n.resizeline.addClass(n.toThemeProperty("jqx-grid-column-resizeline")),n.resizestartline.addClass(n.toThemeProperty("jqx-grid-column-resizestartline")),S(document.body).append(n.resizeline),S(document.body).append(n.resizestartline),S(document.body).append(n.resizebackground);function l(e){n.rtl?e.css("left",parseInt(s.left)):e.css("left",parseInt(s.left)+n._startcolumnwidth);var t=n._groupsheader()?n.groupsheader.height():0,i=(t=t+(n.showtoolbar?n.toolbarheight:0)+(n.showstatusbar?n.statusbarheight:0),0),l=(n.pageable&&(i=n.pagerheight),"visible"==n.hScrollBar.css("visibility")?17:0);e.css("top",parseInt(s.top)),e.css("z-index",99999),n.columngroups?e.height(n.host.height()+n.resizablecolumn.columnelement.height()-i-t-l-n.columngroupslevel*n.columnsheight):e.height(n.host.height()-i-t-l),n.enableanimations?e.show("fast"):e.show()}var s=n.resizablecolumn.columnelement.coord();n.resizebackground.css("left",n.host.coord().left),n.resizebackground.css("top",n.host.coord().top),n.resizebackground.width(n.host.width()),n.resizebackground.height(n.host.height()),n.resizebackground.css("z-index",9999);l(n.resizeline),l(n.resizestartline),n.dragmousedown=null}}}),function(){if(S(document.body).removeClass("jqx-disableselect"),S(document.body).removeClass("jqx-position-reset"),(n.showfilterrow||n.showstatusbar||n.showtoolbar||n.enablebrowserselection)&&(n.host.removeClass("jqx-disableselect"),n.content.removeClass("jqx-disableselect")),n.resizing){if(n._mouseUpResize=new Date,n._mouseUpResize-n._mouseDownResize<200)return n.resizing=!1,void(null!=n._resizecolumn&&null!=n.resizeline&&"block"==n.resizeline.css("display")&&(n._resizecolumn=null,n.resizeline.hide(),n.resizestartline.hide(),n.resizebackground.remove()));if(n.resizing=!1,!n.disabled){var e=n.host.width();if("hidden"!=n.vScrollBar[0].style.visibility&&(e-=20),e<0&&(e=0),null!=n._resizecolumn&&null!=n.resizeline&&"block"==n.resizeline.css("display")){var t=parseInt(n.resizeline.css("left")),i=parseInt(n.resizestartline.css("left")),l=n._startcolumnwidth+t-i,t=(n.rtl&&(l=n._startcolumnwidth-t+i),n._resizecolumn.width);n._closemenu(),l<n._resizecolumn.minwidth&&(l=n._resizecolumn.minwidth),n._resizecolumn.width=l,null!=n._resizecolumn._percentagewidth&&(n._resizecolumn._percentagewidth=l/e*100);for(var s=0;s<n._columns.length;s++)if(n._columns[s].datafield===n._resizecolumn.datafield){n._columns[s].width=n._resizecolumn.width,n._columns[s].width<n._resizecolumn.minwidth&&(n._columns[s].width=n._resizecolumn.minwidth);break}i=n.hScrollBar[0].style.visibility;n._updatecolumnwidths(),n._updatecellwidths(),n._raiseEvent(14,{columntext:n._resizecolumn.text,column:n._resizecolumn.getcolumnproperties(),datafield:n._resizecolumn.datafield,oldwidth:t,newwidth:l}),n._renderrows(n.virtualsizeinfo),n.autosavestate&&n.savestate&&n.savestate(),i!=n.hScrollBar[0].style.visibility&&n.hScrollInstance.setPosition(0),n.rtl&&n._arrange(),n._resizecolumn=null,n.resizeline.hide(),n.resizestartline.hide(),n.resizebackground.remove(),n.resizablecolumn=null}else n.resizablecolumn=null}}});try{""==document.referrer&&!window.frameElement||(e=(e=null)!=window.top&&window.top!=window.self&&window.parent&&document.referrer?document.referrer:e)&&-1!=e.indexOf(document.location.host)&&(t=function(e){o()},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",t,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",t))}catch(e){}this.removeHandler(S(document),s),this.addHandler(S(document),s,function(e){if(null!=S.data(document.body,"contextmenu"+n.element.id)&&n.autoshowcolumnsmenubutton)return!0;o()})}}})}(jqxBaseFramework);