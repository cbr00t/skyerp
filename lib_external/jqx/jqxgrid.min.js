!function(re){function h(s,e){return this.owner=s,this.datafield=null,this.displayfield=null,this.text="",this.createfilterpanel=null,this.sortable=!0,this.hideable=!0,this.editable=!0,this.hidden=!1,this.adaptivehidden=!1,this.groupable=!0,this.renderer=null,this.cellsrenderer=null,this.checkchange=null,this.threestatecheckbox=!1,this.buttonclick=null,this.columntype=null,this.cellsformat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.filteritems=[],this.resizable=!0,this.initeditor=null,this.createeditor=null,this.createwidget=null,this.initwidget=null,this.destroywidget=null,this.destroyeditor=null,this.geteditorvalue=null,this.validation=null,this.classname="",this.cellclassname="",this.cellendedit=null,this.cellbeginedit=null,this.cellvaluechanging=null,this.aggregates=null,this.aggregatesrenderer=null,this.menu=!0,this.createfilterwidget=null,this.filtertype="default",this.filtercondition=null,this.rendered=null,this.exportable=!0,this.exporting=!1,this.draggable=!0,this.nullable=!0,this.clipboard=!0,this.selectable=!1,this.autofill=!0,this._applyStyle=function(){var e=this;return e.hovered?(e.style.headerBackgroundHoveredColor&&(e.element.style.backgroundColor=e.style.headerBackgroundHoveredColor),void(e.style.headerHoveredColor&&(e.element.style.color=e.style.headerHoveredColor))):e.selected?(e.style.headerBackgroundSelectedColor&&(e.element.style.backgroundColor=e.style.headerBackgroundSelectedColor),void(e.style.headerSelectedColor&&(e.element.style.color=e.style.headerSelectedColor))):(e.style.headerBackgroundColor?e.element.style.backgroundColor=e.style.headerBackgroundColor:e.element.style.backgroundColor="",void(e.style.headerColor?e.element.style.color=e.style.headerColor:e.element.style.color=""))},this._applyCellStyle=function(e){var t=this,i=!1;if(e.length)for(var s=0;s<e.length;s++)this._applyCellStyle(e[s]);else if(i=t.style.backgroundColor||t.style.color||t.style.hoveredColor||t.style.hoveredColor||t.style.backgroundSelectedColor||t.style.selectedColor?!0:i)return 0<=e.className.indexOf("hover")?(t.style.backgroundHoveredColor&&(e.style.backgroundColor=t.style.backgroundHoveredColor),void(t.style.hoveredColor&&(e.style.color=t.style.hoveredColor))):0<=e.className.indexOf("selected")?(t.style.backgroundSelectedColor&&(e.style.backgroundColor=t.style.backgroundSelectedColor),void(t.style.selectedColor&&(e.style.color=t.style.selectedColor))):(t.style.backgroundColor&&(e.style.backgroundColor=t.style.backgroundColor),t.style.color&&(e.style.color=t.style.color),t.style.fontFamily&&(e.style.fontFamily=t.style.fontFamily),void(t.style.fontWeight&&(e.style.fontWeight=t.style.fontWeight)))},this.style={headerBackgroundColor:"",headerColor:"",headerBackgroundHoveredColor:"",headerHoveredColor:"",headerBackgroundSelectedColor:"",headerSelectedColor:"",backgroundColor:"",color:"",backgroundHoveredColor:"",hoveredColor:"",backgroundSelectedColor:"",selectedColor:"",fontFamily:"",fontWeight:""},this.enabletooltips=!0,this.columngroup=null,this.filterdelay=800,this.reseteverpresentrowwidgetvalue=null,this.geteverpresentrowwidgetvalue=null,this.createeverpresentrowwidget=null,this.initeverpresentrowwidget=null,this.validateeverpresentrowwidgetvalue=null,this.destroyeverpresentrowwidget=null,this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){var i;this[e]?(i=this[e],this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)):this[e.toLowerCase()]&&(i=this[e.toLowerCase()],this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i))},this._initfields=function(e){if(null!=e){var t=this.that;if(re.jqx.hasProperty(e,"dataField")&&(this.datafield=re.jqx.get(e,"dataField")),re.jqx.hasProperty(e,"selectable")&&(this.selectable=re.jqx.get(e,"selectable")),re.jqx.hasProperty(e,"displayField")?this.displayfield=re.jqx.get(e,"displayField"):this.displayfield=this.datafield,re.jqx.hasProperty(e,"enableTooltips")&&(this.enabletooltips=re.jqx.get(e,"enableTooltips")),re.jqx.hasProperty(e,"text")?this.text=re.jqx.get(e,"text"):this.text=this.displayfield,re.jqx.hasProperty(e,"style")&&(this.style=re.jqx.get(e,"style")),re.jqx.hasProperty(e,"createfilterpanel")&&(this.createfilterpanel=re.jqx.get(e,"createfilterpanel")),re.jqx.hasProperty(e,"sortable")&&(this.sortable=re.jqx.get(e,"sortable")),re.jqx.hasProperty(e,"hideable")&&(this.hideable=re.jqx.get(e,"hideable")),re.jqx.hasProperty(e,"hidden")&&(this.hidden=re.jqx.get(e,"hidden")),re.jqx.hasProperty(e,"adaptivehidden")&&(this.adaptivehidden=re.jqx.get(e,"adaptivehidden")),re.jqx.hasProperty(e,"groupable")&&(this.groupable=re.jqx.get(e,"groupable")),re.jqx.hasProperty(e,"renderer")&&(this.renderer=re.jqx.get(e,"renderer")),re.jqx.hasProperty(e,"align")&&(this.align=re.jqx.get(e,"align")),re.jqx.hasProperty(e,"cellsAlign")&&(this.cellsalign=re.jqx.get(e,"cellsAlign")),re.jqx.hasProperty(e,"clipboard")&&(this.clipboard=re.jqx.get(e,"clipboard")),re.jqx.hasProperty(e,"cellsFormat")&&(this.cellsformat=re.jqx.get(e,"cellsFormat")),re.jqx.hasProperty(e,"width")&&(this.width=re.jqx.get(e,"width")),re.jqx.hasProperty(e,"autofill")&&(this.autofill=re.jqx.get(e,"autofill")),re.jqx.hasProperty(e,"minWidth")&&(this.minwidth=parseInt(re.jqx.get(e,"minWidth")),isNaN(this.minwidth)&&(this.minwidth=25)),re.jqx.hasProperty(e,"maxWidth")&&(this.maxwidth=parseInt(re.jqx.get(e,"maxWidth")),isNaN(this.maxwidth)&&(this.maxwidth="auto")),re.jqx.hasProperty(e,"cellsRenderer")?this.cellsrenderer=re.jqx.get(e,"cellsRenderer"):e.cellsRenderer&&(this.cellsrenderer=e.cellsRenderer),re.jqx.hasProperty(e,"columnType")&&(this.columntype=re.jqx.get(e,"columnType")),re.jqx.hasProperty(e,"checkChange")&&(this.checkchange=re.jqx.get(e,"checkChange")),re.jqx.hasProperty(e,"buttonClick")?this.buttonclick=re.jqx.get(e,"buttonClick"):e.buttonClick&&(this.buttonclick=e.buttonClick),re.jqx.hasProperty(e,"pinned")&&(this.pinned=re.jqx.get(e,"pinned")),re.jqx.hasProperty(e,"visibleIndex")&&(this.visibleindex=re.jqx.get(e,"visibleIndex")),re.jqx.hasProperty(e,"filterable")&&(this.filterable=re.jqx.get(e,"filterable")),re.jqx.hasProperty(e,"filter")&&(this.filter=re.jqx.get(e,"filter")),re.jqx.hasProperty(e,"resizable")&&(this.resizable=re.jqx.get(e,"resizable")),re.jqx.hasProperty(e,"editable")&&(this.editable=re.jqx.get(e,"editable")),re.jqx.hasProperty(e,"initEditor")?this.initeditor=re.jqx.get(e,"initEditor"):e.initEditor&&(this.initeditor=e.initEditor),re.jqx.hasProperty(e,"createEditor")?this.createeditor=re.jqx.get(e,"createEditor"):e.createEditor&&(this.createeditor=e.createEditor),re.jqx.hasProperty(e,"initWidget")?this.initwidget=re.jqx.get(e,"initWidget"):e.initWidget&&(this.initwidget=e.initWidget),re.jqx.hasProperty(e,"createWidget")?this.createwidget=re.jqx.get(e,"createWidget"):e.createWidget&&(this.createwidget=e.createWidget),re.jqx.hasProperty(e,"destroyWidget")?this.destroywidget=re.jqx.get(e,"destroyWidget"):e.destroyWidget&&(this.destroywidget=e.destroyWidget),re.jqx.hasProperty(e,"reseteverpresentrowwidgetvalue")||re.jqx.hasFunction(e,"reseteverpresentrowwidgetvalue")?this.reseteverpresentrowwidgetvalue=re.jqx.get(e,"reseteverpresentrowwidgetvalue"):e.resetEverPresentRowWidgetValue&&(this.reseteverpresentrowwidgetvalue=e.resetEverPresentRowWidgetValue),re.jqx.hasProperty(e,"geteverpresentrowwidgetvalue")||re.jqx.hasFunction(e,"geteverpresentrowwidgetvalue")?this.geteverpresentrowwidgetvalue=re.jqx.get(e,"geteverpresentrowwidgetvalue"):e.getEverPresentRowWidgetValue&&(this.geteverpresentrowwidgetvalue=e.getEverPresentRowWidgetValue),re.jqx.hasProperty(e,"createeverpresentrowwidget")||re.jqx.hasFunction(e,"createeverpresentrowwidget")?this.createeverpresentrowwidget=re.jqx.get(e,"createeverpresentrowwidget"):e.createEverPresentRowWidget&&(this.createeverpresentrowwidget=e.createEverPresentRowWidget),re.jqx.hasProperty(e,"initeverpresentrowwidget")||re.jqx.hasFunction(e,"initeverpresentrowwidget")?this.initeverpresentrowwidget=re.jqx.get(e,"initeverpresentrowwidget"):e.initEverPresentRowWidget&&(this.initeverpresentrowwidget=e.initEverPresentRowWidget),re.jqx.hasProperty(e,"validateeverpresentrowwidgetvalue")?this.validateeverpresentrowwidgetvalue=re.jqx.get(e,"validateeverpresentrowwidgetvalue"):e.validateEverPresentRowWidgetValue&&(this.validateeverpresentrowwidgetvalue=e.validateEverPresentRowWidgetValue),re.jqx.hasProperty(e,"destroyeverpresentrowwidget")||re.jqx.hasFunction(e,"destroyeverpresentrowwidget")?this.destroyeverpresentrowwidget=re.jqx.get(e,"destroyeverpresentrowwidget"):e.destroyEverPresentRowWidget&&(this.destroyEverPresentRowWidget=e.destroyEverPresentRowWidget),re.jqx.hasProperty(e,"destroyEditor")?this.destroyeditor=re.jqx.get(e,"destroyEditor"):e.destroyEditor&&(this.destroyeditor=e.destroyEditor),re.jqx.hasProperty(e,"getEditorValue")?this.geteditorvalue=re.jqx.get(e,"getEditorValue"):e.getEditorValue&&(this.geteditorvalue=e.getEditorValue),re.jqx.hasProperty(e,"validation")?this.validation=re.jqx.get(e,"validation"):e.validation&&(this.validation=e.validation),re.jqx.hasProperty(e,"cellBeginEdit")?this.cellbeginedit=re.jqx.get(e,"cellBeginEdit"):e.cellBeginEdit&&(this.cellbeginedit=e.cellBeginEdit),re.jqx.hasProperty(e,"cellEndEdit")?this.cellendedit=re.jqx.get(e,"cellEndEdit"):e.cellEndEdit&&(this.cellendedit=e.cellEndEdit),re.jqx.hasProperty(e,"className")&&(this.classname=re.jqx.get(e,"className")),re.jqx.hasProperty(e,"cellClassName")?this.cellclassname=re.jqx.get(e,"cellClassName"):e.cellClassName&&(this.cellclassname=e.cellClassName),re.jqx.hasProperty(e,"menu")&&(this.menu=re.jqx.get(e,"menu")),re.jqx.hasProperty(e,"aggregates")&&(this.aggregates=re.jqx.get(e,"aggregates")),re.jqx.hasProperty(e,"aggregatesRenderer")&&(this.aggregatesrenderer=re.jqx.get(e,"aggregatesRenderer")),re.jqx.hasProperty(e,"createFilterWidget")&&(this.createfilterwidget=re.jqx.get(e,"createFilterWidget")),re.jqx.hasProperty(e,"filterType")&&(this.filtertype=re.jqx.get(e,"filterType")),re.jqx.hasProperty(e,"filterDelay")&&(this.filterdelay=re.jqx.get(e,"filterDelay")),re.jqx.hasProperty(e,"rendered")&&(this.rendered=re.jqx.get(e,"rendered")),re.jqx.hasProperty(e,"exportable")&&(this.exportable=re.jqx.get(e,"exportable")),re.jqx.hasProperty(e,"filterItems")&&(this.filteritems=re.jqx.get(e,"filterItems")),re.jqx.hasProperty(e,"cellValueChanging")&&(this.cellvaluechanging=re.jqx.get(e,"cellValueChanging")),re.jqx.hasProperty(e,"draggable")&&(this.draggable=re.jqx.get(e,"draggable")),re.jqx.hasProperty(e,"filterCondition")&&(this.filtercondition=re.jqx.get(e,"filterCondition")),re.jqx.hasProperty(e,"threeStateCheckbox")&&(this.threestatecheckbox=re.jqx.get(e,"threeStateCheckbox")),re.jqx.hasProperty(e,"nullable")&&(this.nullable=re.jqx.get(e,"nullable")),re.jqx.hasProperty(e,"columnGroup")&&(this.columngroup=re.jqx.get(e,"columnGroup")),!e instanceof String&&"string"!=typeof e)for(var i in e)if(!t.hasOwnProperty(i)&&!t.hasOwnProperty(i.toLowerCase()))throw s.host.remove(),new Error("jqxGrid: Invalid property name - "+i+".")}},this._initfields(e),this}function g(e,t){return this.setdata=function(e){null!=e&&(this.bounddata=e,this.boundindex=e.boundindex,this.visibleindex=e.visibleindex,this.group=e.group,this.parentbounddata=e.parentItem,this.uniqueid=e.uniqueid,this.level=e.level)},this.setdata(t),this.parentrow=null,this.subrows=new Array,this.owner=e,this.height=25,this.hidden=!1,this.rowdetails=null,this.rowdetailsheight=100,this.rowdetailshidden=!0,this.top=-1,this.setrowinfo=function(e){this.hidden=e.hidden,this.rowdetails=e.rowdetails,this.rowdetailsheight=e.rowdetailsheight,this.rowdetailshidden=!e.showdetails,this.height=e.height},this}re.jqx.jqxWidget("jqxGrid","",{}),re.extend(re.jqx._jqxGrid.prototype,{defineInstance:function(){var e={adaptive:!1,compact:!1,adaptivewidth:600,disabled:!1,width:600,height:400,pagerheight:40,groupsheaderheight:34,pagesize:10,pagesizeoptions:["5","10","20"],rowsheight:32,columnsheight:36,filterrowheight:36,groupindentwidth:30,rowdetails:!1,enablerowdetailsindent:!0,enablemousewheel:!0,initrowdetails:null,layoutrowdetails:null,editable:!1,editmode:"selectedcell",batcheditable:!1,pageable:!1,pagermode:"default",pagerbuttonscount:5,groupable:!1,sortable:!1,sortmode:"one",sortmodekey:"",filterable:!1,filtermode:"default",filterbarmode:"default",autoshowfiltericon:!0,showfiltercolumnbackground:!0,showpinnedcolumnbackground:!0,showsortcolumnbackground:!0,altrows:!1,altstart:1,altstep:1,showrowdetailscolumn:!0,showrowlines:!0,showcolumnlines:!0,showcolumnheaderlines:!0,showtoolbar:!1,showfilterbar:!1,toolbarheight:36,showstatusbar:!1,statusbarheight:36,enableellipsis:!0,groups:[],groupsrenderer:null,groupcolumnrenderer:null,groupsexpandedbydefault:!1,pagerrenderer:null,touchmode:"auto",columns:[],selectedrowindex:-1,selectedrowindexes:new Array,selectedcells:new Array,autobind:!0,selectedcell:null,tableZIndex:79,headerZIndex:29,updatefilterconditions:null,showgroupaggregates:!1,showaggregates:!1,showfilterrow:!1,showeverpresentrow:!1,everpresentrowposition:"top",everpresentrowactions:"add reset",everpresentrowactionsmode:"buttons",everpresentrowheight:30,autorowheight:!1,autokoupdates:!0,handlekeyboardnavigation:null,showsortmenuitems:!0,showfiltermenuitems:!0,showgroupmenuitems:!0,enablebrowserselection:!1,enablekeyboarddelete:!0,clipboard:!0,clipboardbegin:null,clipboardend:null,copytoclipboardwithheaders:!1,copytoclipboardhiddencolumns:!1,ready:null,updatefilterpanel:null,autogeneratecolumns:!1,rowdetailstemplate:null,scrollfeedback:null,rendertoolbar:null,renderstatusbar:null,rendered:null,multipleselectionbegins:null,columngroups:null,cellhover:null,commandcolumn:!1,commandcolumnrenderer:null,source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},filter:null,dataview:null,updatedelay:null,autoheight:!1,autowidth:!1,showheader:!0,showgroupsheader:!0,closeablegroups:!0,scrollbarsize:re.jqx.utilities.scrollBarSize,touchscrollbarsize:re.jqx.utilities.touchScrollBarSize,scrollbarautoshow:re.jqx.utilities.scrollBarAutoShow,virtualmode:!1,sort:null,columnsmenu:!0,columnsresize:!1,columnsautoresize:!0,columnsreorder:!1,columnsmenuwidth:16,autoshowcolumnsmenubutton:!0,showcolumnsactionbutton:!1,popupwidth:"auto",popupheight:"auto",columnmenuopening:null,columnmenuclosing:null,sorttogglestates:2,rendergridrows:null,enableanimations:!0,enablecolumnsvirtualization:!0,enabletooltips:!1,selectionmode:"singlerow",autofill:!1,enableoptimization:!1,enablehover:!0,loadingerrormessage:"The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",verticalscrollbarstep:30,verticalscrollbarlargestep:400,horizontalscrollbarstep:10,horizontalscrollbarlargestep:50,keyboardnavigation:!0,keyboardmenunavigation:!0,touchModeStyle:"auto",autoshowloadelement:!0,showdefaultloadelement:!0,showemptyrow:!0,autosavestate:!1,autoloadstate:!1,cardview:!1,cardviewcolumns:["20%","20%","20%","20%","20%"],cardheight:250,cardsize:3,enableSanitize:!0,enableSanitizeAll:!1,_updating:!1,_pagescache:new Array,_pageviews:new Array,_cellscache:new Array,_rowdetailscache:new Array,_rowdetailselementscache:new Array,_requiresupdate:!1,_hasOpenedMenu:!1,scrollmode:"physical",deferreddatafields:null,localization:null,rtl:!1,menuitemsarray:[],charting:{appendTo:null,colorScheme:"scheme02",dialog:{header:"Data Visualization",height:400,width:400,position:"center",enabled:!0},ready:null,formatSettings:{}},events:["initialized","rowClick","rowSelect","rowUnselect","groupExpand","groupCollapse","sort","columnClick","cellClick","pageChanged","pageSizeChanged","bindingComplete","groupsChanged","filter","columnResized","cellSelect","cellUnselect","cellBeginEdit","cellEndEdit","cellValueChanged","rowExpand","rowCollapse","rowDoubleClick","cellDoubleClick","columnReordered","pageChanging","columnChooserOkClick","columnChooserCancelClick"]};return this===re.jqx._jqxGrid.prototype||re.extend(!0,this,e),e},_applyThemeSettings:function(){var e,t,i,s,r,l=this;l.isMaterialized()&&(e=(r=window.getComputedStyle(l.element)).getPropertyValue("--jqx-grid-row-height"),t=r.getPropertyValue("--jqx-grid-column-height"),i=r.getPropertyValue("--jqx-grid-show-column-lines"),s=r.getPropertyValue("--jqx-grid-filter-menu-items-height"),r=r.getPropertyValue("--jqx-scrollbar-size"),e&&32===this.rowsheight&&!this.cardview&&(l.rowsheight=parseInt(e)),t&&36===this.columnsheight&&(l.columnsheight=parseInt(t)),i&&(l.showcolumnlines=l.showcolumnheaderlines=parseInt(i)),l.filterMenuItemsHeight=s?parseInt(s):23,r&&(l.scrollbarsize=r,re.jqx.utilities.scrollBarSize=r))},createInstance:function(e){var a=this.that=this,e=(a.pagesize=parseInt(a.pagesize),a.toolbarheight=parseInt(a.toolbarheight),a.columnsheight=parseInt(a.columnsheight),a.filterrowheight=parseInt(a.filterrowheight),a.statusbarheight=parseInt(a.statusbarheight),a.groupsheaderheight=parseInt(a.groupsheaderheight),a._undoRedo=[],a._undoRedoIndex=-1,a.cardview&&(a.__rowsheight=a.rowsheight,a.rowsheight=a.cardheight),a._applyThemeSettings(),a.detailsVisibility=new Array,a.savedArgs=e&&0<e.length?e[0]:null,"<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper"+a.element.id+"'><div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='filter' style='visibility: hidden;'></div><div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content"+a.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='verticalScrollBar"+a.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar"+a.element.id+"'></div><div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'></div><div class='jqx-clear jqx-position-absolute' id='addrow'></div><div class='jqx-clear jqx-position-absolute' id='statusbar'></div><div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'></div></div></div>");if(a.element.innerHTML="",a.source){if(!a.source.dataBind){if(!re.jqx.dataAdapter)throw new Error("jqxGrid: Missing reference to jqxdata.js");a.source=new re.jqx.dataAdapter(a.source)}(i=a.source._source.datafields)&&0<i.length&&(a.editmode=a.editmode.toLowerCase(),a.selectionmode=a.selectionmode.toLowerCase())}a.host.attr("role","grid"),a.host.attr("align","left"),a.element.innerHTML=e,a.host.addClass(a.toTP("jqx-grid")),a.host.addClass(a.toTP("jqx-reset")),a.host.addClass(a.toTP("jqx-rc-all")),a.host.addClass(a.toTP("jqx-widget")),a.host.addClass(a.toTP("jqx-widget-content")),a.wrapper=a.host.find("#wrapper"+a.element.id),a.content=a.host.find("#content"+a.element.id),a.content.addClass(a.toTP("jqx-reset")),this.filterbar=this.host.find("#filter"),this.filterbar[0].id="filter"+this.element.id,this.filterbar.addClass(this.toTP("jqx-widget-header")),this.filterbar.addClass(this.toTP("jqx-grid-toolbar"));var t,i,e=a.host.find("#verticalScrollBar"+a.element.id),s=a.host.find("#horizontalScrollBar"+a.element.id);if(a.bottomRight=a.host.find("#bottomRight").addClass(a.toTP("jqx-grid-bottomright jqx-scrollbar-state-normal")),!e.jqxScrollBar)throw new Error("jqxGrid: Missing reference to jqxscrollbar.js");if(a.editors=new Array,a.vScrollBar=e.jqxScrollBar({vertical:!0,rtl:a.rtl,touchMode:a.touchmode,step:a.verticalscrollbarstep,largestep:a.verticalscrollbarlargestep,theme:a.theme,_triggervaluechanged:!1}),a.hScrollBar=s.jqxScrollBar({vertical:!1,rtl:a.rtl,touchMode:a.touchmode,step:a.horizontalscrollbarstep,largestep:a.horizontalscrollbarlargestep,theme:a.theme,_triggervaluechanged:!1}),a.addnewrow=a.host.find("#addrow"),a.addnewrow[0].id="addrow"+a.element.id,a.addnewrow.addClass(a.toTP("jqx-widget-header")),a.pager=a.host.find("#pager"),a.pager[0].id="pager"+a.element.id,a.toolbar=a.host.find("#toolbar"),a.toolbar[0].id="toolbar"+a.element.id,a.toolbar.addClass(a.toTP("jqx-grid-toolbar")),a.toolbar.addClass(a.toTP("jqx-widget-header")),a.statusbar=a.host.find("#statusbar"),a.statusbar[0].id="statusbar"+a.element.id,a.statusbar.addClass(a.toTP("jqx-grid-statusbar")),a.statusbar.addClass(a.toTP("jqx-widget-header")),a.pager.addClass(a.toTP("jqx-grid-pager")),a.pager.addClass(a.toTP("jqx-widget-header")),a.groupsheader=a.host.find("#groupsheader"),a.groupsheader.addClass(a.toTP("jqx-grid-groups-header")),a.groupsheader.addClass(a.toTP("jqx-widget-header")),a.groupsheader[0].id="groupsheader"+a.element.id,a.vScrollBar.css("visibility","hidden"),a.hScrollBar.css("visibility","hidden"),a.vScrollInstance=re.data(a.vScrollBar[0],"jqxScrollBar").instance,a.hScrollInstance=re.data(a.hScrollBar[0],"jqxScrollBar").instance,a.gridtable=null,a.isNestedGrid=!!a.host.parent()&&299==a.host.parent().css("z-index"),a.touchdevice=a.isTouchDevice(),a.localizestrings&&(a.localizestrings(),null!=a.localization&&a.localizestrings(a.localization,!1)),a.rowdetailstemplate&&"function"!=typeof a.rowdetailstemplate&&(null==a.rowdetailstemplate.rowdetails&&(a.rowdetailstemplate.rowdetails="<div></div>"),null==a.rowdetailstemplate.rowdetailsheight&&(a.rowdetailstemplate.rowdetailsheight=200),null==a.rowdetailstemplate.rowdetailshidden&&(a.rowdetailstemplate.rowdetailshidden=!0)),a.showfilterrow&&!a.filterable)throw new Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(a.autorowheight&&!a.autoheight&&!a.pageable)throw new Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');if(a.virtualmode&&null==a.rendergridrows)throw new Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(a.virtualmode&&!a.pageable&&a.groupable)throw new Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(!a._testmodules()){if(a._builddataloadelement(),a._cachedcolumns=a.columns,a.columns&&a.columns.length>a.headerZIndex&&(a.headerZIndex=a.columns.length+100),a.theme&&0<=a.theme.indexOf("material")&&(e=re("<span>Test</span>"),r=re("<span>Test</span>"),e.addClass(a.toTP("jqx-grid-row-cell")),r.addClass(a.toTP("jqx-grid-column-header-cell")),a.host.append(e),a.host.append(r),s=e.outerHeight(),t=r.outerHeight(),s>this.rowsheight&&(a.rowsheight=s,this._cellheight=s),t>this.columnsheight&&(a.columnsheight=t,this._columnHeight=t),e.remove(),r.remove()),a.compact&&(a.element.setAttribute("compact",""),this.rowsheight=25,this.columnsheight=25,this.pagerheight=30,this.groupsheaderheight=25),31!=a.rowsheight&&a._measureElement("cell"),32==a.columnsheight&&!a.columngroups||a._measureElement("column"),a.source)if(i=null==(i=a.source.datafields)&&a.source._source?a.source._source.datafields:i)for(var r,l=0;l<a.columns.length;l++)if((r=a.columns[l])&&r.cellsformat&&2<r.cellsformat.length)for(var o=0;o<i.length;o++)if(i[o].name==r.datafield&&!i[o].format){i[o].format=r.cellsformat;break}a.databind(a.source),a.showtoolbar&&a.toolbar.css("visibility","inherit"),a.showfilterbar&&a.filterbar.css("visibility","inherit"),a.showstatusbar&&a.statusbar.css("visibility","inherit"),a._arrange(),a.pageable&&a._initpager&&a._initpager(),a.tableheight=null;function n(){h.content&&(h.content[0].scrollTop=0,h.content[0].scrollLeft=0),h.gridcontent&&(h.gridcontent[0].scrollLeft=0,h.gridcontent[0].scrollTop=0)}var d,h=a.that;a.addHandler(a.content,"mousedown",function(){n()}),a.addHandler(a.content,"scroll",function(e){return n(),!1}),a.showfilterrow||(a.showstatusbar||a.showtoolbar||a.host.addClass("jqx-disableselect"),a.content.addClass("jqx-disableselect")),a.enablebrowserselection&&(a.content.removeClass("jqx-disableselect"),a.host.removeClass("jqx-disableselect")),a.batcheditable&&(a.toolbar[0].innerHTML='<div style="padding: 3px;"><button style="margin-left: 5px;" class="saveButton">'+this.gridlocalization.okstring+'</button><button style="margin-left: 5px;" class="cancelButton">'+this.gridlocalization.cancelstring+"</button></div>",s=a.toolbar[0].querySelectorAll("button"),re(s[0]).jqxButton({width:80,template:"primary",theme:a.theme}),re(s[1]).jqxButton({width:80,theme:a.theme}),d=function(e){for(var t=a.getrows(),i=0;i<t.length;i++)for(var s=t[i],r=0;r<a.columns.records.length;r++){var l=a.columns.records[r],o=s["_temp"+l.datafield];void 0!==o&&(e&&(s[l.datafield]=o),delete s["_temp"+l.datafield])}a.removesort(),a._rendervisualrows()},re(s[0]).on("click",function(){d(!0)}),re(s[1]).on("click",function(){d(!1)})),a._resizeWindow(),a.disabled&&a.host.addClass(a.toThemeProperty("jqx-fill-state-disabled")),a.hasTransform=re.jqx.utilities.hasTransform(a.host),"logical"==a.scrollmode&&(a.vScrollInstance.thumbStep=a.rowsheight,a.vScrollInstance.step=a.rowsheight),re.jqx.isHidden(a.host)||(a.filterable||a.groupable||a.sortable)&&a._initmenu()}},_resizeWindow:function(){var e,t,o=this.that;(null!=this.width&&-1!=this.width.toString().indexOf("%")||null!=this.height&&-1!=this.height.toString().indexOf("%"))&&(this._updatesizeonwindowresize=!0,re.jqx.utilities.resize(this.host,function(e){var t,i=re(window).width(),s=re(window).height(),r=o.host.width(),l=o.host.height();if(o.pageable&&(t=o.host.find(".jqx-grid-pager-input"),i<350?t.hide():t.show()),o.autoheight&&(o._lastHostWidth=s),o._lastHostWidth!=r||o._lastHostHeight!=l){if(o.touchdevice&&o.editcell&&"orientationchange"!==e)return;o._updatesize(o._lastHostWidth!=r,o._lastHostHeight!=l)}o._lastWidth=i,o._lastHeight=s,o._lastHostWidth=r,o._lastHostHeight=l}),e=o.host.width(),t=o.host.height(),o._lastHostWidth=e,o._lastHostHeight=t)},_builddataloadelement:function(){var e;this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=re('<div style="overflow: hidden; position: absolute;"></div>'),this.showdefaultloadelement?((e=re('<div style="z-index: 99; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"></div><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>")).addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),e.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(e)):this.dataloadelement.addClass(this.toTP("jqx-grid-load")),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this.wrapper.prepend(this.dataloadelement)},_measureElement:function(e){var t=re("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");t.addClass(this.toTP("jqx-widget")),re(document.body).append(t),"cell"==e?this._cellheight=t.height():this._columnheight=t.height(),t.remove()},_measureMenuElement:function(){var e=re("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>"),t=(e.addClass(this.toTP("jqx-widget")),e.addClass(this.toTP("jqx-menu")),e.addClass(this.toTP("jqx-menu-item-top")),e.addClass(this.toTP("jqx-fill-state-normal")),this.isTouchDevice()&&e.addClass(this.toTP("jqx-grid-menu-item-touch")),re(document.body).append(e),e.outerHeight());return"light"!==this.theme&&"dark"!==this.theme||this._isIE10()||36<(t+=10)&&(t=36),e.remove(),t},_measureElementWidth:function(e){var e=re("<span style='visibility: hidden; white-space: nowrap;'>"+e+"</span>"),t=(e.addClass(this.toTP("jqx-widget")),e.addClass(this.toTP("jqx-grid")),e.addClass(this.toTP("jqx-grid-column-header")),e.addClass(this.toTP("jqx-widget-header")),re(document.body).append(e),e.outerWidth()+20);return e.remove(),t},_getBodyOffset:function(){var e=0,t=0;return"0px"!=re("body").css("border-top-width")&&(e=parseInt(re("body").css("border-top-width")),isNaN(e)&&(e=0)),"0px"!=re("body").css("border-left-width")&&(t=parseInt(re("body").css("border-left-width")),isNaN(t)&&(t=0)),{left:t,top:e}},_testmodules:function(){function t(){""!=i.length&&(i+=",")}var i="",s=this.that;if(this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(t(),i+=" jqxmenu.js"),this.host.jqxScrollBar||(t(),i+=" jqxscrollbar.js"),this.host.jqxButton||(t(),i+=" jqxbuttons.js"),re.jqx.dataAdapter||(t(),i+=" jqxdata.js"),this.pageable&&!this.gotopage&&(t(),i+="jqxgrid.pager.js"),this.filterable&&!this.applyfilters&&(t(),i+=" jqxgrid.filter.js"),this.groupable&&!this._initgroupsheader&&(t(),i+=" jqxgrid.grouping.js"),this.columnsresize&&!this.autoresizecolumns&&(t(),i+=" jqxgrid.columnsresize.js"),this.columnsreorder&&!this.setcolumnindex&&(t(),i+=" jqxgrid.columnsreorder.js"),this.sortable&&!this.sortby&&(t(),i+=" jqxgrid.sort.js"),this.editable&&!this.begincelledit&&(t(),i+=" jqxgrid.edit.js"),this.showaggregates&&!this.getcolumnaggregateddata&&(t(),i+=" jqxgrid.aggregates.js"),this.keyboardnavigation&&!this.selectrow&&(t(),i+=" jqxgrid.selection.js"),""!=i||this.editable||this.filterable||this.pageable){function e(e){switch(e){case"checkbox":s.host.jqxCheckBox||r.checkbox||(r.checkbox=!0,t(),i+=" jqxcheckbox.js");break;case"numberinput":s.host.jqxNumberInput||r.numberinput||(r.numberinput=!0,t(),i+=" jqxnumberinput.js");break;case"datetimeinput":s.host.jqxDateTimeInput||r.datetimeinput?s.host.jqxCalendar||r.calendar||(t(),i+=" jqxcalendar.js"):(t(),r.datetimeinput=!0,i+=" jqxdatetimeinput.js(requires: jqxcalendar.js)");break;case"combobox":s.host.jqxComboBox||r.combobox?s.host.jqxListBox||r.listbox||(t(),r.listbox=!0,i+=" jqxlistbox.js"):(t(),r.combobox=!0,i+=" jqxcombobox.js(requires: jqxlistbox.js)");break;case"dropdownlist":s.host.jqxDropDownList||r.dropdownlist?s.host.jqxListBox||r.listbox||(t(),r.listbox=!0,i+=" jqxlistbox.js"):(t(),r.dropdownlist=!0,i+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}}var r=[];(this.filterable||this.pageable)&&e("dropdownlist");for(var l,o=0;o<this.columns.length;o++)null!=this.columns[o]&&(e(this.columns[o].columntype),this.filterable&&this.showfilterrow&&("checkedlist"!=(l=this.columns[o].filtertype)&&"bool"!=l||e("checkbox"),"date"==l&&e("datetimeinput")));if(""!=i)throw new Error("jqxGrid: Missing references to the following module(s): "+i)}return!1},focus:function(){try{this.wrapper[0].focus({preventScroll:!0});var e=this.that;setTimeout(function(){e&&e.wrapper&&e.wrapper[0].focus({preventScroll:!0})},25),this.focused=!0}catch(e){}},hiddenParent:function(){return re.jqx.isHidden(this.host)},resize:function(e,t){this.width=e,this.height=t,this._updatesize(!0,!0)},_updatesize:function(e,t){if(!this._loading){var i,s,r=this.that,l=(r._newmax=null,r.host.width()),o=r.host.height();r._oldWidth||(r._oldWidth=l),r._oldHeight||(r._oldHeight=o),r._resizeTimer&&clearTimeout(r._resizeTimer);if(r.resizingGrid=!0,!re.jqx.isHidden(r.host)){if(r.editcell&&(r.endcelledit(r.editcell.row,r.editcell.column,!0,!0),r._oldselectedcell=null),o==r._oldHeight&&1!=t||(s=r.groupable&&0<r.groups.length,i=r.vScrollBar.css("visibility"),r.autoheight||(r.virtualmode&&(r._pageviews=new Array),s||r.rowdetails||r.pageable?(r._arrange(),r.prerenderrequired=!0,o=Math.round(r.host.height())+2*r.rowsheight,r._gettableheight(),s=Math.round(o/r.rowsheight),h=Math.max(r.dataview.totalrows,r.dataview.totalrecords),r.pageable&&(h=r.pagesize,r.pagesize>Math.max(r.dataview.totalrows,r.dataview.totalrecords)&&r.autoheight?h=Math.max(r.dataview.totalrows,r.dataview.totalrecords):r.autoheight||r.dataview.totalrows<r.pagesize&&(h=Math.max(r.dataview.totalrows,r.dataview.totalrecords))),r.rowsheight,r._getpagesize(),!r.pageable&&r.autoheight&&(s=h),r.virtualsizeinfo&&(r.virtualsizeinfo.visiblerecords=s),r.rendergridcontent(!0,!1),r._renderrows(r.virtualsizeinfo)):(r._arrange(),r.virtualsizeinfo=r._calculatevirtualheight(),o=Math.round(r.host.height())+2*r.rowsheight,parseInt(o)>=parseInt(r._oldHeight)&&(r.prerenderrequired=!0),r._renderrows(r.virtualsizeinfo),r.rtl&&(r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths())),i!=r.vScrollBar.css("visibility")&&(r.vScrollInstance.setPosition(0),r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths()))),l!=r._oldWidth||1==e){var a=!1;if(r.editcell&&r.editcell.editor)switch(r.editcell.columntype){case"dropdownlist":if(a=r.editcell.editor.jqxDropDownList("isOpened")||r.editcell.editor.jqxDropDownList("isanimating")&&!r.editcell.editor.jqxDropDownList("ishiding"))return r.editcell.editor.jqxDropDownList({openDelay:0}),r.editcell.editor.jqxDropDownList("open"),void r.editcell.editor.jqxDropDownList({openDelay:250});break;case"combobox":if(a=r.editcell.editor.jqxComboBox("isOpened")||r.editcell.editor.jqxComboBox("isanimating")&&!r.editcell.editor.jqxComboBox("ishiding"))return r.editcell.editor.jqxComboBox({openDelay:0}),r.editcell.editor.jqxComboBox("open"),void r.editcell.editor.jqxComboBox({openDelay:250});break;case"datetimeinput":if(a)return a=r.editcell.editor.jqxDateTimeInput("isOpened")||r.editcell.editor.jqxDateTimeInput("isanimating")&&!r.editcell.editor.jqxDateTimeInput("ishiding"),r.editcell.editor.jqxDateTimeInput({openDelay:0}),r.editcell.editor.jqxDateTimeInput("open"),void r.editcell.editor.jqxDateTimeInput({openDelay:250})}var n,d,h=r.hScrollBar.css("visibility");r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths(),0==e&&r._oldWidth>l||t&&0!=r.dataview.rows.length||r._renderrows(r.virtualsizeinfo),h!=r.hScrollBar.css("visibility")&&r.hScrollInstance.setPosition(0),r.adaptive&&r.element.offsetWidth<=r.adaptivewidth?(n=0,d=r.element.offsetWidth-2,re.each(r.columns.records,function(e,t){if(n+=this.width,"adaptive"===this.columntype)return!0;d<=n&&(this.adaptivehidden=!0)}),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)):r.adaptive&&(re.each(r.columns.records,function(e,t){if("adaptive"===this.columntype)return!0;this.adaptivehidden=!1,delete this.adaptivewidth}),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo))}r._oldWidth=l,r._oldHeight=o,r.resizingGrid=!1}}},getTouches:function(e){return re.jqx.mobile.getTouches(e)},_updateTouchScrolling:function(){var e,t,i,s=this.that;s.isTouchDevice()&&(s.scrollmode="logical",s.vScrollInstance.thumbStep=s.rowsheight,e=re.jqx.mobile.getTouchEventName("touchstart"),t=re.jqx.mobile.getTouchEventName("touchend"),i=re.jqx.mobile.getTouchEventName("touchmove"),s.enablehover=!1,s.gridcontent&&(s.removeHandler(s.gridcontent,e+".touchScroll"),s.removeHandler(s.gridcontent,i+".touchScroll"),s.removeHandler(s.gridcontent,t+".touchScroll"),s.removeHandler(s.gridcontent,"touchcancel.touchScroll"),re.jqx.mobile.touchScroll(s.gridcontent[0],s.vScrollInstance.max,function(e,t){null!=t&&"visible"==s.vScrollBar.css("visibility")&&s.vScrollInstance.setPosition(t),null!=e&&"visible"==s.hScrollBar.css("visibility")&&s.hScrollInstance.setPosition(e),s.vScrollInstance.thumbCapture=!0,s._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),s._overlayElement&&(s.removeHandler(s._overlayElement,e+".touchScroll"),s.removeHandler(s._overlayElement,i+".touchScroll"),s.removeHandler(s._overlayElement,t+".touchScroll"),s.removeHandler(s._overlayElement,"touchcancel.touchScroll"),re.jqx.mobile.touchScroll(s._overlayElement[0],s.vScrollInstance.max,function(e,t){null!=t&&"visible"==s.vScrollBar.css("visibility")&&s.vScrollInstance.setPosition(t),null!=e&&"visible"==s.hScrollBar.css("visibility")&&s.hScrollInstance.setPosition(e),s.vScrollInstance.thumbCapture=!0,s._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,e,function(){s.editcell?s._overlayElement.css("visibility","hidden"):s._overlayElement.css("visibility","visible")}),this.addHandler(this.host,t,function(){s.editcell?s._overlayElement.css("visibility","hidden"):s._overlayElement.css("visibility","visible")}))))},_rendercelltexts:function(){var e,t,i;"10208878-FCD1-4EC7-9249-BA0F153A5DE8"!==re.jqx.credits&&(e="www.jqwidgets.com",-1==location.hostname.indexOf(e.substring(4))&&(this._gridRenderElement&&re(this._gridRenderElement).remove(),i=String.fromCharCode(83,80,65,78),t=String.fromCharCode(72,84,84,80,58,47,47),(i=document.createElement(i)).id=re.jqx.utilities.createId(),i.innerHTML=e,i.style.position="absolute",i.style.right="5px",i.style.bottom="5px",i.style.color="#909090",i.style.cursor="pointer",i.style.zIndex="999999",i.style.display="none",i.style.fontSize="9px",i.onmousedown=function(){open(t+e)},this.content[0].appendChild(i),this._gridRenderElement=i))},isTouchDevice:function(){if(null!=this.touchDevice)return this.touchDevice;var e=re.jqx.mobile.isTouchDevice();if(this.touchDevice=e,1==this.touchmode){if(re.jqx.browser.msie&&re.jqx.browser.version<9)return this.enablehover=!1;e=!0,re.jqx.mobile.setMobileSimulator(this.element),this.touchDevice=e}else 0==this.touchmode&&(e=!1);return e&&0!=this.touchModeStyle&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),e},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(e,t){if(this._cellscache=new Array,re.jqx.dataFormat&&re.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null!=e){for(var i in e)i.toLowerCase()!==i&&(e[i.toLowerCase()]=e[i]);if(e.okstring&&(this.gridlocalization.okstring=e.okstring),e.cancelstring&&(this.gridlocalization.cancelstring=e.cancelstring),e.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=e.pagergotopagestring),e.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=e.pagershowrowsstring),e.pagerrangestring&&(this.gridlocalization.pagerrangestring=e.pagerrangestring),e.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=e.pagernextbuttonstring),e.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=e.pagerpreviousbuttonstring),e.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=e.pagerfirstbuttonstring),e.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=e.pagerlastbuttonstring),e.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=e.groupsheaderstring),e.sortascendingstring&&(this.gridlocalization.sortascendingstring=e.sortascendingstring),e.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=e.sortdescendingstring),e.sortremovestring&&(this.gridlocalization.sortremovestring=e.sortremovestring),e.groupbystring&&(this.gridlocalization.groupbystring=e.groupbystring),e.groupremovestring&&(this.gridlocalization.groupremovestring=e.groupremovestring),e.firstDay&&(this.gridlocalization.firstDay=e.firstDay),e.days&&(this.gridlocalization.days=e.days),e.months&&(this.gridlocalization.months=e.months),e.AM&&(this.gridlocalization.AM=e.AM),e.PM&&(this.gridlocalization.PM=e.PM),e.patterns&&(this.gridlocalization.patterns=e.patterns),e.percentsymbol&&(this.gridlocalization.percentsymbol=e.percentsymbol),e.currencysymbol&&(this.gridlocalization.currencysymbol=e.currencysymbol),e.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=e.currencysymbolposition),null!=e.decimalseparator&&(this.gridlocalization.decimalseparator=e.decimalseparator),null!=e.thousandsseparator&&(this.gridlocalization.thousandsseparator=e.thousandsseparator),e.filterclearstring&&(this.gridlocalization.filterclearstring=e.filterclearstring),e.filterstring&&(this.gridlocalization.filterstring=e.filterstring),e.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=e.filtershowrowstring),e.filtershowrowdatestring&&(this.gridlocalization.filtershowrowdatestring=e.filtershowrowdatestring),e.filterselectallstring&&(this.gridlocalization.filterselectallstring=e.filterselectallstring),e.filterchoosestring&&(this.gridlocalization.filterchoosestring=e.filterchoosestring),e.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=e.filterorconditionstring),e.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=e.filterandconditionstring),e.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=e.filterstringcomparisonoperators),e.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=e.filternumericcomparisonoperators),e.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=e.filterdatecomparisonoperators),e.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=e.filterbooleancomparisonoperators),e.emptydatastring&&(this.gridlocalization.emptydatastring=e.emptydatastring),e.filterselectstring&&(this.gridlocalization.filterselectstring=e.filterselectstring),e.todaystring&&(this.gridlocalization.todaystring=e.todaystring),e.clearstring&&(this.gridlocalization.clearstring=e.clearstring),e.validationstring&&(this.gridlocalization.validationstring=e.validationstring),e.loadtext&&(this.gridlocalization.loadtext=e.loadtext),e.addrowstring&&(this.gridlocalization.addrowstring=e.addrowstring),e.udpaterowstring&&(this.gridlocalization.udpaterowstring=e.udpaterowstring),e.deleterowstring&&(this.gridlocalization.deleterowstring=e.deleterowstring),e.resetrowstring&&(this.gridlocalization.resetrowstring=e.resetrowstring),e.everpresentrowplaceholder&&(this.gridlocalization.everpresentrowplaceholder=e.everpresentrowplaceholder),e.filtersearchstring&&(this.gridlocalization.filtersearchstring=e.filtersearchstring),!1!==t){if(this._initpager&&this._initpager(),this._initgroupsheader&&this._initgroupsheader(),this._initmenu&&this._initmenu(),this._builddataloadelement(),re(this.dataloadelement).css("visibility","hidden"),re(this.dataloadelement).css("display","none"),this.filterable&&this.showfilterrow&&this._updatefilterrow){for(var i in this._filterrowcache)re(this._filterrowcache[i]).remove();this._filterrowcache=[],this._updatefilterrow()}this.showaggregates&&this.refresheaggregates&&this.refresheaggregates(),"Search:"!==this.gridlocalization.filtersearchstring&&this._renderfilter(),this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filtersearchstring:"Search:",filterstring:"Filter",filtershowrowstring:"Show rows where:",filtershowrowdatestring:"Show rows where date:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",addrowstring:"Add",udpaterowstring:"Update",deleterowstring:"Delete",resetrowstring:"Reset",everpresentrowplaceholder:"Enter ",okstring:"Ok",editstring:"Edit",cancelstring:"Cancel"}},_getmenudefaultheight:function(){var e=0,t=(this.sortable&&this._togglesort&&this.showsortmenuitems&&(e=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(e+=2),this._measureMenuElement()),e=e*t+9;return this.filterable&&!this.showfilterrow&&this.showfiltermenuitems&&(e+=224,re.jqx.browser.msie&&re.jqx.browser.version<8&&(e+=20)),e},_initmenu:function(){var c=this.that;if(this.host.jqxMenu){if(this.gridmenu){if(this._hasOpenedMenu)return;this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu.removeData(),this.gridmenu.remove()}this.menuitemsarray=new Array;var e="",t=(this.isTouchDevice()&&(e="jqx-grid-menu-item-touch"),this.gridmenu=re('<div tabindex=0 id="gridmenu'+this.element.id+'" style="z-index: 99;"></div>'),this.host.append(this.gridmenu),re("<ul></ul>")),i=re('<li class="'+e+'"><div class="jqx-grid-sortasc-icon"></div>'+this.gridlocalization.sortascendingstring+"</li>"),s=re('<li class="'+e+'"><div class="jqx-grid-sortdesc-icon"></div>'+this.gridlocalization.sortdescendingstring+"</li>"),r=re('<li class="'+e+'"><div class="jqx-grid-sortremove-icon"></div>'+this.gridlocalization.sortremovestring+"</li>"),l='<div class="jqx-grid-groupby-icon"></div>',o=re('<li class="'+e+'">'+l+this.gridlocalization.groupbystring+"</li>"),l=re('<li class="'+e+'">'+l+this.gridlocalization.groupremovestring+"</li>"),a=re('<li type="separator"></li>'),u=re('<li class="filter '+e+'" style="height: 224px;" ignoretheme="true"><div class="filter"></div></li>'),e=(this.gridmenu.addClass("jqx-grid-menu"),this.gridlocalization.sortascendingstring.length),n=this.gridlocalization.sortascendingstring,e=(this.gridlocalization.sortdescendingstring.length>e&&(e=this.gridlocalization.sortdescendingstring.length,n=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>e&&(e=this.gridlocalization.sortremovestring.length,n=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>e&&(e=this.gridlocalization.groupbystring.length,n=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>e&&(e=this.gridlocalization.groupremovestring.length,n=this.gridlocalization.groupremovestring)),200),n=re.trim(n).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),n=re("<span>"+n+"</span>"),n=(n.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(n),e=n.outerWidth()+60,n.remove(),0),d=(this.sortable&&this._togglesort&&this.showsortmenuitems&&(t.append(i),this.menuitemsarray[0]=i[0],t.append(s),this.menuitemsarray[1]=s[0],t.append(r),this.menuitemsarray[2]=r[0],n=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(t.append(o),this.menuitemsarray[3]=o[0],t.append(l),this.menuitemsarray[4]=l[0],n+=2),this._measureMenuElement()),n=n*d+9,d=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems){if(!this._initfilterpanel)throw new Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.menuitemsarray[5]=u[0],this.menuitemsarray[6]=u[0],t.append(a),t.append(u),n+=220,re.jqx.browser.msie&&re.jqx.browser.version<8&&(n+=20),this.isTouchDevice()&&(n+=30);a=re(u).find("div:first");this.excelfilterpanel=re("<div></div>"),this.filterpanel=a,this.filtermenu=re(u),e+=20,this.adaptive&&this.element.offsetWidth<this.adaptivewidth&&(e=this.element.offsetWidth-50),this._initfilterpanel(this,a,"",e),this._initfilterpanel(this,this.excelfilterpanel,"",e,!0),d=!1,this.removeHandler(re(document),"click.menu"+c.element.id,c._closemenuafterclick,c),this.addHandler(re(document),"click.menu"+c.element.id,c._closemenuafterclick,c)}this.gridmenu.append(t),re.jqx.browser.msie&&re.jqx.browser.version<8&&this.filterable&&(re("#listBoxfilter1"+this.element.id).css("z-index",49),re("#listBoxfilter2"+this.element.id).css("z-index",49),re("#listBoxfilter3"+this.element.id).css("z-index",49),re("#gridmenu"+this.element.id).css("z-index",50),this.addHandler(re("#gridmenu"+this.element.id),"initialized",function(){re("#menuWrappergridmenu"+c.element.id).css("z-index",49)})),null==this.menuitemsarray[0]&&"light"!==this.theme&&"dark"!==this.theme&&(n=65),this.removeHandler(re(window),"orientationchange.jqxgrid"+this.element.id),this.removeHandler(re(window),"orientationchanged.jqxgrid"+this.element.id),this.addHandler(re(window),"orientationchange.jqxgrid"+this.element.id,function(){c.gridmenu.jqxMenu("close")}),this.addHandler(re(window),"orientationchanged.jqxgrid"+this.element.id,function(){c.gridmenu.jqxMenu("close")}),this.removeHandler(this.gridmenu,"keydown"),this.addHandler(this.gridmenu,"keydown",function(e){function t(e){for(var t=d.indexOf(e)-1;0<=t;t--)if(!(0<=d[t].className.indexOf("disabled")))return d[t];return e}function i(e){for(var t=d.indexOf(e)+1;t<d.length;t++)if(!(0<=d[t].className.indexOf("disabled")))return d[t];return e}function s(){var e=d[d.length-1];return 0<=e.className.indexOf("disabled")?t(e):e}function r(e){re(d).removeClass("jqx-fill-state-focus");for(var t=0;t<d.length;t++)d[t].active=!1;e&&(re(e).addClass("jqx-fill-state-focus"),e.active=!0)}var l,o,a,n,d=re(c.gridmenu.find(".jqx-item")).toArray(),h=function(){for(var e=0;e<d.length;e++)if(d[e].active)return d[e];return null};if((h()||c.filterable||(d[0].active=!0),c.keyboardmenunavigation&&c.keyboardnavigation)&&(40===e.keyCode?(h=h(),r(i(h))):38===e.keyCode&&(h=h(),r(t(h))),9===e.keyCode)){if(!h())return e.shiftKey&&(document.activeElement===re.find("#filter1"+c.element.id)[0]?(r(s()),re(re.find("#filter1"+c.element.id)).removeClass("jqx-fill-state-focus"),c.gridmenu.focus(),e.stopPropagation(),e.preventDefault()):document.activeElement===re.find("#filter1"+c.element.id+"ex")[0]&&(r(s()),re(re.find("#filter1"+c.element.id)+"ex").removeClass("jqx-fill-state-focus"),c.gridmenu.focus(),e.stopPropagation(),e.preventDefault())),!0;e.shiftKey?(h=h(),r(t(h))):(h=h())===s()&&c.filterable&&!c.showfilterrow?(r(null),0<re(re.find("#filter1"+c.element.id)).length?re(re.find("#filter1"+c.element.id)).jqxDropDownList("focus"):0<re(re.find("#filter1"+c.element.id+"ex")).length&&re(re.find("#filter1"+c.element.id+"ex")).jqxListBox("focus")):r(i(h)),e.stopPropagation(),e.preventDefault()}27==e.keyCode?c.gridmenu.jqxMenu("close"):13==e.keyCode&&(d=c.gridmenu.find(".jqx-item"),(h=h())?(re(h).trigger("click"),r(null)):c._buildfilter&&c.filterable&&!c.showfilterrow&&(0<re.find("#filter1"+c.element.id).length&&(n="block"==re(re.find("#filter1"+c.element.id)).jqxDropDownList("container").css("display"),l="block"==re(re.find("#filter2"+c.element.id)).jqxDropDownList("container").css("display"),o="block"==re(re.find("#filter3"+c.element.id)).jqxDropDownList("container").css("display")),e=re(re.find("#filterclearbutton"+c.element.id)).hasClass("jqx-fill-state-focus"),h=re(re.find("#filterbutton"+c.element.id)).hasClass("jqx-fill-state-focus"),e?(a=re.data(document.body,"contextmenu"+c.element.id).column,c._clearfilter(c,c.element,a),c.gridmenu.jqxMenu("close")):!h||n||l||o||(a=re.data(document.body,"contextmenu"+c.element.id).column,c.gridmenu.jqxMenu("close"),c._buildfilter(c,u,a))),e=0<c.selectedcells.length||0<c.selectedrowindexes.length,c.clearselection(),(h=c.getdisplayrows()[0])&&(n=c.getboundindex(h),0<=c.selectionmode.indexOf("cell")?e&&c.selectcell(n,c.columns.records[0].displayfield):e&&c.selectrow(n)))}),"auto"!=this.popupwidth&&(e=this.popupwidth),this.gridmenu.jqxMenu({popupZIndex:3e3,width:e,height:n,autoCloseOnClick:d,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0});var h,a=document.querySelectorAll(".jqx-menu-wrapper");this.gridmenu.parent().attr("tabindex",a.length-1),this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",u[0].id,"closeOnClick",!1),this.rtl&&(h=this.that,re.each(t.find("li"),function(){re(this).addClass(h.toTP("jqx-rtl"))}),(e=function(e){e=e.find("div");e.css("float","right"),e.css("margin-left","4px"),e.css("margin-right","-4px")})(r),e(s),e(i),e(o),e(l)),this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){this.gridmenu||this._initmenu();var e=this.gridlocalization.sortascendingstring.length,t=this.gridlocalization.sortascendingstring,e=(this.gridlocalization.sortdescendingstring.length>e&&(e=this.gridlocalization.sortdescendingstring.length,t=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>e&&(e=this.gridlocalization.sortremovestring.length,t=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>e&&(e=this.gridlocalization.groupbystring.length,t=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>e&&(e=this.gridlocalization.groupremovestring.length,t=this.gridlocalization.groupremovestring)),200),t=re.trim(t).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),t=re("<span>"+t+"</span>"),t=(t.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(t),e=t.outerWidth()+60,t.remove(),0),i=(this.sortable&&this._togglesort&&this.showsortmenuitems&&(t=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(t+=2),this._measureMenuElement()),t=t*i+9;this.filterable&&this.showfiltermenuitems&&this._initfilterpanel&&(t+=224,e+=20,re.jqx.browser.msie&&re.jqx.browser.version<8&&(t+=20),this.isTouchDevice()&&(t+=30)),null==this.menuitemsarray[0]&&"light"!==this.theme&&"dark"!==this.theme&&(t=65),"auto"!=this.popupwidth&&(e=this.popupwidth),"auto"!=this.popupheight&&(t=this.popupheight),this.gridmenu.jqxMenu({width:e,height:t})},_closemenuafterclick:function(e){var t=null!=e?e.data:this,i=!1;if(null==e.target||null!=e.target&&null==e.target.className.indexOf)t.gridmenu.jqxMenu("close");else if(-1==e.target.className.indexOf("filter")||-1!=e.target.className.indexOf("jqx-grid-cell-filter"))if(-1!=e.target.className.indexOf("jqx-grid-cell"))t.gridmenu.jqxMenu("close");else if(!t._hasOpenedMenu||!re(e.target).ischildof(t.gridmenu)){t.host.coord();var s=t.gridmenu.coord(),r=e.pageX,l=e.pageY;if(re.each(re(e.target).parents(),function(){return null!=this.id&&this.id.indexOf&&-1!=this.id.indexOf("filter")||this.className.indexOf&&-1!=this.className.indexOf("filter")&&-1==this.className.indexOf("jqx-grid-cell-filter")?!(i=!0):this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-cell")||this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-column")?(t.gridmenu.jqxMenu("close"),!1):void 0}),!i){try{if("default"===t.filtermode){var o=re(re.find("#filter1"+t.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if((a=new Date)-o<100)return;if(a-re(re.find("#filter3"+t.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup<100)return;if("block"==re(re.find("#filter3"+t.element.id)).jqxDropDownList("container").css("display"))return;if("block"==re(re.find("#filter1"+t.element.id)).jqxDropDownList("container").css("display"))return;if("block"==re(re.find("#filter2"+t.element.id)).jqxDropDownList("container").css("display"))return;if(t._hasdatefilter&&"div"==re(".filtertext1"+t.element.id)[0].nodeName.toLowerCase()){if("block"==re(".filtertext1"+t.element.id).jqxDateTimeInput("container").css("display"))return;if("block"==re(".filtertext2"+t.element.id).jqxDateTimeInput("container").css("display"))return}}else{var a,o=re(re.find("#filter1"+t.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup;if((a=new Date)-o<100)return;if(a-re(re.find("#filter1"+t.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup<100)return}}catch(e){}if(!(r>=s.left&&r<=s.left+t.gridmenu.width()&&l>=s.top&&l<=s.top+t.gridmenu.height())){if(t.columnmenuclosing){e=(e=re.data(document.body,"contextmenu"+t.element.id))||{column:{displayfield:null}};if(!1===t.columnmenuclosing(t.gridmenu,e.column.displayfield,re(t.gridmenu).height()))return}t.gridmenu.jqxMenu("close")}}}},openColumnChooser:function(e,t){for(var s=this,i=(t=t||"Columns",e&&!re.isEmptyObject(e)||(e=s.columns.records),[]),r=0;r<e.length;r++)null!==e[r].text&&i.push({label:e[r].text,value:e[r].datafield,checked:!e[r].hidden});var l=document.createElement("div"),o=(l.innerHTML="<div>"+t+'</div><div style="overflow:hidden;"></div>',document.createElement("div")),a=(o.style.width="100%",o.style.height="calc(100% - 30px)",new jqxListBox(o,{width:"100%",height:"calc(100% - 30px)",checkboxes:!0,source:i})),n=new jqxWindow(l,{width:400,height:400,position:"center",isModal:!0}),d=document.createElement("button"),h=(d.innerHTML=this.gridlocalization.okstring,document.createElement("button")),c=(h.innerHTML=this.gridlocalization.cancelstring,d.style.width="50%",d.style.height="100%",h.style.width="50%",h.style.height="100%",document.createElement("div"));c.style.height="30px",n.open(),setTimeout(function(){l.querySelector(".jqx-widget-content").appendChild(o),l.querySelector(".jqx-widget-content").appendChild(c),c.appendChild(d),c.appendChild(h),d=new jqxButton(d,{theme:s.theme}),h=new jqxButton(h,{theme:s.theme}),d.element.classList.add("primary"),d.element.style.borderTopRightRadius="0px",d.element.style.borderBottomRightRadius="0px",d.element.style.borderTopLeftRadius="0px",d.element.style.borderBottomLeftRadius="0px",h.element.style.borderTopLeftRadius="0px",h.element.style.borderBottomLeftRadius="0px",h.element.style.borderTopRightRadius="0px",h.element.style.borderBottomRightRadius="0px",h.element.style.marginLeft="-2px",d.element.style.outline="none",h.element.style.outline="none",a.on("checkChange",function(){var e=a.getCheckedItems();d.disabled=0===e.length}),d.on("click",function(){n.destroy(),s.beginupdate();for(var e=a.getItems(),t=0;t<e.length;t++){var i=e[t];!1===i.checked?s.hidecolumn(i.value):s.showcolumn(i.value)}s.endupdate(),s._raiseEvent(26)}),h.on("click",function(){n.destroy(),s._raiseEvent(27)})},100),n.on("close",function(){n.destroy()})},_handlemenueevents:function(){var a=this.that;this.removeHandler(this.gridmenu,"closed"),this.addHandler(this.gridmenu,"closed",function(e){a._closemenu()}),this.removeHandler(this.gridmenu,"itemclick"),this.addHandler(this.gridmenu,"itemclick",function(e){for(var t=e.args,i=0;i<a.menuitemsarray.length;i++)if(t==a.menuitemsarray[i]){if(null!=re(t).attr("ignoretheme"))return;var s=re.data(document.body,"contextmenu"+a.element.id),r=s.column,l=(a.filterable&&a.gridmenu.jqxMenu("close"),r.displayfield);if(null==l&&(l=r.datafield),null!=s)switch(i){case 0:a.sortby(l,"ascending",null);break;case 1:a.sortby(l,"descending",null);break;case 2:a.sortby(l,null,null);break;case 3:a.addgroup(l);break;case 4:a.removegroup(l);break;case 5:var o=re(a.menuitemsarray[6]);re(o).css("display","block")}break}})},getdatainformation:function(){var e=this.dataview.totalrecords;return this.summaryrows&&(e+=this.summaryrows.length),{rowscount:e,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumns:this.getsortcolumns?this.getsortcolumns():[],sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows(),this._updaterowheights(),this._updaterowdetails()},_updatehiddenrows:function(){var t=this.that,e=(this.hiddens=new Array,this.hiddenboundrows);re.each(e,function(e){null!=this.index&&(this.index,e=t.getrowvisibleindex(e),t.hiddens[e]=this.hidden)})},_updaterowheights:function(){var t=this.that,e=(this.heights=new Array,this.heightboundrows);re.each(e,function(e){null!=this.index&&(this.index,e=t.getrowvisibleindex(e),t.heights[e]=this.height)})},_updaterowdetails:function(){var t=this.that,e=(this.details=new Array,this.detailboundrows);re.each(e,function(e){null!=this.index&&(this.index,e=t.getrowvisibleindex(e),t.details[e]=this.details)})},_getmenuitembyindex:function(e){return null==e?null:this.menuitemsarray[e]},openmenu:function(e){if(!this._openingmenu){this._openingmenu=!0,this.closemenu();var t=this.getcolumn(e);if(!t.menu)return!1;this.gridmenu||this._initmenu();for(var i=t.columnsmenu,s=(re(t.element).trigger("mouseenter"),this.menuOwner=t,this),r=0;r<s.columns.records.length;r++)s.columns.records[r].datafield!=e&&re(s.columns.records[r].element).trigger("mouseleave");setTimeout(function(){"block"==re(i)[0].style.display&&re(i).trigger("click"),s._openingmenu=!1},200)}},closemenu:function(){this._closemenu()},_closemenu:function(){if(this._hasOpenedMenu){if(this.columnmenuclosing)if(e=(e=re.data(document.body,"contextmenu"+this.element.id))||{column:{displayfield:null}},!1===this.columnmenuclosing(this.gridmenu,e.column.displayfield,re(this.gridmenu).height()))return;null!=this.gridmenu&&this.gridmenu.jqxMenu("close");null!=(e=re.data(document.body,"contextmenu"+this.element.id))&&this.autoshowcolumnsmenubutton&&(this.enableanimations?(re(e.columnsmenu).animate({"margin-left":0},"fast",function(){re(e.columnsmenu).css("display","none")}),s=this.rtl?0:-32,e.column.iconscontainer.animate({"margin-left":s},"fast")):(re(e.columnsmenu).css("display","none"),s=this.rtl?0:-32,e.column.iconscontainer.css("margin-left",s)),re.data(document.body,"contextmenu"+this.element.id,null)),this._hasOpenedMenu=!1,this.menuOwner=null;var e,t,i,s=this._getmenuitembyindex(5);s&&(t=re(s).find("#filter1"+this.element.id),i=re(s).find("#filter2"+this.element.id),s=re(s).find("#filter3"+this.element.id),0<t.length&&"default"===this.filtermode&&(t.jqxDropDownList("hideListBox"),0<i.length&&i.jqxDropDownList("hideListBox"),0<s.length&&s.jqxDropDownList("hideListBox"))),this.focus()}},scrolloffset:function(e,t){null!=e&&null!=t&&null!=e&&null!=t&&(this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(e){null!=e&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){null!=e&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginupdate:function(e,t){this._updating=!0,!(this._datachanged=!1)===e&&(this._batchupdate=!0),!0===t&&(this._stopbindings=!0)},endupdate:function(){this.resumeupdate()},resumeupdate:function(){if(this._updating=!1,this._batchupdate)return this._batchupdate=!1,this._datachanged=!1,void(this._stopbindings?this.updatebounddata():this.render());var e;this._stopbindings?this.updatebounddata("data"):(1==this._datachanged?(e=this.vScrollInstance.value,this.render(!0,!0,!1),this._datachanged=!1,0!=e&&e<this.vScrollInstance.max&&this.scrolltop(e)):(this.rendergridcontent(!0),this._renderrows(this.virtualsizeinfo)),this.showaggregates&&this.renderaggregates&&this.renderaggregates(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement()),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),re(this.dataloadelement).css("visibility","visible"),re(this.dataloadelement).css("display","block")},hideloadelement:function(){re(this.dataloadelement).css("visibility","hidden"),re(this.dataloadelement).css("display","none")},_updatefocusedfilter:function(){var i=this.that;i.focusedfilter&&(i.focusedfilter.focus(),setTimeout(function(){if(i.focusedfilter.focus(),"input"==i.focusedfilter[0].nodeName.toLowerCase()){var e,t=i.focusedfilter.val().length;try{"selectionStart"in i.focusedfilter[0]?i.focusedfilter[0].setSelectionRange(t,t):((e=i.focusedfilter[0].createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select())}catch(e){}}},50))},databind:function(e,a){var n,d,t,i,s;!0!==this.loadingstate&&!0!==this._stopbindings&&(n=window,"block"==this.host.css("display")&&(this.autoshowloadelement?(re(this.dataloadelement).css("visibility","visible"),re(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(re(this.dataloadelement).css("visibility","hidden"),re(this.dataloadelement).css("display","none"))),!this._initgroupsheader&&0<this.groups.length&&(this.groups=new Array),d=this.that,(e=null==e?{}:e).recordstartindex||(e.recordstartindex=0),e.recordendindex||(e.recordendindex=0),null!=e.loadallrecords&&null!=e.loadallrecords||(e.loadallrecords=!0),null!=e.sortcomparer&&null!=e.sortcomparer||(e.sortcomparer=null),null!=e.filter&&null!=e.filter||(e.filter=null),null!=e.sort&&null!=e.sort||(e.sort=null),null!=e.data&&null!=e.data||(e.data=null),(t=null)!=e&&(t=(null!=e._source?e._source:e).url),this.dataview=this.dataview||new re.jqx.dataview,re.jqx.dataview.sort&&re.extend(this.dataview,new re.jqx.dataview.sort),re.jqx.dataview.grouping&&re.extend(this.dataview,new re.jqx.dataview.grouping),this.dataview.suspendupdate(),this.dataview.pageable=this.pageable,this.dataview.groupable=this.groupable,this.dataview.groups=this.groups,this.dataview.virtualmode=this.virtualmode,(this.dataview.grid=this).dataview._clearcaches(),this._columnClassNameCache=new Array,!this.pageable&&this.virtualmode&&(this.loadondemand=!0),d.initializedcall||(e._source&&this.sortable&&(null!=e._source.sortcolumn&&(this.sortcolumn=e._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=e._source.sortcolumn,e._source.sortcolumn=null),null!=e._source.sortdirection&&(this.dataview.sortfielddirection=e._source.sortdirection,s="a"==(i=e._source.sortdirection)||"asc"==i||"ascending"==i||1==i,this.sortdirection=null!=i?{ascending:s,descending:!s}:{ascending:!1,descending:!1})),this.pageable&&e._source&&(null!=e._source.pagenum&&(this.dataview.pagenum=e._source.pagenum),null!=e._source.pagesize?(this.pagesize=e._source.pagesize,this.dataview.pagesize=e._source.pagesize):(this.dataview.pagesize=e._source.pagesize,null==this.dataview.pagesize&&(this.dataview.pagesize=this.pagesize))),this.sortable&&(e.sortcolumn&&(this.dataview.sortfield=e.sortcolumn),e.sortdirection&&(this.dataview.sortfielddirection=e.sortdirection)),this.filterable&&this.columns&&re.each(this.columns,function(){this.filter&&d.dataview.addfilter(this.datafield,this.filter)})),this._loading=!0,this.dataview.update=function(e){if(!d.pageable&&d.virtualmode&&(d.loadondemand=!0),d._loading=!1,d.dataview.isupdating()&&d.dataview.resumeupdate(!1),d.pageable&&d.pagerrenderer){if(!d._initpager)throw new Error("jqxGrid: Missing reference to jqxgrid.pager.js.");d._initpager()}if(d.source&&d.source.sortcolumn&&d.sortby&&!d.virtualmode)d.render(),d.source._source.sort||d.sortby(d.source.sortcolumn,d.source.sortdirection,d.source.sortcomparer),d.source.sortcolumn=null,d._postrender("data");else{var t=d.vScrollInstance.value,i=d.hScrollInstance.value,s=d.source?d.source.datatype:"array";if("local"!=s||"array"!=s){s=null==d.virtualsizeinfo||null!=d.virtualsizeinfo&&0==d.virtualsizeinfo.virtualheight;if("cells"==a){var r=!1;if(d.filterable&&d._initfilterpanel&&d.dataview.filters.length&&(r=!0),0==e)return d.vScrollInstance.isScrolling()||d.hScrollInstance.isScrolling()||(d._cellscache=new Array,d._pagescache=new Array,d._renderrows(d.virtualsizeinfo),d.showfilterrow&&d.filterable&&d.filterrow&&d._updatelistfilters(!0),d.showaggregates&&d._updateaggregates&&d._updateaggregates()),d.sortcolumn&&d.sortby(d.sortcolumn,d.dataview.sortfielddirection,d.source.sortcomparer),d.autoshowloadelement&&(re(d.dataloadelement).css("visibility","hidden"),re(d.dataloadelement).css("display","none")),d.virtualmode&&!d._loading&&(d.loadondemand=!0,d._renderrows(d.virtualsizeinfo)),void d._postrender("data");r?a="filter":null!=d.sortcolumn&&(a="sort")}if(!d.virtualmode||s||d.virtualmode&&d.pageable)if(1==d.initializedcall&&"pagechanged"==a)t=0,d.groupable&&0<d.groups.length?(d._render(!0,!0,!1,!1,!1),d._updatecolumnwidths(),d._updatecellwidths(),d._renderrows(d.virtualsizeinfo),d._postrender("data")):(d.rendergridcontent(!0),d.pageable&&d.updatepagerdetails&&(d.updatepagerdetails(),d.autoheight?(d._updatepageviews(),d.autorowheight&&d._renderrows(this.virtualsizeinfo)):d.autorowheight&&(d._updatepageviews(),d._renderrows(this.virtualsizeinfo)))),d.showaggregates&&d._updateaggregates&&d._updateaggregates(),d._postrender("data");else if("filter"==a)d.virtualmode,d._render(!0,!0,!1,!1,!1),d._updatecolumnwidths(),d._updatecellwidths(),d._renderrows(d.virtualsizeinfo),d._updatefocusedfilter(),d._postrender("data");else if("sort"==a){if(d.virtualmode)d.rendergridcontent(!0),d.showaggregates&&d._updateaggregates&&d._updateaggregates(),d._postrender("data");else{if(d._render(!0,!0,!1,!1,!1),"many"===d.sortmode)for(var l in d.sortcolumns)d.sortby(l,d.sortcolumns[l],d.source.sortcomparer);else d.sortcolumn&&!d.source.sort&&d.sortby(d.sortcolumn,d.dataview.sortfielddirection,d.source.sortcomparer);d._postrender("data")}d.source.sort&&d._updatefocusedfilter()}else"data"==a?d._render(!0,!0,!1,!1,!1):"state"==a?d._render(!0,!0,!1,d.menuitemsarray&&0<d.menuitemsarray.length&&!d.virtualmode):d._render(!0,!0,!0,d.menuitemsarray&&0<d.menuitemsarray.length&&!d.virtualmode),d._postrender("data");else d.virtualmode&&1==e&&!d.pageable?(d._render(!0,!0,!1,!1,!1),d._updatefocusedfilter(),d._updatecolumnwidths(),d._updatecellwidths(),d._renderrows(d.virtualsizeinfo)):d.virtualmode&&!d.pageable&&0==e&&null!=a?(d.rendergridcontent(!0),d.showaggregates&&d._updateaggregates&&d._updateaggregates()):d.virtualmode&&0==d.dataview.totalrecords&&0<d.dataview.filters.length?d._render(!0,!0,!0,d.menuitemsarray&&!d.virtualmode):(d._pagescache=new Array,d._renderrows(d.virtualsizeinfo)),d._postrender("data");d.vScrollInstance.value!=t&&t<=d.vScrollInstance.max&&d.vScrollInstance.setPosition(t),d.hScrollInstance.value!=i&&i<=d.hScrollInstance.max&&d.hScrollInstance.setPosition(i)}}var o;d.autoshowloadelement&&(re(d.dataloadelement).css("visibility","hidden"),re(d.dataloadelement).css("display","none")),d.pageable&&(d.pagerrightbutton&&(d.pagerrightbutton.jqxButton({disabled:!1}),d.pagerleftbutton.jqxButton({disabled:!1}),d.pagershowrowscombo.jqxDropDownList({disabled:!1})),d.pagerfirstbutton&&(d.pagerfirstbutton.jqxButton({disabled:!1}),d.pagerlastbutton.jqxButton({disabled:!1}))),d._raiseEvent(11),d.initializedcall?d._updateTouchScrolling():(o=function(){if(d._raiseEvent(0),d.initializedcall=!0,d.isInitialized=!0,d.ready&&d.ready(),"many"===d.sortmode&&d.sortable&&d.source&&d.source.sortcolumns)for(var e=d.source.sortcolumns,t=0;t<e.length;t++)d.sortby(e[t],"asc"===d.source.sortdirections[t]);var i,s;d.renderstatusbar&&d.renderstatusbar(d.statusbar),d.rendertoolbar&&d.rendertoolbar(d.toolbar),d._rendercelltexts&&d._rendercelltexts(),d._gridRenderElement&&(re(d._gridRenderElement).show("slow"),i=6e3+Math.floor(4e3*Math.random()+1),s=String.fromCharCode(83,69,84).toLowerCase()+"-"+String.fromCharCode(84,73,77,69,79,85,84).toLowerCase(),n[re.camelCase(s)](function(){re(d._gridRenderElement).hide("slow",function(){re(d._gridRenderElement).remove()})},i)),d.autoloadstate&&d.loadstate&&d.loadstate(null,!0)},re.jqx.isHidden(d.host)?(d.readyInterval&&clearInterval(d.readyInterval),d.readyInterval=setInterval(function(){re.jqx.isHidden(d.host)||d.__isRendered&&(clearInterval(d.readyInterval),d.readyInterval=null,o(),d._initmenu())},200)):o(),null!=d.width&&-1!=d.width.toString().indexOf("%")||null!=d.height&&d.height.toString().indexOf("%"),"hidden"==d.host.css("visibility")&&(re.jqx.browser.msie&&re.jqx.browser.version,"visible"==d.vScrollBar.css("visibility")&&d.vScrollBar.css("visibility","inherit"),d.autowidth||"visible"==d.hScrollBar.css("visibility")&&d.hScrollBar.css("visibility","inherit"),d._intervalTimer=setInterval(function(){"visible"==d.host.css("visibility")&&(d._updatesize(!0),clearInterval(d._intervalTimer))},100)))},this.dataview.databind(e),this.dataview.isupdating()&&(null!=t?this.dataview.suspend=!1:this.dataview.resumeupdate(!1)),this._initializeRows())},scrollto:function(e,t){null!=e&&this.hScrollInstance.setPosition(e),null!=t&&this.vScrollInstance.setPosition(t)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(e){var t=this;if(this.autoheight&&!this.pageable)return!0;var i,s=this._getpagesize(),r=Math.floor(e/s),l=this.scrollmode;if(this.scrollmode="physical",this._pageviews[r]||this.pageable||this._updatepageviews(),this.groupable&&0<this.groups.length){for(var o=this.getdisplayrows(),a=0,n=0;n<o.length;n++){var d=o[n];if(d.boundindex===e){var h=this.vScrollInstance.value,c=this._gettableheight()-this.rowsheight;(a<h||h+c<a)&&this.scrolltop(a-this.rowsheight),a===h&&this.scrolltop(a-this.rowsheight);break}for(var u=d.parentItem,g=!0;u;){if(u&&(!(i=u).group||(!t.expandedgroups[i.uniqueid]||!t.expandedgroups[i.uniqueid].expanded))){g=!1;break}u=u.parentItem}g&&(a+=this.rowsheight,this.details[n]&&0==this.details[n].rowdetailshidden&&(a+=this.details[n].rowdetailsheight))}return this.scrollmode=l,!0}var p=!1;if(this.pageable&&this.gotopage&&!this.virtualmode){r=Math.floor(e/s);if(this.dataview.pagenum!=r){if(this.groupable&&0<this.groups.length)return!0;if(this.editcell)return setTimeout(function(){t.pagerpageinput.focus()},25),!1;this.gotopage(r),p=!0}}var h=this.vScrollInstance.value,c=this._gettableheight()-this.rowsheight,m=s*(e/s-r),m=Math.round(m);if(this._pageviews[r]){var w,f=(a=this._pageviews[r].top)+m*this.rowsheight;if(!this.autorowheight||0!==(w=(w=re(this.table[0].children[m])).position().top+w.height())&&(f=w),this.rowdetails)for(n=s*r;n<e;n++)this.details[n]&&0==this.details[n].rowdetailshidden&&(f+=this.details[n].rowdetailsheight);(f="deferred"==this.scrollmode&&this.vScrollInstance.max<=f+this.rowsheight?this.vScrollInstance.max:f)<h?(this.scrolltop(f),p=!0):h+c+2<f&&(this.scrolltop(f-c),p=!0)}else if(this.pageable){f=m*this.rowsheight;if(this.rowdetails)for(n=s*r;n<s*r+m;n++)this.details[n]&&0==this.details[n].rowdetailshidden&&(f+=this.details[n].rowdetailsheight);(f<h||h+c<f)&&(this.scrollto(0,f),p=!0)}return this.scrollmode=l,p},ensurecellvisible:function(e,t){var i=this.that,s=this.hScrollInstance.value,r=i.hScrollInstance.max,e=(i.rtl&&"visible"!=this.hScrollBar.css("visibility")&&(r=0),this.ensurerowvisible(e)),l=0;if(this.columns.records){var o=s,a=this.hScrollBar[0].style.visibility,n=this.vScrollBar[0].style.visibility;if("hidden"==a)return;for(var d=this.element.offsetWidth,h=0,c="visible"==n?20:0,u=!1,g=0,p=0;p<this.columns.records.length;p++){var m=this.columns.records[p];if(!m.hidden){if(m.pinned&&(g+=m.width),m.datafield==t){var w=0,f=i.rtl?r-s:o;l+m.width>f+d-c?(w=l+m.width-d+c,i.rtl&&(w=r-w),i.scrollleft(w),u=!0):l<=f+g&&(w=l-m.width-g,i.rtl&&(w=r-w),i.scrollleft(w),u=!0),0==h?(i.rtl?i.scrollleft(r):i.scrollleft(0),u=!0):h==i.columns.records.length-1&&"visible"==i.hScrollBar.css("visibility")&&(i.rtl?i.scrollleft(i.hScrollBar.jqxScrollBar("min")):i.scrollleft(i.hScrollBar.jqxScrollBar("max")),u=!0);break}h++,l+=m.width}}u||i.scrollleft(o)}return e},setrowheight:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return null!=e&&null!=t&&(this.heightboundrows[e]={index:e,height:t},!((e=this.getrowvisibleindex(e))<0)&&(this.rows.records[e]?this.rows.records[e].height=t:((i=new g(this,null)).height=t,this.rows.replace(e,i)),this.heights[e]=t,this.rendergridcontent(!0),!0));var i},getrowheight:function(e){return null==e?null:!((e=this.getrowvisibleindex(e))<0)&&(this.rows.records[e]?this.rows.records[e].height:void 0)},setrowdetails:function(e,t,i,s){var r,l;if(!(null==e||e<0))return r=e+"_",this._rowdetailscache[r]&&(l=this._rowdetailscache[r].element,re(l).remove(),this._rowdetailscache[r]=null),l=this.dataview.generatekey(),this.detailboundrows[e]={index:e,details:{rowdetails:t,rowdetailsheight:i,rowdetailshidden:s,key:l}},!((e=this.getrowvisibleindex(e))<0)&&this._setrowdetails(e,t,i,s,l)},getcolumn:function(e){var t=null;return this.columns.records?re.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}):this.columns&&re.each(this.columns,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}),t},_getcolumnindex:function(e){var t=-1;return this.columns.records&&re.each(this.columns.records,function(){if(t++,this.datafield==e)return!1}),t},_getcolumnat:function(e){return this.columns.records[e]},_getprevvisiblecolumn:function(e){for(var t=this.that;0<e;){e--;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},_getnextvisiblecolumn:function(e){for(var t=this.that;e<this.columns.records.length;){e++;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},getcolumnat:function(e){return isNaN(e)?null:this.columns.records[e]},_getcolumn:function(e){var t=null;return re.each(this._columns,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}),t},_setcolumnproperty:function(e,t,i){if(null==e||null==t||null==i)return null;t=t.toLowerCase();var s=this.getcolumn(e);if(null!=s){var r=s[t],e=(s[t]=i,this._getcolumn(e));switch(null!=e&&(e[t]=i),this._cellscache=new Array,t){case"filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case"text":this.prerenderrequired=!0,this._rendercolumnheaders(),this._updatecellwidths(),this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader(),this._renderrows(this.virtualsizeinfo),this.filterable&&this.showfilterrow&&this.refreshfilterrow();break;case"editable":case"resizable":case"draggable":if("editable"==t&&i!=r){if(null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),"checkbox"==s.columntype&&(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this.updating()))return!1;if(this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"classname":case"class":if(this.prerenderrequired=!0,"pinned"==t&&(this._initializeColumns(),this._preparecolumngroups()),this.rendergridcontent(!0),this.updating())return!1;"hidden"==t&&(this._updatecolumnwidths(),this._updatecellwidths()),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case"width":case"minwidth":case"maxwidth":if(this.updating())return!1;s._width=null,s._percentagewidth=null,this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}}},_getcolumnproperty:function(e,t){return null==e||null==t?null:(t=t.toLowerCase(),this.getcolumn(e)[t])},setcolumnproperty:function(e,t,i){this._setcolumnproperty(e,t,i)},getcolumnproperty:function(e,t){return this._getcolumnproperty(e,t)},hidecolumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showcolumn:function(e){this._setcolumnproperty(e,"hidden",!1)},iscolumnvisible:function(e){return!this._getcolumnproperty(e,"hidden")},pincolumn:function(e){this._setcolumnproperty(e,"pinned",!0)},unpincolumn:function(e){this._setcolumnproperty(e,"pinned",!1)},iscolumnpinned:function(e){return this._getcolumnproperty(e,"pinned")},_setrowdetails:function(e,t,i,s,r){if(0==i&&(i=100),null==e||null==i)return!1;if(null!=r)this.details[e]={rowdetails:t,rowdetailsheight:i,rowdetailshidden:s,detailskey:r};else{for(var l=null!=this.details[e]?this.details[e].detailskey:null,o={rowdetails:t,rowdetailsheight:i,rowdetailshidden:s,detailskey:l},a=(this.that,0);a<this.detailboundrows.length;a++)if(null!=this.detailboundrows[a]){var n=this.detailboundrows[a];if(n.details.detailskey==l){n.details.rowdetailsheight=o.rowdetailsheight,n.details.rowdetailshidden=o.rowdetailshidden,n.details.rowdetails=o.rowdetails;break}}this.details[e]=o}return this._detailsUpdate?void 0:(this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0)},getrowdetails:function(e){return null!=e&&(e=this.getrowvisibleindex(e),this._getrowdetails(e))},_getrowdetails:function(e){return null!=e&&(!(e<0)&&(this.details[e]||(this.rowdetailstemplate?"function"==typeof this.rowdetailstemplate?(void 0===(e=this.rowdetailstemplate(e)).rowdetailshidden&&(e.rowdetailshidden=!0),void 0===e.rowdetailsheight&&(e.rowdetailsheight=200),void 0===e.rowdetails&&(e.rowdetails="<div></div>"),e):this.rowdetailstemplate:void 0)))},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null==e)return!1;if(this.detailsVisibility||(this.detailsVisibility=new Array),this.detailsVisibility[e]=!1,(e=this.getrowvisibleindex(e))<0)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!1)},hiderowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(this.detailsVisibility||(this.detailsVisibility=new Array),this.detailsVisibility[e]=!0,(e=this.getrowvisibleindex(e))<0)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!0)},_togglerowdetails:function(e){this.detailsVisibility||(this.detailsVisibility=new Array);var t,i,s=e.visibleindex,r=this._getrowdetails(s);return null!=r&&(t=this.vScrollInstance.value,i=!r.rowdetailshidden,null!=(e=this.getboundindex(e))&&(this.detailsVisibility[e]=i),e=this._setrowdetailsvisibility(s,r,i),0!==t&&"hidden"!==this.vScrollBar.css("visibility")&&(t<=this.vScrollInstance.max?this.vScrollInstance.setPosition(t):this.vScrollInstance.setPosition(this.vScrollInstance.max)),e)},_setrowdetailsvisibility:function(e,t,i){if(this.rowdetailstemplate&&(this.details||(this.details=new Array),this.details[e]||(void 0===(s="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate(e):this.rowdetailstemplate).rowdetailshidden&&(s.rowdetailshidden=!0),void 0===s.rowdetailsheight&&(s.rowdetailsheight=200),void 0===s.rowdetails&&(s.rowdetails="<div></div>"),this.details[e]={rowdetailshidden:s.rowdetailshidden,rowdetailsheight:s.rowdetailsheight,rowdetails:s.rowdetails},s=this.dataview.generatekey(),this.details[e].detailskey=s,this.detailboundrows[e]={index:e,details:this.details[e]})),null==t)return!1;this.details[e].rowdetailshidden=i;var s=this.details[e];return i?this._raiseEvent(21,{rowindex:e,details:s.rowdetails,height:s.rowdetailsheight}):this._raiseEvent(20,{rowindex:e,details:s.rowdetails,height:s.rowdetailsheight}),this._setrowdetails(e,s.rowdetails,s.rowdetailsheight,s.rowdetailshidden)},getrowvisibleindex:function(e){return!(null==e||e<0)&&(this.virtualmode?null==(t=this.dataview.loadedrecords[e])?-1:t.visibleindex:this.getrowdisplayindex(e));var t},hiderow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return!(null==e||e<0)&&(null!=e&&(this.hiddenboundrows[e]={index:e,hidden:!0},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!0)))},showrow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return!(null==e||e<0)&&(null!=e&&(this.hiddenboundrows[e]={index:e,hidden:!1},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!1)))},isrowhiddenat:function(e){return null==e?null:(e=this.getrowvisibleindex(e),this.rows.records[e]?this.rows.records[e].hidden:void 0)},_setrowvisibility:function(e,t,i){return null!=e&&(this.hiddens[e]=t,!(null!=i&&!i)&&(this.rendergridcontent(!0),!0))},_loadrows:function(){if(this._pageviews[this.dataview.pagenum]||this.pageable){var e=this.pageable?0:this._pageviews[this.dataview.pagenum].top;if(!this.pageable&&null!=this._pagescache[this.dataview.pagenum])return null;if(this.virtualsizeinfo){var t=this.that,i=new Array,s=new Array,r=t.groupable&&0<t.groups.length,l=(this.dataview.totalrecords,this.virtualsizeinfo.virtualheight,0),o=(this.rows.beginupdate(),this.dataview.pagesize);this.pageable&&r&&(o=this.dataview.rows.length);for(var a=0;a<o&&!(a>=this.dataview.rows.length);a++){var n,d,h=this.dataview.rows[a],c=null,u=(t.rows.records[h.visibleindex]?(c=t.rows.records[h.visibleindex]).setdata(h):c=new g(t,h),c.hidden=this.hiddens[c.visibleindex],this.rowdetailstemplate&&(u="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate(c.boundindex):this.rowdetailstemplate,c.rowdetails=u.rowdetails,c.rowdetailsheight=u.rowdetailsheight,c.rowdetailshidden=u.rowdetailshidden,void 0===c.rowdetailshidden&&(c.rowdetailshidden=!0),void 0===c.rowdetailsheight&&(c.rowdetailsheight=200),void 0===c.rowdetails&&(c.rowdetails="<div></div>")),this.details[c.visibleindex]);u?(c.rowdetails=u.rowdetails,c.rowdetailsheight=u.rowdetailsheight,c.rowdetailshidden=u.rowdetailshidden,void 0===c.rowdetailshidden&&(c.rowdetailshidden=!0),void 0===c.rowdetailsheight&&(c.rowdetailsheight=200),void 0===c.rowdetails&&(c.rowdetails="<div></div>")):this.rowdetailstemplate||(c.rowdetails=null),r&&this.pageable&&null!=c.parentbounddata&&(null!=(d=i[c.parentbounddata.uniqueid])&&(n=this._findgroupstate(d.uniqueid),this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,c.parentbounddata,!n,!1),c.hidden=this.hiddens[c.visibleindex]),null!=d&&((c.parentrow=d).subrows[d.subrows.length++]=c)),c.hidden||(n=h.visibleindex,d=this.rowsheight,this.cardview&&(d=this.cardheight),this.heights[n]||(this.heights[n]=d),c.height=this.heights[n],this.rowdetails&&c.rowdetails&&!c.rowdetailshidden&&(c.height+=c.rowdetailsheight),i[c.uniqueid]=c,(s[l++]=c).top=e,e+=c.height,t.rows.replace(n,c))}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&0<this._pageviews.length&&(this._pageviews[0].height=e),this.rows.resumeupdate(),0<s.length&&(this._pagescache[this.dataview.pagenum]=s)}}},escapeHTML:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]})},sanitizeHTML:function(e){var t=this,i=new RegExp("<s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)[^>]*>(.*?)<s*/s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)>","ig");return String(e).replace(i,function(e){return t.escapeHTML(e)})},escape_HTML:function(e){return this.enableSanitizeAll||e&&(0<=e.indexOf("onclick")||0<=e.indexOf("onload")||0<=e.indexOf("onerror"))?this.escapeHTML(e):this.sanitizeHTML(e)},_updateaddnewrowui:function(e){for(var t=this,i="bottom"!=t.everpresentrowposition?t.addnewrowtop:t.addnewrowbottom,s=t.columns.records.length,r=0,l=0;l<s;l++)(o=t.columns.records[l]).addnewrowwidget&&re(o.addnewrowwidget).detach();for(l=0;l<s;l++){var o,a=(o=t.columns.records[l]).width,n=((a=a<o.minwidth?o.minwidth:a)>o.maxwidth&&(a=o.maxwidth),re(i[0].cells[l]));n.css("left",r);n.width()==a&&0,e&&0,n.width(a),n[0].left=r,o.addnewrowwidget&&(n.html(""),n.append(o.addnewrowwidget)),o.hidden&&o.hideable||o.adaptivehidden?n.css("display","none"):r+=a}var d=t.everpresentrowactions.split(" "),d=(t.addnewrowbutton.show(),t.addnewrowupdatebutton.show(),t.addnewrowresetbutton.show(),t.addnewrowdeletebutton.show(),-1==d.indexOf("add")&&-1==d.indexOf("addBottom")&&t.addnewrowbutton.hide(),-1==d.indexOf("update")&&t.addnewrowupdatebutton.hide(),-1==d.indexOf("reset")&&t.addnewrowresetbutton.hide(),-1==d.indexOf("delete")&&t.addnewrowdeletebutton.hide(),re(i.children()[0]));d.width(parseInt(r)+2),d.height(t.everpresentrowheight),d.css("max-height",t.everpresentrowheight+"px")},_removeaddnewrow:function(){for(var e=this,t=e.columns.records.length,i=0;i<t;i++){var s=e.columns.records[i];s.addnewrowwidget&&(s.destroyeverpresentrowwidget?s.destroyeverpresentrowwidget(s.addnewrowwidget):s.addnewrowwidget.remove(),s.addnewrowwidget=null)}e.addnewrowbutton&&e.addnewrowbutton.remove(),e.addnewrowupdatebutton&&e.addnewrowupdatebutton.remove(),e.addnewrowdeletebutton&&e.addnewrowdeletebutton.remove(),e.addnewrowresetbutton&&e.addnewrowresetbutton.remove(),e.addnewrowpopup&&(e.addnewrowpopup.remove(),e.addnewrowpopup=null),e.addnewrowtop&&(e.addnewrowtop.remove(),e.addnewrowtop=null),e.addnewrowbottom&&(e.addnewrowbottom.remove(),e.addnewrowbottom=null)},_updateaddnewrow:function(){var c=this,e="bottom"!=c.everpresentrowposition?c.addnewrowtop:c.addnewrowbottom,t=re('<div style="position: relative;" id="row000'+c.element.id+'"></div>'),i=0,u=c.columns.records.length,s=c.toThemeProperty("jqx-grid-cell"),r=(s=(s+=" "+c.toThemeProperty("jqx-grid-cell-add-new-row"))+(" "+c.toThemeProperty("jqx-grid-cell-filter-row")),u+10),l=new Array,g=(c.that,e[0].cells=l,t.height(c.everpresentrowheight),c.showfilterrow||"bottom"==c.everpresentrowposition?c.showfilterrow&&"bottom"!=c.everpresentrowposition&&e.css("max-height",c.everpresentrowheight-3+"px"):e.css("max-height",c.everpresentrowheight-1+"px"),t.css("max-height",c.everpresentrowheight+"px"),e.append(t),re("<div style='border-width: 1px; border-style: solid; padding: 5px; z-index: 99; display: none; position: absolute;'><div>").appendTo(re(document.body))),o=re("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+c.gridlocalization.addrowstring+"</button>"),a=re("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+c.gridlocalization.udpaterowstring+"</button>"),n=re("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+c.gridlocalization.deleterowstring+"</button>"),p=re("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+c.gridlocalization.resetrowstring+"</button>"),d=(g.addClass(c.toThemeProperty("jqx-popup")),g.addClass(c.toThemeProperty("jqx-rc-all")),g.addClass(c.toThemeProperty("jqx-fill-state-normal")),g.addClass(c.toThemeProperty("jqx-shadow")),g.append(o),g.append(a),g.append(n),g.append(p),c.everpresentrowactions.split(" "));-1==d.indexOf("add")&&-1==d.indexOf("addBottom")&&o.hide(),-1==d.indexOf("update")&&a.hide(),-1==d.indexOf("reset")&&p.hide(),-1==d.indexOf("delete")&&n.hide(),c.addnewrowpopup=g,c.addnewrowbutton=o,c.addnewrowupdatebutton=a,c.addnewrowdeletebutton=n,c.addnewrowresetbutton=p,o.jqxButton({template:"success",theme:c.theme}),n.jqxButton({template:"danger",theme:c.theme}),a.jqxButton({template:"primary",theme:c.theme}),p.jqxButton({template:"warning",theme:c.theme}),a.mousedown(function(e){for(var t={},i={},s=0;s<u;s++)(a=c.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),i[a.datafield]=n,a.datafield!=a.displayfield&&(i[a.datafield]=n.value,i[a.displayfield]=n.label));for(var r,l,o=!1,s=0;s<u;s++)(a=c.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),a.createeverpresentrowwidget&&a.validateeverpresentrowwidgetvalue&&(r=a.validateeverpresentrowwidgetvalue(a.displayfield,n,i),l=c.gridlocalization.validationstring,null!=r.message&&(l=r.message),("boolean"==typeof r?r:r.result)?(a.addnewrowwidget.attr("title",""),a.addnewrowwidget.removeClass(c.toThemeProperty("jqx-input-invalid"))):(n="invalid editor state",a.addnewrowwidget.attr("title",l),a.addnewrowwidget.addClass(c.toThemeProperty("jqx-input-invalid")))),"invalid editor state"===n&&(e.preventDefault(),e.stopPropagation(),o=!0));if(o)return g.hide(),void c.focus();for(var a,n,d,s=0;s<u;s++)(a=c.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),t[a.datafield]=n,a.datafield!=a.displayfield&&(t[a.datafield]=n.value,t[a.displayfield]=n.label),a.reseteverpresentrowwidgetvalue&&a.reseteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget));(0<c.selectedcells.length||0<c.selectedrowindexes.length)&&(d=0<=c.selectionmode.indexOf("cell")?c.getselectedcells()[0].rowindex:c.selectedrowindexes[0],(d=c.getrowdata(d))&&c.updaterow(d.uid,t)),g.hide(),c.focus()}),n.mousedown(function(e){var t;(0<c.selectedcells.length||0<c.selectedrowindexes.length)&&(t=0<=c.selectionmode.indexOf("cell")?c.getselectedcells()[0].rowindex:c.selectedrowindexes[0],(t=c.getrowdata(t))&&c.deleterow(t.uid));for(var i=0;i<u;i++){var s=c.columns.records[i];s.reseteverpresentrowwidgetvalue&&s.reseteverpresentrowwidgetvalue(s.displayfield,s.addnewrowwidget)}g.hide(),c.focus(),c.updateeverpresentrow()}),o.mousedown(function(e){for(var t={},i={},s=0;s<u;s++)(a=c.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),i[a.datafield]=n,a.datafield!=a.displayfield&&(i[a.datafield]=n.value,i[a.displayfield]=n.label),a.datafield!=a.displayfield&&(i[a.datafield]=n.label,i[a.displayfield]=n.value));for(var r,l,o=!1,s=0;s<u;s++)(a=c.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),a.createeverpresentrowwidget&&a.validateeverpresentrowwidgetvalue&&(r=a.validateeverpresentrowwidgetvalue(a.displayfield,n,i),l=c.gridlocalization.validationstring,null!=r.message&&(l=r.message),("boolean"==typeof r?r:r.result)?(a.addnewrowwidget.attr("title",""),a.addnewrowwidget.removeClass(c.toThemeProperty("jqx-input-invalid"))):(n="invalid editor state",a.addnewrowwidget.attr("title",l),a.addnewrowwidget.addClass(c.toThemeProperty("jqx-input-invalid")))),"invalid editor state"===n&&(e.preventDefault(),e.stopPropagation(),o=!0));if(o)return g.hide(),void c.focus();for(var a,n,s=0;s<u;s++)(a=c.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),t[a.datafield]=n,a.datafield!=a.displayfield&&(i[a.datafield]=n.label,i[a.displayfield]=n.value),a.reseteverpresentrowwidgetvalue&&a.reseteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget));var d=0<=c.everpresentrowactions.indexOf("addBottom")?"last":"first";c.addrow(null,t,d),g.hide(),c.focus()}),p.mousedown(function(e){for(var t=0;t<u;t++){var i=c.columns.records[t];i.reseteverpresentrowwidgetvalue&&i.reseteverpresentrowwidgetvalue(i.displayfield,i.addnewrowwidget),i.addnewrowwidget&&(i.addnewrowwidget.attr("title",""),i.addnewrowwidget.removeClass(c.toThemeProperty("jqx-input-invalid")))}g.hide(),c.focus()});for(var h=0;h<u;h++){var m,w,f=c.columns.records[h],v=f.width,b=((v=v<f.minwidth?f.minwidth:v)>f.maxwidth&&(v=f.maxwidth),re('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+s+'"></div>'));t.append(b),b.css("left",i),c.rtl?(b.css("z-index",r++),b.css("border-left-width","1px")):b.css("z-index",r--),"auto"==v&&(v=0),b[0].style.width=parseFloat(v)+"px",b[0].left=i,f.hidden&&f.hideable||f.adaptivehidden?b.css("display","none"):i+=v,l[l.length]=b[0],f.checkboxcolumn?(v=c.toThemeProperty("jqx-grid-cell"),v=(v+=" "+c.toThemeProperty("jqx-grid-cell-filter-row"))+(" "+c.toThemeProperty("jqx-grid-cell-pinned")),b.removeClass().addClass(v)):(v=!0,c.rtl?(c.groupable&&(m=c.showrowdetailscolumn&&c.rowdetails?1:0,c.groups.length+m+h>u-1&&(v=!1)),c.showrowdetailscolumn&&c.rowdetails&&h==u-1&&(v=!1)):(c.groupable&&(m=c.showrowdetailscolumn&&c.rowdetails?1:0,c.groups.length+m>h&&(v=!1)),c.showrowdetailscolumn&&c.rowdetails&&0==h&&(v=!1)),c.updateeverpresentrow=function(){var e,t=null;if((0<c.selectedcells.length||0<c.selectedrowindexes.length)&&(e=0<=c.selectionmode.indexOf("cell")?c.getselectedcells()[0].rowindex:c.selectedrowindexes[0],t=c.getrowdata(e)),t)for(var i=0;i<c.columns.records.length;i++){var s,r=c.columns.records[i];r.seteverpresentrowwidgetvalue&&(s=c.getcelltext(e,r.displayfield),r.seteverpresentrowwidgetvalue(r.addnewrowwidget,s))}},v&&(f.createeverpresentrowwidget?(f.addnewrowwidget=f.createeverpresentrowwidget(f.datafield,b,g,function(){o.trigger("mousedown")}),f.initeverpresentrowwidget&&f.initeverpresentrowwidget(f.datafield,b,g)):(c._measureElement("column"),(v=c.everpresentrowheight/2-c._columnheight/2)<0&&(v=6),v+="px","addButtonColumn"===f.datafield?(w=re('<div style="padding-bottom: 2px; text-align: center; margin-top: '+v+';"><a href="#">'+c.gridlocalization.addrowstring+"</a></div>"),b.append(w),w.mousedown(function(){o.trigger("mousedown")})):"resetButtonColumn"===f.datafield?(w=re('<div style="padding-bottom: 2px; text-align: center; margin-top: '+v+';"><a href="#">'+c.gridlocalization.resetrowstring+"</a></div>"),b.append(w),w.mousedown(function(){p.trigger("mousedown")})):function(t,e,i){var d,h=re('<input style="box-sizing: border-box; padding-right: 4px; padding-left: 4px; border:none;" autocomplete="off" type="textarea"/>');h[0].id=re.jqx.utilities.createId(),h.addClass(t.toThemeProperty("jqx-widget")),h.addClass(t.toThemeProperty("jqx-input")),h.addClass(t.toThemeProperty("jqx-widget-content")),h.addClass(t.toThemeProperty("jqx-enableselect")),h.addClass(t.toThemeProperty("jqx-grid-cell-add-new-row")),h.css("text-align",i.cellsalign),t.rtl&&h.css("direction","rtl"),t.disabled&&h.attr("disabled",!0),h.attr("disabled",!1),h.attr("placeholder",t.gridlocalization.everpresentrowplaceholder+i.text),h.appendTo(e),h.css("width","100%"),h.css("height",t.everpresentrowheight+"px"),h.css("line-height",t.everpresentrowheight+"px"),h.css("max-height",t.everpresentrowheight+"px"),h.css("margin","0px"),h.focus(function(){(0<c.selectedcells.length||0<c.selectedrowindexes.length)&&(0<=c.selectionmode.indexOf("cell")?c.getselectedcells()[0].rowindex:c.selectedrowindexes[0]),h.addClass(t.toThemeProperty("jqx-fill-state-focus"));var e=t.columns.records.indexOf(i),e=("columns"!==t.everpresentrowactionsmode&&g.css({display:"block",top:h.coord().top+t.everpresentrowheight-1,left:0<e?h.coord().left:h.coord().left-1}),g.children().width());return"right"===i.cellsalign?(e=o.width()+p.width(),g.children().css("left",e-e+"px")):g.children().css("left","0px"),t.content[0].scrollLeft=0,t.content[0].scrollTop=0,setTimeout(function(){t.content[0].scrollLeft=0,t.content[0].scrollTop=0},50),!1}),i.addnewrowwidget=h,i.reseteverpresentrowwidgetvalue||(i.reseteverpresentrowwidgetvalue=function(e,t){t.val(""),t.focus(),t.blur(),t.removeClass(c.toThemeProperty("jqx-input-invalid")),t.attr("title","")}),i.seteverpresentrowwidgetvalue||(i.seteverpresentrowwidgetvalue=function(e,t){e.val(t)}),i.geteverpresentrowwidgetvalue||((d=i).geteverpresentrowwidgetvalue=function(e,t,i){t=t.val();if(!1!==i&&d.validateeverpresentrowwidgetvalue){for(var s={},r=0;r<u;r++){var l,o=c.columns.records[r];o.geteverpresentrowwidgetvalue&&(l=o.geteverpresentrowwidgetvalue(o.displayfield,o.addnewrowwidget,!1),s[o.datafield]=l,o.datafield!=o.displayfield&&(s[o.datafield]=l.value,s[o.displayfield]=l.label))}var i=d.validateeverpresentrowwidgetvalue(d.displayfield,t,s),a=c.gridlocalization.validationstring;if(null!=i.message&&(a=i.message),!("boolean"==typeof i?i:i.result))return h.addClass(c.toThemeProperty("jqx-input-invalid")),h.attr("title",a),"invalid editor state";h.removeClass(c.toThemeProperty("jqx-input-invalid")),h.attr("title","")}var n,i="string",a=c.source.datafields||(c.source._source?c.source._source.datafields:null);if(a&&(n="",re.each(a,function(){if(this.name==d.displayfield)return this.type&&(n=this.type),!1}),n&&(i=n)),"number"===i){a=parseFloat(t);if(isNaN(a))return null}return"date"===i?re.jqx.dataFormat.tryparsedate(t,c.gridlocalization):"bool"===i||"boolean"===i?"true"===t||("1"==t||"false"!==t&&("0"!=t&&((!0===t||!1===t)&&t))):t}),h.keydown(function(e){13===e.keyCode&&(0<=c.everpresentrowactions.indexOf("add")?o.trigger("mousedown"):0<=c.everpresentrowactions.indexOf("update")?a.trigger("mousedown"):0<=c.everpresentrowactions.indexOf("delete")&&n.trigger("mousedown"))}),h.blur(function(){h.removeClass(t.toThemeProperty("jqx-fill-state-focus")),g.css("display","none")}),i.initeverpresentrowwidget&&i.initeverpresentrowwidget(i.datafield,e,g)}(this,b,f))))}re.jqx.browser.msie&&re.jqx.browser.version<8&&t.css("z-index",r--),t.width(parseFloat(i)+2),e.addClass(s),e.css("border-bottom-width","0px"),c.showfilterrow?e.css("border-top-width","0px"):e.css("border-top-width","1px"),e.css("box-sizing","border-box"),e.css("border-right-width","0px")},_gettableheight:function(){if(null!=this.tableheight)return this.tableheight;var e,t=this.host.height();return this.columnsheader&&(e=this.columnsheader.outerHeight(),this.showheader||(e=0)),t-=e,"visible"==this.hScrollBar[0].style.visibility&&(t-=this.hScrollBar.outerHeight()),this.pageable&&(t-=this.pager.outerHeight()),this._groupsheader()&&(t-=this.groupsheader.outerHeight()),this.showtoolbar&&(t-=this.toolbarheight),this.showfilterbar&&(t-=this.toolbarheight),this.showstatusbar&&(t-=this.statusbarheight),this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(t-=this.everpresentrowheight),0<t?this.tableheight=t:this.host.height()},_getpagesize:function(){return this.pageable?this.pagesize:this.virtualmode?(e=Math.round(this.host.height())+2*this.rowsheight,Math.round(e/this.rowsheight)):this.autoheight||this.autorowheight||this.cardview?0==this.dataview.totalrows?1:this.dataview.totalrows:this.dataview.totalrows<100&&this.dataview.totalrecords<100&&0<this.dataview.totalrows?this.dataview.totalrows:100;var e},_calculatevirtualheight:function(){this.that;var e=Math.round(this.host.height())+2*this.rowsheight,t=this._gettableheight(),e=Math.round(e/this.rowsheight),i=(this.heights=new Array,this.hiddens=new Array,this.details=new Array,this.expandedgroups=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array,Math.max(this.dataview.totalrows,this.dataview.totalrecords)),s=(this.pageable&&(i=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&this.autoheight?i=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(i=Math.max(this.dataview.totalrows,this.dataview.totalrecords))),i*this.rowsheight),r=(this.cardview&&(s=Math.ceil(i/this.cardsize)*this.rowsheight),0),l=0,o=0,a=this._getpagesize(),n=a*this.rowsheight,d=0;if(!this.pageable&&this.autoheight&&(e=i),0<i+a)for(;d<=i+a;){if(r+=n,d-a<i&&i<=d){var h=d-i;0<h&&(o-=n,this._pageviews[l-1]={top:o,height:n-h*this.rowsheight});break}this._pageviews[l++]={top:o,height:n},o=r,d+=a}if(1!=this.resizingGrid&&this.vScrollBar.jqxScrollBar({value:0}),"hidden"==this.hScrollBar.css("visibility")){var c=0;if(this.columns&&this.columns.records){for(d=0;d<this.columns.records.length;d++)c+=isNaN(this.columns.records[d].width)?this.columns.records[d].minwidth:this.columns.records[d].width;!isNaN(c)&&parseInt(c)>this.host.width()&&(t-=30)}}return t<s&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),"deferred"==this.scrollmode?this.vScrollBar.jqxScrollBar({max:s}):(this.vScrollBar.jqxScrollBar({max:s-t}),this.cardview&&this.vScrollBar.jqxScrollBar({step:this.cardheight}))):this.vScrollBar.css("visibility","hidden"),this.dataview.pagesize=a,this.dataview.updateview(),{visiblerecords:e,virtualheight:s}},_updatepageviews:function(){if(!this.updating()){this._pagescache=new Array,this._pageviews=new Array,this.tableheight=null;var e=this.that,t=Math.round(this.host.height())+2*this.rowsheight,t=Math.round(t/this.rowsheight),i=Math.max(this.dataview.totalrows,this.dataview.totalrecords),s=i*this.rowsheight,r=0,l=0,o=0,a=0,n=0,d=this._getpagesize();if(this.pageable)this._updatepagedview&&(s=this._updatepagedview(i,s,0)),this.autoheight&&this._arrange();else for(var h=0;h<i;h++){var c,u,g={index:h,height:this.heights[h],hidden:this.hiddens[h],details:this.details[h]};null==this.heights[h]&&(this.heights[h]=this.rowsheight,g.height=this.rowsheight),null==this.hiddens[h]&&(this.hiddens[h]=!1,g.hidden=!1),null==this.details[h]&&(this.details[h]=null),g.height!=e.rowsheight&&(s=(s-=e.rowsheight)+g.height),g.hidden?s-=g.height:(l+=g.height,c=0,this.rowdetails&&(this.rowdetailstemplate&&!g.details&&(void 0===(u="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate():this.rowdetailstemplate).rowdetailshidden&&(u.rowdetailshidden=!0),void 0===u.rowdetailsheight&&(u.rowdetailsheight=200),void 0===u.rowdetails&&(u.rowdetails="<div></div>"),g.details=u),g.details&&g.details.rowdetails&&!g.details.rowdetailshidden&&(l+=c=g.details.rowdetailsheight,s+=c)),r+=g.height+c),(d<=++n||h==i-1)&&(this._pageviews[o++]={top:a,height:l},a=r,n=l=0)}var p,m=this._gettableheight();m<s?(this.pageable&&this.gotopage&&(s=this._pageviews[0].height)<0&&(s=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(s<=m||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<s-m&&"deferred"!=this.scrollmode?(p=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:m=s-m}),m!=p&&this.vScrollBar.jqxScrollBar({value:0})):this.vScrollBar.jqxScrollBar({value:0,max:s})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})),this._arrange(),this.autoheight&&(t=Math.round(this.host.height()/this.rowsheight)),this.virtualsizeinfo={visiblerecords:t,virtualheight:s}}},updatebounddata:function(e){if("data"!=e&&"sort"!=e&&"filter"!=e&&"cells"!=e&&"pagechanged"!=e&&"pagesizechanged"!=e&&!this.virtualmode){if(this.virtualsizeinfo=null,this.columns&&this.columns.records)for(var t=0;t<this.columns.records.length;t++){var i=this.columns.records[t];i.destroywidget&&i.widget&&i.destroywidget&&i.destroywidget(i.widget)}this.showfilterrow&&this.filterable&&this.filterrow?(this.clearfilters&&this.clearfilters(!1),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.filterrow.remove(),this._filterrowcache=new Array,this.filterrow=null):this.filterable&&this.clearfilters&&this.clearfilters(!1),this.showeverpresentrow&&this._removeaddnewrow(),this.detailsVisibility=new Array,this.groupsVisibility=new Array,this.groupable&&(this.dataview.groups=[],this.groups=[]),this.pageable&&(this.pagenum=0,this.dataview.pagenum=0),this.sortable&&(this.sortcolumn=null,this.sortdirection="",this.dataview.sortfielddirection="",this.dataview.clearsortdata())}this.databind(this.source,e)},refreshdata:function(){this._refreshdataview(),this.render()},_updatevscrollbarmax:function(){var e,t;this._pageviews&&0<this._pageviews.length&&(e=this._pageviews[0].height,!this.virtualmode&&this.pageable||(e=this.virtualsizeinfo.virtualheight),(t=this._gettableheight())<e?(this.pageable&&this.gotopage&&(e=this._pageviews[0].height)<0&&(e=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(e<=t||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<e-t?this.vScrollBar.jqxScrollBar({max:e-t}):this.vScrollBar.jqxScrollBar({value:0,max:e})):(this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})))},_refreshdataview:function(){this.dataview.refresh()},refresh:function(e){1==e||re.jqx.isHidden(this.host)||null!=this.virtualsizeinfo&&(this._cellscache=new Array,this._renderrows(this.virtualsizeinfo),this._updatesize())},render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null),this.render()},_preparecolumngroups:function(){var e=this.columnsheight;if(this.columngroups){if(this.columnshierarchy=new Array,this.columngroups.length){for(var s=this,t=0;t<this.columngroups.length;t++)this.columngroups[t].parent=null,this.columngroups[t].groups=null;for(t=0;t<this.columns.records.length;t++)this.columns.records[t].parent=null,this.columns.records[t].groups=null;function i(e){for(var t=0;t<s.columngroups.length;t++){var i=s.columngroups[t];if(i.name===e)return i}return null}for(t=0;t<this.columngroups.length;t++)(d=this.columngroups[t]).groups||(d.groups=null),d.parentgroup&&(r=i(d.parentgroup))&&((d.parent=r).groups||(r.groups=new Array),-1===r.groups.indexOf(d)&&r.groups.push(d));for(var r,t=0;t<this.columns.records.length;t++)(d=this.columns.records[t]).columngroup&&(r=i(d.columngroup))&&(r.groups||(r.groups=new Array),-1===(d.parent=r).groups.indexOf(d)&&r.groups.push(d));for(var l=0,t=0;t<this.columns.records.length;t++){var o=d=this.columns.records[t];for(d.level=0;o.parent;)o=o.parent,d.level++;for(var o=d,a=d.level,l=Math.max(l,d.level);o.parent;)(o=o.parent)&&(o.level=--a)}for(var n=function(e){var t=new Array;if(e.columngroup&&t.push(e),e.groups)for(var i=0;i<e.groups.length;i++)if(e.groups[i].columngroup)t.push(e.groups[i]);else if(e.groups[i].groups)for(var s=n(e.groups[i]),r=0;r<s.length;r++)t.push(s[r]);return t},t=0;t<this.columngroups.length;t++){for(var d=this.columngroups[t],h=n(d),c=(d.columns=h,new Array),u=0,g=0;g<h.length;g++)c.push(this.columns.records.indexOf(h[g])),h[g].pinned&&u++;if(0!=u)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");c.sort(function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:t<e?1:0});for(var p=1;p<c.length;p++)if(c[p]!=c[p-1]+1)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columngroupslevel=1+l,e=this.columngroupslevel*this.columnsheight}return e},_render:function(e,t,i,s,r){if(null!=this.dataview&&!this._loading&&!this._batchupdate){var l,o;if(re.jqx.isHidden(this.host))return(l=this).___hiddenTimer&&(clearInterval(l.___hiddenTimer),l.___hiddenTimer=null),void(this.___hiddenTimer=setInterval(function(){re.jqx.isHidden(l.host)||(clearInterval(l.___hiddenTimer),l.render())},300));null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1),this.validationpopup=null,this._removeHandlers(),this._addHandlers(),this._initializeRows(),this._requiresupdate=null==t||t,this._newmax=null,i&&(this._requiresupdate||0!=s&&this._initmenu(),null==this.columns?this.columns=new re.jqx.collection(this.element):((o=this).columns&&"observableArray"===this.columns.name&&(this.columns.notifier=function(e){function t(){o.columns=o._columns,o.render()}switch(e.type){case"add":t();break;case"update":if("index"===e.name){for(var i in o.beginupdate(),e.newValue)o.setcolumnproperty(e.newValue.datafield,i,e.newValue[i]);o.endupdate()}else{var s=e.path.split(".");o.setcolumnproperty(o.columns[s[0]].datafield,e.name,e.newValue)}break;case"delete":t()}}),this.columngroups&&"observableArray"===this.columngroups.name&&(this.columngroups.notifier=function(e){o.render()}),this._initializeColumns())),this.tableheight=null,this._pagescache=new Array,this._pageviews=new Array,this.visiblerows=new Array,this.hittestinfo=new Array,this._requiresupdate&&(this._clearcaches(),1==s&&this._initmenu()),this.virtualsizeinfo=null,this.prerenderrequired=!0,(this.groupable&&0<this.groups.length&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,this.detailboundrows=new Array,this.details=new Array,re.jqx.utilities.html(this.gridcontent,""),this.gridcontent=null),this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors(),i?(this.filterrow&&this.filterrow.detach(),re.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||re('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&re.jqx.utilities.html(this.gridcontent,""),this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||re('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),this.gridcontent.remove();this.columnsheight;t=this._preparecolumngroups();this.showfilterrow&&this.filterable?(this.columnsheader.height(t+this.filterrowheight),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&this.columnsheader.height(t+this.filterrowheight+this.everpresentrowheight)):this.showeverpresentrow&&"bottom"!==this.everpresentrowposition?this.columnsheader.height(t+this.everpresentrowheight):this.columnsheader.height(t),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._arrange(),this._initgroupsheader&&this._initgroupsheader(),this.selectionarea=this.selectionarea||re("<div style='z-index: 9999; visibility: hidden; position: absolute;'></div>"),this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea")),this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.content.append(this.selectionarea),this.tableheight=null,this.rendergridcontent(!1,i),0<this.groups.length&&this.groupable&&(s=this.vScrollBar[0].style.visibility,this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.vScrollBar[0].style.visibility!=s&&(this._updatecolumnwidths(),this._updatecellwidths()),this.suspendgroupevents=!1),this.pageable&&this.updatepagerdetails&&(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo))),this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this._addoverlayelement(),"deferred"==this.scrollmode&&this._addscrollelement(),this.showfilterrow&&this.filterable&&this.filterrow&&(null==r||1==r)&&this._updatelistfilters(!i),(this.filterable&&"simple"===this.filtermode||"default"===this.filtermode&&this.showfilterbar)&&this._renderfilter(),this.rendered&&this.rendered("full"),this.__isRendered=!0}},_addoverlayelement:function(){var e,t,i=re.jqx.utilities.getBrowser();("msie"==i.browser&&parseInt(i.version)<9||this.isTouchDevice())&&(this._overlayElement&&this._overlayElement.remove(),this._overlayElement=re("<div class='jqxgrid-overlay' style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._overlayElement.css("background","white"),this._overlayElement.css("z-index",180),this._overlayElement.css("opacity",.001),this.isTouchDevice()?"hidden"!==this.vScrollBar.css("visibility")||"hidden"!==this.hScrollBar.css("visibility")?(i=0,"checkbox"==this.selectionmode&&(i+=30),(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0))),e=this._overlayElement.css("left"),this._overlayElement.css("left",e+i),this.cardview&&(this.content.prepend(this._overlayElement),(t=this).host.on("mouseup",function(){t._overlayElement.css("visibility","visible")}),this._overlayElement[0].onmouseup=function(e){t._overlayElement.css("visibility","hidden"),e.stopPropagation()})):this._overlayElement&&this._overlayElement.remove():this.content.prepend(this._overlayElement)),this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove(),this._scrollelementoverlay&&this._scrollelementoverlay.remove(),this._scrollelementoverlay=re("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._scrollelementoverlay.css("background","black"),this._scrollelementoverlay.css("z-index",1800),this._scrollelementoverlay.css("opacity",.1),this._scrollelement=re("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'></span>"),this._scrollelement.css("z-index",1900),this._scrollelement.addClass(this.toThemeProperty("jqx-button")),this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all")),this._scrollelement.addClass(this.toThemeProperty("jqx-shadow")),this.content.prepend(this._scrollelement),this.content.prepend(this._scrollelementoverlay)},_postrender:function(e){if(("filter"==e||"sort"==e||"group"==e)&&this.rowdetails&&this.detailsVisibility&&0<this.detailsVisibility.length){this._detailsUpdate=!0;for(var t=0;t<this.details.length;t++)this.details[t]&&(this.details[t].rowdetailshidden=!0);if(!this._loading)for(t=0;t<this.detailsVisibility.length;t++)!1===this.detailsVisibility[t]?this.showrowdetails(t):!0===this.detailsVisibility[t]&&this.hiderowdetails(t);this._detailsUpdate=!1,this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}if(this.groupable&&0<this.groups.length)if("filter"==e||"sort"==e)for(t=0;t<this.dataview.loadedgroups.length;t++){var i,s,r=this.dataview.loadedgroups[t],l=0;for(i in this.groupsVisibility)i==r.group&&this.groupsVisibility[i]&&(this._setgroupstate(r,!0,!1),l++);0<l&&(s=this.vScrollBar[0].style.visibility,this.rendergridcontent(!!1,!1),s==this.vScrollBar[0].style.visibility&&!this._hiddencolumns||(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)))}else"group"==e&&(this.groupsVisibility=new Array)},rendergridcontent:function(e,t){if(this.updating())return!1;this._requiresupdate=e=null==e?!1:e;var i,s,e=this.prerenderrequired,r=(this.prerenderrequired&&this._arrange(),this.that);return null==(t=t)&&(t=!0),this.tableheight=null,r.virtualsizeinfo=r.virtualsizeinfo||r._calculatevirtualheight(),r.pageable&&!r.autoheight&&r.dataview.totalrows<r.pagesize&&(r._requiresupdate=!0),t?r._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn()),r._renderrows(r.virtualsizeinfo),this.gridcontent&&(0!=this.gridcontent[0].scrollTop&&(this.gridcontent[0].scrollTop=0),0!=this.gridcontent[0].scrollLeft&&(this.gridcontent[0].scrollLeft=0)),e&&(t=this.tableheight,this._arrange(),t!=this.tableheight&&this.autoheight&&r._renderrows(r.virtualsizeinfo)),this.rtl&&this._renderhorizontalscroll(),this.autosavestate&&null!=this.initializedcall&&this.savestate&&this.savestate(),this.adaptive&&this.element.offsetWidth<=this.adaptivewidth?(i=0,s=r.element.offsetWidth-2,re.each(this.columns.records,function(e,t){if(i+=this.width,"adaptive"===this.columntype)return!0;s<=i&&(this.adaptivehidden=!0)}),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)):this.adaptive&&(re.each(this.columns.records,function(e,t){if("adaptive"===this.columntype)return!0;this.adaptivehidden=!1}),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),!0},_updatecolumnwidths:function(){var l=this.host.width(),o=l,a="";if(null!=this.columns&&null!=this.columns.records){var i,n=this.that,r=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth,e=this.adaptive&&this.element.offsetWidth<=this.adaptivewidth,d=0,e=(e&&(i=1,re.each(this.columns.records,function(e,t){this.adaptivehidden&&i++}),e=0<this.vScrollBar[0].offsetWidth?this.vScrollBar[0].offsetWidth+4:0,"hidden"==this.vScrollBar.css("visibility")&&(e=0),h=this.columns.records.length-i,d=(this.element.offsetWidth-32-e)/h),re.each(this.columns.records,function(e,t){var i,s;this.hidden&&this.hideable||this.adaptivehidden||(-1!=this.width.toString().indexOf("%")||null!=this._percentagewidth?(i="hidden"==n.vScrollBar[t=0].style.visibility?0:n.scrollbarsize+5,!n.scrollbarautoshow&&0!=n.scrollbarsize||(i=0),s=o,t=parseFloat(this.width)*s/100,i+=r,(t=(t=null!=this._percentagewidth?parseFloat(this._percentagewidth)*(s-i)/100:t)<this.minwidth&&"auto"!=this.minwidth?this.minwidth:t)>this.maxwidth&&"auto"!=this.maxwidth&&(t=this.maxwidth),l-=t):"auto"==this.width||this._width?a+=this.text:l-=this.width)}),this._gettableheight());if(!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>e)if(this.groupable&&0<this.groups.length)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var t=this.dataview.loadedrootgroups.length*this.rowsheight;if(this.pageable)for(var s=0;s<this.dataview.rows.length;s++)this.dataview.rows[s].group&&0===this.dataview.rows[s].level&&(t+=this.rowsheight);(e<t||"visible"==this.vScrollBar.css("visibility"))&&(l-=this.scrollbarsize+5,o-=this.scrollbarsize+5)}else l-=this.scrollbarsize+5,o-=this.scrollbarsize+5;else"hidden"!=this.vScrollBar.css("visibility")&&0<this.scrollbarsize&&(l-=this.scrollbarsize+5,o-=this.scrollbarsize+5);var h,c,u,g,r=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;o-=r,!this.columnsheader||0!=(h=this.columnsheader.find("#columntable"+this.element.id)).length&&(g=c=0,re.each((u=this).columns.records,function(e,t){var i=re(this.element),s=(this.hidden||this.adaptivehidden||"none"!==this.element.style.display||(this.element.style.display="block"),this.adaptivehidden&&(this.element.style.display="none"),!1),r=this.width;-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(r=null!=this._percentagewidth?parseFloat(this._percentagewidth)*o/100:parseFloat(this.width)*o/100,s=!0),0<d&&"adaptive"!==this.columntype?(i.width(d),this.adaptivewidth=d):"auto"==this.width||this._width||s?s?(r<this.minwidth&&"auto"!=this.minwidth&&(r=this.minwidth,this.width=r),r>this.maxwidth&&"auto"!=this.maxwidth&&(r=this.maxwidth,this.width=r),parseInt(i[0].style.width)!=r&&(i.width(r),this.width=r)):(s=Math.floor(l*(this.text.length/a.length)),l-(g+=s)<3&&l!=g&&.01<l-g?l-g==1?s++:s+=2:e==n.columns.records.length-1&&g<l&&(s+=l-g),isNaN(s)&&(s=this.minwidth),(s=(s=isNaN(s)?this.minwidth:s)==1/0?0:s)<0&&(r=re("<span>"+u.escape_HTML(this.text)+"</span>"),re(document.body).append(r),s=10+r.width(),r.remove()),(s=s<this.minwidth?this.minwidth:s)>this.maxwidth&&(s=this.maxwidth),this._width="auto",this.width=s,i.width(this.width)):parseInt(i[0].style.width)!=this.width&&i.width(this.width),parseInt(i[0].style.left)!=c&&i.css("left",c),this.hidden&&this.hideable||this.adaptivehidden||(0<d&&"adaptive"!==this.columntype?c+=d:c+=this.width),this._requirewidthupdate=!0}),this.columnsheader.width(2+c),h.width(this.columnsheader.width()),this.columnsheader[0].style.visibility=0==c?"hidden":"inherit",this._resizecolumngroups(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),this.showeverpresentrow&&(("bottom"!==this.everpresentrowposition?this.addnewrowtop:this.addnewrowbottom).width(this.columnsheader.width()),this._updateaddnewrowui()),this.autowidth&&this._arrange())}},_rendercolumnheaders:function(){var v=this.that;if(this.cardview?(0<v.cardviewcolumns.length&&re.each(this.columns.records,function(e,t){if("string"!=typeof v.cardviewcolumns[0]){for(var i=!1,s=0;s<v.cardviewcolumns.length;s++)v.cardviewcolumns[s].datafield===this.datafield&&(this.__width=this.width,this.width=v.cardviewcolumns[s].width||"",i=!0);i||(this.__hidden=this.hidden,this.hidden=!0)}else v.cardviewcolumns[e]?(this.__width=this.width,this.width=v.cardviewcolumns[e]):this.hideable&&(this.__hidden=this.hidden,this.hidden=!0)}),this._cardviewmode=!0):this._cardviewmode&&(re.each(this.columns.records,function(e,t){void 0!==this.__width&&(this.width=this.__width,delete this.__width),void 0!==this.__hidden&&(this.hidden=this.__hidden,delete this.__hidden)}),this._cardviewmode=!1),!this.prerenderrequired)return this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),void(this.showeverpresentrow&&(("bottom"!==this.everpresentrowposition?this.addnewrowtop:this.addnewrowbottom).width(this.columnsheader.width()),this._updateaddnewrowui()));this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var b=re('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>'),x=(b[0].cells=new Array,0),y=0,_="",q=this.host.width(),j=q,s=new Array,r=new Array,l=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(re.each(this.columns.records,function(e,t){var i;this.hidden&&this.hideable||this.adaptivehidden||("auto"==this.width||this._width?_+=this.text:this.width<this.minwidth&&"auto"!=this.minwidth?q-=this.minwidth:this.width>this.maxwidth&&"auto"!=this.maxwidth?q-=this.maxwidth:-1!=this.width.toString().indexOf("%")?(i="hidden"==v.vScrollBar[t=0].style.visibility?0:v.scrollbarsize+5,i+=l,(t=(t=parseFloat(this.width)*(j-i)/100)<this.minwidth&&"auto"!=this.minwidth?this.minwidth:t)>this.maxwidth&&"auto"!=this.maxwidth&&(t=this.maxwidth),q-=t):("string"==typeof this.width&&(this.width=parseInt(this.width)),q-=this.width)),this.pinned||this.grouped||this.checkboxcolumn?(v._haspinned&&(this.pinned=!0),s[s.length]=this):r[r.length]=this}),this.rtl){var e=0;s.reverse();for(t=this.columns.records.length-1;t>=this.columns.records.length-s.length;t--)this.columns.replace(t,s[e++]);for(i=0;i<r.length;i++)this.columns.replace(i,r[i])}else{for(var t=0;t<s.length;t++)this.columns.replace(t,s[t]);for(var i=0;i<r.length;i++)this.columns.replace(s.length+i,r[i])}var S=this.headerZIndex,z=v.groupable?v.groups.length:0,k=(this.rowdetails&&this.showrowdetailscolumn&&z++,v.columnsheader.height()),o=(this.showfilterrow&&(this.columngroups?k-=this.filterrowheight:k=this.columnsheight),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&(this.columngroups?k-=this.everpresentrowheight:k=this.columnsheight),this._gettableheight());if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>o&&!this.scrollbarautoshow)if(this.groupable&&0<this.groups.length)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var a=0;if(this.pageable){if(this.pageable)for(var n=0;n<this.dataview.rows.length;n++)this.dataview.rows[n].group&&0===this.dataview.rows[n].level&&(a+=this.rowsheight)}else a=this.dataview.loadedrootgroups.length*this.rowsheight;o<a&&(q-=this.scrollbarsize+5,j-=this.scrollbarsize+5)}else q-=this.scrollbarsize+5,j-=this.scrollbarsize+5;else!this.autoheight&&0<this.scrollbarsize&&(q-=this.scrollbarsize+5,j-=this.scrollbarsize+5);j-=l;var C=document.createDocumentFragment(),T=0;re.each(this.columns.records,function(e,t){this.height=v.columnsheight,v.columngroups&&v.columngroups.length&&(this.height=(this.datafield,r=this,l=v.columngroupslevel*v.columnsheight,l-=r.level*v.columnsheight),k=this.height);var i,s,r=v.toTP("jqx-grid-column-header")+" "+v.toTP("jqx-widget-header"),l=(v.rtl&&(r+=" "+v.toTP("jqx-grid-column-header-rtl")),v.rtl?150+S+1:150+S-1),o=v.rtl?S++:S--,a=re('<div role="columnheader" style="z-index: '+o+';position: absolute; height: 100%;" class="'+r+'"><div style="height: 100%; width: 100%;"></div></div>'),o=(v.columngroups&&(a[0].style.height=k+"px",a[0].style.bottom="0px",this.pinned&&(a[0].style.zIndex=l)),this.uielement=a,""!=this.classname&&this.classname&&a.addClass(this.classname),this.width),n=!1,d=(null===this.width&&(this.width="auto"),-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(o=null!=this._percentagewidth?parseFloat(this._percentagewidth)*j/100:parseFloat(this.width)*j/100,n=!0),"auto"==this.width||this._width||n?n?((o=o<this.minwidth&&"auto"!=this.minwidth?this.minwidth:o)>this.maxwidth&&"auto"!=this.maxwidth&&(o=this.maxwidth),null!=this._percentagewidth&&-1==this.width.toString().indexOf("%")||(this._percentagewidth=this.width),a.width(o),this.width=o):this.hidden||this.adaptivehidden||(n=Math.floor(q*(this.text.length/_.length)),q-(T+=n)<3&&q!=T&&.01<q-T?q-T==1?n++:n+=2:e==v.columns.records.length-1&&T<q&&(n+=q-T),(n=isNaN(n)?this.minwidth:n)<0&&(h=re("<span>"+this.text+"</span>"),re(document.body).append(h),n=10+h.width(),h.remove()),(n=n<this.minwidth?this.minwidth:n)>this.maxwidth&&(n=this.maxwidth),this._width="auto",this.width=n,o=this.width,a.width(this.width)):(o<this.minwidth&&"auto"!=this.minwidth&&(o=this.minwidth,this.width=o),o>this.maxwidth&&"auto"!=this.maxwidth&&(o=this.maxwidth,this.width=o),a[0].style.width=parseInt(o)+"px"),(this.hidden&&this.hideable||this.adaptivehidden)&&a.css("display","none"),re(a.children()[0])),h=v.rtl?v.toTP("jqx-grid-column-menubutton")+" "+v.toTP("jqx-grid-column-menubutton-rtl"):v.toTP("jqx-grid-column-menubutton"),n=(h+=" "+v.toTP("jqx-icon-arrow-down"),re('<div style="height: '+k+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+h+'" style="width: 100%; height:100%;"></div></div>')),h=(v.enableanimations||n.css("margin-left",-16),v.rtl&&n.css("left","0px"),this.columnsmenu=n[0],b[0].cells[e]=a[0],n[0].style.width=parseInt(v.columnsmenuwidth)+"px",v.columnsmenu),c=!1,u=!1,g=v.groupable&&0<z&&x<z||v.rowdetails&&x<z;if(v.rtl&&(g=v.groupable&&0<z&&x<z||v.rowdetails&&x<z,g&=e>v.columns.records.length-1-z),g?(x++,h&=!1,this.sortable=!1,u=!(this.editable=!1)):(null==(i=null!=this.renderer?this.renderer(this.text,this.align,k):v._rendercolumnheader(this.text,this.align,k,v))&&(i=v._rendercolumnheader(this.text,this.align,k,v)),null!=this.renderer&&(i=re(i)),h&=!0,c=!0),v.WinJS?MSApp.execUnsafeLocalFunction(function(){d.append(re(i))}):this.renderer?d.append(re(i)):i&&(d[0].innerHTML=i),null!=i&&(s=re('<div class="iconscontainer" style="height: '+k+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+v.toTP("jqx-widget-header")+'" style="height: '+k+'px; float: right; display: none; width: 16px;"><div class="'+v.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+v.toTP("jqx-widget-header")+'" style="height: '+k+'px; float: right; display: none; width: 16px;"><div class="'+v.toTP("jqx-grid-column-sortascbutton")+" "+v.toTP("jqx-icon-arrow-up")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+v.toTP("jqx-widget-header")+'" style="height: '+k+'px; float: right; display: none; width: 16px;"><div class="'+v.toTP("jqx-grid-column-sortdescbutton")+" "+v.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div><div class="sorticon '+v.toTP("jqx-widget-header")+'" style="height: '+k+'px; float: right; visibility: hidden; width: 16px;"><div class="'+v.toTP("jqx-grid-column-sorticon")+" "+v.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div></div>'),n.addClass(v.toTP("jqx-widget-header")),d.append(s),e=s.children(),this.sorticon=e[3],this.sortasc=e[1],this.sortdesc=e[2],this.filtericon=e[0],this.iconscontainer=s,v.rtl&&(s.css("margin-left","0px"),s.css("left","0px"),re(this.sorticon).css("float","left"),re(this.sortasc).css("float","left"),re(this.filtericon).css("float","left"),re(this.sortdesc).css("float","left")),!v.autoshowfiltericon&&this.filterable&&re(this.filtericon).css("display","block")),this.element=a[0],h&&(v._handlecolumnsmenu(v,d,a,n,this),this.menu||n.hide()),C.appendChild(a[0]),v.groupable&&c){if(a[0].id=v.dataview.generatekey(),!v._handlecolumnstogroupsdragdrop)throw new Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");v._handlecolumnstogroupsdragdrop(this,a)}v.columnsreorder&&this.draggable&&v._handlecolumnsdragreorder&&v._handlecolumnsdragreorder(this,a);var p,m=this,w=(m._applyStyle(),v.addHandler(a,"mouseenter",function(e){m.hovered=!0,m._applyStyle()}),v.addHandler(a,"mouseleave",function(e){m.hovered=!1,m._applyStyle()}),function(e,t,i){if(e.selectable){var s=v.getrows();if(void 0===e.selected&&(e.selected=!1),t.shiftKey&&void 0!==v._clickedcolumn||(v._clickedcolumn=e),t.shiftKey&&v._clickedcolumn&&void 0===i){var r=v.columns.records.indexOf(v._clickedcolumn),l=v.columns.records.indexOf(e),o=Math.min(r,l),a=Math.max(r,l);v.clearselection();for(var n=o;n<=a;n++)w(v.columns.records[n],t,!0);v._renderrows(this.virtualsizeinfo)}else{i?e.selected=!0:(t.ctrlKey||v.clearselection(),e.selected=!e.selected);for(n=0;n<s.length;n++)v._applycellselection(s[n].boundindex,e.displayfield,e.selected,!1,!1);e.selected?e.element.setAttribute("selected",""):e.element.removeAttribute("selected"),e._applyStyle(),void 0===i&&(v.virtualsizeinfo=v._calculatevirtualheight(),v._renderrows(v.virtualsizeinfo))}}});if(v.addHandler(a,"click",function(e){if(m.checkboxcolumn)return!0;if(0<v.sorttogglestates&&v._togglesort&&!v._loading){if(v.suspendClick)return!0;("many"!==v.sortmode||"many"===v.sortmode&&!v.sortmodekey||"many"===v.sortmode&&"Control"===v.sortmodekey&&e.ctrlKey||"many"===v.sortmode&&"ctrlKey"===v.sortmodekey&&e.ctrlKey)&&v._togglesort(m)}w(m,e),e.preventDefault(),v._raiseEvent(7,{column:m.getcolumnproperties(),datafield:m.datafield,originalEvent:e})}),m.toggleSelection=w,m.resizable&&v.columnsresize&&!u&&(p=!1,g="mousemove",v.isTouchDevice()&&!0!==v.touchmode&&(p=!0,g=re.jqx.mobile.getTouchEventName("touchstart")),v.addHandler(a,g,function(e){var t=parseInt(e.pageX),i=5,s=parseInt(a.coord().left);if(v.hasTransform&&(s=re.jqx.utilities.getOffset(a).left),v.resizing)return!0;if(v._handlecolumnsresize){if(p)return i=40,(t=v.getTouches(e)[0].pageX)>=s+m.width-i?(v.resizablecolumn={columnelement:a,column:m},a.css("cursor","col-resize")):(a.css("cursor",""),v.resizablecolumn=null),!0;e=m.width;if(s+(e=v.rtl?0:e)-i<=t){if(t<=s+e+i)return v.resizablecolumn={columnelement:a,column:m},a.css("cursor","col-resize"),!1;a.css("cursor",""),v.resizablecolumn=null}else a.css("cursor",""),t<s+e-i&&(m._animating||m._menuvisible||a.mouseenter()),v.resizablecolumn=null}})),a.css("left",y),this.hidden&&this.hideable||this.adaptivehidden||(y+=o),m.rendered&&m.rendered(re(d[0].firstChild),m.align,k)&&null!=s&&s.hide(),m.checkboxcolumn){if(s&&s.hide(),!v.host.jqxCheckBox)throw new Error("jqxGrid: Missing reference to jqxcheckbox.js");d.html('<div style="cursor: pointer; margin-left: 3px; top: 50%; margin-top: -9px; position: relative;"></div>');var f=d.find("div:first"),e=(f.jqxCheckBox({rippleEffect:!1,_canFocus:!1,disabled:v.disabled,disabledContainer:!0,theme:v.theme,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0}),f.addClass(v.toThemeProperty("jqx-checkbox")),(m.checkboxelement=f).data().jqxCheckBox.instance);v._checkboxcolumn=m,e.updated=function(e,t,i){v._checkboxcolumnupdating=!0,v.disabled&&(f.jqxCheckBox({disabled:v.disabled}),t=i),t?v.selectallrows():v.unselectallrows(),v._checkboxcolumnupdating=!1}}}),0<y?this.columnsheader.width(2+y):this.columnsheader.width(y),b[0].appendChild(C),this.columnsrow=b,v.columnsheader.append(b),this.showfilterrow&&this._updatefilterrow&&(this.columngroups?b.height(this.columngroupslevel*this.columnsheight):b.height(this.columnsheight),this.filterrow||((o=re("<div style='position: relative !important; '></div>"))[0].id="filterrow."+this.element.id,o.height(this.filterrowheight),this.filterrow=o),this.filterrow.width(2+y),this.columnsheader.append(this.filterrow),this._updatefilterrow()),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition?(this.columngroups?b.height(this.columngroupslevel*this.columnsheight):b.height(this.columnsheight),this.addnewrowtop||((o=re("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>"))[0].id="addnewrowtop."+this.element.id,o.height(this.everpresentrowheight),this.addnewrowtop=o),this.addnewrowtop.width(2+y),"topAboveFilterRow"==this.everpresentrowposition&&this.filterrow?this.addnewrowtop.insertBefore(this.filterrow):this.columnsheader.append(this.addnewrowtop),this._updateaddnewrow()):this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(this.addnewrowbottom||((o=re("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>"))[0].id="addnewrowbottom."+this.element.id,o.height(this.everpresentrowheight),this.addnewrowbottom=o),this.addnewrowbottom.width(2+y),this.addnewrow.append(this.addnewrowbottom),this._updateaddnewrow()),b[0].style.visibility=0==y?"hidden":"inherit",b.width(y),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsreorder&&this._handlecolumnsreorder(),this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this._handlecolumnsresize&&this._handlecolumnsresize(),this.columngroups&&this._rendercolumngroups(),this._updatecheckboxselection&&this._updatecheckboxselection()},_rendercolumngroups:function(){if(this.columngroups){for(var e=0,t=0;t<this.columns.records.length;t++)this.columns.records[t].pinned&&e++;var i=this.headerZIndex-e+this.columns.records.length,s=this.that,r=s.toTP("jqx-grid-column-header")+" "+s.toTP("jqx-grid-columngroup-header")+" "+s.toTP("jqx-widget-header"),l=(s.rtl&&(r+=" "+s.toTP("jqx-grid-columngroup-header-rtl")),this.columnsheader.find("#columntable"+this.element.id));l.find("jqx-grid-columngroup-header").remove();for(var o=0;o<this.columngroupslevel-1;o++)for(t=0;t<this.columngroups.length;t++){var a,n,d,h,c,u,g=this.columngroups[t],p=g.level;p===o&&(p=p*this.columnsheight,a=99999,g.groups&&(n=function(e){for(var t=0,i=0;i<e.groups.length;i++){var s=e.groups[i];s.groups?t+=n(s):s.hidden||(t+=s.width,a=Math.min(parseFloat(s.element.style.left),a))}return t},g.width=n(g),g.left=a,d=this.columnsheight,h=i--,h=re('<div role="columnheader" style="z-index: '+h+';position: absolute;" class="'+r+'"></div>'),c=re(this._rendercolumnheader(g.text,g.align,this.columnsheight,this)),g.renderer&&(c=re("<div style='height: 100%; width: 100%;'></div>"),u=g.renderer(g.text,g.align,d),c.html(u)),h.append(c),h[0].style.left=a+"px",0===a&&(h[0].style.borderLeftColor="transparent"),this.showcolumnheaderlines||(h[0].style.borderRightColor="transparent",h[0].style.borderBottomColor="transparent",h[0].style.boxShadow="none"),h[0].style.top=p+"px",h[0].style.height=d+"px",h[0].style.width=-1+g.width+"px",l.append(h),g.element=h,g.rendered&&g.rendered(c,g.align,d)))}}},_resizecolumngroups:function(){if(this.columngroups)for(var e=0;e<this.columngroups.length;e++){var r,t,i,s=this.columngroups[e],l=s.level*this.columnsheight,o=99999;s.groups&&(s.width=(r=function(e){for(var t=0,i=0;i<e.groups.length;i++){var s=e.groups[i];s.groups?t+=r(s):s.hidden||(t+=s.width,o=Math.min(parseFloat(s.element.style.left),o))}return t})(s),s.left=o,t=this.columnsheight,(i=s.element)[0].style.left=o+"px",i[0].style.top=l+"px",i[0].style.height=t+"px",i[0].style.width=-1+s.width+"px")}},_handlecolumnsmenu:function(u,e,l,g,p){u.dragmousedown=null,g[0].id=u.dataview.generatekey(),e.append(g),l[0].columnsmenu=g[0],p.element=l[0];function t(){if(p.menu&&(u.gridmenu||u._initmenu(),!u.disabled)){for(var e=0;e<u.columns.records.length;e++)u.columns.records[e].datafield!=p.datafield&&(u.columns.records[e]._menuvisible=!1);var t=g.coord(!0),i=g.height();if(!m&&(m=!0,w==p.datafield))return u._closemenu();var s=u.host.coord(!0);if(u.hasTransform&&(s=re.jqx.utilities.getOffset(u.host),t=re.jqx.utilities.getOffset(g)),s.left+u.host.width()>parseInt(t.left)+u.gridmenu.width()?u.gridmenu.jqxMenu("open",t.left,t.top+i):u.gridmenu.jqxMenu("open",g.width()+t.left-u.gridmenu.width(),t.top+i),u.gridmenu.width()<100&&u._arrangemenu(),u.adaptive&&u.element.offsetWidth<u.adaptivewidth){u.gridmenu.jqxMenu("close"),u.gridmenu.jqxMenu("open",s.left,t.top+i);for(var r=0,e=0;e<u.columns.records.length;e++){var l=u.columns.records[e];l.hidden||l.adaptivehidden||"adaptive"===l.columntype||(r+=l.adaptivewidth)}u.gridmenu.width(r),u.gridmenu.height(u.content.height())}(!u.filterable||u.filterable&&u.showfilterrow)&&setTimeout(function(){u.gridmenu.focus();for(var e=u.gridmenu.find(".jqx-item"),t=0;t<e.length;t++)e[t].active&&(e[t].active=!1);var i=e[0];0<=e[0].className.indexOf("disabled")&&(i=e[1]),re(e).removeClass("jqx-fill-state-focus"),re(i).addClass("jqx-fill-state-focus"),i.active=!0},225),u._hasOpenedMenu=!0;var o,a,n,s=u._getmenuitembyindex(0),t=u._getmenuitembyindex(1),i=u._getmenuitembyindex(2),d=u._getmenuitembyindex(3),h=u._getmenuitembyindex(4),c=u._getmenuitembyindex(5);null!=s&&null!=t&&null!=i&&(n=p.sortable&&u.sortable,u.gridmenu.jqxMenu("disable",s.id,!n),u.gridmenu.jqxMenu("disable",t.id,!n),u.gridmenu.jqxMenu("disable",i.id,!n),null!=p.displayfield&&(a=(o=u.getsortinformation())&&o.sortcolumns&&o.sortcolumns.find(function(e){return e.dataField===p.displayfield}),u.sortcolumn==p.displayfield||a?(o=u.getsortinformation(),n&&(o.sortdirection.ascending?u.gridmenu.jqxMenu("disable",s.id,!0):u.gridmenu.jqxMenu("disable",t.id,!0))):u.gridmenu.jqxMenu("disable",i.id,!0))),null!=d&&null!=h&&(u.groupable&&p.groupable?u.groups&&-1!=u.groups.indexOf(p.datafield)?(u.gridmenu.jqxMenu("disable",d.id,!0),u.gridmenu.jqxMenu("disable",h.id,!1)):(u.gridmenu.jqxMenu("disable",d.id,!1),u.gridmenu.jqxMenu("disable",h.id,!0)):(u.gridmenu.jqxMenu("disable",h.id,!0),u.gridmenu.jqxMenu("disable",d.id,!0))),null!=c&&(u.menuOwner=p,u._updatefilterpanel(u,c,p),a=0,u.sortable&&u._togglesort&&u.showsortmenuitems&&(a+=3),u.groupable&&u.addgroup&&u.showgroupmenuitems&&(a+=2),n=36*a+6,n=a*u._measureMenuElement()+20,re.jqx.browser.msie&&re.jqx.browser.version<8&&(n+=20,re(c).height(220)),u.isTouchDevice()&&(n+=10),u.filterable&&u.showfiltermenuitems&&(p.filterable?(u.gridmenu.height(n+230),re(c).css("display","block")):(u.gridmenu.height(n),re(c).css("display","none")))),u.columnmenuopening&&!1===u.columnmenuopening(u.gridmenu,p.displayfield,u.gridmenu.height())&&setTimeout(function(){u._closemenu()}),re.data(document.body,"contextmenu"+u.element.id,{column:p,columnsmenu:g[0]})}}var o=this.columnsmenuwidth+1,e="mouseenter",m=(u.isTouchDevice()&&(e="touchstart"),u.addHandler(l,e,function(e){var e=parseInt(e.pageX),t=u.columnsresize&&p.resizable?3:0,i=parseInt(l.coord().left),s=(u.hasTransform&&(i=re.jqx.utilities.getOffset(l).left),p.width);if(u.rtl&&(s=0),0!=t&&i+s-t<=e&&e<=i+s+t)return!1;var r,e=u.vScrollInstance.isScrolling();if(p.menu&&u.autoshowcolumnsmenubutton&&!e&&!u.disabled&&p.menu&&!u.resizing){if(p._menuvisible&&u._hasOpenedMenu)return;p._animating=!0,u.menuitemsarray&&0<u.menuitemsarray.length&&(u.enableanimations?(g.css("display","block"),g.stop(),p.iconscontainer.stop(),u.rtl?(g.css("margin-left",-o),g.animate({"margin-left":"0px"},"fast",function(){g.css("display","block"),p._animating=!1,p._menuvisible=!0})):(g.css("margin-left","0px"),g.animate({"margin-left":-o},"fast",function(){g.css("display","block"),p._animating=!1,p._menuvisible=!0})),r=u.rtl?o:-(32+o),p.iconscontainer.animate({"margin-left":r},"fast")):(g.css("display","block"),r=u.rtl?16:-48,p.iconscontainer.css("margin-left",r+"px"),p._animating=!1,p._menuvisible=!0))}}),u.autoshowcolumnsmenubutton||(g.css("display","block"),e=u.rtl?16:-48,p.iconscontainer.css("margin-left",e+"px"),u.rtl?g.css({"margin-left":"0px"}):g.css({"margin-left":-o})),u.addHandler(l,"mouseleave",function(e){var t,i;u.menuitemsarray&&0<u.menuitemsarray.length&&p.menu&&(null!=(t=re.data(document.body,"contextmenu"+u.element.id))&&g[0].id==t.columnsmenu.id||u.autoshowcolumnsmenubutton&&(u.enableanimations?(u.rtl?g.css("margin-left","0px"):g.css("margin-left",-o),g.stop(),p.iconscontainer.stop(),u.rtl?g.animate({"margin-left":-o},"fast",function(){g.css("display","none"),p._menuvisible=!1}):g.animate({"margin-left":0},"fast",function(){g.css("display","none"),p._menuvisible=!1}),i=u.rtl?0:-32,p.iconscontainer.animate({"margin-left":i},"fast")):(g.css("display","none"),i=u.rtl?0:-32,p.iconscontainer.css("margin-left",i+"px"),p._menuvisible=!1)))}),!0),w="",e=re(p.filtericon);u.addHandler(g,"mousedown",function(e){u.gridmenu||u._initmenu(),m=!re.data(u.gridmenu[0],"contextMenuOpened"+u.gridmenu[0].id),null!=(w=re.data(document.body,"contextmenu"+u.element.id))&&(w=w.column.datafield)}),u.addHandler(e,"mousedown",function(e){u.gridmenu||u._initmenu(),m=!re.data(u.gridmenu[0],"contextMenuOpened"+u.gridmenu[0].id),null!=(w=re.data(document.body,"contextmenu"+u.element.id))&&(w=w.column.datafield)});u.addHandler(e,"click",function(e){return p.menu&&(u.showfilterrow||("block"!=g[0].style.display&&l.trigger("mouseenter"),setTimeout(function(){"block"!=g[0].style.display&&l.trigger("mouseenter"),t()},200))),!1}),u.addHandler(g,"click",function(e){return p.menu&&t(),!1}),u.isTouchDevice()&&u.addHandler(g,re.jqx.mobile.getTouchEventName("touchstart"),function(e){return p.menu&&(u._hasOpenedMenu?u._closemenu():t()),!1})},_removecolumnhandlers:function(e){var t=this.that,i=re(e.element);0<i.length&&(t.removeHandler(i,"mouseenter"),t.removeHandler(i,"mouseleave"),e=re(e.filtericon),t.removeHandler(e,"mousedown"),t.removeHandler(e,"click"),t.removeHandler(i,"click"),t.removeHandler(i,"mousemove"),t.columnsreorder&&(t.removeHandler(i,"mousedown.drag"),t.removeHandler(i,"mousemove.drag")),t.removeHandler(i,"dragstart"),i[0].columnsmenu&&(e=re(i[0].columnsmenu),t.removeHandler(e,"click"),t.removeHandler(e,"mousedown"),t.removeHandler(e,re.jqx.mobile.getTouchEventName("touchstart"))))},_rendercolumnheader:function(e,t,i,s){return s.columngroups?(i/2-this._columnheight/2<0&&0,0):32!=this.columnsheight&&(this.columnsheight/2-this._columnheight/2<0&&0,0),this.enableellipsis?"left"==t?'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 2px; line-height: "+i+'px;"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>":'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 2px; margin-right: 4px; line-height: "+i+'px;"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>":"center"==t||"middle"==t?'<div style="padding-bottom: 2px; text-align: center; line-height: '+i+'px;"><a href="#">'+e+"</a></div>":'<a style="line-height: '+i+"px; float: "+t+';" href="#">'+e+"</a>"},_renderrows:function(e,s,t){function i(){o._loading||(o.WinJS?MSApp.execUnsafeLocalFunction(function(){o._rendervisualrows()}):o._rendervisualrows(),o.virtualmode&&o.showaggregates&&o._updateaggregates&&o.refreshaggregates())}var l,o=this.that,r=((this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length<this.dataview.rows.length&&(o.prerenderrequired=!0),this.pageable||!this.autoheight&&!this.autorowheight||!this.virtualmode&&!this.unboundmode||(r=this.source.totalrecords,isNaN(r)||null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length!=r&&(o.prerenderrequired=!0)),!this.autoheight&&!this.autorowheight||o.prerenderrequired||this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize||!this.pageable)&&(o.prerenderrequired=!0),this.table[0].rows.length<this.dataview.cachedrecords.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize||!this.pageable)&&(o.prerenderrequired=!0)),o._prerenderrows(e),o._requiresupdate&&(o._requiresupdate=!1,o._updatepageviews()),re.jqx.browser.msie&&re.jqx.browser.version<10);if(this.virtualmode){this.loadondemand&&(i(),function(){if(o.rendergridrows){var e=o._startboundindex,t=(e=null==e?0:e)+1+o.dataview.pagesize;if(null!=e&&null!=t){var i=!!o.source._source;if((i?o.source._source:o.source).recordstartindex!=e||1==s){if(i){if(t>=o.source._source.totalrecords&&((e=(t=o.source._source.totalrecords)-o.dataview.pagesize-1)<0&&(e=0),o.source._source.recordendindex==t&&o.source._source.recordstartindex==e))return;o.source._source.recordstartindex=e,o.source._source.recordendindex=t}else o.source.recordstartindex=e,o.source.recordendindex=t;o.updatebounddata("cells")}}}}(),this.loadondemand=!1);var a=null==this._browser?this._isIE10():this._browser;(!this.editable||!this.editcell||this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&!this.autoheight&&(a||r||navigator&&-1!=navigator.userAgent.indexOf("Safari"))?(null!=this._scrolltimer&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout(function(){i()},5)):i()}else{if("deferred"==this.scrollmode&&(this.hScrollInstance.isScrolling()||this.vScrollInstance.isScrolling()))return null!=this._scrolltimer&&clearInterval(this._scrolltimer),null!=(l=this._getfirstvisualrow())&&((e=this.scrollfeedback?this.scrollfeedback(l.bounddata):function(){if(null==l)return"";var e="<table>",t=o.deferreddatafields;null==t&&0<o.columns.records.length&&(t=new Array).push(o.columns.records[0].displayfield);for(var i=0;i<t.length;i++){var s,r=t[i],r=o._getcolumnbydatafield(r);r&&(s=o._getcellvalue(r,l),""!=r.cellsformat&&re.jqx.dataFormat&&(re.jqx.dataFormat.isDate(s)?s=re.jqx.dataFormat.formatdate(s,r.cellsformat,o.gridlocalization):re.jqx.dataFormat.isNumber(s)&&(s=re.jqx.dataFormat.formatnumber(s,r.cellsformat,o.gridlocalization))),e+="<tr><td>"+s+"</td></tr>")}return e+="</table>"}(l.bounddata))!=this._scrollelementcontent&&(this._scrollelement[0].innerHTML=e,this._scrollelementcontent=e)),this._scrollelement.css("visibility","visible"),this._scrollelementoverlay.css("visibility","visible"),this._scrollelement.css("margin-top",-this._scrollelement.height()/2),void(this._scrolltimer=setInterval(function(){o.hScrollInstance.isScrolling()||o.vScrollInstance.isScrolling()||(i(),o._scrollelement.css("visibility","hidden"),o._scrollelementoverlay.css("visibility","hidden"),clearInterval(o._scrolltimer),l&&o.ensurerowvisible(l.visibleindex))},100));if(navigator&&-1==navigator.userAgent.indexOf("Chrome")&&-1!=navigator.userAgent.indexOf("Safari")&&(this._updatedelay=1),null!=this.touchDevice&&1==this.touchDevice&&(this._updatedelay=5),((a=null==this._browser?this._isIE10():this._browser)||r)&&(this._updatedelay=5),a&&this.hScrollInstance.isScrolling())return void i();re.jqx.browser.mozilla&&0==this._updatedelay&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this._updatedelay=0),this.isTouchDevice()&&(this._updatedelay=0),null!=this.updatedelay&&(this._updatedelay=this.updatedelay),0==this._updatedelay?i():(null!=(e=this._jqxgridrendertimer)&&clearTimeout(e),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?(this._updatedelay?e=setTimeout(function(){i()},this._updatedelay):(e=null,i()),this._jqxgridrendertimer=e):(this._jqxgridrendertimer=e,i()))}o.autorowheight&&!o.autoheight&&0<this._pageviews.length&&((r=this._gettableheight())<(a=this._pageviews[0].height)?(this.pageable&&this.gotopage&&(a=this._pageviews[0].height)<0&&(a=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(a<=r||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<a-r?"deferred"!=this.scrollmode&&(e=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:r=a-r}),Math.round(r)!=Math.round(e)&&r<this.vScrollBar.jqxScrollBar("value")&&this.vScrollBar.jqxScrollBar({value:0})):this.vScrollBar.jqxScrollBar({value:0,max:a})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})),this._arrange(),this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=a))},scrolling:function(){return{vertical:this.vScrollInstance.isScrolling(),horizontal:this.hScrollInstance.isScrolling()}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value,i=("hidden"===this.hScrollBar.css("visibility")&&(t=e.value=0),parseInt(t));if(null!=this.table){var s=this.table[0].rows.length,r=this.columnsrow,l=this.groupable&&0<this.groups.length?this.groups.length:0,o=this.columns.records.length-l,a=this.columns.records,n=0==this.dataview.rows.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(i=e.max-i),n&&!this._haspinned){for(var d=0;d<s;d++)for(var h=this.table[0].rows[d],c=0;c<l+o;c++)null!=(u=h.cells[c])&&a[c].pinned&&(u.style.marginLeft=i+"px",0==d&&(r[0].cells[c].style.marginLeft=i+"px"));this.table[0].style.marginLeft=-i+"px",r[0].style.marginLeft=-i+"px"}else if(this._haspinned||null==this._haspinned){for(d=0;d<s;d++)for(var u,g,p,m,h=this.table[0].rows[d],c=0;c<l+o;c++)null==(u=h.cells[c])||!a[c].pinned||0==i&&""==u.style.marginLeft||(m=p=g=null,this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(m=this.addnewrowtop[0].cells[c]),this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(p=this.filterrow[0].cells[c]),this.showaggregates&&this.statusbar[0].cells&&(g=this.statusbar[0].cells[c]),this.rtl?(u.style.marginLeft=-parseInt(t)+"px",0==d&&(r[0].cells[c].style.marginLeft=-parseInt(t)+"px",g&&(g.style.marginLeft=-parseInt(t)+"px"),p&&(p.style.marginLeft=-parseInt(t)+"px"),m&&(m.style.marginLeft=-parseInt(t)+"px"))):(u.style.marginLeft=i+"px",0==d&&(r[0].cells[c].style.marginLeft=i+"px",g&&(g.style.marginLeft=i+"px"),p&&(p.style.marginLeft=i+"px"),m&&(m.style.marginLeft=i+"px"))));this.table[0].style.marginLeft=-i+"px",r[0].style.marginLeft=-i+"px"}else 0==this._haspinned&&(this.table[0].style.marginLeft=-i+"px",r[0].style.marginLeft=-i+"px");this.showaggregates&&this.statusbar[0].cells&&(e=0,this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&"hidden"!=this.hScrollBar.css("visibility")&&(e=2+parseInt(this.hScrollBar.css("left"))),this.statusbar[0].style.marginLeft=-i+e+"px"),this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(this.filterrow[0].style.marginLeft=-i+"px"),this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(this.addnewrowtop[0].style.marginLeft=-i+"px")}},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var e=0;e<this._rowdetailselementscache.length;e++)re(this._rowdetailselementscache[e]).css("display","none")},_getvisualcolumnsindexes:function(e,t,i,s,r,l,o){var a=this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()||this._keydown;if((this.rowdetails||this.rtl||this.editcell&&a||this.width&&0<=this.width.toString().indexOf("%")&&!a&&!this.editcell||this.exporting)&&!o)return{start:0,end:i+s};var n=0,d=-1,h=i+s,c=!1;if(this.autorowheight)return{start:0,end:i+s};if(!r)for(var u=0;u<i+s;u++)if(c||this.columns.records[u].pinned&&l&&(c=!0),this.columns.records[u].hidden||this.columns.records[u].adaptivehidden||(n+=this.columns.records[u].width),e<=n&&-1==d&&(d=u),t+e<n){h=u;break}return{start:d=-1!=d&&!c?d:0,end:h=i+s<++h?i+s:h}},_getvirtualcolumnsindexes:function(e,t,i,s,r){var l=this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()||this._keydown;if(this.enableoptimization&&(this.rowdetails||this.rtl||this.editcell&&l||this.width&&0<=this.width.toString().indexOf("%")&&!l&&!this.editcell||this.exporting))return{start:0,end:i+s};if(this.rtl||this.editcell||this.exporting)return{start:0,end:i+s};var o=0,a=-1,n=i+s;if(this.autorowheight)return{start:0,end:i+s};if(!r)for(var d=0;d<i+s;d++)if(this.columns.records[d].hidden||this.columns.records[d].adaptivehidden||(o+=this.columns.records[d].width),e<=o&&-1==a&&(a=d),t+e<o){n=d;break}return{start:a=-1==a?0:a,end:n=i+s<++n?i+s:n}},_getfirstvisualrow:function(){var e=this.vScrollInstance.value,e=parseInt(e);if(0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"visible"!=this.vScrollBar[0].style.visibility&&(e=0),!this.pageable){var t=this._findvisiblerow(e,this._pageviews);if(-1==t)return null;t!=this.dataview.pagenum?(this.dataview.pagenum=t,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}t=this._findvisiblerow(e,this._pagescache[this.dataview.pagenum]),e=this._pagescache[this.dataview.pagenum];if(e&&e[0])return e[t]},_rendervisualrows:function(){if(this.virtualsizeinfo){var e=this.vScrollInstance,t=this.hScrollInstance,i=e.value,s=t.value,r=parseInt(i),l=parseInt(s),o=this._gettableheight(),E=null!=this._hostwidth?this._hostwidth:this.host.width(),D=("visible"==this.hScrollBar[0].style.visibility&&(o+=29),"deferred"==this.scrollmode&&0!=this._newmax&&r>this._newmax&&null!=this._newmax&&(r=this._newmax),e.isScrolling()||t.isScrolling()||this._keydown),a=this.groupable&&0<this.groups.length,n=(this.visiblerows=new Array,this.hittestinfo=new Array,this.editcell&&null==this.editrow&&this._hidecelleditor(!1),null!=this.editrow&&this._hideeditors(),this.virtualmode&&!this.pageable&&(this._pagescache=new Array),0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"hidden"==this.vScrollBar[0].style.visibility&&(r=0),this.pageable||(-1==(i=this._findvisiblerow(r,this._pageviews))&&(this._clearvisualrows(),this._renderemptyrow(),this._updaterowdetailsvisibility()),i!=this.dataview.pagenum?(this.dataview.pagenum=i,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()),this.groupable&&0<this.groups.length?this.groups.length:0);if(this.columns.records){var d=this.columns.records.length-n,s=this._findvisiblerow(r,this._pagescache[this.dataview.pagenum]),h=this._pagescache[this.dataview.pagenum],c=s,O=(c<0&&(c=0),0),u=0,L=0,N=0,g=this.virtualsizeinfo.visiblerecords,F=this.groupable?this.groups.length:0,p=this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item"),m=(this.rtl&&(p+=" "+this.toTP("jqx-grid-cell-rtl")),(this.autoheight||this.autorowheight)&&this.pageable&&(!this.groupable||this.groupable&&0===this.groups.length)&&(g=this.dataview.pagesize),a&&(p=" "+this.toTP("jqx-grid-group-cell")),this.isTouchDevice()&&(p+=" "+this.toTP("jqx-touch")),this.autorowheight&&(p+=" jqx-grid-cell-wrap"),this.rowsheight),R=(this.cardview&&(m=this.cardheight),this._rendercell),t=this._getvisualcolumnsindexes(l,E,n,d,a,!0),w=t.start,f=t.end,i=this._getvirtualcolumnsindexes(l,E,n,d,a),W=i.start,V=i.end;re.jqx.browser.msie&&re.jqx.browser.version;if((this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height),0<=(c=this.autorowheight?0:c)){this._updaterowdetailsvisibility(),this._startboundindex=null!=h?h[c].bounddata.boundindex:0,this._startvisibleindex=null!=h?h[c].bounddata.visibleindex:0;var G=this.table[0].rows;if(10<this.columns.records.length&&this.enablecolumnsvirtualization){function v(e){return!(!e||!e.parentNode||"#document-fragment"==e.parentNode.nodeName)}for(var b=0;b<G.length;b++){(H=G[b]).className="";for(var x=0;x<W;x++){var y=x;this.columns.records[y].pinned||null!=this.columns.records[y].datafield&&(v(I=H.cells[y])&&I.parentNode.removeChild(I),_=this.columns.records[y].element,this.columns.records[y]._rendered=!1,v(_)&&this.columnsrow[0].removeChild(_),this.filterrow&&v(this.filterrow[0].cells[y])&&this.columns.records[y].filterable&&this.filterrow[0].cells[y].parentNode.removeChild(this.filterrow[0].cells[y]))}for(x=V;x<this.columns.records.length;x++){y=x;this.columns.records[y].pinned||null!=this.columns.records[y].datafield&&(v(I=H.cells[y])&&I.parentNode.removeChild(I),_=this.columns.records[y].element,this.columns.records[y]._rendered=!1,v(_)&&this.columnsrow[0].removeChild(_),this.filterrow&&v(this.filterrow[0].cells[y])&&this.columns.records[y].filterable&&this.filterrow[0].cells[y].parentNode.removeChild(this.filterrow[0].cells[y]))}for(x=W;x<V;x++){var y=x,_=(v(I=H.cells[y])||H.appendChild(I),this.columns.records[y].element);this.columns.records[y]._rendered=!0,_.selectable&&(I.removeAttribute("selected"),_.selected&&I.setAttribute("selected","")),v(_)||this.columnsrow[0].appendChild(_),this.filterrow&&this.showfilterrow&&!v(this.filterrow[0].cells[y])&&this.columns.records[y].filterable&&this.filterrow[0].firstChild.appendChild(this.filterrow[0].cells[y])}}}if(this.cardview)for(b=0;b<this.table[0].rows.length;b++)(H=this.table[0].rows[b]).innerHTML="";for(var q=0;q<g&&u<g;q+=1){var j,K,S=null!=h?h[c+q]:null;if(null==(S=this.virtualmode&&q>=this.source.totalrecords?null:S)){if(c=-q,this._pagescache[this.dataview.pagenum+1])h=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{var U=this._pageviews.length;do{if(!(this.dataview.pagenum<this._pageviews.length-1)){h=void 0;break}}while(this.dataview.pagenum++,h=void 0,0<this._pageviews[this.dataview.pagenum].height&&(this.dataview.updateview(),this._loadrows(),h=this._pagescache[this.dataview.pagenum]),null==h&&this.dataview.pagenum<U)}null!=h&&(S=h[c+q])}if(null!=S){if(S.hidden)continue;if(this._endboundindex=this._startboundindex+q,this._endvisibleindex=this._startvisibleindex+q,0==q&&(j=Math.abs(r-S.top),this.table[0].style.top=-j+"px",K=this.table,re.jqx.browser.chrome&&(this._chromeTimer&&clearTimeout(this._chromeTimer),this._chromeTimer=setTimeout(function(){K[0].style.top=.01-j+"px"},50)),N=-j),!(H=this.table[0].rows[u]))continue;parseInt(H.style.height)!=S.height&&(H.style.height=parseInt(S.height)+"px"),H.setAttribute("row-id",S.bounddata.uid),L+=S.height;for(var z=this.rowdetails&&S.rowdetails,k=!S.rowdetailshidden,Y=(z&&k&&(H.style.height=parseInt(S.height-S.rowdetailsheight)+"px",g++),this._isrowselected(!0,S)),x=w;x<f;x++){y=x;this._rendervisualcell(R,p,Y,z,k,a,F,H,S,y,u,D)}if(null!=S.group&&this._rendergroup&&this._rendergroup(F,H,S,n,d,u,E),this.autorowheight&&(this.autoheight||this.pageable)){for(m=this.rowsheight,x=w;x<f;x++)this.editable&&this.editcell&&this.editcell.column==this.columns.records[x].datafield&&this.editcell.row==this.getboundindex(S)&&this.editcell.editor?m=Math.max(m,this.editcell.editor.height()):H.cells[x].firstChild&&(m=Math.max(m,8+parseInt(H.cells[x].firstChild.offsetHeight)));H.style.height=parseInt(m)+"px",this.heights[this._startboundindex+q]=m,z&&k&&(m+=S.rowdetailsheight),S.height=m}if(this.cardview){for(var Z='<div class="jqx-grid-card-row"',X=H.innerHTML="",J=(Z+='style="grid-template-columns: ',100/this.cardsize+"%"),$=c,Q=0;Q<this.cardsize;Q++)if(S=null!=h?h[$*this.cardsize+q*this.cardsize+Q]:S){Z+=J+" ";var C='<div id="'+S.bounddata.uid+'" class="jqx-grid-card-cell">';C+="<table>";for(x=w;x<f;x++){var T,ee,I,te,y=x,B=null;(M=this.columns.records[y]).hidden&&void 0===M.__hidden||(T=this._getcellvalue(M,S),""!=M.cellsformat&&re.jqx.dataFormat&&(re.jqx.dataFormat.isDate(T)?T=re.jqx.dataFormat.formatdate(T,M.cellsformat,this.gridlocalization):re.jqx.dataFormat.isNumber(T)&&(T=re.jqx.dataFormat.formatnumber(T,M.cellsformat,this.gridlocalization))),null!=M.cellsrenderer&&null!=(ee=M.cellsrenderer(this.getboundindex(S),M.datafield,T,null,M.getcolumnproperties(),S.bounddata))&&(T=ee),I=H.cells[y],te=this.editable&&M.editable?'<span row="'+S.bounddata.uid+'"  class="jqx-icon-edit"></span>':"",C=(C+='<tr class="jqx-grid-card-table-row">')+'<td class="jqx-grid-card-cell-label"><div>'+M.text+"</div></td>",""!=M.cellclassname&&M.cellclassname?C+='<td class="jqx-grid-card-cell-value '+M.cellclassname+'"><div>'+T+"</div></td>":C+='<td class="jqx-grid-card-cell-value"><div>'+T+"</div></td>",C+="</tr>")}X+=C=(C+="</table>")+te+"</div>"}Z+=';">'+X+"</div>",H.innerHTML+=Z,u++;continue}if(this.visiblerows[this.visiblerows.length]=S,this.hittestinfo[this.hittestinfo.length]={row:S,visualrow:H,details:!1},z&&k&&(u++,H=this.table[0].rows[u],this._renderrowdetails(p,H,S,n,d,u),this.visiblerows[this.visiblerows.length]=S,this.hittestinfo[this.hittestinfo.length]={row:S,visualrow:H,details:!0}),!this.autorowheight&&o<=L+N)break}else this._clearvisualrow(l,a,u,n,d),L+O+N<=o&&(O+=m);u++}this._horizontalvalue=l,0<O&&"visible"==this.vScrollBar[0].style.visibility&&(parseInt(this.table.css("top")),s=this._pageviews[this._pageviews.length-1],t=e.max,i=s.top+s.height-o,"visible"==this.hScrollBar.css("visibility")&&(i+=this.scrollbarsize+22),t==i||this.autorowheight||0<=i&&("deferred"!=this.scrollmode?(e.max=i,e.setPosition(e.max)):this._newmax!=i&&(this._newmax=i,this._rendervisualrows())))}if((this.autoheight||this.pageable)&&this.autorowheight){this._pagescache=new Array;for(var ie=0,se=0,b=0;b<this.visiblerows.length;b++){var P=this.visiblerows[b],z=(P.top=ie,ie+=P.height,se+=P.height,this.rowdetails&&P.rowdetails),k=!P.rowdetailshidden,H=this.table[0].rows[b];z&&k&&b++;for(var M,A,x=w;x<f;x++)(M=this.columns.records[x]).hidden||M.adaptivehidden||M.cellsrenderer||(A=0,(B=H.cells[x]).firstChild?(A=(P.height-parseInt(B.firstChild.offsetHeight)-8)/2,z&&k&&(A=(P.height-P.rowdetailsheight-re(B.firstChild).height()-8)/2)):A=(P.height-parseInt(re(B).height())-8)/2,0<=A&&(A=parseInt(A)+4,!B.firstChild||-1!=B.firstChild.className.indexOf("jqx-grid-groups-row")||"checkbox"==M.columntype||"button"==M.columntype||this.editable&&this.editcell&&this.editcell.column==M.datafield&&this.editcell.row==this.getboundindex(P)||(B.firstChild.style.marginTop=A+"px")))}this._pageviews[0]&&(this._pageviews[0].height=se),this._arrange()}this._renderemptyrow(),this.toCompile&&0<this.toCompile.length&&re.each(this.toCompile,function(e,t){return!!this.compiled||(!(i=this.cell)||(re.jqx.angularCompile&&re.jqx.angularCompile(i,"<div>"+this.value+"</div>"),void(this.compiled=!0)));var i})}}},_hideemptyrow:function(){if(this.showemptyrow&&this.table&&this.table[0].rows){var e=this.table[0].rows[0];if(e)for(var t=!1,i=0;i<e.cells.length;i++){var s=re(e.cells[i]);"none"==s.css("display")||t||s.width()!=this.host.width()&&s.text()!=this.gridlocalization.emptydatastring||(s[0].checkbox=null,t=!(s[0].button=null),s[0].innerHTML="")}}},_renderemptyrow:function(){if(!this._loading&&0==this.dataview.records.length&&this.showemptyrow){var e=!1,t=this.toTP("jqx-grid-cell");if(this.table&&0<this.table.length&&this.table[0].rows&&0<this.table[0].rows.length){var i=this.table[0].rows[0];this.table[0].style.top="0px";for(var s=0;s<i.cells.length;s++){var r,l,o=re(i.cells[s]);"none"==o.css("display")||e||(o[0].checkbox=null,o[0].button=null,o[0].className=t,e=!0,o[0].innerHTML="",(r=re("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>")).text(this.gridlocalization.emptydatastring),o.append(r),l=0,this.oldhscroll||(l=parseInt(this.table[0].style.marginLeft),this.rtl&&(o.css("z-index",999),o.css("overflow","visible"))),r.css("left",-l-r.width()/2),r.css("top",this._gettableheight()/2-r.height()/2),re.jqx.browser.msie&&re.jqx.browser.version<8&&(r.css("margin-left","0px"),r.css("left",this.host.width()/2-r.width()/2)),l=Math.abs(parseInt(this.table[0].style.top)),isNaN(l)&&(l=0),re(i).height(this._gettableheight()+l),o.css("margin-left","0px"),o.width(this.host.width()),this.table.width()<this.host.width()&&this.table.width(this.host.width())),o.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},_clearvisualrows:function(){var e=this.virtualsizeinfo.visiblerecords,t=this.hScrollInstance.value,i=parseInt(t),s=this.groupable&&0<this.groups.length;if(this.columns.records)for(var r=0;r<e;r++)this._clearvisualrow(i,s,r,0,this.columns.records.length)},_iscellselected:function(e,t,i){var s=!1,r=0;if(this.virtualmode&&this.pageable&&this.groupable&&0<this.groups.length&&(r=this.dataview.pagesize*this.dataview.pagenum),0<this.groups.length&&this.pageable&&this.groupable){var l=this.getrowboundindexbyid(t.bounddata.uid);if(-1==l)return!1;for(o in this.selectedcells)o==l+"_"+i&&(s=!0);return s}if(e&&null!=t.bounddata)if("singlerow"!=this.selectionmode){if(0<this.dataview.filters.length)if(this.virtualmode||null==t.bounddata.dataindex)for(var o in this.selectedcells)o==r+t.bounddata.boundindex+"_"+i&&(s=!0);else for(var o in this.selectedcells)o==r+t.bounddata.dataindex+"_"+i&&(s=!0);else for(var o in this.selectedcells)if(o==r+t.bounddata.boundindex+"_"+i){s=!0;break}}else if(0<this.dataview.filters.length){if(this.virtualmode||null==t.bounddata.dataindex){for(var o in this.selectedcells)if(o==r+t.bounddata.boundindex+"_"+i){s=!0;break}}else for(var o in this.selectedcells)if(o==r+t.bounddata.dataindex+"_"+i){s=!0;break}}else for(var o in this.selectedcells)if(o==r+t.bounddata.boundindex==this.selectedrowindex){s=!0;break}return s},_isrowselected:function(e,t){var i,s=!1,r=0;return this.virtualmode&&this.pageable&&this.groupable&&0<this.groups.length&&(r=this.dataview.pagesize*this.dataview.pagenum),this.groupable&&0<this.groups.length&&this.pageable?null!=(i=this.getrowboundindexbyid(t.bounddata.uid))&&-1!=i&&((s=-1!=this.selectedrowindexes.indexOf(i)||s)||i==this.selectedrowindex&&-1!=this.selectedrowindex):(e&&null!=t.bounddata&&("singlerow"!=this.selectionmode?!(0<this.dataview.filters.length)||this.virtualmode||null==t.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)&&(s=!0):-1!=this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)&&(s=!0):0<this.dataview.filters.length?this.virtualmode||null==t.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)&&(s=!0):-1!=this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)&&(s=!0):r+t.bounddata.boundindex==this.selectedrowindex&&(s=!0)),s)},_rendervisualcell:function(e,t,i,s,r,l,o,a,n,d,h,c){var u=this.columns.records[d];if(u.hidden||u.adaptivehidden)(f=a.cells[d]).innerHTML="";else{var g,p,m,w=this._getcellvalue(u,n),f=a.cells[d],v=(-1!=this.selectionmode.indexOf("cell")&&(i=0<this.dataview.filters.length?!!this.selectedcells[n.bounddata.dataindex+"_"+u.datafield]:!!this.selectedcells[n.boundindex+"_"+u.datafield],this.editcell&&this.editcell.row===n.boundindex&&this.editcell.column===u.datafield&&"checkbox"!==u.columntype&&(i=!1),(this.virtualmode||this.groupable&&0<this.groups.length&&this.pageable)&&(i=this._iscellselected(!0,n,u.datafield))),""!=u.cellclassname&&u.cellclassname&&("string"==typeof u.cellclassname?t+=" "+u.cellclassname:(this._columnClassNameCache||(this._columnClassNameCache=[]),g=this.getboundindex(n),void 0!==this._columnClassNameCache[g+"_"+u.datafield+"_"+w]&&this.enableoptimization?(_=this._columnClassNameCache[g+"_"+u.datafield+"_"+w])&&(t+=" "+_):((_=u.cellclassname(g,u.datafield,w,n.bounddata))&&(t+=" "+_),this._columnClassNameCache[g+"_"+u.datafield+"_"+w]=_))),this.showsortcolumnbackground&&this.sortcolumn&&u.displayfield==this.sortcolumn);if("many"===this.sortmode&&this.showsortcolumnbackground)for(var b=this.getsortcolumns(),x=0;x<b.length;x++)u.displayfield===b[x].dataField&&(v=!0);v&&(t+=" "+this.toTP("jqx-grid-cell-sort")),u.filter&&this.showfiltercolumnbackground&&(t+=" "+this.toTP("jqx-grid-cell-filter")),n.bounddata.totalsrow&&(t+=" "+this.toTP("jqx-grid-cell-pinned")),!(u.pinned&&this.showpinnedcolumnbackground||u.grouped)||l&&n.bounddata.totalsrow||(t+=" "+this.toTP("jqx-grid-cell-pinned")),!this.altrows||null!=n.group||(g=n.visibleindex)>=this.altstart&&(this.altstart+g)%(1+this.altstep)==0&&(t+=v?" "+this.toTP("jqx-grid-cell-sort-alt"):" "+this.toTP("jqx-grid-cell-alt"),u.filter&&this.showfiltercolumnbackground&&(t+=" "+this.toTP("jqx-grid-cell-filter-alt")),u.pinned&&this.showpinnedcolumnbackground&&(t+=" "+this.toTP("jqx-grid-cell-pinned-alt"))),this.batcheditable&&void 0!==n.bounddata["_temp"+u.datafield]&&(t+=" "+this.toTP("jqx-grid-cell-batch")),d<=o?(l||this.rowdetails||this.pageable&&this.virtualmode)&&(p=re(f),m=this.columns.records[d].width,f.style.width!=parseInt(m)+"px"&&p.width(m)):(l||this.rowdetails)&&this._hiddencolumns&&(p=re(f),m=this.columns.records[d].width,parseInt(f.style.width)!=m&&p.width(m));var y,_=!0;if(this.rowdetails&&s)if(r&&!l?t+=" "+this.toTP("jqx-grid-details-cell"):l&&(t+=" "+this.toTP("jqx-grid-group-details-cell")),this.showrowdetailscolumn)if(this.rtl){if(null==n.group&&d==a.cells.length-o-1)return y=this.toThemeProperty("jqx-icon-arrow-down"),t=r?t+(" "+this.toTP("jqx-grid-group-expand-rtl"))+" "+y:(t+=" "+this.toTP("jqx-grid-group-collapse-rtl"))+" "+(y=this.toThemeProperty("jqx-icon-arrow-left")),_=!1,f.title="",f.innerHTML="",void(f.className!=t&&(f.className=t))}else if(null==n.group&&d==o&&!n.bounddata.totalsrow)return y=this.toThemeProperty("jqx-icon-arrow-down"),t=r?t+(" "+this.toTP("jqx-grid-group-expand"))+" "+y:(t+=" "+this.toTP("jqx-grid-group-collapse"))+" "+(y=this.toThemeProperty("jqx-icon-arrow-right")),_=!1,f.title="",f.innerHTML="",void(f.className!=t&&(f.className=t));if(i&&_&&o<=d&&(t=(t+=" "+this.toTP("jqx-grid-cell-selected"))+" "+this.toTP("jqx-fill-state-pressed")),f.className!=t&&(f.className=t),u._applyCellStyle(f),null!=n.group)return f.title=w="",void(f.innerHTML="");e(this,u,n,w,f,c)}},_rendercell:function(e,t,i,s,r,l){var o=s+"_"+t.visibleindex;if("number"!=t.columntype&&null==t.cellsrenderer||(o=i.uniqueid+"_"+t.visibleindex),"number"==t.columntype&&(s=i.visibleindex),"adaptive"===t.columntype&&(s="..."),t._applyCellStyle(r),e.showrowlines?r.style.borderBottomColor="":r.style.borderBottomColor="transparent",e.showcolumnheaderlines?(t.element.style.borderRightColor="",t.element.style.boxShadow=""):(t.element.style.borderRightColor="transparent",t.element.style.boxShadow="none"),e.showcolumnlines?r.style.borderRightColor="":r.style.borderRightColor="transparent",e.editcell&&null==e.editrow)if("selectedrow"==e.editmode&&t.editable&&e.editable){if(e.editcell.row==e.getboundindex(i)&&e._showcelleditor)return e.hScrollInstance.isScrolling()||e.vScrollInstance.isScrolling()?e._showcelleditor(e.editcell.row,t,r,!1,!1):e._showcelleditor(e.editcell.row,t,r,e.editcell.init),void(r.className+=" "+e.toTP("jqx-grid-cell-edit"))}else if(e.editcell.row==e.getboundindex(i)&&e.editcell.column==t.datafield&&(e.editcell.element=r,e.editcell.editing&&e._showcelleditor))return e.hScrollInstance.isScrolling()||e.vScrollInstance.isScrolling()?e._showcelleditor(e.editcell.row,t,e.editcell.element,e.editcell.init,!1):e._showcelleditor(e.editcell.row,t,e.editcell.element,e.editcell.init),void(r.className+=" "+e.toTP("jqx-grid-cell-edit"));var a=e._defaultcellsrenderer(s,t),n=e._cellscache[o];if(n){if("checkbox"==t.columntype){if(e.host.jqxCheckBox)return""===s&&(s=null),d=0==r.innerHTML.toString().length,!r.checkbox||e.groupable||d?e._rendercheckboxcell(e,r,t,i,s):(r.checkboxrow=e.getboundindex(i),null!=(s="false"==(s="true"==(s=0==(s=1==(s="0"==(s="1"==(s=""==s?!1:s)?!0:s)?!1:s)?!0:s)?!1:s)?!0:s)?!1:s)||t.threestatecheckbox||(s=!1),t.checkboxcolumn&&(s=!1,0<e.dataview.filters.length&&!e.virtualmode&&null!=i.bounddata.dataindex?-1!=e.selectedrowindexes.indexOf(i.bounddata.dataindex)&&(s=!0):-1!=e.selectedrowindexes.indexOf(i.bounddata.boundindex)&&(s=!0)),e.disabled||(r.checkboxinstance?r.checkboxinstance._setState(s):r.checkbox.jqxCheckBox("_setState",s))),void(null!=t.cellsrenderer&&null!=(d=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata))&&(r.innerHTML=d))}else if("button"==t.columntype){if(e.host.jqxButton)return""==s&&(s=!1),null!=t.cellsrenderer&&(s=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata)),""==r.innerHTML&&(r.buttonrow=e.getboundindex(i),r.button=null,e._renderbuttoncell(e,r,t,i,s)),void(r.button&&!e.groupable?(r.buttonrow=e.getboundindex(i),r.button.val(s)):e._renderbuttoncell(e,r,t,i,s))}else if(("progressbar"==t.columntype||"rating"===t.columntype)&&e.host.jqxButton)return""==s&&(s=!1),null!=t.cellsrenderer&&(s=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata)),""==r.innerHTML&&(r.progressrow=e.getboundindex(i),r.progress=null,e._renderprogresscell(e,r,t,i,s)),r.progress&&!e.groupable?(r.progressrow=e.getboundindex(i),r.progress.val(s)):e._renderprogresscell(e,r,t,i,s),void(e.enabletooltips&&t.enabletooltips&&(r.title=""+s));if(t.createwidget){if(""==r.innerHTML&&(r.widgetrow=e.getboundindex(i),r.widget=null,t.widget=null,e._renderwidgetcell(e,r,t,i,s)),r.widget&&!e.groupable){if(r.widgetrow=e.getboundindex(i),!t.initwidget)throw new Error("jqxGrid: 'initwidget' column function is not implemented. Please, implement 'initwidget'");t.initwidget(e.getboundindex(i),t.datafield,s,r.firstChild)}else e._renderwidgetcell(e,r,t,i,s);return}var d=n.element;return null!=t.cellsrenderer||r.childNodes&&0==r.childNodes.length||e.groupable||e.rowdetails?r.innerHTML!=d&&(r.innerHTML=d):0<=r.innerHTML.indexOf("editor")?r.innerHTML=d:l?(h=d.indexOf(">"),c=d.indexOf("</"),u=d.substring(h+1,c),g=r.childNodes[0],0<=u.indexOf(">")?r.innerHTML=d:g.childNodes[0]?"#text"!==g.childNodes[0].nodeName?r.innerHTML=d:u!=g.childNodes[0].nodeValue&&(0<=u.indexOf("&")?r.innerHTML=d:g.childNodes[0].nodeValue=u):(p=document.createTextNode(u),g.appendChild(p))):r.innerHTML!=d&&(r.innerHTML=d),void(e.enabletooltips&&t.enabletooltips&&(r.title=n.title))}if("checkbox"==t.columntype)return e._rendercheckboxcell(e,r,t,i,s),e._cellscache[o]={element:"",title:s},void(e.enabletooltips&&t.enabletooltips&&(r.title=""+s));if("button"==t.columntype)return null!=t.cellsrenderer&&(s=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata)),e._renderbuttoncell(e,r,t,i,s),e._cellscache[o]={element:"",title:s},void(e.enabletooltips&&t.enabletooltips&&(r.title=""+s));if("progressbar"==t.columntype||"rating"===t.columntype)return null!=t.cellsrenderer&&(s=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata)),e._renderprogresscell(e,r,t,i,s),e._cellscache[o]={element:"",title:s},void(e.enabletooltips&&t.enabletooltips&&(r.title=""+s));if("number"==t.columntype&&(s=i.visibleindex),t.createwidget)return null!=t.cellsrenderer&&(s=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata)),e._renderwidgetcell(e,r,t,i,s),e._cellscache[o]={element:"",title:s},void(e.enabletooltips&&t.enabletooltips&&(r.title=s));d=null;if(null!=t.cellsrenderer){e._columnCellsRenderCache||(e._columnCellsRenderCache=[]);l=e.getboundindex(i);if(void 0!==e._columnCellsRenderCache[l+"_"+t.datafield+"_"+s]&&e.enableoptimization?d=e._columnCellsRenderCache[l+"_"+t.datafield+"_"+s]:(d=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata),e._columnCellsRenderCache[l+"_"+t.datafield+"_"+s]=d),d&&(0<=d.indexOf("<jqx-")||0<=d.indexOf(" ng-")))return void(e.toCompile&&e.toCompile.push({cell:r,value:d,row:e.getboundindex(i)}))}else d=a;null==d&&(d=a);var h,c,u,g,p,n=s;return e.enabletooltips&&t.enabletooltips&&(""!=t.cellsformat&&re.jqx.dataFormat&&(re.jqx.dataFormat.isDate(s)?n=re.jqx.dataFormat.formatdate(n,t.cellsformat,e.gridlocalization):re.jqx.dataFormat.isNumber(s)&&(n=re.jqx.dataFormat.formatnumber(n,t.cellsformat,e.gridlocalization))),r.title=n),e.WinJS?re(r).html(d):0<=(l=r.innerHTML).indexOf("editor")||null!=t.cellsrenderer||e.groupable||e.virtualmode?r.innerHTML=d:0<l.length?(h=d.indexOf(">"),c=d.indexOf("</"),u=d.substring(h+1,c),g=r.childNodes[0],0<=u.indexOf(">")?r.innerHTML=d:g.childNodes[0]?u!=g.childNodes[0].nodeValue&&(0<=u.indexOf("&")||0<=l.indexOf("span")||0<=l.indexOf("img")?r.innerHTML=d:g.childNodes[0].nodeValue=u):(p=document.createTextNode(u),g.appendChild(p))):l!=d&&(r.innerHTML=d),e._cellscache[o]={element:r.innerHTML,title:n},!0},_isIE10:function(){var e;return null==this._browser&&("msie"==(e=re.jqx.utilities.getBrowser()).browser&&9<parseInt(e.version)?this._browser=!0:(this._browser=!1,"msie"==e.browser&&(e="Browser CodeName: "+navigator.appCodeName,-1!=(e=(e=(e=(e+="Browser Name: "+navigator.appName)+("Browser Version: "+navigator.appVersion))+("Platform: "+navigator.platform))+("User-agent header: "+navigator.userAgent)).indexOf("Zune 4.7")&&(this._browser=!0)))),this._browser},_renderinlinecell:function(e,t,i,s,r){re(t);t.innerHTML='<div style="position: absolute;"></div>'},_rendercheckboxcell:function(n,d,h,e,t){var i,s;n.host.jqxCheckBox&&(i=re(d),"false"==(t="true"==(t=0==(t=1==(t="0"==(t="1"==(t=null!==(t=""===t?!!h.threestatecheckbox&&null:t)||h.threestatecheckbox?t:!1)?!0:t)?!1:t)?!0:t)?!1:t)?!0:t)&&(t=!1),h.checkboxcolumn&&(t=!1,s=this.getboundindex(e),-1!=this.selectedrowindexes.indexOf(s)&&(t=!0)),0==i.find(".jqx-checkbox").length?(d.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -9px; margin-left: -12px;"></div>',re(d.firstChild).jqxCheckBox({rippleEffect:!1,disabled:n.disabled,_canFocus:!1,hasInput:!1,hasThreeStates:h.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,locked:!0,theme:n.theme,checked:t}),this.enabletooltips&&h.enabletooltips&&(d.title=""+t),this.editable&&h.editable&&re(d.firstChild).jqxCheckBox({locked:!1}),h.checkboxcolumn&&re(d.firstChild).jqxCheckBox({locked:!1}),d.checkbox=re(d.firstChild),d.checkboxinstance=d.checkbox.data().jqxCheckBox.instance,d.checkboxrow=this.getboundindex(e),re.data(d.firstChild,"jqxCheckBox").instance.updated=function(e,t,i){if(n.disabled){t=i;for(var s=n.table[0].rows.length,r=n._getcolumnindex(h.datafield),l=0;l<s;l++)(a=n.table[0].rows[l].cells[r].firstChild)&&re(a).jqxCheckBox({disabled:n.disabled})}if(h.editable&&!n.disabled){var o,s=n.table[0].rows.length,r=n._getcolumnindex(h.datafield);if(void 0!==n.editrow&&void 0===n.editcell[h.datafield]&&(n.editcell[h.datafield]=i),h.cellbeginedit)if(0==h.cellbeginedit(d.checkboxrow,h.datafield,h.columntype,!t))return void n.setcellvalue(d.checkboxrow,h.datafield,!t,!0);if(!h.cellvaluechanging||null!=(o=h.cellvaluechanging(d.checkboxrow,h.datafield,h.columntype,i,t))&&(t=o),"selectedrow"!==n.editmode)for(var a,l=0;l<s;l++)(a=n.table[0].rows[l].cells[r].firstChild)&&re(a).jqxCheckBox("destroy");n.editcell&&0==n.editcell.validated?n.setcellvalue(d.checkboxrow,h.datafield,!t,!0):"selectedrow"!==n.editmode||null==n.editcell?(o=n.getrowdata(d.checkboxrow),n._raiseEvent(17,{rowindex:d.checkboxrow,row:o,datafield:h.datafield,value:i,columntype:h.columntype}),n.pushToHistory=!0,n.setcellvalue(d.checkboxrow,h.datafield,t,!0),n.pushToHistory=!1,n._raiseEvent(18,{rowindex:d.checkboxrow,row:o,datafield:h.datafield,oldvalue:i,value:t,columntype:h.columntype})):(n.pushToHistory=!0,n.setcellvalue(d.checkboxrow,h.datafield,t,!1,!1),n.pushToHistory=!1),h.cellendedit&&h.cellendedit(d.checkboxrow,h.datafield,h.columntype,t)}else h.checkboxcolumn&&(n.editcell&&n.endcelledit(n.editcell.row,n.editcell.column,!1,!0),n.disabled||(t?n.selectrow(d.checkboxrow):n.unselectrow(d.checkboxrow),n.autosavestate&&n.savestate&&n.savestate()))}):(d.checkboxrow=this.getboundindex(e),re(d.firstChild).jqxCheckBox("_setState",t,!(this.editable&&h.editable||h.checkboxcolumn))))},_renderwidgetcell:function(e,t,i,s,r){0==re(t).find(".jqx-grid-widget").length?(t.innerHTML='<div class="jqx-grid-widget" style="opacity: 1; position: absolute; width: 100%; height:100%; top: 0%; left: 0%; padding: 0px;"></div>',i.createwidget(s,i.datafield,r,t.firstChild),re(t.firstChild).attr("hideFocus","true"),re(t.firstChild).children().addClass("jqx-grid-widget"),t.widget=re(t.firstChild),t.widgetrow=e.getboundindex(s),i.widget=re(t.firstChild)):(i.initwidget(e.getboundindex(s),i.datafield,r,t.firstChild),t.widgetrow=e.getboundindex(s),re(t.firstChild).val(r))},_renderprogresscell:function(e,t,i,s,r){var l=re(t);if("rating"===i.columntype){e._linkadded||((n=document.createElement("link")).rel="stylesheet",n.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",document.head.appendChild(n),e._linkadded=!0),i.ratingmax||(i.ratingmax=5);for(var o="",a=0;a<i.ratingmax;a++)o+=a+1<=r?'<span style="color: rgba(255, 165, 0, 1);" class="fa fa-star checked"></span>':'<span style="color: rgba(255, 165, 0, .3);" class="fa fa-star"></span>';var n=i.cellsalign;t.innerHTML='<div style="display: flex; width: 100%; height: 100%; justify-content: '+(n="right"===n?"flex-end":n)+'; padding: 5px; box-sizing: border-box; font-size: 16px; align-items: center;">'+o+"</div>"}else""==r&&(r=!1),0==l.find(".jqx-progress").length?(t.innerHTML='<progress class="jqx-progress" max="100" style="opacity: 1; position: absolute; top: 10%; left: 10%; width:80%; height:80%; padding: 0px;"/>',re(t.firstChild).val(r),t.progress=re(t.firstChild),t.progressrow=e.getboundindex(s)):(t.progressrow=e.getboundindex(s),re(t.firstChild).val(r))},_renderbuttoncell:function(e,t,i,s,r){var l;e.host.jqxButton&&(""==r&&(r=!1),0==re(t).find(".jqx-button").length?(t.innerHTML='<input type="button" style="opacity: 1; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',re(t.firstChild).val(r),re(t.firstChild).attr("hideFocus","true"),re(t.firstChild).jqxButton({disabled:e.disabled,theme:e.theme,height:e.rowsheight-4,width:i.width-4}),t.button=re(t.firstChild),t.buttonrow=e.getboundindex(s),this.isTouchDevice()?(l=re.jqx.mobile.getTouchEventName("touchend"),e.addHandler(re(t.firstChild),l,function(e){i.buttonclick&&i.buttonclick(t.buttonrow,e)})):e.addHandler(re(t.firstChild),"click",function(e){i.buttonclick&&i.buttonclick(t.buttonrow,e)})):(t.buttonrow=e.getboundindex(s),re(t.firstChild).val(r)))},_clearvisualrow:function(e,t,i,s,r){for(var l,o,a,n=this.toTP("jqx-grid-cell"),d=(t&&(n=" "+this.toTP("jqx-grid-group-cell")),n+=" "+this.toTP("jqx-grid-cleared-cell"),this.table[0].rows),h=0;h<s+r;h++)d[i]&&((l=d[i].cells[h]).className!=n&&(l.className=n),o=this.columns.records[h],this._horizontalvalue==e||o.pinned||1==this.oldhscroll&&(l.style.marginLeft=-e+"px"),a=o.width,(a=(a=o.adaptivewidth?o.adaptivewidth:a)<o.minwidth?o.minwidth:a)>o.maxwidth&&(a=o.maxwidth),parseInt(l.style.width)!=a&&(re(l)[0].style.width="auto"!=a?a+"px":a),""!=l.title&&(l.title=""),""!=l.innerHTML&&(l.innerHTML=""));d[i]&&(t=this.rowsheight,this.cardview&&(t=this.cardheight),parseInt(d[i].style.height)!=t&&(d[i].style.height=parseInt(t)+"px"))},_findgroupstate:function(e){e=this._findgroup(e);return null!=e&&e.expanded},_findgroup:function(e){return this.expandedgroups[e]||null},_clearcaches:function(){this._columnsbydatafield=new Array,this._pagescache=new Array,this._pageviews=new Array,this._cellscache=new Array,this._columnClassNameCache=new Array,this._columnCellsRenderCache=new Array,this.heights=new Array,this.hiddens=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array,this.details=new Array,this.expandedgroups=new Array,this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,re.jqx.dataFormat&&re.jqx.dataFormat.cleardatescache(),this.tableheight=null},_getColumnText:function(e){if(null==this._columnsbydatafield&&(this._columnsbydatafield=new Array),this._columnsbydatafield[e])return this._columnsbydatafield[e];var t=e,i=null;return re.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return t=this.text,i=this,!1}),this._columnsbydatafield[e]={label:t,column:i},this._columnsbydatafield[e]},_getcolumnbydatafield:function(e){if(null==this.__columnsbydatafield&&(this.__columnsbydatafield=new Array),this.__columnsbydatafield[e])return this.__columnsbydatafield[e];var t=null;return re.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return this.text,t=this,!1}),this.__columnsbydatafield[e]=t,this.__columnsbydatafield[e]},isscrollingvertically:function(){return this.vScrollBar.jqxScrollBar("isScrolling")},_renderrowdetails:function(e,t,i,s,r,l){if(null!=t){var o=re(t),a=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&0<this.groups.length)for(var n,d=0;d<=r;d++)(n=re(t.cells[d]))[0].innerHTML="",n[0].className="jqx-grid-details-cell";if("none"==(n=re(t.cells[0]))[0].style.display){for(var h=t.cells[0],c=2;null!=h&&"none"==h.style.display&&c<10;)h=t.cells[0+c-1],c++;n=re(h)}if(this.rtl)for(var u=s;u<r;u++)t.cells[u].innerHTML="",t.cells[u].className="jqx-grid-details-cell";n.css("width","100%"),o.height(i.rowdetailsheight),n[0].className=e;s=this.getboundindex(i),o=s+"_";if(this._rowdetailscache[o])return e=this._rowdetailscache[o].html,void(this.initrowdetails?this._rowdetailscache[o].element&&(g=this._rowdetailscache[o].element,p=n.coord(),m=this.gridcontent.coord(),w=parseInt(p.top)-parseInt(m.top),f=parseInt(p.left)-parseInt(m.left),this.rtl&&(f=0),re(g).css("top",w),re(g).css("left",f),re(g).css("display","block"),re(g).width(this.host.width()-a),this.layoutrowdetails&&this.layoutrowdetails(s,g,this.element,this.getrowdata(s))):n[0].innerHTML=e);n[0].innerHTML="";var g,p,m,w,f,e='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+(a=this.enablerowdetailsindent?a:0)+'px;">'+i.rowdetails+"</div>";this.rtl&&(e='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+a+'px;">'+i.rowdetails+"</div>"),this._rowdetailscache[o]={id:t.id,html:e},this.initrowdetails?(g=re(e)[0],re(this.gridcontent).prepend(re(g)),re(g).css("position","absolute"),re(g).width(this.host.width()-a),re(g).height(n.height()),p=n.coord(),re(g).css("z-index",1799),this.isTouchDevice()&&re(g).css("z-index",1999),re(g).addClass(this.toThemeProperty("jqx-widget-content")),p=n.coord(),m=this.gridcontent.coord(),w=parseInt(p.top)-parseInt(m.top),f=parseInt(p.left)-parseInt(m.left),re(g).css("top",w),re(g).css("left",f),this.content[0].scrollTop=0,this.content[0].scrollLeft=0,""!=(i=re(re(g).children()[0]))[0].id&&(i[0].id=i[0].id+s),this.initrowdetails(s,g,this.element,this.getrowdata(s)),this._rowdetailscache[o].element=g,this._rowdetailselementscache[s]=g):n[0].innerHTML=e}},_defaultcellsrenderer:function(e,t){""!=t.cellsformat&&re.jqx.dataFormat&&(re.jqx.dataFormat.isDate(e)?e=re.jqx.dataFormat.formatdate(e,t.cellsformat,this.gridlocalization):re.jqx.dataFormat.isNumber(e)&&(e=re.jqx.dataFormat.formatnumber(e,t.cellsformat,this.gridlocalization)));var i="8px";if(31!=this.rowsheight&&((i=this.rowsheight/2-this._cellheight/2)<0&&(i=4),i+="px"),this.enableellipsis){if("center"==t.cellsalign||"middle"==t.cellsalign)return'<div class="jqx-grid-cell-middle-align" style="margin-top: '+i+';">'+e+"</div>";if("left"==t.cellsalign)return'<div class="jqx-grid-cell-left-align" style="margin-top: '+i+';">'+e+"</div>";if("right"==t.cellsalign)return'<div class="jqx-grid-cell-right-align" style="margin-top: '+i+';">'+e+"</div>"}return"center"==t.cellsalign||"middle"==t.cellsalign?'<div style="text-align: center; margin-top: '+i+';">'+e+"</div>":'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+i+"; float: "+t.cellsalign+';">'+e+"</span>"},getcelltext:function(e,t){if(null==e||null==t)return null;e=this.getcellvalue(e,t),t=this.getcolumn(t);return t&&""!=t.cellsformat&&re.jqx.dataFormat&&(re.jqx.dataFormat.isDate(e)?e=re.jqx.dataFormat.formatdate(e,t.cellsformat,this.gridlocalization):re.jqx.dataFormat.isNumber(e)&&(e=re.jqx.dataFormat.formatnumber(e,t.cellsformat,this.gridlocalization))),e},getcelltextbyid:function(e,t){if(null==e||null==t)return null;e=this.getcellvaluebyid(e,t),t=this.getcolumn(t);return t&&""!=t.cellsformat&&re.jqx.dataFormat&&(re.jqx.dataFormat.isDate(e)?e=re.jqx.dataFormat.formatdate(e,t.cellsformat,this.gridlocalization):re.jqx.dataFormat.isNumber(e)&&(e=re.jqx.dataFormat.formatnumber(e,t.cellsformat,this.gridlocalization))),e},_getcellvalue:function(e,t){var i,s=null;return s=t.bounddata[e.datafield],this.batcheditable&&void 0!==(i=t.bounddata["_temp"+e.datafield])&&(s=i),null!=e.displayfield&&(s=t.bounddata[e.displayfield],this.batcheditable&&void 0!==(i=t.bounddata["_temp"+e.displayfield])&&(s=i)),null==s&&(s=""),this.enableSanitize&&s&&"string"==typeof s?this.escape_HTML(s):s},getcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),s=e,r="";return null!=(s=isNaN(i)?s:this.getrowdata(i))&&(r=s[t]),this._getcellresult(r,e,t)},getrenderedcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),s=e,r="";return null!=(s=isNaN(i)?s:this.getrenderedrowdata(i))&&(r=s[t]),this._getcellresult(r,e,t)},_getcellresult:function(e,t,i){var s=this.getcolumn(i);if(null==s)return null;var s=s.getcolumnproperties(),r=s.hidden,l=s.width,o=s.pinned,a=s.cellsalign,s=s.cellsformat,n=this.getrowheight(t);return 0==n?null:{value:e,row:t,column:i,datafield:i,width:l,height:n,hidden:r,pinned:o,align:a,format:s}},setcellvaluebyid:function(e,t,i,s,r){e=this.getrowboundindexbyid(e);return this.setcellvalue(e,t,i,s,r)},getcellvaluebyid:function(e,t){e=this.getrowboundindexbyid(e);return this.getcellvalue(e,t)},setcellvalue:function(t,i,e,s,r){if(null==t||null==i)return!1;var l=parseInt(t),o=(this._columnClassNameCache=[],t),a=(isNaN(l)||(o=this.getrowdata(l)),!1),n=(this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(a=!0),this.virtualmode&&(this._pagescache=new Array),this.sortcache&&(this.sortcache={}),""),d="";if(o[i]&&e&&re.jqx.dataFormat.isDate(o[i])&&re.jqx.dataFormat.isDate(e)&&o[i].toString()===e.toString())this._updating||0==s||this._renderrows(this.virtualsizeinfo);else{if(null==o||o[i]===e)return this._updating||0==s||this._renderrows(this.virtualsizeinfo),!1;if(null!==o[i]||""!==e){var h,c=this._getcolumnbydatafield(i),u="string",g=(this.source||(this.source=new re.jqx.dataAdapter({})),this.source.datafields||(this.source._source?this.source._source.datafields:null));if(g&&(h="",re.each(g,function(){if(this.name==c.displayfield)return this.type&&(h=this.type),!1}),h&&(u=h),d=o[c.displayfield]),n=o[i],this.pushToHistory&&(this._undoRedoIndex=-1,this._undoRedo.push({action:"setcellvalue",data:{oldvalue:n,value:e,datafield:i,row:t}})),(!c.nullable||null!=e&&""!==e&&c.nullable&&void 0===e.label)&&(re.jqx.dataFormat.isNumber(n)||"number"==u||"float"==u||"int"==u||"decimal"==u&&"date"!=u?(this.gridlocalization&&","==this.gridlocalization.decimalseparator&&e&&e.indexOf&&0<=e.indexOf(",")&&(e=e.replace(",",".")),e=new Number(e),e=parseFloat(e),isNaN(e)&&(e=0)):!re.jqx.dataFormat.isDate(n)&&"date"!=u||""==e||(u=e,"Invalid Date"!=(u=new Date(u))&&null!=u?e=u:"Invalid Date"==u&&(e=u=re.jqx.dataFormat.parsedate(e,c.cellsformat))),o[i]===e))this._updating||0==s||this._renderrows(this.virtualsizeinfo);else{var u=this.source&&this.source._source.localdata&&"observableArray"===this.source._source.localdata.name,p=(o[i]=e,!u||(m=this.source._source.localdata)._updating||(m._updating=!0,m[t][i]=e,m._updating=!1),this.getrenderedrowdata(l,!0));if(p){if(p[i]=e,this.batcheditable&&(o["_temp"+i]=e,p["_temp"+i]=e,o[i]=n,p[i]=n),null!=e&&null!=e.label&&(o[(c=this._getcolumnbydatafield(i)).displayfield]=e.label,p[c.displayfield]=e.label,o[i]=e.value,p[i]=e.value,u&&!m._updating&&(m._updating=!0,m[t][i]=e.value,m[t][c.displayfield]=e.label,m._updating=!1)),a&&null!=o.dataindex&&(o.dataindex,null!=(this.dataview.cachedrecords[o.dataindex][i]=e)&&null!=e.label&&(this.dataview.cachedrecords[o.dataindex][i]=e.value,this.dataview.cachedrecords[o.dataindex][c.displayfield]=e.label)),this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var p=l,u=(a&&null!=o.dataindex&&(p=o.dataindex),this.source._source._localdata()[p]),m=(this.source.suspendKO=!0,u);if(m[i]&&m[i].subscribe)null!=e&&null!=e.label?(m[c.displayfield](e.label),m[i](e.value)):m[i](e);else{var g=this.source._source.datafields,w=null;if(g&&re.each(g,function(){if(this.name==i)return w=this.map,!1}),null==w)null!=e&&null!=e.label?(m[i]=e.value,m[c.displayfield]=e.label):m[i]=e;else{var f=w.split(this.source.mapChar);if(0<f.length){for(var v=m,b=0;b<f.length-1;b++)v=v[f[b]];v[f[f.length-1]]=e}}this.source._source._localdata.replace(u,re.extend({},m))}this.source.suspendKO=!1}if(this.sortcolumn&&this.dataview.sortby&&!this._updating){p=this.getsortinformation();if(this.sortcolumn==i&&"many"!==this.sortmode)this.dataview.clearsortdata(),this.dataview.sortby(p.sortcolumn,p.sortdirection.ascending);else if("many"===this.sortmode){var x=this.getsortcolumns();this.dataview.clearsortdata(),this.sortby(null);for(var y=0;y<x.length;y++)this.sortby(x[y].dataField,x[y].ascending)}}else this._updating||this.dataview.sortby&&this.dataview.sortcache[i]&&(this.dataview.sortcache[i]=null);if(this._cellscache=new Array,this._pagescache=new Array,this.source.updaterow&&(null==r||1==r)){var _=this.that;try{var q=this.getrowid(l);null==this.source.updaterow(q,o,function(e){0==e&&(_.setcellvalue(t,i,n,!0,!1),n!=d&&_.setcellvalue(t,_.getcolumn(i).displayfield,d,!0,!1))})&&0}catch(e){return _.setcellvalue(t,i,n,!!1,!1),void(n!=d&&_.setcellvalue(t,_.getcolumn(i).displayfield,d,!0,!1))}}g=this.vScrollInstance.value;return 1!=(s=this._updating&&1!=s?!1:s)&&null!=s||(_=this.that,u=function(){_.pageable&&_.updatepagerdetails&&(_.updatepagerdetails(),(_.autoheight||_.autorowheight)&&_._updatepageviews())},m=this.groupable&&0<this.groups.length,a&&!m?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.refresh(),this.rendergridcontent(!0,!1),u(),this._renderrows(this.virtualsizeinfo)):this.sortcolumn&&!m?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.reloaddata(),this.rendergridcontent(!0,!1),u(),this._renderrows(this.virtualsizeinfo)):this.groupable&&0<this.groups.length?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.pageable&&-1!=this.groups.indexOf(i)?(this._pagescache=new Array,this._cellscache=new Array,this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=new Array,this._cellscache=new Array,this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))):(this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))),this.vScrollInstance.setPosition(g),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this.showfilterrow&&this.filterable&&this.filterrow&&("list"!=(p=this.getcolumn(i).filtertype)&&"checkedlist"!=p||this._updatelistfilters(!0)),this._raiseEvent(19,{rowindex:t,datafield:i,newvalue:e,value:e,oldvalue:n}),!0}}}}},getcellvalue:function(e,t){if(null==e||null==t)return null;var i=parseInt(e);return null!=(e=isNaN(i)?e:this.getrowdata(i))?e[t]:null},getrows:function(){var e=this.dataview.records.length;if(this.virtualmode){for(var t=new Array,i=0;i<this.dataview.records.length;i++){var s=this.dataview.records[i];s&&t.push(s)}void 0===this.dataview.records.length&&re.each(this.dataview.records,function(){this&&t.push(this)});var r=0;return this.pageable&&(r=this.dataview.pagenum*this.dataview.pagesize),t.length>this.source._source.totalrecords-r?t.slice(0,this.source._source.totalrecords-r):t}if(this.dataview.sortdata){for(t=new Array,i=0;i<e;i++){var l=re.extend({},this.dataview.sortdata[i].value);t[i]=l}return t}return this.dataview.records},getrowboundindexbyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t&&t.boundindex)return this.getboundindex(t);for(var i=this.getboundrows(),s=0;s<i.length;s++)if(i[s]&&i[s].uid==e)return s;return-1},getrowdatabyid:function(e){var t=this.dataview.recordsbyid["id"+e];return t||(t=this.getrowboundindexbyid(e),this.getboundrows()[t])},getrowdata:function(e){return null==e&&(e=0),(this.virtualmode?this.dataview.records:this.getboundrows())[e]},getrenderedrowdata:function(e,t){var i,s;return null==e&&(e=0),this.virtualmode?(i=this.getrowvisibleindex(e),this.dataview.loadedrecords[i]):0<=(i=this.getrowvisibleindex(e))?(this.groupable&&0<this.groups.length?s=this.dataview.loadedrecords[i]:(s=this.dataview.loadedrecords[i],!this.pageable||null!=t&&0!=t||(s=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+e])),s):null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(e){for(var t=this.getdisplayrows(),i=0;i<t.length;i++)if(t[i])if(void 0!==t[i].dataindex){if(t[i].dataindex==e)return t[i].visibleindex}else if(t[i].boundindex==e)return t[i].visibleindex;return-1},getboundindex:function(e){var t=e.boundindex;return this.groupable&&0<this.groups.length&&this.pageable&&e.bounddata&&(t=this.getrowboundindexbyid(e.bounddata.uid)),0<this.dataview.filters.length&&(e.bounddata?void 0!==e.bounddata.dataindex&&(t=e.bounddata.dataindex):void 0!==e.dataindex&&(t=e.dataindex)),t},getrowboundindex:function(e){e=this.getdisplayrows()[e];return e?void 0!==e.dataindex?e.dataindex:e.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(e){var t=this.getvisiblerows();return t?t[e]:null},getloadedrowdata:function(e){var t=this.getloadedrows();return t?t[e]:null},getvisiblerows:function(){if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){for(var e=[],t=0;t<this.dataview.pagesize;t++){if(null==(i=this.dataview.loadedrecords[t+this.dataview.pagesize*this.dataview.pagenum]))break;e.push(i)}return e}if(null==this._startboundindex||null==this._endboundindex)return this.dataview.loadedrecords;for(var i,e=[],t=this._startvisibleindex;t<=this._endvisibleindex&&null!=(i=this.dataview.loadedrecords[t]);t++)e.push(i);return e},getrowid:function(e){if(null==e&&(e=0),this.virtualmode){var t=this.getrowvisibleindex(e);if(i=this.dataview.loadedrecords[t])return i.uid}else{var i=null,s=0<this.dataview.filters.length;if(0<=e&&e<this.dataview.bounditems.length&&!s)if(this.groupable&&this.groups.length,t=this.getrowvisibleindex(e),i=this.dataview.loadedrecords[t])return i.uid;if(0<this.dataview.filters.length)return(i=this.getboundrows()[e])&&null!=i.uid?i.uid:null}return null},_updateGridData:function(e){var t=!1;(t=this.filterable&&this._initfilterpanel&&this.dataview.filters.length?!0:t)?(this.dataview.refresh(),"updaterow"==e?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&0<this.groups.length?(this.dataview.reloaddata(),this.render()):("updaterow"===e&&(this.dataview.refresh(),this.virtualmode||this._render(!0,!0,!1,!1,!1)),this._cellscache=new Array,this._pagescache=new Array,this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(t,i,a){if(null==t||null==i)return!1;var e,s=this.that,r=!1,l=(s._datachanged=!0,this._columnClassNameCache=[],this.pushToHistory&&(e=this.getrowdatabyid(t),this._undoRedoIndex=-1,this._undoRedo.push({action:"updaterow",data:{id:t,rowdata:i,oldrowdata:e}})),function(i,e,s){if(i._loading)throw new Error("jqxGrid: "+i.loadingerrormessage);var t,r,l=!1,o=(re.isArray(e)?(re.each(e,function(e,t){l=i.dataview.updaterow(""+this,s[e],!1)}),i._cellscache=new Array,i._pagescache=new Array,i.dataview.refresh()):l=i.dataview.updaterow(e,s),i.vScrollInstance.value);return null!=a&&1!=a||null!=i._updating&&0!=i._updating||i._updateGridData("updaterow"),i.showaggregates&&i._updatecolumnsaggregates&&i._updatecolumnsaggregates(),i.source&&i.source._knockoutdatasource&&!i._updateFromAdapter&&i.autokoupdates&&i.source._source._localdata&&(t=i.dataview.recordsbyid["id"+e],r=i.dataview.records.indexOf(t),r=i.source._source._localdata()[r],i.source.suspendKO=!0,i.source._source._localdata.replace(r,re.extend({},t)),i.source.suspendKO=!1),i.source&&i.source._source.localdata&&"observableArray"===i.source._source.localdata.name&&!i.source._source.localdata._updating&&(i.source._source.localdata._updating=!0,r=i.getrowboundindexbyid(e),i.source._source.localdata.set(r,s),i.source._source.localdata._updating=!1),i.vScrollInstance.setPosition(o),l});if(this.source.updaterow)try{null==(r=this.source.updaterow(t,i,function(e){1==e||null==e?l(s,t,i):r=!1}))&&(r=!0)}catch(e){r=!1}else r=l(s,t,i);return r},deleterow:function(t,n){if(null==t)return!1;var i=!(this._datachanged=!0),s=this.that,d=this.getrowboundindexbyid(t),h=new Array;new Array;if(null!=d&&(0<=this.selectedrowindexes.indexOf(d)&&this.selectedrowindexes.splice(this.selectedrowindexes.indexOf(d),1),this.selectedrowindex==d&&(this.selectedrowindex=-1),!this.virtualmode)){if(0<=s.selectionmode.indexOf("row"))re.each(this.selectedrowindexes,function(){var e=s.getrowid(this);h.push(e)}),this.selectedrowindexes=new Array,this.selectedrowindex=-1;else if(0<=s.selectionmode.indexOf("cell"))for(var e in s.selectedcells){var e=s.selectedcells[e],r=s.getrowid(e.rowindex);e.rowid=r}this._rendervisualrows()}var l=function(t,e){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var i=!1,s=t.vScrollInstance.value;if(re.isArray(e)?(re.each(e,function(){i=t.dataview.deleterow(this,!1)}),t._cellscache=new Array,t._pagescache=new Array,t.dataview.refresh()):i=t.dataview.deleterow(e),!t.virtualmode)if(0<=t.selectionmode.indexOf("row"))re.each(h,function(){var e=t.getrowboundindexbyid(this);-1!=e&&t.selectrow(e,!1)});else{var r,l=new Array;for(r in t.selectedcells){var o=t.selectedcells[r],a=o.rowid,a=t.getrowboundindexbyid(a);-1!=a&&(l[(o.rowindex=a)+"_"+o.datafield]=o)}t.selectedcells=l}return null!=t._updating&&0!=t._updating||null!=n&&1!=n||setTimeout(function(){t._render(!0,!0,!1,!1),"visible"!=t.vScrollBar.css("visibility")&&(t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._renderrows(t.virtualsizeinfo)),t.vScrollInstance.setPosition(s)}),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(),t.source.suspendKO=!1),t.source&&t.source._source.localdata&&"observableArray"===t.source._source.localdata.name&&!t.source._source.localdata._updating&&(t.source._source.localdata._updating=!0,t.source._source.localdata.splice(d,1),t.source._source.localdata._updating=!1),t.dataview.sortby&&"many"!==t.sortmode&&(e=t.getsortinformation()).sortcolumn&&(t.dataview.clearsortdata(),t.dataview.sortby(e.sortcolumn,e.sortdirection?e.sortdirection.ascending:null)),t.vScrollInstance.setPosition(s),i};if(this.source.deleterow)try{this.source.deleterow(t,function(e){1!=e&&null!=e||l(s,t)}),null==i&&(i=!0)}catch(e){i=!1}else i=l(s,t);return i},addrow:function(i,s,r){if(null==s)return!1;this._datachanged=!0,null==r&&(r="last");var t=!1,l=this.that;if(null==i){var o=this.dataview.filters&&0<this.dataview.filters.length?this.dataview.cachedrecords.length:this.dataview.totalrecords;if(re.isArray(s)){var a=new Array;re.each(s,function(e,t){e=l.dataview.getid(l.dataview.source.id,s[e],o+e);a.push(e)}),i=a}else for(i=this.dataview.getid(this.dataview.source.id,s,o);null!=this.dataview.recordsbyid["id"+i];)i++}var n=function(s,r,e,l){if(s._loading)throw new Error("jqxGrid: "+s.loadingerrormessage);var t,i=s.vScrollInstance.value,o=!1;return re.isArray(e)?(re.each(e,function(e,t){null!=this.dataindex&&delete this.dataindex;var i=null;null!=r&&null!=r[e]&&(i=r[e]),o=s.dataview.addrow(i,this,l,!1)}),s._cellscache=new Array,s._pagescache=new Array,s.dataview.refresh()):(null!=e&&null!=e.dataindex&&delete e.dataindex,o=s.dataview.addrow(r,e,l)),null!=s._updating&&0!=s._updating||(s._render(!0,!0,!1,!1),s.invalidate()),s.source&&s.source._knockoutdatasource&&!s._updateFromAdapter&&s.autokoupdates&&s.source._source._localdata&&(s.source.suspendKO=!0,s.source._source._localdata.push(e),s.source.suspendKO=!1),s.source&&s.source._source.localdata&&"observableArray"===s.source._source.localdata.name&&!s.source._source.localdata._updating&&(s.source._source.localdata._updating=!0,t=s.getrowboundindexbyid(r),s.source._source.localdata.set(t,e),s.source._source.localdata._updating=!1),"deferred"!=s.scrollmode?s.vScrollInstance.setPosition(i):s.vScrollInstance.setPosition(0),o};if(this.source&&this.source.addrow){try{null==(t=this.source.addrow(i,s,r,function(e,t){1!=e&&null!=e||n(l,i=null!=t?t:i,s,r)}))&&(t=!0)}catch(e){t=!1}if(0==t)return!1}else n(this,i,s,r);return t},_findvisiblerow:function(e,t){null==e&&(e=parseInt(this.vScrollInstance.value));for(var i=0,s=(t=null==t?this.rows.records:t).length;i<=s;){var r=parseInt((i+s)/2),l=t[r];if(null==l)break;if(l.top>e&&l.top+l.height>e)s=r-1;else{if(!(l.top<e&&l.top+l.height<e))return r;i=r+1}}return-1},_updatecellwidths:function(){var e=this.virtualsizeinfo;if(e){var t=this.that;if(null!=t.gridcontent){null==t.table&&(t.table=t.gridcontent.find("#contenttable"+t.element.id));var i=t.groupable&&0<t.groups.length,s=0,r=e.visiblerecords;if(t.pageable&&(t.autoheight||t.autorowheight)&&(r=t.dataview.pagesize,t.groupable&&(t.dataview.updateview(),r=t.dataview.rows.length)),t.groupable||t.pageable||!t.autoheight&&!t.autorowheight||(r=t.dataview.totalrecords),t.rowdetails&&(r+=t.dataview.pagesize),t.columns.records){for(var l=t.columns.records.length,o=t.table[0].rows,a=0;a<r;a++){var n=o[a];if(!n)break;for(var d=n.cells,h=0,c=0;c<l;c++){var u=t.columns.records[c],g=u.width,p=(u.adaptivewidth&&(g=u.adaptivewidth),d[c]);parseInt(p.style.left)!=h&&(p.style.left=h+"px"),parseInt(p.style.width)!=g&&(p.style.width=g+"px"),u.hidden&&u.hideable||u.adaptivehidden?p.style.display="none":(h+=parseFloat(g),t.adaptive&&(p.style.display=""))}0==s&&(t.table.width(parseFloat(h)+2),s=h)}t.showaggregates&&t._updateaggregates&&t._updateaggregates(),t.showfilterrow&&t.filterable&&t._updatefilterrowui&&t._updatefilterrowui(),t.showeverpresentrow&&t._updateaddnewrowui(),t._updatescrollbarsafterrowsprerender(),i&&t._renderrows(t.virtualsizeinfo)}}}},_updatescrollbarsafterrowsprerender:function(){var e=this.that,t=e.hScrollBar[0].style.visibility,i=0,s=e.vScrollBar[0].style.visibility;"visible"==s&&(i=e.scrollbarsize+3),0==e.scrollbarsize&&(i=0),e.scrollbarautoshow&&(i=0);var r=0<=(r=e.element.style.width).toString().indexOf("%")?e.host.width():parseInt(r);parseInt(e.table[0].style.width)-2>r-i?("visible"!=t&&(e.autowidth||(e.hScrollBar[0].style.visibility="visible"),e._arrange()),"visible"==s?"deferred"==e.scrollmode||e.virtualmode?e._updatevscrollbarmax():e.virtualsizeinfo&&(r=e.virtualsizeinfo.virtualheight-e._gettableheight(),!isNaN(r)&&0<r&&("hidden"!=t?e.vScrollBar.jqxScrollBar("max",r+e.scrollbarsize+4):e.vScrollBar.jqxScrollBar("max",r))):i=-2,e.hScrollBar.jqxScrollBar("max",i+e.table.width()-e.host.width())):"hidden"!=t&&(e.hScrollBar.css("visibility","hidden"),e._arrange()),e._renderhorizontalscroll()},_hascolumnstyle:function(){if(void 0!==this._hascolumnstyles)return this._hascolumnstyles;this._hascolumnstyles=!1;for(var e=0;e<this.columns.records.length;e++){var t=this.columns.records[e];if(t.style.headerBackgroundColor||t.style.headerColor||t.style.headerBackgroundHoveredColor||t.style.headerHoveredColor||t.style.headerBackgroundSelectedColor||t.style.headerSelectedColor||t.style.backgroundColor||t.style.color||t.style.backgroundHoveredColor||t.style.hoveredColor||t.style.backgroundSelectedColor||t.style.selectedColor)return this._hascolumnstyles=!0}return!1},_prerenderrows:function(e){var t=this.that;if(1==t.prerenderrequired&&(t.prerenderrequired=!1,t.editable&&t._destroyeditors&&t._destroyeditors(),null!=t.gridcontent)){t.gridcontent.find("#contenttable"+t.element.id).remove(),null!=t.table&&(t.table.remove(),t.table=null),t.table=re('<div id="contenttable'+t.element.id+'" style="overflow: hidden; position: relative;"></div>'),t.gridcontent.addClass(t.toTP("jqx-grid-content")),t.gridcontent.addClass(t.toTP("jqx-widget-content")),t.gridcontent.append(t.table);var i=t.groupable&&0<t.groups.length,s=0,r=(t.table[0].rows=new Array,t.toTP("jqx-grid-cell")),l=(i&&(r=" "+t.toTP("jqx-grid-group-cell")),e.visiblerecords);if(t.pageable&&(t.autoheight||t.autorowheight)&&(l=t.dataview.pagesize,t.groupable&&(t.dataview.updateview(),(l=t.dataview.rows.length)<t.dataview.pagesize&&(l=t.dataview.pagesize))),t.pageable||!t.autoheight&&!t.autorowheight||(l=t.dataview.totalrecords),t.groupable&&0<t.groups.length&&(t.autoheight||t.autorowheight)&&!t.pageable&&(l=t.dataview.rows.length),t.rowdetails&&(t.autoheight||t.autorowheight?l+=t.dataview.pagesize:l+=l),t.columns.records){for(var o=t.columns.records.length,a=(re.jqx.browser.msie&&8<re.jqx.browser.version&&t.table.css("opacity","0.99"),re.jqx.browser.mozilla,navigator.userAgent.indexOf("Safari"),re.jqx.browser.msie&&re.jqx.browser.version<8),n=(a&&t.host.attr("hideFocus","true"),t.tableZIndex),d=(n<l*o&&(n=l*o),t.dataview.records.length,t.isTouchDevice(),""),h=(t._hiddencolumns=!1,5+t.columns.records.length),c=0;c<l;c++){for(var u='<div role="row" style="position: relative; height:'+t.rowsheight+'px;" id="row'+c+t.element.id+'">',g=(a&&(u='<div role="row" style="position: relative; z-index: '+n+"; height:"+t.rowsheight+'px;" id="row'+c+t.element.id+'">',n--),0),p=0;p<o;p++){(y=(y=(b=t.columns.records[p]).width)<b.minwidth?b.minwidth:y)>b.maxwidth&&(y=b.maxwidth),t.rtl?(x='<div columnindex="'+p+'" role="gridcell" style="left: '+g+"px; z-index: "+(n-o+2*p)+"; width:"+y+"px;",n--):x='<div columnindex="'+p+'" role="gridcell" style="left: '+g+"px; z-index: "+n--+"; width:"+y+"px;",b.hidden&&b.hideable||b.adaptivehidden?(x+="display: none;",t._hiddencolumns=!0,n++):g+=y,0===c&&0===p&&(x+='" tabindex="'+h+'"'),x+='" class="'+r+'">';var m=this._defaultcellsrenderer("",b);u+=x=x+m+"</div>"}0==s&&(t.table.width(parseInt(g)+2),s=g),d+=u+="</div>"}t.WinJS?MSApp.execUnsafeLocalFunction(function(){t.table.html(d)}):t.table[0].innerHTML=d,t.table[0].rows=new Array;for(var w=t.table.children(),c=0;c<l;c++)for(var f=w[c],v=(t.table[0].rows.push(f),f.cells=new Array,re(f).children()),p=0;p<o;p++)f.cells.push(v[p]);if(0==l){g=0;t.showemptyrow&&(u=re('<div style="position: relative;" id="row0'+t.element.id+'"></div>'),t.table.append(u),u.height(t.rowsheight),t.table[0].rows[0]=u[0],t.table[0].rows[0].cells=new Array);for(p=0;p<o;p++){var b,x,y=(b=t.columns.records[p]).width;t.showemptyrow&&((x=re('<div style="position: absolute; height: 100%; left: '+g+"px; z-index: "+n--+"; width:"+y+'px;" class="'+r+'"></div>')).height(t.rowsheight),u.append(x),t.table[0].rows[0].cells[p]=x[0]),(y=y<b.minwidth?b.minwidth:y)>b.maxwidth&&(y=b.maxwidth),b.hidden&&b.hideable||b.adaptivehidden||(g+=y)}t.table.width(parseInt(g)+2),s=g}t._updatescrollbarsafterrowsprerender(),t.rendered&&t.rendered("rows"),t.toCompile=new Array,t._addoverlayelement()}}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var e=null,t=null,i=(this.tableheight=null,this.that),s=!1,r=!1;if((null==i.width||-1==i.width.toString().indexOf("px"))&&(null==i.width||isNaN(i.width))||(e=i.width),null!=i.width&&-1!=i.width.toString().indexOf("%")&&(e=i.width,s=!0),i.scrollbarautoshow&&(i.vScrollBar[0].style.display="none",i.hScrollBar[0].style.display="none",i.vScrollBar[0].style.zIndex=i.tableZIndex+i.headerZIndex,i.hScrollBar[0].style.zIndex=i.tableZIndex+i.headerZIndex),i.autowidth){for(var l=0,o=0;o<i.columns.records.length;o++){var a=i.columns.records[o].width;l+="auto"==a?a=i._measureElementWidth(i.columns.records[o].text):a}"hidden"!=i.vScrollBar.css("visibility")&&(l+=i.scrollbarsize+4),e=l,i.width=e}(null!=i.height&&-1!=i.height.toString().indexOf("px")||null!=i.height&&!isNaN(i.height))&&(t=i.height),null!=i.height&&-1!=i.height.toString().indexOf("%")&&(t=i.height,r=!0);function n(){var e=0;return e+=i.showheader&&null!=i.columnsheader?i.columnsheader.height()+2:0,i.pageable&&(e+=i.pagerheight),i._groupsheader()&&(e+=i.groupsheaderheight),i.showtoolbar&&(e+=i.toolbarheight),i.showfilterbar&&(e+=i.toolbarheight),i.showstatusbar&&(e+=i.statusbarheight),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(e+=i.everpresentrowheight),"visible"==i.hScrollBar[0].style.visibility&&(e+=15),e}function d(e){var t;"visible"==e.vScrollBar[0].style.visibility&&"visible"==e.hScrollBar[0].style.visibility?(e.bottomRight[0].style.visibility="visible",e.bottomRight.css({left:1+parseInt(e.vScrollBar.css("left")),top:parseInt(e.hScrollBar.css("top"))}),e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight.width(parseInt(c)+3),e.bottomRight.height(parseInt(c)+4),0<(t=e.showeverpresentrow&&"bottom"==e.everpresentrowposition?e.everpresentrowheight:0)&&!e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(c)+4+t),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-t})),e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(c)+4+e.statusbarheight+t),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.statusbarheight-t}))):e.bottomRight[0].style.visibility="hidden"}i.autoheight&&i.virtualsizeinfo?i.pageable&&i.gotopage?(t=(h=0)+(i._pageviews[0]?i._pageviews[0].height:0),t+=n(),i.showemptyrow&&0==i.dataview.totalrecords&&(t+=i.rowsheight)):(h=i.host.height()-i._gettableheight(),0<i._pageviews.length?(t=h+i._pageviews[i._pageviews.length-1].height+i._pageviews[i._pageviews.length-1].top,i.vScrollBar[0].style.visibility="hidden"):(t=n(),i.showemptyrow&&(t+=i.rowsheight))):i.autoheight&&(t=i.dataview.totalrecords*i.rowsheight,i.pageable&&i.gotopage&&(t=i.pagesize*i.rowsheight),i._loading&&i.dataloadelement.height(t=250),1e4<(t+=n())&&(t=1e4)),null!=e?(e=parseInt(e),s?i.element.style.width=i.width:i.element.style.width!=parseInt(i.width)+"px"&&(i.element.style.width=parseInt(i.width)+"px"),s&&((e=i.host.width())<=2&&i.host.width(e=600),i._oldWidth||(i._oldWidth=e))):i.host.width(250),null!=t?(this.autoheight&&(t+=2),r||(t=parseInt(t)),r?i.element.style.height=i.height:i.element.style.height!=parseInt(t)+"px"&&(i.element.style.height=parseInt(t)+"px"),r&&!i.autoheight&&(0==(t=i.host.height())&&i.host.height(t=400),i._oldHeight||(i._oldHeight=t))):i.host.height(250),i.autoheight&&(i.tableheight=null,i._gettableheight());var h=0,c=(i.showtoolbar?(i.toolbar.width(e),i.toolbar.height(i.toolbarheight-1),i.toolbar.css("top",0),h+=i.toolbarheight,t-=parseInt(i.toolbarheight)):i.toolbar[0].style.height="0px",i.showfilterbar?(i.filterbar.width(e),i.filterbar.height(i.toolbarheight-1),i.filterbar.css("top",h),h+=i.toolbarheight,t-=parseInt(i.toolbarheight)):i.filterbar[0].style.height="0px",i.showstatusbar?(i.showaggregates?i.statusbar.width(i.table?Math.max(e,i.table.width()):e):i.statusbar.width(e),i.statusbar.height(i.statusbarheight)):i.statusbar[0].style.height="0px",i.showeverpresentrow&&"bottom"===i.everpresentrowposition?(i.addnewrow.width(e),i.addnewrow.height(i.everpresentrowheight)):i.addnewrow[0].style.height="0px",i._groupsheader()?(i.groupsheader.width(e),i.groupsheader.height(i.groupsheaderheight),i.groupsheader.css("top",h),h+=u=i.groupsheader.height()+1,u<t&&(t-=parseInt(u))):(i.groupsheader[0].style.width!=e+"px"&&(i.groupsheader[0].style.width=parseInt(e)+"px"),i.groupsheader[0].style.height="0px",i.groupsheader[0].style.top!=h+"px"&&i.groupsheader.css("top",h),u=i.showgroupsheader&&i.groupable?i.groupsheaderheight:0,i.content[0].style.top!=h+u+"px"&&i.content.css("top",h+i.groupsheaderheight)),i.scrollbarsize),s=(isNaN(c)&&(c=parseInt(c),isNaN(c)?c="17px":c+="px"),c=parseInt(c),2),r=0,u=("visible"==i.vScrollBar[0].style.visibility&&(r=c+4),"visible"==i.hScrollBar[0].style.visibility&&(s=c+4+2),0==c&&(s=r=0),0),g=(i.pageable&&(u=i.pagerheight,s+=i.pagerheight),i.showstatusbar&&(s+=i.statusbarheight,u+=i.statusbarheight),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(s+=i.everpresentrowheight,u+=i.everpresentrowheight),i.hScrollBar[0].style.height!=c+"px"&&(i.hScrollBar[0].style.height=parseInt(c)+"px"),i.hScrollBar[0].style.top==h+t-4-c-u+"px"&&"0px"==i.hScrollBar[0].style.left||i.hScrollBar.css({top:h+t-4-c-u+"px",left:"0px"}),i.hScrollBar[0].style.width),p=!1,m=!1,g=(0==r?g!=e-2+"px"&&(i.hScrollBar.width(e-2),p=!0):g!=e-c-4+"px"&&(i.hScrollBar.width(e-c-4+"px"),p=!0),i.autoheight||(i.vScrollBar[0].style.width!=c+"px"&&(i.vScrollBar.width(c),m=!0),i.vScrollBar[0].style.height!=parseInt(t)-s+"px"&&(i.vScrollBar.height(parseInt(t)-s+"px"),m=!0),i.vScrollBar[0].style.left==parseInt(e)-parseInt(c)-4+"px"&&i.vScrollBar[0].style.top==h+"px"||i.vScrollBar.css({left:parseInt(e)-parseInt(c)-4+"px",top:h})),i.rtl&&(i.vScrollBar.css({left:"0px",top:h}),"hidden"!=i.vScrollBar.css("visibility")&&i.hScrollBar.css({left:c+2})),i.vScrollInstance),m=(g.disabled=i.disabled,i.autoheight||m&&g.refresh(),i.hScrollInstance);m.disabled=i.disabled,p&&m.refresh(),i.autowidth&&(i.hScrollBar[0].style.visibility="hidden"),i.statusbarheight=parseInt(i.statusbarheight),i.toolbarheight=parseInt(i.toolbarheight);d(this),i.content[0].style.width!=e-r+"px"&&i.content.width(e-r),i.content[0].style.height!=t-s+3+"px"&&i.content.height(t-s+3),i.scrollbarautoshow&&(i.content[0].style.width!=e+"px"&&i.content.width(e),i.content[0].style.height!=t+"px"&&i.content.height(t)),i.content[0].style.top!=h+"px"&&i.content.css("top",h),i.rtl&&(i.content.css("left",r),i.scrollbarautoshow&&i.content.css("left","0px"),i.table&&(g=i.table.width())<e-r&&i.content.css("left",e-g)),i.showstatusbar&&(i.statusbar.css("top",h+t-i.statusbarheight-(i.pageable?i.pagerheight:0)),i.autoheight&&(i.statusbar.css("top",h+t-2-i.statusbarheight-(i.pageable?i.pagerheight:0)),i.statusbar.height(i.statusbarheight+2)),i.showaggregates&&("visible"==i.hScrollBar.css("visibility")&&(i.hScrollBar.css({top:h+t-4-c-u+i.statusbarheight+"px"}),i.statusbar.css("top",1+h+t-c-5-i.statusbarheight-(i.pageable?i.pagerheight:0))),d(this)),i.rtl&&("visible"!=i.hScrollBar.css("visibility")?i.statusbar.css("left",i.content.css("left")):i.statusbar.css("left","0px"))),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(i.addnewrow.css("top",h+t-(i.showstatusbar?i.statusbarheight:0)-(i.pageable?i.pagerheight:0)-i.everpresentrowheight),i.rtl&&("visible"!=i.hScrollBar.css("visibility")?i.addnewrow.css("left",i.content.css("left")):i.addnewrow.css("left","0px"))),i.pageable?(i.pager.width(e),i.pager.height(i.pagerheight),i.pager.css("top",h+t-i.pagerheight-1)):i.pager[0].style.height="0px",null!=i.table&&(p=-2,"visible"==i.vScrollBar[0].style.visibility&&(p=i.scrollbarsize+3),"visible"==i.hScrollBar[0].style.visibility&&(0<=(m=p+i.table.width()-i.host.width())&&i.hScrollBar.jqxScrollBar("max",m),"visible"==i.hScrollBar[0].style.visibility&&0==m&&(i.hScrollBar[0].style.visibility="hidden",i._arrange()))),e!=parseInt(i.dataloadelement[0].style.width)&&(i.dataloadelement[0].style.width=i.element.style.width),t!=parseInt(i.dataloadelement[0].style.height)&&(i.dataloadelement[0].style.height=i.element.style.height),this.pagergotoinput&&(this.pagergotoinput.offset().top!==this.pagergoto.offset().top?(this.pagergotoinput.css("visibility","hidden"),this.pagergoto.css("visibility","hidden")):(this.pagergotoinput.css("visibility","inherit"),this.pagergoto.css("visibility","inherit"))),i._hostwidth=e},destroy:function(){if(delete re.jqx.dataFormat.datescache,delete this.gridlocalization,delete this._undoRedo,re.jqx.utilities.resize(this.host,null,!0),""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||this.removeHandler(re(window.top.document),"mouseup.grid"+this.element.id),this.table&&this.table[0]){for(var e=this.table[0].rows.length,t=0;t<e;t++){for(var i=this.table[0].rows[t],s=i.cells.length,r=0;r<s;r++)re(i.cells[r]).remove(),i.cells[r]=null,delete i.cells[r];i.cells=null,i.cells&&delete i.cells,re(this.table[0].rows[t]).remove(),this.table[0].rows[t]=null}try{delete this.table[0].rows}catch(e){}this.table.remove(),delete this.table}if(this.columns&&this.columns.records){for(t=0;t<this.columns.records.length;t++){var l=this.columns.records[t];l.addnewrowwidget&&l.destroyeverpresentrowwidget&&l.destroyeverpresentrowwidget(l.addnewrowwidget),l.destroywidget&&l.destroywidget&&l.destroywidget(l.widget),this._removecolumnhandlers(this.columns.records[t]),l.element&&(re(l.element).remove(),re(l.sortasc).remove(),re(l.sortdesc).remove(),re(l.filtericon).remove(),re(l.menu).remove(),l.element=null,l.uielement=null,l.sortasc=null,l.sortdesc=null,l.filtericon=null,l.menu=null,delete l.element,delete l.uielement,delete l.sortasc,delete l.sortdesc,delete l.filtericon,delete l.menu,delete this.columnsrow[0].cells[t])}try{delete this.columnsrow[0].cells}catch(e){}delete this.columnsrow}var o,a,n;if(re.removeData(document.body,"contextmenu"+this.element.id),this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.editable&&this._destroyeditors&&this._destroyeditors(),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(re(document),"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null),this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null),this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null),this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(re(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null),this.removeHandler(re(document),"selectstart."+this.element.id),this.removeHandler(re(document),"mousedown.resize"+this.element.id),this.removeHandler(re(document),"mouseup.resize"+this.element.id),this.removeHandler(re(document),"mousemove.resize"+this.element.id),this.isTouchDevice()&&(o=re.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,a=re.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,n=re.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id,this.removeHandler(re(document),o),this.removeHandler(re(document),a),this.removeHandler(re(document),n)),this.removeHandler(re(document),"mousedown.reorder"+this.element.id),this.removeHandler(re(document),"mouseup.reorder"+this.element.id),this.removeHandler(re(document),"mousemove.reorder"+this.element.id),this.isTouchDevice()&&(o=re.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,a=re.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,n=re.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id,this.removeHandler(re(document),o),this.removeHandler(re(document),a),this.removeHandler(re(document),n)),this.removeHandler(re(window),"resize."+this.element.id),this.resizeline&&this.resizeline.remove(),this.resizestartline&&this.resizestartline.remove(),this.groupable&&(o="mousemove.grouping"+this.element.id,a="mousedown.grouping"+this.element.id,n="mouseup.grouping"+this.element.id,this.removeHandler(re(document),o),this.removeHandler(re(document),a),this.removeHandler(re(document),n)),this.columnsreorder&&(o="mousemove.reorder"+this.element.id,a="mousedown.reorder"+this.element.id,n="mouseup.reorder"+this.element.id,this.removeHandler(re(document),o),this.removeHandler(re(document),a),this.removeHandler(re(document),n),delete this.columnsbounds),this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll")),this._removeHandlers(),this.hScrollInstance.destroy(),this.vScrollInstance.destroy(),this.hScrollBar.remove(),this.vScrollBar.remove(),this._clearcaches(),delete this.hScrollInstance,delete this.vScrollInstance,delete this.visiblerows,delete this.hittestinfo,delete this.rows,delete this.columns,delete this.columnsbydatafield,delete this.pagescache,delete this.pageviews,delete this.cellscache,delete this.heights,delete this.hiddens,delete this.hiddenboundrows,delete this.heightboundrows,delete this.detailboundrows,delete this.details,delete this.expandedgroups,delete this._rowdetailscache,delete this._rowdetailselementscache,delete this.columnsmenu,this.columnsheader&&(this.columnsheader.remove(),delete this.columnsheader),this.selectionarea&&(this.selectionarea.remove(),delete this.selectionarea),this.menuitemsarray&&this.menuitemsarray.length)for(var d=this.menuitemsarray.length,t=0;t<d;t++)re(this.menuitemsarray[t]).remove();delete this.menuitemsarray,this.dataview._clearcaches(),this.content.removeClass(),this.content.remove(),this.content=null,delete this.content,this.vScrollBar=null,this.hScrollBar=null,delete this.hScrollBar,delete this.hScrollBar,this.gridcontent&&(this.gridcontent.remove(),delete this.gridcontent),this.gridmenu&&(this.gridmenu=null,delete this.gridmenu),delete this._mousemovefunc,delete this._mousewheelfunc,this.dataview.destroy(),delete this.dataview,this.bottomRight.remove(),delete this.bottomRight,this.wrapper.remove(),delete this.wrapper,this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv),this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput),this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto),this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows),this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),delete this.pagerfirstbutton),this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton),this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons),this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails),this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput),this.pager.remove(),delete this.pager,this.groupsheader.remove(),delete this.groupsheader,this.dataloadelement.remove(),delete this.dataloadelement,this.toolbar.remove(),delete this.toolbar,this.statusbar.remove(),delete this.statusbar,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.host=null,delete this.host,delete this.element,delete this.set,delete this.get,delete this.that,delete this.call},_initializeColumns:function(){var e=this.source?this.source.datafields:null,i=!!(e=null==e&&this.source&&this.source._source?this.source._source.datafields:e)&&0<e.length;if(this.autogeneratecolumns){var t,s=new Array;if(e)re.each(e,function(){var e={datafield:this.name,text:this.text||this.name,cellsformat:this.format||""};s.push(e)});else if(0<this.source.records.length)for(t in this.source.records[0])"uid"!=t&&s.push(l={width:100,datafield:t,text:t});this.columns=s}if(this.columns&&this.columns.records)for(var r=0;r<this.columns.records.length;r++)this._removecolumnhandlers(this.columns.records[r]);var l,o=this.that,a=new re.jqx.collection(this.element),n=0,d=(this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,this.commandcolumn&&this.columns.push({text:"",visible:this.editable,width:120,filterable:!1,sortable:!1,editable:!1,resizable:!1,draggable:!1,cellsrenderer:function(e,t){if(o.commandcolumnrenderer){t=o.commandcolumnrenderer(e,t,o._commandColumnEdit&&o._commandColumnEdit.boundindex===e);if(void 0!==t)return t}return o._commandColumnEdit&&o._commandColumnEdit.boundindex===e?'<span style="display: flex; justify-content: center; height: 100%; align-items: center;"><span style="cursor: pointer; text-decoration: underline;" update>'+o.gridlocalization.udpaterowstring+'</span><span style="cursor: pointer; text-decoration: underline; margin-left: 10px;" cancel>'+o.gridlocalization.cancelstring+"</span></span>":'<span style="display: flex; justify-content: center; height: 100%; align-items: center;"><span style="cursor: pointer; text-decoration: underline;" edit>'+o.gridlocalization.editstring+"</span></span>"},datafield:"_commandColumn"}),this.groupable&&re.each(this.groups,function(e){var t=new h(o,this);t.visibleindex=n++,t.width=o.groupindentwidth,a.add(t),t.grouped=!0,t.filterable=!1,t.sortable=!1,t.editable=!1,t.resizable=!1,t.draggable=!1}),this.rowdetails&&this.showrowdetailscolumn&&((l=new h(o,this)).visibleindex=n++,l.width=o.groupindentwidth,l.pinned=!0,l.editable=!1,l.filterable=!1,l.draggable=!1,l.groupable=!1,l.resizable=!1,a.add(l),o._haspinned=!0),"checkbox"==this.selectionmode&&((l=new h(o,null)).visibleindex=n++,l.width=o.groupindentwidth,l.checkboxcolumn=!0,l.editable=!1,l.columntype="checkbox",l.groupable=!1,l.draggable=!1,l.filterable=!1,l.resizable=!1,l.datafield="_checkboxcolumn",a.add(l)),new Array);re.each(this.columns,function(e){if(null!=o.columns[e]){var t=new h(o,this);if(t.visibleindex=n++,null!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(o._haspinned=!0),!o.showeverpresentrow||"addButtonColumn"!==this.datafield&&"resetButtonColumn"!==this.datafield&&"updateButtonColumn"!==this.datafield&&"deleteButtonColumn"!==this.datafield||(t.editable=!1,t.groupable=!1,t.draggable=!1,t.filterable=!1,t.resizable=!1,t.menu=!1),null==this.datafield)o.source&&o.source._source&&"array"==o.source._source.datatype&&(i||(o.source._source.datafields||(o.source._source.datafields=new Array),o.source._source.datafields.push({name:e.toString()})),this.datafield=e.toString(),this.displayfield=e.toString(),t.datafield=this.datafield,t.displayfield=this.displayfield);else{if(d[this.datafield])throw new Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");d[this.datafield]=!0}a.add(t)}}),this.adaptive&&((l=new h(o,null)).visibleindex=n++,l.width=o.groupindentwidth,l.editable=!1,l.columntype="adaptive",l.cellsalign="center",l.groupable=!1,l.draggable=!1,l.menu=!1,l.sortable=!1,l.filterable=!1,l.resizable=!1,l.datafield="_adaptivecolumn",a.add(l)),this.rtl&&a.records.reverse(),this.columns=a},_initializeRows:function(){var e=new re.jqx.collection(this.element);this.rows&&this.rows.clear(),this.rows=e},_raiseEvent:function(e,t){var i,s;if(null==t&&(t={owner:null}),!1!==this._trigger)return s=this.events[e],this._camelCase||(s=s.toLowerCase()),2!=e&&15!=e||this.showeverpresentrow&&(0<=this.everpresentrowactions.indexOf("delete")||0<=this.everpresentrowactions.indexOf("update"))&&(this.updateeverpresentrow&&(i=this),setTimeout(function(){i.updateeverpresentrow()},50)),e=t,e.owner=this,s=new re.Event(s),s.owner=this,s.args=e,e=this.host.trigger(s),t=s.args,e},wheel:function(e,t){return t.autoheight&&"visible"!=t.hScrollBar.css("visibility")?e.returnValue=!0:(i=0,(e=e||window.event).originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i?((t=t._handleDelta(i))&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),null!=e.stopPropagation&&e.stopPropagation()),!!t&&(e.returnValue=t=!1)):(e.preventDefault&&e.preventDefault(),void(e.returnValue=!1)));var i},_handleDelta:function(e){if("hidden"!=this.vScrollBar.css("visibility")){var t=this.vScrollInstance.value;if(e<0?this.scrollDown():this.scrollUp(),t!=this.vScrollInstance.value)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){t=this.hScrollInstance.value;if(0<e?this.hScrollInstance.value>2*this.horizontalscrollbarstep?this.hScrollInstance.setPosition(this.hScrollInstance.value-2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(this.hScrollInstance.max),t!=this.hScrollInstance.value)return this._activeFilterElement&&this._activeFilterElement.jqxDropDownList("close"),!0}return!1},scrollDown:function(){var e;"hidden"!=this.vScrollBar.css("visibility")&&((e=this.vScrollInstance).value+this.rowsheight<=e.max?e.setPosition(parseInt(e.value)+this.rowsheight):e.setPosition(e.max))},scrollUp:function(){var e;"hidden"!=this.vScrollBar.css("visibility")&&((e=this.vScrollInstance).value-this.rowsheight>=e.min?e.setPosition(parseInt(e.value)-this.rowsheight):e.setPosition(e.min))},_removeHandlers:function(){var e=this.that,t=(e.removeHandler(re(window),"orientationchange.jqxgrid"+e.element.id),e.removeHandler(re(window),"orientationchanged.jqxgrid"+e.element.id),e.removeHandler(e.vScrollBar,"valueChanged"),e.removeHandler(e.hScrollBar,"valueChanged"),e.vScrollInstance.valueChanged=null,e.hScrollInstance.valueChanged=null,"mousedown.jqxgrid");e.isTouchDevice()&&(t=re.jqx.mobile.getTouchEventName("touchend")),e.removeHandler(e.host,"dblclick.jqxgrid"),e.removeHandler(e.host,t),e.removeHandler(e.content,"mousemove",e._mousemovefunc),e.removeHandler(e.host,"mouseleave.jqxgrid"),e.removeHandler(e.content,"mouseenter"),e.removeHandler(e.content,"mouseleave"),e.removeHandler(e.content,"mousedown"),e.removeHandler(e.content,"scroll"),e.removeHandler(e.content,"selectstart."+e.element.id),e.removeHandler(e.host,"dragstart."+e.element.id),e.removeHandler(e.host,"keydown.edit"+e.element.id),e.removeHandler(re(document),"keydown.edit"+e.element.id),e.removeHandler(re(document),"keyup.edit"+e.element.id),e._mousemovedocumentfunc&&e.removeHandler(re(document),"mousemove.selection"+e.element.id,e._mousemovedocumentfunc),e.removeHandler(re(document),"mouseup.selection"+e.element.id),e._mousewheelfunc&&e.removeHandler(e.host,"mousewheel",e._mousewheelfunc),e.editable&&e.removeHandler(re(document),"mousedown.gridedit"+e.element.id),e.host.off&&(e.content.off("mousemove"),e.host.off("mousewheel"))},_addHandlers:function(){var e,h=this.that,i=h.isTouchDevice(),t=(i||h.addHandler(h.host,"dragstart."+h.element.id,function(e){return!1}),h.scrollbarautoshow&&(h.addHandler(h.host,"mouseenter.gridscroll"+h.element.id,function(e){h.vScrollBar.fadeIn("fast"),h.hScrollBar.fadeIn("fast")}),h.addHandler(h.host,"mouseleave.gridscroll"+h.element.id,function(e){h.vScrollInstance.isScrolling()||h.hScrollInstance.isScrolling()||(h.vScrollBar.fadeOut("fast"),h.hScrollBar.fadeOut("fast"))})),h.editable&&h.addHandler(re(document),"mousedown.gridedit"+h.element.id,function(s){if(h.editable&&h.begincelledit&&h.editcell&&!h.vScrollInstance.isScrolling()&&!h.vScrollInstance.isScrolling()){var e=h.host.coord(),t=h.host.width(),i=h.host.height(),r=!1,l=!1;if((s.pageY<e.top||s.pageY>e.top+i)&&(l=r=!0),r=s.pageX<e.left||s.pageX>e.left+t?!0:r){if(h.editcell&&h.editcell.editor)switch(h.editcell.columntype){case"datetimeinput":if(h.editcell.editor.jqxDateTimeInput&&h.editcell.editor.jqxDateTimeInput("container")&&"block"==h.editcell.editor.jqxDateTimeInput("container")[0].style.display){var o=h.editcell.editor.jqxDateTimeInput("container").coord().top,a=h.editcell.editor.jqxDateTimeInput("container").coord().top+h.editcell.editor.jqxDateTimeInput("container").height();if(!l||!(s.pageY<o||s.pageY>a))return;r=!0,h.editcell.editor.jqxDateTimeInput("close")}break;case"combobox":if(h.editcell.editor.jqxComboBox&&h.editcell.editor.jqxComboBox("container")&&"block"==h.editcell.editor.jqxComboBox("container")[0].style.display){o=h.editcell.editor.jqxComboBox("container").coord().top,a=h.editcell.editor.jqxComboBox("container").coord().top+h.editcell.editor.jqxComboBox("container").height();if(!l||!(s.pageY<o||s.pageY>a))return;r=!0,h.editcell.editor.jqxComboBox("close")}break;case"dropdownlist":if(h.editcell.editor.jqxDropDownList&&h.editcell.editor.jqxDropDownList("container")&&"block"==h.editcell.editor.jqxDropDownList("container")[0].style.display){o=h.editcell.editor.jqxDropDownList("container").coord().top,a=h.editcell.editor.jqxDropDownList("container").coord().top+h.editcell.editor.jqxDropDownList("container").height();if(!l||!(s.pageY<o||s.pageY>a))return;r=!0,h.editcell.editor.jqxDropDownList("close")}break;case"template":case"custom":for(var n=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],d=0;d<n.length;d++)if(0==function(e){var t,i=h.editcell.editor.data();if(i[e]&&i[e].instance.container&&"block"==i[e].instance.container[0].style.display)return e=(i=i[e].instance).container.coord().top,t=i.container.coord().top+i.container.height(),!(!l||!(s.pageY<e||s.pageY>t))&&(r=!0,i.close(),!0)}(n[d]))return}h.endcelledit(h.editcell.row,h.editcell.column,!1,!0),h._oldselectedcell=null}}}),h.vScrollInstance.valueChanged=function(e){h.virtualsizeinfo&&(h._closemenu(),"physical"==h.scrollmode&&null!=h.currentScrollValue&&Math.abs(h.currentScrollValue-e.currentValue),h._renderrows(h.virtualsizeinfo),h.currentScrollValue=e.currentValue,h.pageable||h.groupable||!h.dataview.virtualmode||(h.loadondemandupdate&&clearTimeout(h.loadondemandupdate),h.loadondemandupdate=setTimeout(function(){h.loadondemand=!0,h._renderrows(h.virtualsizeinfo)},100)),i&&(h._lastScroll=new Date))},h.hScrollInstance.valueChanged=function(e){var t;h.virtualsizeinfo&&(h._closemenu(),t=function(){h._renderhorizontalscroll(),h._renderrows(h.virtualsizeinfo),h.editcell&&!h.editrow&&h._showcelleditor&&h.editcell.editing&&(h.hScrollInstance.isScrolling()||h._showcelleditor(h.editcell.row,h.getcolumn(h.editcell.column),h.editcell.element,h.editcell.init))},i?t():(null==h._browser?h._isIE10():h._browser,navigator&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?(h._hScrollTimer&&clearTimeout(h._hScrollTimer),h._hScrollTimer=setTimeout(function(){t()},1)):re.jqx.browser.msie?(h._hScrollTimer&&clearTimeout(h._hScrollTimer),h._hScrollTimer=setTimeout(function(){t()},.01)):t()),i&&(h._lastScroll=new Date))},h._mousewheelfunc=h._mousewheelfunc||function(e){if(!h.editcell&&h.enablemousewheel)return h.wheel(e,h),!1},h.removeHandler(h.host,"mousewheel",h._mousewheelfunc),h.addHandler(h.host,"mousewheel",h._mousewheelfunc),"mousedown.jqxgrid");i&&(t=re.jqx.mobile.getTouchEventName("touchend")),h.addHandler(h.host,t,function(e){if(h.isTouchDevice()){if(h._newScroll=new Date,h._newScroll-h._lastScroll<500)return!1;if(re(e.target).ischildof(h.vScrollBar))return!1;if(re(e.target).ischildof(h.hScrollBar))return!1}h._mousedown=new Date;var t=h._handlemousedown(e,h);return!h.isNestedGrid||h.resizablecolumn||h.columnsreorder||e.stopPropagation(),h._lastmousedown=new Date,t}),i||(h.addHandler(h.host,"dblclick.jqxgrid",function(e){return h.editable&&h.begincelledit&&"dblclick"==h.editmode?h._handledblclick(e,h):re.jqx.browser.msie&&re.jqx.browser.version<9&&h._handlemousedown(e,h),h.mousecaptured=!1,h._lastmousedown=new Date,!0}),h._mousemovefunc=function(e){if(h._handlemousemove)return h._handlemousemove(e,h)},h.addHandler(h.content,"mousemove",h._mousemovefunc),h._handlemousemoveselection&&(h._mousemovedocumentfunc=function(e){if(h._handlemousemoveselection)return h._handlemousemoveselection(e,h)},h.addHandler(re(document),"mousemove.selection"+h.element.id,h._mousemovedocumentfunc)),h.addHandler(re(document),"mouseup.selection"+h.element.id,function(e){var t;h._handlemouseupselection&&(e.shiftKey&&re(e.target).ischildof(h.host)&&h.autofill&&(t=h.editable,h.editable=!1,h._lastmousedown=new Date(2e3,1,1),h._handlemousedown(e,h),h.mousecaptured=!0,h.editable=t),h._handlemouseupselection(e,h))}));try{""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||(e=null,(e=window.parent&&document.referrer?document.referrer:e)&&-1!=e.indexOf(document.location.host)&&h.addHandler(re(window.top.document),"mouseup.grid"+h.element.id,function(e){if(h._handlemouseupselection)try{h._handlemouseupselection(e,h)}catch(e){}}))}catch(e){}h.focused=!1,i||(h.addHandler(h.content,"mouseenter",function(e){h.focused=!0,h.wrapper&&(h.wrapper.attr("tabindex",1),h.content.attr("tabindex",2)),h._overlayElement&&(h.vScrollInstance.isScrolling()||h.hScrollInstance.isScrolling()?h._overlayElement[0].style.visibility="visible":h._overlayElement[0].style.visibility="hidden")}),h.addHandler(h.content,"mouseleave",function(e){h._handlemousemove&&h.enablehover&&h._clearhoverstyle(),h._overlayElement&&(h._overlayElement[0].style.visibility="hidden"),h.focused=!1}),(h.groupable||h.columnsreorder)&&h.addHandler(re(document),"selectstart."+h.element.id,function(e){if(!0===h.__drag)return!1}),h.addHandler(h.content,"selectstart."+h.element.id,function(e){if(h.enablebrowserselection)return!0;if(h.showfilterrow&&re(e.target).ischildof(h.filterrow))return!0;if(h.showeverpresentrow){if(re(e.target).ischildof(h.addnewrow))return!0;if(h.addnewrowtop&&re(e.target).ischildof(h.addnewrowtop))return!0}return!!(e.target.className&&0<=e.target.className.indexOf("jqx-grid-widget"))||!!h.editcell&&void(e.stopPropagation&&e.stopPropagation())}),h.addHandler(re(document),"keyup.edit"+h.element.id,function(e){h._keydown=!1}),h.addHandler(re(document),"keydown.edit"+h.element.id,function(e){if(h.adaptiveview)return!0;h._keydown=!h.editcell;var t=e.charCode||e.keyCode||0;if((20===t&&(h._capsLock?h._capsLock=!1:h._capsLock=!0),h.handlekeyboardnavigation)&&((h.focused||e.target===h.element||re(e.target).ischildof(h.host))&&1==h.handlekeyboardnavigation(e)))return!1;if(h.editable&&h.editcell&&(13!=t&&27!=t&&9!=t&&32!=t||h._handleeditkeydown&&(i=h._handleeditkeydown(e,h))),27==t&&(h.mousecaptured=!1,"visible"==h.selectionarea.css("visibility")&&h.selectionarea.css("visibility","hidden")),re.jqx.browser.msie&&re.jqx.browser.version<12&&h.focused&&!h.isNestedGrid){if(13==t&&0==i)return i;var i=!0,t=e.charCode||e.keyCode||0;if((i=!h.editcell&&h.editable&&"programmatic"!=h.editmode&&h._handleeditkeydown?h._handleeditkeydown(e,h):i)&&h.keyboardnavigation&&h._handlekeydown)return(i=h._handlekeydown(e,h))||(e.preventDefault&&e.preventDefault(),null!=e.stopPropagation&&e.stopPropagation()),i}return!0}),h.addHandler(h.host,"keyup.edit"+h.element.id,function(e){if(h.adaptiveview)return!0;if(9===e.keyCode&&!re(document.activeElement).ischildof(h.filterrow)&&!re(document.activeElement).ischildof(h.pager))switch(h.selectionmode){case"singlecell":case"multiplecells":case"multiplecellsextended":case"multiplecellsadvanced":h.getselectedcell();break;default:h.getselectedrowindex()}}),h.addHandler(h.host,"keydown.edit"+h.element.id,function(e){var t,i=!0;if(h.adaptiveview)return!0;if(h.handlekeyboardnavigation&&1==h.handlekeyboardnavigation(e))return!1;return h.editable&&"programmatic"!=h.editmode&&h._handleeditkeydown&&(i=h._handleeditkeydown(e,h),h.isNestedGrid&&e.stopPropagation()),h.editcell||!e.altKey||re(document.activeElement).ischildof(h.filterrow)||re(document.activeElement).ischildof(h.pager)||(40===e.keyCode?(t=h.getselectedcell())&&h.openmenu(t.column):38===e.keyCode&&h._closemenu()),re.jqx.browser.msie&&re.jqx.browser.version<8?h.isNestedGrid&&i&&h.keyboardnavigation&&h._handlekeydown&&(i=h._handlekeydown(e,h),e.stopPropagation()):i&&h.keyboardnavigation&&h._handlekeydown&&(i=h._handlekeydown(e,h),h.isNestedGrid&&e.stopPropagation()),i||(e.preventDefault&&e.preventDefault(),null!=e.stopPropagation&&e.stopPropagation()),i&&h.selectedcells&&0<h.selectedcells.length&&9===e.keyCode&&e.shiftKey&&h.table&&h.table[0].rows&&0<h.table[0].rows.length&&(re(document.activeElement).ischildof(h.filterrow)||re(document.activeElement).ischildof(h.pager)||h.table[0].rows[0].cells[0].focus()),i}))},_hittestrow:function(e,t){if(null!=this.vScrollInstance&&null!=this.hScrollInstance){null==e&&(e=0);var i,s,r,e=this.vScrollInstance,l=this.hScrollInstance,e=e.value,l=("visible"!=this.vScrollBar.css("visibility")&&(e=0),l.value),e=("visible"!=this.hScrollBar.css("visibility")&&(l=0),"deferred"==this.scrollmode&&null!=this._newmax&&e>this._newmax&&(e=this._newmax),parseInt(e)+t);parseInt(l);if(null!=this.visiblerows)if(0!=this.visiblerows.length)return l=!1,0<=(e=this._findvisiblerow(e,this.visiblerows))&&(i=this.visiblerows[e],s=this.rowdetails&&i.rowdetails,r=!i.rowdetailshidden,s&&((s=this.visiblerows[e-1])==i&&(i=s,e--),r&&(s=re(this.hittestinfo[e].visualrow).position().top+parseInt(this.table.css("top")),r=re(this.hittestinfo[e].visualrow).height(),s<=t&&t<=s+r||(i=this.visiblerows[++e],l=!0)))),{index:e,row:i,details:l}}},getcellatposition:function(e,t){var i=this.that,s=this.showheader?this.columnsheader.height()+2:0,r=this._groupsheader()?this.groupsheader.height():0,l=(r=r+(this.showtoolbar?this.toolbarheight:0)+(this.showfilterbar?this.toolbarheight:0),this.host.coord()),o=e-(l=this.hasTransform?re.jqx.utilities.getOffset(this.host):l).left,a=t-s-l.top-r,t=this._hittestrow(o,a),s=t.row,l=t.index,n=this.table[0].rows[l];if(this.dataview&&0==this.dataview.records.length){for(var d=this.table[0].rows,h=0,c=0;c<d.length;c++){if(h<=a&&a<h+this.rowsheight){n=d[c];break}h+=this.rowsheight}s={boundindex:c}}if(null==n)return!0;for(var u=this.hScrollInstance.value,g=0,c=(this.groupable&&this.groups.length,0);c<n.cells.length;c++){var p=parseInt(re(this.columnsrow[0].cells[c]).css("left")),e=p-u;if(i.columns.records[c].pinned&&(e=p),!i.columns.records[c].hidden&&!i.columns.records[c].adaptivehidden)if(o<=e+re(this.columnsrow[0].cells[c]).width()&&e<=o){g=c;break}}return null!=s?(r=this._getcolumnat(g),{row:this.getboundindex(s),column:r.datafield,value:this.getcellvalue(this.getboundindex(s),r.datafield)}):null},_handlecardedit:function(e){var g=e.target.getAttribute("row"),p=document.createElement("div"),t=this.getrowdatabyid(g),i='<div class="jqx-grid-card-cell">';i+="<table>";for(var s=0;s<this.columns.records.length;s++){var r,l=this.columns.records[s];l.hidden&&void 0===l.__hidden||(r=t[l.datafield],""!=l.cellsformat&&re.jqx.dataFormat&&(re.jqx.dataFormat.isDate(r)?r=re.jqx.dataFormat.formatdate(r,l.cellsformat,this.gridlocalization):re.jqx.dataFormat.isNumber(r)&&(r=re.jqx.dataFormat.formatnumber(r,l.cellsformat,this.gridlocalization))),i=(i=(i+='<tr class="jqx-grid-card-table-row">')+'<td class="jqx-grid-card-cell-label"><div>'+l.text+"</div></td>")+'<td class="jqx-grid-card-cell-value"><div><input datafield="'+l.datafield+'" class="jqx-widget jqx-input" value="'+r+'"/></div></td></tr>')}p.innerHTML="<div>"+this.gridlocalization.udpaterowstring+" "+g+'</div><div style="overflow: hidden;">'+(i=(i=i+"</table>"+"</div>")+'<div class="jqx-card-edit-buttons"><input style="margin-right: 5px;" type="button" dataid="Save" value="Save" /><input dataid="Cancel" type="button" value="Cancel" /></td>'+"</div>")+"</div></div>";var e=p.querySelector('[dataid="Save"]'),o=p.querySelector('[dataid="Cancel"]'),m=(re(e).jqxButton({template:"primary",width:"40%",theme:this.theme}),re(o).jqxButton({width:"40%",theme:this.theme}),this);e.onclick=function(){for(var e=re(p).find("[datafield]"),t={},i=0;i<e.length;i++){for(var s=e[i].getAttribute("datafield"),r=e[i].value,l=0;l<m.dataview.source.datafields.length;l++){var o=m.dataview.source.datafields[l];if(o.name===s){"bool"!==o.type&&"boolean"!==o.type||(r=!0);var a=m._getcolumnbydatafield(o.name),o=o.type,n="date"===o||"time"===o;if("number"===o||"float"===o||"int"===o||"integer"===o||"string"===o&&(-1!=a.cellsformat.indexOf("p")||-1!=a.cellsformat.indexOf("c")||-1!=a.cellsformat.indexOf("n")||-1!=a.cellsformat.indexOf("f"))){if(""===r&&a.nullable)return"";r=r.indexOf&&-1<r.indexOf(m.gridlocalization.currencysymbol)?r.replace(m.gridlocalization.currencysymbol,""):r;var d=parseFloat(r);if(isNaN(d)){-1<(r=(r=function(e,t,i){var s=e;if(t==i)return e;for(var r=s.indexOf(t);-1!=r;)r=(s=s.replace(t,i)).indexOf(t);return s}(r,m.gridlocalization.thousandsseparator,"")).replace(m.gridlocalization.decimalseparator,".")).indexOf(m.gridlocalization.percentsymbol)&&(r=r.replace(m.gridlocalization.percentsymbol,""));for(var h="",c=0;c<r.length;c++){var u=r.substring(c,c+1);"-"===u&&(h+="-"),"."===u&&(h+="."),null!=u.match(/^[0-9]+$/)&&(h+=u)}r=(r=h).replace(/ /g,""),r=new Number(r),isNaN(r)&&(r="")}else r=d}if(n||"string"===o&&(-1!=a.cellsformat.indexOf("H")||-1!=a.cellsformat.indexOf("m")||-1!=a.cellsformat.indexOf("M")||-1!=a.cellsformat.indexOf("y")||-1!=a.cellsformat.indexOf("h")||-1!=a.cellsformat.indexOf("d"))){if(""===r&&a.nullable)return"";d=r;"Invalid Date"!=(r=re.jqx.dataFormat?re.jqx.dataFormat.tryparsedate(d,m.gridlocalization):r)&&null!=r||(r="")}}}t[s]=r}m.updaterow(g,t),re(p).jqxWindow("close")},o.onclick=function(){re(p).jqxWindow("close")},document.body.appendChild(p),re(p).jqxWindow({position:{left:this.host.offset().left,top:this.host.offset().top},modalOpacity:.01,width:this.element.offsetWidth,height:this.element.offsetHeight,isModal:!0,autoOpen:!1,resizable:!1,draggable:!1}),re(p).jqxWindow("open"),this.cardwindow&&re(this.cardwindow).remove(),this.cardwindow=p},_handlemousedown:function(e,l){if(null==e.target)return!0;if(l.disabled)return!0;if(re(e.target).ischildof(this.columnsheader)||re(e.target).ischildof(this.hScrollBar)||re(e.target).ischildof(this.vScrollBar))return!0;if(e.target===l.bottomRight[0])return!0;var t;if(l.cardview&&e.target&&0<=e.target.className.indexOf("jqx-icon-edit")&&l._handlecardedit(e),e.which?t=3==e.which:e.button&&(t=2==e.button),e.which?i=2==e.which:e.button&&(i=1==e.button),i)return!0;if(this.adaptiveview){if(re(e.target).ischildof(re(this.adaptiveview)))return!0;if(e.target==this.adaptiveview)return!0}if(this.showstatusbar){if(re(e.target).ischildof(this.statusbar))return!0;if(e.target==this.statusbar[0])return!0}if(this.showtoolbar){if(re(e.target).ischildof(this.toolbar))return!0;if(e.target==this.toolbar[0])return!0}if(this.showfilterbar){if(re(e.target).ischildof(this.filterbar))return!0;if(e.target==this.filterbar[0])return!0}if(this.pageable){if(re(e.target).ischildof(this.pager))return!0;if(e.target==this.pager[0])return!0}if(!this.columnsheader)return!0;if(!this.editcell&&this.pageable&&re(e.target).ischildof(this.pager))return!0;var i=this.showheader?this.columnsheader.height()+2:0,s=this._groupsheader()?this.groupsheader.height():0,r=(s=s+(this.showtoolbar?this.toolbarheight:0)+(this.showfilterbar?this.toolbarheight:0),this.host.coord()),o=(this.hasTransform&&(r=re.jqx.utilities.getOffset(this.host),a=this._getBodyOffset(),r.left-=a.left,r.top-=a.top),parseInt(e.pageX)),a=parseInt(e.pageY),n=(this.isTouchDevice()&&(d=l.getTouches(e)[0],o=parseInt(d.pageX),a=parseInt(d.pageY),1==l.touchmode&&null!=d._pageX&&(o=parseInt(d._pageX),a=parseInt(d._pageY))),o-r.left),d=a-i-r.top-s;if(this.pageable&&!this.autoheight&&this.gotopage&&this.pager.coord().top-r.top-s-i<d)return;a=this._hittestrow(n,d);if(a&&!a.details){var r=a.row,h=a.index,i=e.target.className,c=this.table[0].rows[h];if(null==c)return l.editable&&l.begincelledit&&l.editcell&&l.endcelledit(l.editcell.row,l.editcell.column,!1,!0),!0;l.mousecaptured=!0,l.mousecaptureposition={left:e.pageX,top:e.pageY-s,clickedrow:c};var d=this.hScrollInstance,u=d.value,g=(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(u=d.max-d.value),-1),s=this.groupable?this.groups.length:0;this.rtl&&("hidden"!=this.vScrollBar[0].style.visibility&&(u-=this.scrollbarsize+4),"hidden"==this.hScrollBar[0].style.visibility&&(u=-parseInt(this.content.css("left"))));for(var p=0;p<c.cells.length;p++){var o=(w=parseInt(re(this.columnsrow[0].cells[p]).css("left")))-u,m=(l.columns.records[p].pinned&&!l.rtl&&(o=w),this._getcolumnat(p));if(null==m||!m.hidden)if(null==m||!m.adaptivehidden)if(n<=o+re(this.columnsrow[0].cells[p]).width()&&o<=n){g=p,l.mousecaptureposition.clickedcell=p;break}}if(this.rtl&&this._haspinned)for(p=c.cells.length-1;0<=p&&l.columns.records[p].pinned;p--){var w,o=w=re(this.columnsrow[0].cells[p]).coord().left-this.host.coord().left,m=this._getcolumnat(p);if((null==m||!m.hidden)&&(null==m||!m.adaptivehidden)&&n<=o+re(this.columnsrow[0].cells[p]).width()&&o<=n){g=p,l.mousecaptureposition.clickedcell=p;break}}if(null!=r&&0<=g){this._raiseEvent(1,{rowindex:this.getboundindex(r),visibleindex:r.visibleindex,row:r,group:r.group,rightclick:t,originalEvent:e});m=this._getcolumnat(g),d=this.getcellvalue(this.getboundindex(r),m.datafield);if(this.editable&&this.editcell&&(this._currentEditableColumn=g,m.datafield==this.editcell.column&&this.getboundindex(r)==this.editcell.row&&(this.mousecaptured=!1)),"adaptive"===m.columntype){for(var f,v,b=document.createElement("div"),x=document.createElement("div"),y=document.createElement("a"),_=document.createElement("a"),q=document.createElement("div"),j=this.getrowdata(this.getboundindex(r)),S=(y.href="#",_.href="#",b.style.zIndex=99999,b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.width="100%",b.style.height="100%",b.className="jqx-adaptive-view jqx-widget-content",q.style.position="relative",q.style.top="100%",q.style.textAlign="center",q.style.marginTop="-40px",x.style.position="absolute",x.style.left="0px",x.style.top="0px",x.style.width="100%",x.style.height="100%",this.theme&&(b.className="jqx-widget-content jqx-widget-content-"+this.theme),document.createElement("span")),z=(S.className="jqx-icon-close",this.theme&&(S.className="jqx-icon-close jqx-widget-close-"+this.theme),S.style.zIndex=99,S.style.position="absolute",S.style.right="10px",S.style.top="10px",S.style.width="16px",S.style.height="16px",b.appendChild(x),b.appendChild(S),y.innerHTML=this.gridlocalization.okstring,_.innerHTML=this.gridlocalization.cancelstring,y.addEventListener("mousedown",function(e){for(var t={},i=l.adaptiveview.querySelectorAll("input"),s=0;s<i.length;s++){var r=l.escape_HTML(i[s].value);t[i[s].getAttribute("data-column")]=r}return l.updaterow(j.uid,t),b.parentNode.removeChild(b),l.adaptiveview=null,e.stopPropagation(),!1}),_.addEventListener("mousedown",function(){return b.parentNode.removeChild(b),l.adaptiveview=null,e.stopPropagation(),!1}),this.editable&&(q.appendChild(y),q.appendChild(_),b.appendChild(q)),"<table class='jqx-adaptive-table'><tr>"),h=0,p=0;p<this.columns.records.length;p++)"adaptive"!==(m=this.columns.records[p]).columntype&&"_checkboxcolumn"!==m.datafield&&(0<p&&h%2==0&&(z+="</tr><tr>"),f=j[m.displayfield],""!=m.cellsformat&&re.jqx.dataFormat&&(re.jqx.dataFormat.isDate(f)?f=re.jqx.dataFormat.formatdate(f,m.cellsformat,this.gridlocalization):re.jqx.dataFormat.isNumber(f)&&(f=re.jqx.dataFormat.formatnumber(f,m.cellsformat,this.gridlocalization))),v=this.filterable?'<div datafield="'+m.datafield+'" class="'+l.toTP("jqx-grid-column-filterbutton")+'" style="position: relative; top: 4px; display: inline-block; width: 16px; height:16px;"></div>':"",this.editable?m.editable?z+="<td>"+v+this.escape_HTML(m.text)+": <input data-column='"+m.displayfield+"' value='"+f+"'/></td>":z+="<td>"+v+this.escape_HTML(m.text)+": <input data-column='"+m.displayfield+"' readonly value='"+f+"'/></td>":z+="<td>"+v+this.escape_HTML(m.text)+": "+f+"</td>",h++);return x.innerHTML=z+="</tr></table>",S.addEventListener("mousedown",function(e){b.parentNode.removeChild(b),l.adaptiveview=null}),this.wrapper[0].appendChild(b),this.adaptiveview=b,void re(this.adaptiveview).find(".jqx-grid-column-filterbutton").on("click",function(){var e=this.getAttribute("datafield"),t=this.offsetTop;l.openmenu(e),setTimeout(function(){l.gridmenu.css("top",30+t),l.gridmenu.css("left",25),l.gridmenu.css("z-index",99999),l.gridmenu.parent().css("z-index",99999)},300)})}if("_commandColumn"===m.datafield&&(h=this.getboundindex(r),!this._commandColumnEdit&&e.target&&e.target.hasAttribute("edit")?(this._commandColumnEdit=r,this._commandColumnEditMode=this.editmode,this.editmode="selectedrow",this._rendervisualrows(),this.beginrowedit(h)):e.target&&e.target.hasAttribute("cancel")?(this.endrowedit(h,!0),this._cellscache=new Array,this._renderrows(this.virtualsizeinfo)):e.target&&e.target.hasAttribute("update")&&(this.endrowedit(h,!1),this._cellscache=new Array,this._renderrows(this.virtualsizeinfo))),this._raiseEvent(8,{rowindex:this.getboundindex(r),column:m?m.getcolumnproperties():null,row:r,visibleindex:r.visibleindex,datafield:m?m.datafield:null,columnindex:g,value:d,rightclick:t,originalEvent:e}),m.createwidget)return!0;if(this.isTouchDevice())if("checkbox"==m.columntype&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility","hidden"),this.editcell=this.getcell(h,m.datafield),!0}else if("button"==m.columntype&&this._overlayElement)return m.buttonclick&&m.buttonclick(c.cells[g].buttonrow,e),!0;y=!1;if(null!=this._lastmousedown&&this._mousedown-this._lastmousedown<300&&this._clickedrowindex==this.getboundindex(r)&&(this._raiseEvent(22,{rowindex:this.getboundindex(r),row:r,visibleindex:r.visibleindex,group:r.group,rightclick:t,originalEvent:e}),this._clickedcolumn==m.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(r),row:r,visibleindex:r.visibleindex,column:m?m.getcolumnproperties():null,datafield:m?m.datafield:null,columnindex:g,value:d,rightclick:t,originalEvent:e}),y=!0,this._clickedrowindex=-1,this._clickedcolumn=null,e.isPropagationStopped&&e.isPropagationStopped()))return!1;if(t)return!0;y||(this._clickedrowindex=this.getboundindex(r),this._clickedcolumn=m.datafield);_=re.jqx.utilities.getBrowser();if("msie"==_.browser&&parseInt(_.version)<=7&&(0==g&&this.rowdetails&&(i="jqx-grid-group-collapse"),0<s&&g<=s&&(i="jqx-grid-group-collapse")),-1!=i.indexOf("jqx-grid-group-expand")||-1!=i.indexOf("jqx-grid-group-collapse"))this.rtl?0<s&&g>c.cells.length-s-1&&this._togglegroupstate?this._togglegroupstate(r.bounddata,!0):g==c.cells.length-1-s&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(r.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):0<s&&g<s&&this._togglegroupstate?this._togglegroupstate(r.bounddata,!0):g==s&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(r.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0);else if(-1!=r.boundindex){var k,C,q=this.selectedrowindexes.slice(0),x=!1;if("none"!=l.selectionmode&&"checkbox"!=l.selectionmode&&this._selectrowwithmouse&&("multiplecellsadvanced"!=l.selectionmode&&"multiplecellsextended"!=l.selectionmode&&"multiplerowsextended"!=l.selectionmode&&"multiplerowsadvanced"!=l.selectionmode||e.ctrlKey||e.shiftKey||e.metaKey||(l.selectedrowindexes=new Array,l.selectedcells=new Array),k=!1,C=this.getboundindex(r),l._oldselectedrow!==C&&"none"!==l.selectionmode||(k=!0),-1==l.selectionmode.indexOf("cell")?("singlerow"!=l.selectionmode||l.selectedrowindex!=C&&"singlerow"==l.selectionmode)&&(this._applyrowselection(C,!0,!1,null,m.datafield),this._selectrowwithmouse(l,a,q,m.datafield,e.ctrlKey||e.metaKey,e.shiftKey)):null!=m.datafield&&(this._selectrowwithmouse(l,a,q,m.datafield,e.ctrlKey||e.metaKey,e.shiftKey),e.shiftKey||this._applycellselection(C,m.datafield,!0,!1)),l._oldselectedcell&&l._oldselectedcell.datafield==l.selectedcell.datafield&&l._oldselectedcell.rowindex==l.selectedcell.rowindex&&(x=!0),l._oldselectedcell=l.selectedcell,l._oldselectedrow=C),l.autosavestate&&l.savestate&&l.savestate(),l.editable&&l.begincelledit&&"programmatic"!=l.editmode)return e.isPropagationStopped&&e.isPropagationStopped()?!1:("selectedrow"==l.editmode?k&&!l.editcell?"checkbox"!==m.columntype&&(this._currentEditableColumn=g,l.beginrowedit(this.getboundindex(r))):l.editcell&&!k&&"none"!=l.selectionmode&&l.endrowedit(l.editcell.row):(C=this.getboundindex(r),S="click"==l.editmode||x&&"selectedcell"==l.editmode,(S=-1==l.selectionmode.indexOf("cell")&&"dblclick"!=l.editmode?!0:S)&&null!=r.boundindex&&m.editable&&(l.begincelledit(this.getboundindex(r),m.datafield,m.defaulteditorvalue,!1),-1!=l.selectionmode.indexOf("cell")&&l._applycellselection(C,m.datafield,!1,!1)),-1!=l.selectionmode.indexOf("cell")&&"selectedcell"==l.editmode&&!x&&l.editcell&&l.endcelledit(l.editcell.row,l.editcell.column,!1,!0),"dblclick"!=l.editmode||x||!l.editcell||l.editcell.row==C&&m.datafield==l.editcell.column||l.endcelledit(l.editcell.row,l.editcell.column,!1,!0)),!0)}}return!0}},_columnPropertyChanged:function(e,t,i,s){},_rowPropertyChanged:function(e,t,i,s){},_serializeObject:function(e){if(null==e)return"";var s="";return re.each(e,function(e){0<e&&(s+=", "),s+="[";var t,i=0;for(t in this)0<i&&(s+=", "),s+="{"+t+":"+this[t]+"}",i++;s+="]"}),s},isbindingcompleted:function(){return!this._loading},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&(e._updatesize(!0,!0),e._resizeWindow(),e.virtualmode&&!e._loading?e.vScrollInstance.setPosition(0):setTimeout(function(){e._renderrows(e.virtualsizeinfo)},100))},propertyChangedHandler:function(e,t,i,s){if(null!=this.isInitialized&&0!=this.isInitialized&&!(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length))switch(t=t.toLowerCase()){case"cardview":case"cardviewsize":case"cardviewcolumns":case"cardheight":"cardview"===t&&s&&(e._oldrowsheight=e.rowsheight),e.prerenderrequired,e.rowsheight=32,e.__rowsheight=e.rowsheight,e.virtualsizeinfo=null,e.cardview?(e.__rowsheight=e.rowsheight,e.rowsheight=e.cardheight):e._oldrowsheight&&(e.__rowsheight=e._oldrowsheight,e.rowsheight=e._oldrowsheight,delete e._oldrowsheight),e.virtualsizeinfo=null,e.rendergridcontent(!0,!1),e.refreshdata();break;case"compact":const l=e;l.compact?(l.element.setAttribute("compact",""),this.rowsheight=25,this.columnsheight=25,this.pagerheight=30,this.groupsheaderheight=25):(l.element.removeAttribute("compact",""),this.rowsheight=32,this.columnsheight=36,this.pagerheight=40,this.groupsheaderheight=34),e.virtualsizeinfo=null,e.rendergridcontent(!0,!1),e.refreshdata();break;case"editable":case"showcolumnheaderlines":case"showcolumnlines":case"showrowlines":e.refresh();break;case"everpresentrowactionsmode":i!=s&&(e._removeaddnewrow(),e.render());break;case"everpresentrowactions":e._updateaddnewrowui();break;case"showeverpresentrow":case"everpresentrowposition":case"everpresentrowheight":i!=s&&(e._removeaddnewrow(),e.render());break;case"rtl":e.content.css("left",""),e.columns=e._columns,e._filterrowcache=[],e.vScrollBar.jqxScrollBar({rtl:s}),e.hScrollBar.jqxScrollBar({rtl:s}),e._initpager&&e._initpager(),e._initgroupsheader&&e._initgroupsheader(),e.render();break;case"enablebrowserselection":e.showfilterrow||(e.showstatusbar||e.showtoolbar||e.host.addClass("jqx-disableselect"),e.content.addClass("jqx-disableselect")),e.enablebrowserselection&&(e.content.removeClass("jqx-disableselect"),e.host.removeClass("jqx-disableselect"));break;case"columnsheight":32==e.columnsheight&&!e.columngroups||e._measureElement("column"),e._render(!0,!0,!0,!1,!1);break;case"rowsheight":s!=i&&(31!=e.rowsheight&&e._measureElement("cell"),e.virtualsizeinfo=null,e.rendergridcontent(!0,!1),e.refresh());break;case"scrollMode":e.vScrollInstance.thumbStep=e.rowsheight;break;case"showdefaultloadelement":e._builddataloadelement();break;case"showfiltermenuitems":case"showsortmenuitems":case"showgroupmenuitems":case"filtermode":e._initmenu();break;case"touchmode":i!=s&&(e._removeHandlers(),e.touchDevice=null,e.vScrollBar.jqxScrollBar({touchMode:s}),e.hScrollBar.jqxScrollBar({touchMode:s}),e._updateTouchScrolling(),e._arrange(),e._updatecolumnwidths(),e._updatecellwidths(),e._addHandlers());break;case"autoshowcolumnsmenubutton":i!=s&&e._rendercolumnheaders();break;case"rendergridrows":i!=s&&e.updatebounddata();break;case"editmode":i!=s&&(e._removeHandlers(),e._addHandlers());break;case"source":e.updatebounddata(),e.virtualmode&&!e._loading&&(e.loadondemand=!0,e._renderrows(e.virtualsizeinfo));break;case"horizontalscrollbarstep":case"verticalscrollbarstep":case"horizontalscrollbarlargestep":case"verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep}),this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case"closeablegroups":e._initgroupsheader&&e._initgroupsheader();break;case"showgroupsheader":i!=s&&(e._arrange(),e._initgroupsheader&&e._initgroupsheader(),e._renderrows(e.virtualsizeinfo));break;case"theme":s!=i&&(re.jqx.utilities.setTheme(i,s,e.host),e.gridmenu&&e.gridmenu.jqxMenu({theme:s}),e.pageable&&e._updatepagertheme(),e.filterable&&e._updatefilterrowui(!0),e.showeverpresentrow&&e._updateaddnewrowui(!0),e._applyThemeSettings());break;case"showtoolbar":case"showfilterbar":case"toolbarheight":i!=s&&(e._arrange(),e.refresh());break;case"showstatusbar":i!=s&&(e.statusbar&&(s?e.statusbar.show():e.statusbar.hide()),e._arrange(),e.refresh());break;case"statusbarheight":i!=s&&(e._arrange(),e.refresh());break;case"filterable":case"showfilterrow":i!=s&&e.render();break;case"autoshowfiltericon":case"showfiltercolumnbackground":case"showpinnedcolumnbackground":case"showsortcolumnbackground":i!=s&&e.rendergridcontent();break;case"showrowdetailscolumn":i!=s&&e.render();break;case"scrollbarsize":i!=s&&(re.jqx.utilities.scrollBarSize=s,e._arrange());break;case"width":case"height":i!=s&&(e._updatesize(!0,!0),e._resizeWindow(),e.virtualmode&&!e._loading?e.vScrollInstance.setPosition(0):setTimeout(function(){e._renderrows(e.virtualsizeinfo)},100));break;case"altrows":case"altstart":case"altstep":i!=s&&e._renderrows(e.virtualsizeinfo);break;case"groupsheaderheight":i!=s&&(e._arrange(),e._initgroupsheader&&e._initgroupsheader());break;case"pagerheight":i!=s&&e._initpager();break;case"selectedrowindex":e.selectrow(s);break;case"selectionmode":i!=s&&("none"==s&&(e.selectedrowindexes=new Array,e.selectedcells=new Array,e.selectedrowindex=-1),e._renderrows(e.virtualsizeinfo),"checkbox"==s&&e._render(!1,!1,!0,!1,!1));break;case"showheader":s?e.columnsheader.css("display","block"):e.columnsheader.css("display","none");break;case"virtualmode":i!=s&&(e.dataview.virtualmode=e.virtualmode,e.dataview.refresh(!1),e._render(!1,!1,!1));break;case"columnsmenu":i!=s&&e.render();break;case"columngroups":e._render(!0,!0,!0,!1,!1);break;case"commandcolumn":case"columns":var r;e.columns&&e.columns.length>e.headerZIndex&&(e.headerZIndex=e.columns.length+100),e._serializeObject(e._cachedcolumns)!==e._serializeObject(s)?(r=!1,e.filterable&&i&&i.records&&re.each(i.records,function(){this.filter&&(r=!0),e.dataview.removefilter(this.displayfield,this.filter)}),e._columns=null,e._filterrowcache=[],e.render(),r&&e.applyfilters(),e._cachedcolumns=e.columns,e.removesort&&e.removesort()):e[t]=i;break;case"autoheight":i!=s&&e._render(!1,!1,!0);break;case"pagermode":case"pagerbuttonscount":i!=s&&e._initpager&&(e.pagershowrowscombo&&(e.pagershowrowscombo.jqxDropDownList("destroy"),e.pagershowrowscombo=null),e.pagerrightbutton&&(e.removeHandler(e.pagerrightbutton,"mousedown"),e.removeHandler(e.pagerrightbutton,"mouseup"),e.removeHandler(e.pagerrightbutton,"click"),e.pagerrightbutton.jqxButton("destroy"),e.pagerrightbutton=null),e.pagerleftbutton&&(e.removeHandler(e.pagerleftbutton,"mousedown"),e.removeHandler(e.pagerleftbutton,"mouseup"),e.removeHandler(e.pagerleftbutton,"click"),e.pagerleftbutton.jqxButton("destroy"),e.removeHandler(re(document),"mouseup.pagerbuttons"+e.element.id),e.pagerleftbutton=null),e.pagerdiv.remove(),e._initpager());break;case"pagesizeoptions":case"pageable":case"pagesize":if(i!=s){if(e._loading)throw new Error("jqxGrid: "+e.loadingerrormessage);if(!e.host.jqxDropDownList||!e.host.jqxListBox)return void e._testmodules();if(e._initpager){if("pageable"!=t&&"pagermode"!=t)if("string"==typeof s)throw new Error("Invalid Value for: "+t+". "+("pagesize"!=t?"The expected value type is: Array of Int values.":"The expected value type is: Int."));e.dataview.pageable=e.pageable,e.dataview.pagenum=0,e.dataview.pagesize=e._getpagesize(),e.virtualmode&&e.updatebounddata(),e.dataview.refresh(!0),e._initpager(),"pagesizeoptions"==t&&null!=s&&0<s.length&&(e.pagesize=parseInt(s[0]),e.dataview.pagesize=parseInt(s[0]),e.prerenderrequired=!0,e._requiresupdate=!0,e.dataview.pagenum=-1,e.gotopage(0))}e._render(!1,!1,!1)}break;case"groups":e._serializeObject(i)!==e._serializeObject(s)&&(e.dataview.groups=s,e._refreshdataview(),e._render(!0,!0,!0,!1));break;case"groupable":i!=s&&(e.dataview.groupable=e.groupable,e.dataview.pagenum=0,e.dataview.refresh(!1),e._render(!1,!1,!0));break;case"renderstatusbar":null!=s&&e.renderstatusbar(e.statusbar);break;case"rendertoolbar":null!=s&&e.rendertoolbar(e.toolbar);break;case"disabled":s?e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")):e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")),re.jqx.aria(e,"aria-disabled",e.disabled),e.pageable&&(e.pagerrightbutton&&(e.pagerrightbutton.jqxButton({disabled:s}),e.pagerleftbutton.jqxButton({disabled:s}),e.pagershowrowscombo.jqxDropDownList({disabled:s}),e.pagergotoinput.attr("disabled",s)),e.pagerfirstbutton&&(e.pagerfirstbutton.jqxButton({disabled:s}),e.pagerlastbutton.jqxButton({disabled:s}))),e.vScrollBar.jqxScrollBar({disabled:s}),e.hScrollBar.jqxScrollBar({disabled:s}),e.filterable&&e.showfilterrow&&e._updatefilterrowui(!0),e.showeverpresentrow&&e._updateaddnewrowui(!0)}}}),re.jqx.collection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginupdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this._raiseEvent=function(e){},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t,this.updating||this._raiseEvent({type:"replace",element:t})},this.isempty=function(e){return null==this.records[e]},this.initialize=function(e){this.records[(e=e<1?1:e)-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,this.updating||this._raiseEvent({type:"add",element:e}),!0)},this.insertAt=function(e,t){return null!=e&&(null!=t&&(0<=e&&(e<this.records.length?(this.records.splice(e,0,t),this.updating||this._raiseEvent({type:"insert",index:e,element:t}),!0):this.add(t))))},this.remove=function(e){if(null==e)return!1;var t=this.records.indexOf(e);return-1!=t&&(this.records.splice(t,1),this.updating||this._raiseEvent({type:"remove",element:e}),!0)},this.removeAt=function(e){return null!=e&&(!(e<0)&&(e<this.records.length&&(t=this.records[e],this.records.splice(e,1),this.updating||this._raiseEvent({type:"removeAt",index:e,element:t}),!0)));var t},this},re.jqx.dataview=function(){return(this.self=this).aggregates=!1,this.grid=null,this.uniqueId="id",this.records=[],this.rows=[],this.columns=[],this.groups=[],this.filters=new Array,this.updated=null,this.update=null,this.suspend=!1,this.pagesize=0,this.pagenum=0,this.totalrows=0,this.totalrecords=0,this.groupable=!0,this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this.virtualmode=!0,this._cachegrouppages=new Array,this.source=null,this.changedrecords=new Array,this.rowschangecallback=null,(this.that=this).destroy=function(){delete this.self,delete this.grid,delete this.uniqueId,delete this.records,delete this.rows,delete this.columns,delete this.groups,delete this.filters,delete this.updated,delete this.update,delete this.suspend,delete this.pagesize,delete this.pagenum,delete this.totalrows,delete this.totalrecords,delete this.groupable,delete this.loadedrecords,delete this.loadedrootgroups,delete this.loadedgroups,delete this.loadedgroupsByKey,delete this.virtualmode,delete this._cachegrouppages,delete this.source,delete this.changedrecords,delete this.rowschangecallback,delete this.that},this.suspendupdate=function(){this.suspend=!0},this.isupdating=function(){return this.suspend},this.resumeupdate=function(e){this.suspend=!1,this.refresh(e=null==e?!0:e)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=new Array},this.databind=function(d,e){var t=!!d._source,h=null,i=(this.grid&&(this.aggregates=this.grid.showgroupaggregates),t?d=(h=d)._source:h=new re.jqx.dataAdapter(d,{autoBind:!1}),function(e){if(e.totalrecords=h.totalrecords,e.virtualmode){var t={startindex:e.pagenum*e.pagesize,endindex:e.pagenum*e.pagesize+e.pagesize};if(null!=d.recordstartindex&&(t.startindex=parseInt(d.recordstartindex)),null!=d.recordendindex?t.endindex=parseInt(d.recordendindex):e.grid.pageable||(t.endindex=t.startindex+100,e.grid.autoheight&&(t.endindex=t.startindex+e.totalrecords)),d.recordendindex||(e.grid.pageable?t={startindex:e.pagenum*e.pagesize,endindex:e.pagenum*e.pagesize+e.pagesize}:(t.endindex=t.startindex+100,e.grid.autoheight&&(t.endindex=t.startindex+e.totalrecords))),t.data=h.records,e.grid.rendergridrows&&0<e.totalrecords){var i,s,r=0;if(d.records=e.grid.rendergridrows(t),d.records.length&&(r=d.records.length),d.records&&!d.records[t.startindex]&&(i=new Array,s=t.startindex,re.each(d.records,function(){i[s]=this,s++,r++}),d.records=i),0==r&&d.records&&re.each(d.records,function(){r++}),0<r&&r<t.endindex-t.startindex&&!e.grid.groupable)for(var l=d.records[0],o=0;o<t.endindex-t.startindex-r;o++){var a,n={};for(a in l)n[a]="";d.records.push&&d.records.push(n)}}d.records&&0!=e.totalrecords||(d.records=new Array),e.originaldata=d.records,e.records=d.records,e.cachedrecords=d.records}else e.originaldata=h.originaldata,e.records=h.records,e.recordids=h.recordids,e.cachedrecords=h.cachedrecords}),o=(t=this,h.recordids=[],h.records=new Array,h.cachedrecords=new Array,h.originaldata=new Array,h._options.virtualmode=t.virtualmode,h._options.totalrecords=t.totalrecords,h._options.originaldata=t.originaldata,h._options.recordids=t.recordids,h._options.cachedrecords=new Array,h._options.pagenum=t.pagenum,h._options.pageable=t.pageable,null!=d.type&&(h._options.type=d.type),null!=d.formatdata&&(h._options.formatData=d.formatdata),null!=d.contenttype&&(h._options.contentType=d.contenttype),null!=d.async&&(h._options.async=d.async),null!=d.updaterow&&(h._options.updaterow=d.updaterow),null!=d.addrow&&(h._options.addrow=d.addrow),null!=d.deleterow&&(h._options.deleterow=d.deleterow),0==t.pagesize&&(t.pagesize=10),h._options.pagesize=t.pagesize,this.source=d,void 0!==e&&0,this.that);switch(d.datatype){case"local":case"array":default:null==d.localdata&&(d.localdata=[]),null!=d.localdata&&(h.unbindBindingUpdate(o.grid.element.id),(!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind)&&h.dataBind(),(_=function(r){var l;if(null!=r&&""!=r&&(h._changedrecords[0]&&(l=new Array,re.each(h._changedrecords,function(e){var t=this.index,i=this.record;switch(o.grid._updateFromAdapter=!0,r){case"update":var s=o.grid.getrowid(t);return e==h._changedrecords.length-1?o.grid.updaterow(s,i):o.grid.updaterow(s,i,!1),void(o.grid._updateFromAdapter=!1);case"add":return o.grid.addrow(null,i),void(o.grid._updateFromAdapter=!1);case"remove":s=o.grid.getrowid(t);return void l.push(s)}}),0<l.length&&(o.grid.deleterow(l,!1),o.grid._updateFromAdapter=!1)),"update"==r))return;var e=o.totalrecords;i(o,r),null===d.localdata.notifier&&"observableArray"==d.localdata.name&&(d.localdata.notifier=function(e){if(!o._updating){o._updating=!0;var t=o.grid.getrowid(e.index);switch(e.type){case"add":var i=re.extend({},e.object[e.index]),s=h.getid(d.id,i,e.index);0===e.index?o.grid.addrow(s,i,"first"):o.grid.addrow(s,i);break;case"delete":o.grid.deleterow(t);break;case"update":e.path&&1<e.path.split(".").length?(s=e.path.split("."),o.grid.setcellvalue(e.index,s[s.length-1],e.newValue)):(i=re.extend({},e.object[e.index]),o.grid.updaterow(t,i))}o._updating=!1}}),"updateData"==r?(o.refresh(),o.grid._updateGridData()):(d.recordstartindex&&o.virtualmode?o.updateview(d.recordstartindex,d.recordstartindex+o.pagesize):o.refresh(),o.update(e!=o.totalrecords))})(),h.bindBindingUpdate(o.grid.element.id,_));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=d.localdata)return h.unbindBindingUpdate(o.grid.element.id),(!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind)&&h.dataBind(),(_=function(e){var t=o.totalrecords;i(o),"updateData"==e?(o.refresh(),o.grid._updateGridData()):(d.recordstartindex&&o.virtualmode?o.updateview(d.recordstartindex,d.recordstartindex+o.pagesize):o.refresh(),o.update(t!=o.totalrecords))})(),void h.bindBindingUpdate(o.grid.element.id,_);for(var s=[],r=0,l={},a=0;a<o.filters.length;a++){var n=o.filters[a].datafield,c=o.filters[a].filter;if(c.getfilters){if(!n)for(var u=0;u<o.grid.columns.length;u++)o.grid.columns[u].filter===c&&(n=o.grid.columns[u].datafield||o.grid.columns[u].dataField);var g=c.getfilters();l[n+"operator"]=c.operator;for(var p=0;p<g.length;p++){g[p].datafield=n;var m,w=g[p].value,f=("datefilter"==g[p].type?g[p].value&&g[p].value.toLocaleString&&(m=o.grid.getcolumn(g[p].datafield))&&m.cellsformat?(m=o.grid.source.formatDate(g[p].value,m.cellsformat,o.grid.gridlocalization),l["filtervalue"+r]=m||g[p].value.toLocaleString()):l["filtervalue"+r]=w.toString():(l["filtervalue"+r]=w.toString(),g[p].data&&(l["filterid"+r]=g[p].data.toString()),g[p].id&&(l["filterid"+r]=g[p].id.toString())),l["filtercondition"+r]=g[p].condition,l["filteroperator"+r]=g[p].operator,l["filterdatafield"+r]=n,{label:w.toString()}),v=(g[p].data&&(f.value=g[p].data.toString()),g[p].id?f.value=g[p].id.toString():f.value=w.toString(),f.condition=g[p].condition,f.operator=0==g[p].operator?"and":"or",f.field=n,f.type=g[p].type,!1);if(0<s.length)for(var b=0;b<s.length;b++){var x=s[b];if(x.field==n){x.filters.push(f),v=!0;break}}v||(s.push({field:n,filters:[]}),s[s.length-1].filters.push(f)),r++}}}l.filterGroups=s,l.filterscount=r,l.groupscount=o.groups.length;for(a=0;a<o.groups.length;a++)l["group"+a]=o.groups[a];null==d.recordstartindex&&(d.recordstartindex=0),null!=d.recordendindex&&0!=d.recordendindex||(o.grid.height&&-1==o.grid.height.toString().indexOf("%")?(d.recordendindex=parseInt(o.grid.height)/o.grid.rowsheight,d.recordendindex+=2):d.recordendindex=re(window).height()/o.grid.rowsheight,d.recordendindex=parseInt(d.recordendindex),o.pageable&&(d.recordendindex=o.pagesize)),o.pageable&&(d.recordstartindex=o.pagenum*o.pagesize,d.recordendindex=(o.pagenum+1)*o.pagesize),re.extend(l,{sortdatafield:o.sortfield,sortorder:o.sortfielddirection,pagenum:o.pagenum,pagesize:o.grid.pagesize,recordstartindex:d.recordstartindex,recordendindex:d.recordendindex});var y=h._options.data,_=(h._options.data?re.extend(h._options.data,l):(d.data&&re.extend(l,d.data),h._options.data=l),function(){function e(){var e=o.totalrecords;i(o),d.recordstartindex&&o.virtualmode?o.updateview(d.recordstartindex,d.recordstartindex+o.pagesize):o.refresh(),o.update(e!=o.totalrecords)}if(re.jqx.browser.msie&&re.jqx.browser.version<9)try{e()}catch(e){}else e()});h.unbindDownloadComplete(o.grid.element.id),h.bindDownloadComplete(o.grid.element.id,_),!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind?h.dataBind():o.grid.isInitialized||o.grid.autobind||_(),h._options.data=y}},this.getid=function(e,t,i){if(0<re(e,t).length)return re(e,t).text();if(e&&0<e.toString().length){t=re(t).attr(e);if(null!=t&&0<t.toString().length)return t}return i},this.getvaluebytype=function(e,t){var i,s=e;return"date"==t.type?null==(e=("NaN"==(i=new Date(e)).toString()||"Invalid Date"==i.toString())&&re.jqx.dataFormat?re.jqx.dataFormat.tryparsedate(e):i)&&(e=s):"float"==t.type?(e=parseFloat(e),isNaN(e)&&(e=s)):"int"==t.type?(e=parseInt(e),isNaN(e)&&(e=s)):"bool"==t.type&&(null!=e&&("false"==e.toLowerCase()?e=!1:"true"==e.toLowerCase()&&(e=!0)),e=1==e||0!=e&&""),e},this.setpaging=function(e){null!=e.pageSize&&(this.pagesize=e.pageSize),null!=e.pageNum&&(this.pagenum=Math.min(e.pageNum,Math.ceil(this.totalrows/this.pagesize))),this.refresh()},this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}},this._clearcaches=function(){this.sortcache={},this.sortdata=null,this.changedrecords=new Array,this.records=new Array,this.rows=new Array,this.cacheddata=new Array,this.originaldata=new Array,this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid=new Array,this.cachedrecords=new Array,this.recordids=new Array},this.addfilter=function(e,t){for(var i=-1,s=0;s<this.filters.length;s++)if(this.filters[s].datafield==e){i=s;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removefilter=function(e){for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.getItemFromIndex=function(e){return this.records[e]},this.updaterow=function(e,t,i){if(!(this.filters&&0<this.filters.length&&!this.virtualmode)&&null!=t&&null!=e)return t.uid=e,t[this.source.id]||(t[this.source.id]=t.uid),r=this.recordsbyid["id"+e],-1!=(l=this.records.indexOf(r))&&(this.records[l]=t,this.cachedrecords&&(this.cachedrecords[l]=t),1!=i&&null!=i||this.refresh(),this.changedrecords[t.uid]={Type:"Update",OldData:r,Data:t},!0);if(this.filters&&0<this.filters.length){for(var s=this.cachedrecords,r=null,l=-1,o=0;o<s.length;o++)if(s[o].uid==e){r=s[o],l=o;break}if(r){var a,n=this.that;for(a in t)n.cachedrecords[l][a]=t[a];return 1!=i&&null!=i||this.refresh(),!0}}return!1},this.addrow=function(e,t,i,s){if(null==t)return!1;if(re.isEmptyObject(t)&&this.source&&this.source.datafields&&re.each(this.source.datafields,function(){var e="";"number"==this.type&&(e=null),"date"==this.type&&(e=null),"bool"!=this.type&&"boolean"!=this.type||(e=!1),t[this.name]=e}),!e||this.recordsbyid["id"+e]){t.uid=this.getid(this.source.id,t,this.totalrecords);for(var r=this.recordsbyid["id"+t.uid];null!=r;){var l=Math.floor(1e4*Math.random()).toString();t.uid=l,r=this.recordsbyid["id"+l]}}else t.uid=e;return t[this.source.id]||null!=this.source.id&&(t[this.source.id]=t.uid),t.boundindex=this.records.length,"last"==i?this.records.push(t):"number"==typeof i&&isFinite(i)?this.records.splice(i,0,t):this.records.splice(0,0,t),this.filters&&0<this.filters.length&&("last"==i?this.cachedrecords.push(t):"number"==typeof i&&isFinite(i)?this.cachedrecords.splice(i,0,t):this.cachedrecords.splice(0,0,t)),this.totalrecords++,this.virtualmode&&(this.source.totalrecords=this.totalrecords),1!=s&&null!=s||this.refresh(),this.changedrecords[t.uid]={Type:"New",Data:t},!0},this.deleterow=function(e,t){if(null==e)return!1;var i=this.filters&&0<this.filters.length;if(this.recordsbyid["id"+e]&&!i){var s=this.recordsbyid["id"+e],r=this.records.indexOf(s);if(this.grid&&this.grid.sortable&&"many"==this.grid.sortmode)for(var l=0;l<this.records.length;l++)if(this.records[l].boundindex===s.boundindex){r=l;break}return this.changedrecords[e]={Type:"Delete",Data:this.records[r]},this.records.splice(r,1),this.totalrecords--,this.virtualmode&&(this.source.totalrecords=this.totalrecords),1!=t&&null!=t||this.refresh(),!0}if(this.filters&&0<this.filters.length){for(var o=this.cachedrecords,s=null,r=-1,l=0;l<o.length;l++)if(o[l].uid==e){s=o[l],r=l;break}if(s)return this.cachedrecords.splice(r,1),1!=t&&null!=t||(this.totalrecords=0,this.records=this.cachedrecords,this.refresh()),!0}return!1},this.reload=function(e,t,i,s,r,l,o){var a,n=this.that,d=new Array,h=t.length,c=0;if(this.columns=[],this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid={},0==this.totalrecords&&(Object.size=function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},e=Object.size(e),this.totalrecords=e,re.each(this.records,function(e){var i=0;return re.each(this,function(e,t){n.columns[i++]=e}),!1})),this.virtualmode){if(this.pageable)return void this.updateview();l=0;if(!this.groupable)return void this.updateview();o=this.totalrecords}else l=0,o=this.totalrecords;return this.groupable&&0<this.groups.length&&this.loadgrouprecords?a=this.loadgrouprecords(0,a=l,o,i,0,s,t,h,d):c=this.loadflatrecords(l,o,i,0,s,t,h,d),0<h&&t.splice(0,+h),0<this.groups.length&&this.groupable?this.totalrows=a:this.totalrows=c,d},this.loadflatrecords=function(e,t,i,s,r,l,o,a){for(var n,d=this.that,h=e,c=e,u=(t=Math.min(t,this.totalrecords),null!=this.sortdata),g=(!this.source.id||"local"!=this.source.datatype&&"array"!=this.source.datatype&&this.source.datatype,u?this.sortdata:this.records),p=e;p<t;p++){var m,w={};u?(m=(w=re.extend({},g[p].value))[d.uniqueId],w.boundindex=g[p].index,null==w.uid&&(w.uid=d.getid(d.source.id,w,w.boundindex)),d.recordsbyid["id"+w.uid]=g[p].value,(d.loadedrecords[h]=w).uniqueid=d.generatekey(),d.bounditems[w.boundindex]=w):(m=(w=new Object(g[p]))[d.uniqueId],w.boundindex=h,null==(d.loadedrecords[h]=w).uid&&(w.uid=d.getid(d.source.id,w,h)),d.recordsbyid["id"+w.uid]=g[p],w.uniqueid=d.generatekey(),d.bounditems[this.bounditems.length]=w),(o<=s||m!=l[s][d.uniqueId]||r&&r[m])&&(a[a.length]=s),l[s]=w,s++,w.visibleindex=c,c++,h++}return d.grid.summaryrows&&(n=h,re.each(d.grid.summaryrows,function(){var e=re.extend({},this);e.boundindex=t++,(d.loadedrecords[n]=e).uniqueid=d.generatekey(),d.bounditems[d.bounditems.length]=e,l[s]=e,s++,e.visibleindex=c,c++,n++})),c},this.updateview=function(e,t){var i=this.that,s=this.pagesize*this.pagenum,r=0,l=new Array,o=this.filters,a=this.updated,n=l.length;if(this.pageable){if(this.virtualmode)if(this.groupable&&0!=this.groups.length){if(this.groupable&&0<this.groups.length&&this.loadgrouprecords){if(null!=this._cachegrouppages[this.pagenum+"_"+this.pagesize])return this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize],void(this.totalrows=this.rows.length);var d=this.pagesize*(1+this.pagenum);return d>this.totalrecords&&(d=this.totalrecords),this.loadgrouprecords(0,this.pagesize*this.pagenum,d,o,r,a,l,n,[]),this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows,void(this.totalrows=this.rows.length)}}else this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),o,r,a,l,n,[]),this.totalrows=l.length}else if(this.virtualmode&&(!this.groupable||0==this.groups.length)){d=this.pagesize;d=0==d?Math.min(100,this.totalrecords):d,this.pagenum;if(this.loadedrecords.length,null!=e&&null!=t?this.loadflatrecords(e,t,o,r,a,l,n,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),o,r,a,l,n,[]),this.totalrows=this.loadedrecords.length,(this.rows=l).length>=d)return}if(this.groupable&&this.pageable&&0<this.groups.length&&this._updategroupsinpage)l=this._updategroupsinpage(i,o,s,r,n,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(var h=this.pagesize*this.pagenum;h<this.pagesize*(1+this.pagenum);h++)null!=(c=h<this.loadedrecords.length?this.loadedrecords[h]:null)&&((!this.pagesize||s>=this.pagesize*this.pagenum&&s<=this.pagesize*(this.pagenum+1))&&(l[r]=c,r++),s++);if((0==l.length||l.length<this.pagesize)&&!this.pageable&&this.virtualmode)for(var c,r=l.length,u=l.length,h=this.pagesize*this.pagenum;h<this.pagesize*(1+this.pagenum)-u;h++)(c={}).boundindex=h+u,c.visibleindex=h+u,c.uniqueid=i.generatekey(),c.empty=!0,i.bounditems[h+u]=c,l[r]=c,r++;this.rows=l},this.generatekey=function(){function e(){return 16*(1+Math.random())|0}return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)},this.refresh=function(e){if(!this.suspend){null==e&&(e=!0);var t=this.rows.length,i=this.totalrows;if(0<this.filters.length&&!this.virtualmode){var s="",r=this.cachedrecords.length,l=new Array,o=(this.totalrecords=0,this.cachedrecords),a=(this._dataIndexToBoundIndex=new Array,this.filters.length);if(null!=this.source&&null!=this.source.filter&&null!=this.source.localdata){var n=this.source.filter(this.filters,o,r);null==n&&(n=new Array);for(var d=0;d<r;d++){var h=o[d];(c=0<=n.indexOf(h))?(l[l.length]=re.extend({dataindex:d},h),this._dataIndexToBoundIndex[d]={boundindex:l.length-1}):this._dataIndexToBoundIndex[d]=null}this.records=l}else if(null==this.source.filter||null==this.source.filter){for(d=0;d<r;d++){for(var h=o[d],c=void 0,u=0;u<a;u++){var s=this.filters[u].filter,g=h[this.filters[u].datafield],p=!s||!s.evaluate||s.evaluate(g);!this.grid.filter||void 0!==(g=this.grid.filter(g,h,this.filters[u].datafield,s,p))&&(p=g),c=null==c?p:"or"==s.operator?c||p:c&&p}c?(l[l.length]=re.extend({dataindex:d},h),this._dataIndexToBoundIndex[d]={boundindex:l.length-1}):this._dataIndexToBoundIndex[d]=null}this.records=l}if(this.sortdata){if(!this.grid||"many"===this.grid.sortmode){for(var m=this.grid.getsortcolumns(),w=0;w<m.length;w++){var f=(b=m[w]).dataField;this.grid.sortby(f,b.ascending,null)}return}var v=this.sortfield;if(this.sortcache[v])return this.sortdata=null,x=this.sortcache[v].direction,this.sortcache[v]=null,void this.sortby(this.sortfield,x)}}else if(0==this.filters.length&&!this.virtualmode&&this.cachedrecords){this.totalrecords=0;o=this.cachedrecords;if(this.records=o,this.sortdata){if(!this.grid||"many"===this.grid.sortmode){for(m=this.grid.getsortcolumns(),w=0;w<m.length;w++){var b,f=(b=m[w]).dataField;this.grid.sortby(f,b.ascending,null)}return}v=this.sortfield;if(this.sortcache[v])return this.sortdata=null,x=this.sortcache[v].direction,this.sortcache[v]=null,void this.sortby(this.sortfield,x)}}var x,v=this.reload(this.records,this.rows,this.filter,this.updated,e);(this.updated=null)!=this.rowschangecallback&&(x=this.rows,i!=this.totalrows&&this.rowschangecallback({type:"PagingChanged",data:this.getpagingdetails()}),t!=x.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:t,current:x.length}}),(0<v.length||t!=x.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:t,current:x.length,diff:v}}))}},this}}(jqxBaseFramework);